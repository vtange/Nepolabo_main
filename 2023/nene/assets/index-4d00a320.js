function i1(t,i){for(var n=0;n<i.length;n++){const r=i[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function n1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rv={exports:{}},nu={},ov={exports:{}},yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uo=Symbol.for("react.element"),s1=Symbol.for("react.portal"),r1=Symbol.for("react.fragment"),o1=Symbol.for("react.strict_mode"),a1=Symbol.for("react.profiler"),l1=Symbol.for("react.provider"),u1=Symbol.for("react.context"),c1=Symbol.for("react.forward_ref"),h1=Symbol.for("react.suspense"),d1=Symbol.for("react.memo"),f1=Symbol.for("react.lazy"),yg=Symbol.iterator;function p1(t){return t===null||typeof t!="object"?null:(t=yg&&t[yg]||t["@@iterator"],typeof t=="function"?t:null)}var av={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lv=Object.assign,uv={};function wr(t,i,n){this.props=t,this.context=i,this.refs=uv,this.updater=n||av}wr.prototype.isReactComponent={};wr.prototype.setState=function(t,i){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,i,"setState")};wr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cv(){}cv.prototype=wr.prototype;function Id(t,i,n){this.props=t,this.context=i,this.refs=uv,this.updater=n||av}var Rd=Id.prototype=new cv;Rd.constructor=Id;lv(Rd,wr.prototype);Rd.isPureReactComponent=!0;var xg=Array.isArray,hv=Object.prototype.hasOwnProperty,Dd={current:null},dv={key:!0,ref:!0,__self:!0,__source:!0};function fv(t,i,n){var r,a={},l=null,c=null;if(i!=null)for(r in i.ref!==void 0&&(c=i.ref),i.key!==void 0&&(l=""+i.key),i)hv.call(i,r)&&!dv.hasOwnProperty(r)&&(a[r]=i[r]);var f=arguments.length-2;if(f===1)a.children=n;else if(1<f){for(var p=Array(f),m=0;m<f;m++)p[m]=arguments[m+2];a.children=p}if(t&&t.defaultProps)for(r in f=t.defaultProps,f)a[r]===void 0&&(a[r]=f[r]);return{$$typeof:Uo,type:t,key:l,ref:c,props:a,_owner:Dd.current}}function g1(t,i){return{$$typeof:Uo,type:t.type,key:i,ref:t.ref,props:t.props,_owner:t._owner}}function Md(t){return typeof t=="object"&&t!==null&&t.$$typeof===Uo}function m1(t){var i={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return i[n]})}var wg=/\/+/g;function Tc(t,i){return typeof t=="object"&&t!==null&&t.key!=null?m1(""+t.key):i.toString(36)}function tl(t,i,n,r,a){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var c=!1;if(t===null)c=!0;else switch(l){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case Uo:case s1:c=!0}}if(c)return c=t,a=a(c),t=r===""?"."+Tc(c,0):r,xg(a)?(n="",t!=null&&(n=t.replace(wg,"$&/")+"/"),tl(a,i,n,"",function(m){return m})):a!=null&&(Md(a)&&(a=g1(a,n+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(wg,"$&/")+"/")+t)),i.push(a)),1;if(c=0,r=r===""?".":r+":",xg(t))for(var f=0;f<t.length;f++){l=t[f];var p=r+Tc(l,f);c+=tl(l,i,n,p,a)}else if(p=p1(t),typeof p=="function")for(t=p.call(t),f=0;!(l=t.next()).done;)l=l.value,p=r+Tc(l,f++),c+=tl(l,i,n,p,a);else if(l==="object")throw i=String(t),Error("Objects are not valid as a React child (found: "+(i==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return c}function Ra(t,i,n){if(t==null)return t;var r=[],a=0;return tl(t,r,"","",function(l){return i.call(n,l,a++)}),r}function _1(t){if(t._status===-1){var i=t._result;i=i(),i.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=i)}if(t._status===1)return t._result.default;throw t._result}var Ee={current:null},el={transition:null},v1={ReactCurrentDispatcher:Ee,ReactCurrentBatchConfig:el,ReactCurrentOwner:Dd};yt.Children={map:Ra,forEach:function(t,i,n){Ra(t,function(){i.apply(this,arguments)},n)},count:function(t){var i=0;return Ra(t,function(){i++}),i},toArray:function(t){return Ra(t,function(i){return i})||[]},only:function(t){if(!Md(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};yt.Component=wr;yt.Fragment=r1;yt.Profiler=a1;yt.PureComponent=Id;yt.StrictMode=o1;yt.Suspense=h1;yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v1;yt.cloneElement=function(t,i,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lv({},t.props),a=t.key,l=t.ref,c=t._owner;if(i!=null){if(i.ref!==void 0&&(l=i.ref,c=Dd.current),i.key!==void 0&&(a=""+i.key),t.type&&t.type.defaultProps)var f=t.type.defaultProps;for(p in i)hv.call(i,p)&&!dv.hasOwnProperty(p)&&(r[p]=i[p]===void 0&&f!==void 0?f[p]:i[p])}var p=arguments.length-2;if(p===1)r.children=n;else if(1<p){f=Array(p);for(var m=0;m<p;m++)f[m]=arguments[m+2];r.children=f}return{$$typeof:Uo,type:t.type,key:a,ref:l,props:r,_owner:c}};yt.createContext=function(t){return t={$$typeof:u1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:l1,_context:t},t.Consumer=t};yt.createElement=fv;yt.createFactory=function(t){var i=fv.bind(null,t);return i.type=t,i};yt.createRef=function(){return{current:null}};yt.forwardRef=function(t){return{$$typeof:c1,render:t}};yt.isValidElement=Md;yt.lazy=function(t){return{$$typeof:f1,_payload:{_status:-1,_result:t},_init:_1}};yt.memo=function(t,i){return{$$typeof:d1,type:t,compare:i===void 0?null:i}};yt.startTransition=function(t){var i=el.transition;el.transition={};try{t()}finally{el.transition=i}};yt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};yt.useCallback=function(t,i){return Ee.current.useCallback(t,i)};yt.useContext=function(t){return Ee.current.useContext(t)};yt.useDebugValue=function(){};yt.useDeferredValue=function(t){return Ee.current.useDeferredValue(t)};yt.useEffect=function(t,i){return Ee.current.useEffect(t,i)};yt.useId=function(){return Ee.current.useId()};yt.useImperativeHandle=function(t,i,n){return Ee.current.useImperativeHandle(t,i,n)};yt.useInsertionEffect=function(t,i){return Ee.current.useInsertionEffect(t,i)};yt.useLayoutEffect=function(t,i){return Ee.current.useLayoutEffect(t,i)};yt.useMemo=function(t,i){return Ee.current.useMemo(t,i)};yt.useReducer=function(t,i,n){return Ee.current.useReducer(t,i,n)};yt.useRef=function(t){return Ee.current.useRef(t)};yt.useState=function(t){return Ee.current.useState(t)};yt.useSyncExternalStore=function(t,i,n){return Ee.current.useSyncExternalStore(t,i,n)};yt.useTransition=function(){return Ee.current.useTransition()};yt.version="18.2.0";ov.exports=yt;var O=ov.exports;const su=n1(O),y1=i1({__proto__:null,default:su},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x1=O,w1=Symbol.for("react.element"),C1=Symbol.for("react.fragment"),b1=Object.prototype.hasOwnProperty,S1=x1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,P1={key:!0,ref:!0,__self:!0,__source:!0};function pv(t,i,n){var r,a={},l=null,c=null;n!==void 0&&(l=""+n),i.key!==void 0&&(l=""+i.key),i.ref!==void 0&&(c=i.ref);for(r in i)b1.call(i,r)&&!P1.hasOwnProperty(r)&&(a[r]=i[r]);if(t&&t.defaultProps)for(r in i=t.defaultProps,i)a[r]===void 0&&(a[r]=i[r]);return{$$typeof:w1,type:t,key:l,ref:c,props:a,_owner:S1.current}}nu.Fragment=C1;nu.jsx=pv;nu.jsxs=pv;rv.exports=nu;var bt=rv.exports,fh={},gv={exports:{}},Ye={},mv={exports:{}},_v={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function i(K,ot){var ut=K.length;K.push(ot);t:for(;0<ut;){var at=ut-1>>>1,gt=K[at];if(0<a(gt,ot))K[at]=ot,K[ut]=gt,ut=at;else break t}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ot=K[0],ut=K.pop();if(ut!==ot){K[0]=ut;t:for(var at=0,gt=K.length,Et=gt>>>1;at<Et;){var Qe=2*(at+1)-1,Ri=K[Qe],ee=Qe+1,ft=K[ee];if(0>a(Ri,ut))ee<gt&&0>a(ft,Ri)?(K[at]=ft,K[ee]=ut,at=ee):(K[at]=Ri,K[Qe]=ut,at=Qe);else if(ee<gt&&0>a(ft,ut))K[at]=ft,K[ee]=ut,at=ee;else break t}}return ot}function a(K,ot){var ut=K.sortIndex-ot.sortIndex;return ut!==0?ut:K.id-ot.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();t.unstable_now=function(){return c.now()-f}}var p=[],m=[],v=1,w=null,x=3,S=!1,A=!1,M=!1,L=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(K){for(var ot=n(m);ot!==null;){if(ot.callback===null)r(m);else if(ot.startTime<=K)r(m),ot.sortIndex=ot.expirationTime,i(p,ot);else break;ot=n(m)}}function C(K){if(M=!1,k(K),!A)if(n(p)!==null)A=!0,St(R);else{var ot=n(m);ot!==null&&xt(C,ot.startTime-K)}}function R(K,ot){A=!1,M&&(M=!1,T($),$=-1),S=!0;var ut=x;try{for(k(ot),w=n(p);w!==null&&(!(w.expirationTime>ot)||K&&!rt());){var at=w.callback;if(typeof at=="function"){w.callback=null,x=w.priorityLevel;var gt=at(w.expirationTime<=ot);ot=t.unstable_now(),typeof gt=="function"?w.callback=gt:w===n(p)&&r(p),k(ot)}else r(p);w=n(p)}if(w!==null)var Et=!0;else{var Qe=n(m);Qe!==null&&xt(C,Qe.startTime-ot),Et=!1}return Et}finally{w=null,x=ut,S=!1}}var H=!1,N=null,$=-1,Z=5,B=-1;function rt(){return!(t.unstable_now()-B<Z)}function st(){if(N!==null){var K=t.unstable_now();B=K;var ot=!0;try{ot=N(!0,K)}finally{ot?Q():(H=!1,N=null)}}else H=!1}var Q;if(typeof P=="function")Q=function(){P(st)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,_t=ct.port2;ct.port1.onmessage=st,Q=function(){_t.postMessage(null)}}else Q=function(){L(st,0)};function St(K){N=K,H||(H=!0,Q())}function xt(K,ot){$=L(function(){K(t.unstable_now())},ot)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){A||S||(A=!0,St(R))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(p)},t.unstable_next=function(K){switch(x){case 1:case 2:case 3:var ot=3;break;default:ot=x}var ut=x;x=ot;try{return K()}finally{x=ut}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,ot){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ut=x;x=K;try{return ot()}finally{x=ut}},t.unstable_scheduleCallback=function(K,ot,ut){var at=t.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?at+ut:at):ut=at,K){case 1:var gt=-1;break;case 2:gt=250;break;case 5:gt=1073741823;break;case 4:gt=1e4;break;default:gt=5e3}return gt=ut+gt,K={id:v++,callback:ot,priorityLevel:K,startTime:ut,expirationTime:gt,sortIndex:-1},ut>at?(K.sortIndex=ut,i(m,K),n(p)===null&&K===n(m)&&(M?(T($),$=-1):M=!0,xt(C,ut-at))):(K.sortIndex=gt,i(p,K),A||S||(A=!0,St(R))),K},t.unstable_shouldYield=rt,t.unstable_wrapCallback=function(K){var ot=x;return function(){var ut=x;x=ot;try{return K.apply(this,arguments)}finally{x=ut}}}})(_v);mv.exports=_v;var E1=mv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vv=O,Ge=E1;function G(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)i+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yv=new Set,vo={};function ys(t,i){fr(t,i),fr(t+"Capture",i)}function fr(t,i){for(vo[t]=i,t=0;t<i.length;t++)yv.add(i[t])}var Yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ph=Object.prototype.hasOwnProperty,T1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cg={},bg={};function A1(t){return ph.call(bg,t)?!0:ph.call(Cg,t)?!1:T1.test(t)?bg[t]=!0:(Cg[t]=!0,!1)}function k1(t,i,n,r){if(n!==null&&n.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function I1(t,i,n,r){if(i===null||typeof i>"u"||k1(t,i,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function Te(t,i,n,r,a,l,c){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=i,this.sanitizeURL=l,this.removeEmptyString=c}var he={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){he[t]=new Te(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var i=t[0];he[i]=new Te(i,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){he[t]=new Te(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){he[t]=new Te(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){he[t]=new Te(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){he[t]=new Te(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){he[t]=new Te(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){he[t]=new Te(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){he[t]=new Te(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fd=/[\-:]([a-z])/g;function Ld(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var i=t.replace(Fd,Ld);he[i]=new Te(i,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var i=t.replace(Fd,Ld);he[i]=new Te(i,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var i=t.replace(Fd,Ld);he[i]=new Te(i,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){he[t]=new Te(t,1,!1,t.toLowerCase(),null,!1,!1)});he.xlinkHref=new Te("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){he[t]=new Te(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bd(t,i,n,r){var a=he.hasOwnProperty(i)?he[i]:null;(a!==null?a.type!==0:r||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(I1(i,n,a,r)&&(n=null),r||a===null?A1(i)&&(n===null?t.removeAttribute(i):t.setAttribute(i,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(i=a.attributeName,r=a.attributeNamespace,n===null?t.removeAttribute(i):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?t.setAttributeNS(r,i,n):t.setAttribute(i,n))))}var tn=vv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Da=Symbol.for("react.element"),Hs=Symbol.for("react.portal"),$s=Symbol.for("react.fragment"),Od=Symbol.for("react.strict_mode"),gh=Symbol.for("react.profiler"),xv=Symbol.for("react.provider"),wv=Symbol.for("react.context"),Nd=Symbol.for("react.forward_ref"),mh=Symbol.for("react.suspense"),_h=Symbol.for("react.suspense_list"),zd=Symbol.for("react.memo"),pn=Symbol.for("react.lazy"),Cv=Symbol.for("react.offscreen"),Sg=Symbol.iterator;function jr(t){return t===null||typeof t!="object"?null:(t=Sg&&t[Sg]||t["@@iterator"],typeof t=="function"?t:null)}var jt=Object.assign,Ac;function Jr(t){if(Ac===void 0)try{throw Error()}catch(n){var i=n.stack.trim().match(/\n( *(at )?)/);Ac=i&&i[1]||""}return`
`+Ac+t}var kc=!1;function Ic(t,i){if(!t||kc)return"";kc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(m){var r=m}Reflect.construct(t,[],i)}else{try{i.call()}catch(m){r=m}t.call(i.prototype)}else{try{throw Error()}catch(m){r=m}t()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var a=m.stack.split(`
`),l=r.stack.split(`
`),c=a.length-1,f=l.length-1;1<=c&&0<=f&&a[c]!==l[f];)f--;for(;1<=c&&0<=f;c--,f--)if(a[c]!==l[f]){if(c!==1||f!==1)do if(c--,f--,0>f||a[c]!==l[f]){var p=`
`+a[c].replace(" at new "," at ");return t.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",t.displayName)),p}while(1<=c&&0<=f);break}}}finally{kc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Jr(t):""}function R1(t){switch(t.tag){case 5:return Jr(t.type);case 16:return Jr("Lazy");case 13:return Jr("Suspense");case 19:return Jr("SuspenseList");case 0:case 2:case 15:return t=Ic(t.type,!1),t;case 11:return t=Ic(t.type.render,!1),t;case 1:return t=Ic(t.type,!0),t;default:return""}}function vh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $s:return"Fragment";case Hs:return"Portal";case gh:return"Profiler";case Od:return"StrictMode";case mh:return"Suspense";case _h:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wv:return(t.displayName||"Context")+".Consumer";case xv:return(t._context.displayName||"Context")+".Provider";case Nd:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zd:return i=t.displayName||null,i!==null?i:vh(t.type)||"Memo";case pn:i=t._payload,t=t._init;try{return vh(t(i))}catch{}}return null}function D1(t){var i=t.type;switch(t.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=i.render,t=t.displayName||t.name||"",i.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vh(i);case 8:return i===Od?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Mn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bv(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function M1(t){var i=bv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),r=""+t[i];if(!t.hasOwnProperty(i)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return a.call(this)},set:function(c){r=""+c,l.call(this,c)}}),Object.defineProperty(t,i,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(c){r=""+c},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Ma(t){t._valueTracker||(t._valueTracker=M1(t))}function Sv(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var n=i.getValue(),r="";return t&&(r=bv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(i.setValue(t),!0):!1}function _l(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yh(t,i){var n=i.checked;return jt({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Pg(t,i){var n=i.defaultValue==null?"":i.defaultValue,r=i.checked!=null?i.checked:i.defaultChecked;n=Mn(i.value!=null?i.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Pv(t,i){i=i.checked,i!=null&&Bd(t,"checked",i,!1)}function xh(t,i){Pv(t,i);var n=Mn(i.value),r=i.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}i.hasOwnProperty("value")?wh(t,i.type,n):i.hasOwnProperty("defaultValue")&&wh(t,i.type,Mn(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(t.defaultChecked=!!i.defaultChecked)}function Eg(t,i,n){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var r=i.type;if(!(r!=="submit"&&r!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+t._wrapperState.initialValue,n||i===t.value||(t.value=i),t.defaultValue=i}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wh(t,i,n){(i!=="number"||_l(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var to=Array.isArray;function rr(t,i,n,r){if(t=t.options,i){i={};for(var a=0;a<n.length;a++)i["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=i.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Mn(n),i=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,r&&(t[a].defaultSelected=!0);return}i!==null||t[a].disabled||(i=t[a])}i!==null&&(i.selected=!0)}}function Ch(t,i){if(i.dangerouslySetInnerHTML!=null)throw Error(G(91));return jt({},i,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Tg(t,i){var n=i.value;if(n==null){if(n=i.children,i=i.defaultValue,n!=null){if(i!=null)throw Error(G(92));if(to(n)){if(1<n.length)throw Error(G(93));n=n[0]}i=n}i==null&&(i=""),n=i}t._wrapperState={initialValue:Mn(n)}}function Ev(t,i){var n=Mn(i.value),r=Mn(i.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),i.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ag(t){var i=t.textContent;i===t._wrapperState.initialValue&&i!==""&&i!==null&&(t.value=i)}function Tv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bh(t,i){return t==null||t==="http://www.w3.org/1999/xhtml"?Tv(i):t==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fa,Av=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,n,r,a){MSApp.execUnsafeLocalFunction(function(){return t(i,n,r,a)})}:t}(function(t,i){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=i;else{for(Fa=Fa||document.createElement("div"),Fa.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Fa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)t.appendChild(i.firstChild)}});function yo(t,i){if(i){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=i;return}}t.textContent=i}var so={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},F1=["Webkit","ms","Moz","O"];Object.keys(so).forEach(function(t){F1.forEach(function(i){i=i+t.charAt(0).toUpperCase()+t.substring(1),so[i]=so[t]})});function kv(t,i,n){return i==null||typeof i=="boolean"||i===""?"":n||typeof i!="number"||i===0||so.hasOwnProperty(t)&&so[t]?(""+i).trim():i+"px"}function Iv(t,i){t=t.style;for(var n in i)if(i.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=kv(n,i[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,a):t[n]=a}}var L1=jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sh(t,i){if(i){if(L1[t]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(G(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(G(61))}if(i.style!=null&&typeof i.style!="object")throw Error(G(62))}}function Ph(t,i){if(t.indexOf("-")===-1)return typeof i.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eh=null;function Ud(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Th=null,or=null,ar=null;function kg(t){if(t=Ho(t)){if(typeof Th!="function")throw Error(G(280));var i=t.stateNode;i&&(i=uu(i),Th(t.stateNode,t.type,i))}}function Rv(t){or?ar?ar.push(t):ar=[t]:or=t}function Dv(){if(or){var t=or,i=ar;if(ar=or=null,kg(t),i)for(t=0;t<i.length;t++)kg(i[t])}}function Mv(t,i){return t(i)}function Fv(){}var Rc=!1;function Lv(t,i,n){if(Rc)return t(i,n);Rc=!0;try{return Mv(t,i,n)}finally{Rc=!1,(or!==null||ar!==null)&&(Fv(),Dv())}}function xo(t,i){var n=t.stateNode;if(n===null)return null;var r=uu(n);if(r===null)return null;n=r[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break t;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,i,typeof n));return n}var Ah=!1;if(Yi)try{var Hr={};Object.defineProperty(Hr,"passive",{get:function(){Ah=!0}}),window.addEventListener("test",Hr,Hr),window.removeEventListener("test",Hr,Hr)}catch{Ah=!1}function B1(t,i,n,r,a,l,c,f,p){var m=Array.prototype.slice.call(arguments,3);try{i.apply(n,m)}catch(v){this.onError(v)}}var ro=!1,vl=null,yl=!1,kh=null,O1={onError:function(t){ro=!0,vl=t}};function N1(t,i,n,r,a,l,c,f,p){ro=!1,vl=null,B1.apply(O1,arguments)}function z1(t,i,n,r,a,l,c,f,p){if(N1.apply(this,arguments),ro){if(ro){var m=vl;ro=!1,vl=null}else throw Error(G(198));yl||(yl=!0,kh=m)}}function xs(t){var i=t,n=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,i.flags&4098&&(n=i.return),t=i.return;while(t)}return i.tag===3?n:null}function Bv(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function Ig(t){if(xs(t)!==t)throw Error(G(188))}function U1(t){var i=t.alternate;if(!i){if(i=xs(t),i===null)throw Error(G(188));return i!==t?null:t}for(var n=t,r=i;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return Ig(a),t;if(l===r)return Ig(a),i;l=l.sibling}throw Error(G(188))}if(n.return!==r.return)n=a,r=l;else{for(var c=!1,f=a.child;f;){if(f===n){c=!0,n=a,r=l;break}if(f===r){c=!0,r=a,n=l;break}f=f.sibling}if(!c){for(f=l.child;f;){if(f===n){c=!0,n=l,r=a;break}if(f===r){c=!0,r=l,n=a;break}f=f.sibling}if(!c)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:i}function Ov(t){return t=U1(t),t!==null?Nv(t):null}function Nv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var i=Nv(t);if(i!==null)return i;t=t.sibling}return null}var zv=Ge.unstable_scheduleCallback,Rg=Ge.unstable_cancelCallback,V1=Ge.unstable_shouldYield,j1=Ge.unstable_requestPaint,Xt=Ge.unstable_now,H1=Ge.unstable_getCurrentPriorityLevel,Vd=Ge.unstable_ImmediatePriority,Uv=Ge.unstable_UserBlockingPriority,xl=Ge.unstable_NormalPriority,$1=Ge.unstable_LowPriority,Vv=Ge.unstable_IdlePriority,ru=null,Ai=null;function W1(t){if(Ai&&typeof Ai.onCommitFiberRoot=="function")try{Ai.onCommitFiberRoot(ru,t,void 0,(t.current.flags&128)===128)}catch{}}var vi=Math.clz32?Math.clz32:Y1,G1=Math.log,X1=Math.LN2;function Y1(t){return t>>>=0,t===0?32:31-(G1(t)/X1|0)|0}var La=64,Ba=4194304;function eo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wl(t,i){var n=t.pendingLanes;if(n===0)return 0;var r=0,a=t.suspendedLanes,l=t.pingedLanes,c=n&268435455;if(c!==0){var f=c&~a;f!==0?r=eo(f):(l&=c,l!==0&&(r=eo(l)))}else c=n&~a,c!==0?r=eo(c):l!==0&&(r=eo(l));if(r===0)return 0;if(i!==0&&i!==r&&!(i&a)&&(a=r&-r,l=i&-i,a>=l||a===16&&(l&4194240)!==0))return i;if(r&4&&(r|=n&16),i=t.entangledLanes,i!==0)for(t=t.entanglements,i&=r;0<i;)n=31-vi(i),a=1<<n,r|=t[n],i&=~a;return r}function Z1(t,i){switch(t){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Q1(t,i){for(var n=t.suspendedLanes,r=t.pingedLanes,a=t.expirationTimes,l=t.pendingLanes;0<l;){var c=31-vi(l),f=1<<c,p=a[c];p===-1?(!(f&n)||f&r)&&(a[c]=Z1(f,i)):p<=i&&(t.expiredLanes|=f),l&=~f}}function Ih(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jv(){var t=La;return La<<=1,!(La&4194240)&&(La=64),t}function Dc(t){for(var i=[],n=0;31>n;n++)i.push(t);return i}function Vo(t,i,n){t.pendingLanes|=i,i!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,i=31-vi(i),t[i]=n}function K1(t,i){var n=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-vi(n),l=1<<a;i[a]=0,r[a]=-1,t[a]=-1,n&=~l}}function jd(t,i){var n=t.entangledLanes|=i;for(t=t.entanglements;n;){var r=31-vi(n),a=1<<r;a&i|t[r]&i&&(t[r]|=i),n&=~a}}var Tt=0;function Hv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $v,Hd,Wv,Gv,Xv,Rh=!1,Oa=[],bn=null,Sn=null,Pn=null,wo=new Map,Co=new Map,_n=[],q1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dg(t,i){switch(t){case"focusin":case"focusout":bn=null;break;case"dragenter":case"dragleave":Sn=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":wo.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Co.delete(i.pointerId)}}function $r(t,i,n,r,a,l){return t===null||t.nativeEvent!==l?(t={blockedOn:i,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[a]},i!==null&&(i=Ho(i),i!==null&&Hd(i)),t):(t.eventSystemFlags|=r,i=t.targetContainers,a!==null&&i.indexOf(a)===-1&&i.push(a),t)}function J1(t,i,n,r,a){switch(i){case"focusin":return bn=$r(bn,t,i,n,r,a),!0;case"dragenter":return Sn=$r(Sn,t,i,n,r,a),!0;case"mouseover":return Pn=$r(Pn,t,i,n,r,a),!0;case"pointerover":var l=a.pointerId;return wo.set(l,$r(wo.get(l)||null,t,i,n,r,a)),!0;case"gotpointercapture":return l=a.pointerId,Co.set(l,$r(Co.get(l)||null,t,i,n,r,a)),!0}return!1}function Yv(t){var i=ls(t.target);if(i!==null){var n=xs(i);if(n!==null){if(i=n.tag,i===13){if(i=Bv(n),i!==null){t.blockedOn=i,Xv(t.priority,function(){Wv(n)});return}}else if(i===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function il(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var n=Dh(t.domEventName,t.eventSystemFlags,i[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Eh=r,n.target.dispatchEvent(r),Eh=null}else return i=Ho(n),i!==null&&Hd(i),t.blockedOn=n,!1;i.shift()}return!0}function Mg(t,i,n){il(t)&&n.delete(i)}function tC(){Rh=!1,bn!==null&&il(bn)&&(bn=null),Sn!==null&&il(Sn)&&(Sn=null),Pn!==null&&il(Pn)&&(Pn=null),wo.forEach(Mg),Co.forEach(Mg)}function Wr(t,i){t.blockedOn===i&&(t.blockedOn=null,Rh||(Rh=!0,Ge.unstable_scheduleCallback(Ge.unstable_NormalPriority,tC)))}function bo(t){function i(a){return Wr(a,t)}if(0<Oa.length){Wr(Oa[0],t);for(var n=1;n<Oa.length;n++){var r=Oa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(bn!==null&&Wr(bn,t),Sn!==null&&Wr(Sn,t),Pn!==null&&Wr(Pn,t),wo.forEach(i),Co.forEach(i),n=0;n<_n.length;n++)r=_n[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_n.length&&(n=_n[0],n.blockedOn===null);)Yv(n),n.blockedOn===null&&_n.shift()}var lr=tn.ReactCurrentBatchConfig,Cl=!0;function eC(t,i,n,r){var a=Tt,l=lr.transition;lr.transition=null;try{Tt=1,$d(t,i,n,r)}finally{Tt=a,lr.transition=l}}function iC(t,i,n,r){var a=Tt,l=lr.transition;lr.transition=null;try{Tt=4,$d(t,i,n,r)}finally{Tt=a,lr.transition=l}}function $d(t,i,n,r){if(Cl){var a=Dh(t,i,n,r);if(a===null)jc(t,i,r,bl,n),Dg(t,r);else if(J1(a,t,i,n,r))r.stopPropagation();else if(Dg(t,r),i&4&&-1<q1.indexOf(t)){for(;a!==null;){var l=Ho(a);if(l!==null&&$v(l),l=Dh(t,i,n,r),l===null&&jc(t,i,r,bl,n),l===a)break;a=l}a!==null&&r.stopPropagation()}else jc(t,i,r,null,n)}}var bl=null;function Dh(t,i,n,r){if(bl=null,t=Ud(r),t=ls(t),t!==null)if(i=xs(t),i===null)t=null;else if(n=i.tag,n===13){if(t=Bv(i),t!==null)return t;t=null}else if(n===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null);return bl=t,null}function Zv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(H1()){case Vd:return 1;case Uv:return 4;case xl:case $1:return 16;case Vv:return 536870912;default:return 16}default:return 16}}var xn=null,Wd=null,nl=null;function Qv(){if(nl)return nl;var t,i=Wd,n=i.length,r,a="value"in xn?xn.value:xn.textContent,l=a.length;for(t=0;t<n&&i[t]===a[t];t++);var c=n-t;for(r=1;r<=c&&i[n-r]===a[l-r];r++);return nl=a.slice(t,1<r?1-r:void 0)}function sl(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Na(){return!0}function Fg(){return!1}function Ze(t){function i(n,r,a,l,c){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=l,this.target=c,this.currentTarget=null;for(var f in t)t.hasOwnProperty(f)&&(n=t[f],this[f]=n?n(l):l[f]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Na:Fg,this.isPropagationStopped=Fg,this}return jt(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Na)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Na)},persist:function(){},isPersistent:Na}),i}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gd=Ze(Cr),jo=jt({},Cr,{view:0,detail:0}),nC=Ze(jo),Mc,Fc,Gr,ou=jt({},jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gr&&(Gr&&t.type==="mousemove"?(Mc=t.screenX-Gr.screenX,Fc=t.screenY-Gr.screenY):Fc=Mc=0,Gr=t),Mc)},movementY:function(t){return"movementY"in t?t.movementY:Fc}}),Lg=Ze(ou),sC=jt({},ou,{dataTransfer:0}),rC=Ze(sC),oC=jt({},jo,{relatedTarget:0}),Lc=Ze(oC),aC=jt({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),lC=Ze(aC),uC=jt({},Cr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cC=Ze(uC),hC=jt({},Cr,{data:0}),Bg=Ze(hC),dC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gC(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=pC[t])?!!i[t]:!1}function Xd(){return gC}var mC=jt({},jo,{key:function(t){if(t.key){var i=dC[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=sl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xd,charCode:function(t){return t.type==="keypress"?sl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_C=Ze(mC),vC=jt({},ou,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Og=Ze(vC),yC=jt({},jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xd}),xC=Ze(yC),wC=jt({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),CC=Ze(wC),bC=jt({},ou,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),SC=Ze(bC),PC=[9,13,27,32],Yd=Yi&&"CompositionEvent"in window,oo=null;Yi&&"documentMode"in document&&(oo=document.documentMode);var EC=Yi&&"TextEvent"in window&&!oo,Kv=Yi&&(!Yd||oo&&8<oo&&11>=oo),Ng=String.fromCharCode(32),zg=!1;function qv(t,i){switch(t){case"keyup":return PC.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ws=!1;function TC(t,i){switch(t){case"compositionend":return Jv(i);case"keypress":return i.which!==32?null:(zg=!0,Ng);case"textInput":return t=i.data,t===Ng&&zg?null:t;default:return null}}function AC(t,i){if(Ws)return t==="compositionend"||!Yd&&qv(t,i)?(t=Qv(),nl=Wd=xn=null,Ws=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Kv&&i.locale!=="ko"?null:i.data;default:return null}}var kC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ug(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!kC[t.type]:i==="textarea"}function ty(t,i,n,r){Rv(r),i=Sl(i,"onChange"),0<i.length&&(n=new Gd("onChange","change",null,n,r),t.push({event:n,listeners:i}))}var ao=null,So=null;function IC(t){hy(t,0)}function au(t){var i=Ys(t);if(Sv(i))return t}function RC(t,i){if(t==="change")return i}var ey=!1;if(Yi){var Bc;if(Yi){var Oc="oninput"in document;if(!Oc){var Vg=document.createElement("div");Vg.setAttribute("oninput","return;"),Oc=typeof Vg.oninput=="function"}Bc=Oc}else Bc=!1;ey=Bc&&(!document.documentMode||9<document.documentMode)}function jg(){ao&&(ao.detachEvent("onpropertychange",iy),So=ao=null)}function iy(t){if(t.propertyName==="value"&&au(So)){var i=[];ty(i,So,t,Ud(t)),Lv(IC,i)}}function DC(t,i,n){t==="focusin"?(jg(),ao=i,So=n,ao.attachEvent("onpropertychange",iy)):t==="focusout"&&jg()}function MC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return au(So)}function FC(t,i){if(t==="click")return au(i)}function LC(t,i){if(t==="input"||t==="change")return au(i)}function BC(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var xi=typeof Object.is=="function"?Object.is:BC;function Po(t,i){if(xi(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var n=Object.keys(t),r=Object.keys(i);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!ph.call(i,a)||!xi(t[a],i[a]))return!1}return!0}function Hg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $g(t,i){var n=Hg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=i&&r>=i)return{node:n,offset:i-t};t=r}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Hg(n)}}function ny(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?ny(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function sy(){for(var t=window,i=_l();i instanceof t.HTMLIFrameElement;){try{var n=typeof i.contentWindow.location.href=="string"}catch{n=!1}if(n)t=i.contentWindow;else break;i=_l(t.document)}return i}function Zd(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function OC(t){var i=sy(),n=t.focusedElem,r=t.selectionRange;if(i!==n&&n&&n.ownerDocument&&ny(n.ownerDocument.documentElement,n)){if(r!==null&&Zd(n)){if(i=r.start,t=r.end,t===void 0&&(t=i),"selectionStart"in n)n.selectionStart=i,n.selectionEnd=Math.min(t,n.value.length);else if(t=(i=n.ownerDocument||document)&&i.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,l=Math.min(r.start,a);r=r.end===void 0?l:Math.min(r.end,a),!t.extend&&l>r&&(a=r,r=l,l=a),a=$g(n,l);var c=$g(n,r);a&&c&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==c.node||t.focusOffset!==c.offset)&&(i=i.createRange(),i.setStart(a.node,a.offset),t.removeAllRanges(),l>r?(t.addRange(i),t.extend(c.node,c.offset)):(i.setEnd(c.node,c.offset),t.addRange(i)))}}for(i=[],t=n;t=t.parentNode;)t.nodeType===1&&i.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<i.length;n++)t=i[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var NC=Yi&&"documentMode"in document&&11>=document.documentMode,Gs=null,Mh=null,lo=null,Fh=!1;function Wg(t,i,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fh||Gs==null||Gs!==_l(r)||(r=Gs,"selectionStart"in r&&Zd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),lo&&Po(lo,r)||(lo=r,r=Sl(Mh,"onSelect"),0<r.length&&(i=new Gd("onSelect","select",null,i,n),t.push({event:i,listeners:r}),i.target=Gs)))}function za(t,i){var n={};return n[t.toLowerCase()]=i.toLowerCase(),n["Webkit"+t]="webkit"+i,n["Moz"+t]="moz"+i,n}var Xs={animationend:za("Animation","AnimationEnd"),animationiteration:za("Animation","AnimationIteration"),animationstart:za("Animation","AnimationStart"),transitionend:za("Transition","TransitionEnd")},Nc={},ry={};Yi&&(ry=document.createElement("div").style,"AnimationEvent"in window||(delete Xs.animationend.animation,delete Xs.animationiteration.animation,delete Xs.animationstart.animation),"TransitionEvent"in window||delete Xs.transitionend.transition);function lu(t){if(Nc[t])return Nc[t];if(!Xs[t])return t;var i=Xs[t],n;for(n in i)if(i.hasOwnProperty(n)&&n in ry)return Nc[t]=i[n];return t}var oy=lu("animationend"),ay=lu("animationiteration"),ly=lu("animationstart"),uy=lu("transitionend"),cy=new Map,Gg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function On(t,i){cy.set(t,i),ys(i,[t])}for(var zc=0;zc<Gg.length;zc++){var Uc=Gg[zc],zC=Uc.toLowerCase(),UC=Uc[0].toUpperCase()+Uc.slice(1);On(zC,"on"+UC)}On(oy,"onAnimationEnd");On(ay,"onAnimationIteration");On(ly,"onAnimationStart");On("dblclick","onDoubleClick");On("focusin","onFocus");On("focusout","onBlur");On(uy,"onTransitionEnd");fr("onMouseEnter",["mouseout","mouseover"]);fr("onMouseLeave",["mouseout","mouseover"]);fr("onPointerEnter",["pointerout","pointerover"]);fr("onPointerLeave",["pointerout","pointerover"]);ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VC=new Set("cancel close invalid load scroll toggle".split(" ").concat(io));function Xg(t,i,n){var r=t.type||"unknown-event";t.currentTarget=n,z1(r,i,void 0,t),t.currentTarget=null}function hy(t,i){i=(i&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],a=r.event;r=r.listeners;t:{var l=void 0;if(i)for(var c=r.length-1;0<=c;c--){var f=r[c],p=f.instance,m=f.currentTarget;if(f=f.listener,p!==l&&a.isPropagationStopped())break t;Xg(a,f,m),l=p}else for(c=0;c<r.length;c++){if(f=r[c],p=f.instance,m=f.currentTarget,f=f.listener,p!==l&&a.isPropagationStopped())break t;Xg(a,f,m),l=p}}}if(yl)throw t=kh,yl=!1,kh=null,t}function Dt(t,i){var n=i[zh];n===void 0&&(n=i[zh]=new Set);var r=t+"__bubble";n.has(r)||(dy(i,t,2,!1),n.add(r))}function Vc(t,i,n){var r=0;i&&(r|=4),dy(n,t,r,i)}var Ua="_reactListening"+Math.random().toString(36).slice(2);function Eo(t){if(!t[Ua]){t[Ua]=!0,yv.forEach(function(n){n!=="selectionchange"&&(VC.has(n)||Vc(n,!1,t),Vc(n,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Ua]||(i[Ua]=!0,Vc("selectionchange",!1,i))}}function dy(t,i,n,r){switch(Zv(i)){case 1:var a=eC;break;case 4:a=iC;break;default:a=$d}n=a.bind(null,i,n,t),a=void 0,!Ah||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(a=!0),r?a!==void 0?t.addEventListener(i,n,{capture:!0,passive:a}):t.addEventListener(i,n,!0):a!==void 0?t.addEventListener(i,n,{passive:a}):t.addEventListener(i,n,!1)}function jc(t,i,n,r,a){var l=r;if(!(i&1)&&!(i&2)&&r!==null)t:for(;;){if(r===null)return;var c=r.tag;if(c===3||c===4){var f=r.stateNode.containerInfo;if(f===a||f.nodeType===8&&f.parentNode===a)break;if(c===4)for(c=r.return;c!==null;){var p=c.tag;if((p===3||p===4)&&(p=c.stateNode.containerInfo,p===a||p.nodeType===8&&p.parentNode===a))return;c=c.return}for(;f!==null;){if(c=ls(f),c===null)return;if(p=c.tag,p===5||p===6){r=l=c;continue t}f=f.parentNode}}r=r.return}Lv(function(){var m=l,v=Ud(n),w=[];t:{var x=cy.get(t);if(x!==void 0){var S=Gd,A=t;switch(t){case"keypress":if(sl(n)===0)break t;case"keydown":case"keyup":S=_C;break;case"focusin":A="focus",S=Lc;break;case"focusout":A="blur",S=Lc;break;case"beforeblur":case"afterblur":S=Lc;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Lg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=rC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=xC;break;case oy:case ay:case ly:S=lC;break;case uy:S=CC;break;case"scroll":S=nC;break;case"wheel":S=SC;break;case"copy":case"cut":case"paste":S=cC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Og}var M=(i&4)!==0,L=!M&&t==="scroll",T=M?x!==null?x+"Capture":null:x;M=[];for(var P=m,k;P!==null;){k=P;var C=k.stateNode;if(k.tag===5&&C!==null&&(k=C,T!==null&&(C=xo(P,T),C!=null&&M.push(To(P,C,k)))),L)break;P=P.return}0<M.length&&(x=new S(x,A,null,n,v),w.push({event:x,listeners:M}))}}if(!(i&7)){t:{if(x=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",x&&n!==Eh&&(A=n.relatedTarget||n.fromElement)&&(ls(A)||A[Zi]))break t;if((S||x)&&(x=v.window===v?v:(x=v.ownerDocument)?x.defaultView||x.parentWindow:window,S?(A=n.relatedTarget||n.toElement,S=m,A=A?ls(A):null,A!==null&&(L=xs(A),A!==L||A.tag!==5&&A.tag!==6)&&(A=null)):(S=null,A=m),S!==A)){if(M=Lg,C="onMouseLeave",T="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(M=Og,C="onPointerLeave",T="onPointerEnter",P="pointer"),L=S==null?x:Ys(S),k=A==null?x:Ys(A),x=new M(C,P+"leave",S,n,v),x.target=L,x.relatedTarget=k,C=null,ls(v)===m&&(M=new M(T,P+"enter",A,n,v),M.target=k,M.relatedTarget=L,C=M),L=C,S&&A)e:{for(M=S,T=A,P=0,k=M;k;k=zs(k))P++;for(k=0,C=T;C;C=zs(C))k++;for(;0<P-k;)M=zs(M),P--;for(;0<k-P;)T=zs(T),k--;for(;P--;){if(M===T||T!==null&&M===T.alternate)break e;M=zs(M),T=zs(T)}M=null}else M=null;S!==null&&Yg(w,x,S,M,!1),A!==null&&L!==null&&Yg(w,L,A,M,!0)}}t:{if(x=m?Ys(m):window,S=x.nodeName&&x.nodeName.toLowerCase(),S==="select"||S==="input"&&x.type==="file")var R=RC;else if(Ug(x))if(ey)R=LC;else{R=MC;var H=DC}else(S=x.nodeName)&&S.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(R=FC);if(R&&(R=R(t,m))){ty(w,R,n,v);break t}H&&H(t,x,m),t==="focusout"&&(H=x._wrapperState)&&H.controlled&&x.type==="number"&&wh(x,"number",x.value)}switch(H=m?Ys(m):window,t){case"focusin":(Ug(H)||H.contentEditable==="true")&&(Gs=H,Mh=m,lo=null);break;case"focusout":lo=Mh=Gs=null;break;case"mousedown":Fh=!0;break;case"contextmenu":case"mouseup":case"dragend":Fh=!1,Wg(w,n,v);break;case"selectionchange":if(NC)break;case"keydown":case"keyup":Wg(w,n,v)}var N;if(Yd)t:{switch(t){case"compositionstart":var $="onCompositionStart";break t;case"compositionend":$="onCompositionEnd";break t;case"compositionupdate":$="onCompositionUpdate";break t}$=void 0}else Ws?qv(t,n)&&($="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(Kv&&n.locale!=="ko"&&(Ws||$!=="onCompositionStart"?$==="onCompositionEnd"&&Ws&&(N=Qv()):(xn=v,Wd="value"in xn?xn.value:xn.textContent,Ws=!0)),H=Sl(m,$),0<H.length&&($=new Bg($,t,null,n,v),w.push({event:$,listeners:H}),N?$.data=N:(N=Jv(n),N!==null&&($.data=N)))),(N=EC?TC(t,n):AC(t,n))&&(m=Sl(m,"onBeforeInput"),0<m.length&&(v=new Bg("onBeforeInput","beforeinput",null,n,v),w.push({event:v,listeners:m}),v.data=N))}hy(w,i)})}function To(t,i,n){return{instance:t,listener:i,currentTarget:n}}function Sl(t,i){for(var n=i+"Capture",r=[];t!==null;){var a=t,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=xo(t,n),l!=null&&r.unshift(To(t,l,a)),l=xo(t,i),l!=null&&r.push(To(t,l,a))),t=t.return}return r}function zs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Yg(t,i,n,r,a){for(var l=i._reactName,c=[];n!==null&&n!==r;){var f=n,p=f.alternate,m=f.stateNode;if(p!==null&&p===r)break;f.tag===5&&m!==null&&(f=m,a?(p=xo(n,l),p!=null&&c.unshift(To(n,p,f))):a||(p=xo(n,l),p!=null&&c.push(To(n,p,f)))),n=n.return}c.length!==0&&t.push({event:i,listeners:c})}var jC=/\r\n?/g,HC=/\u0000|\uFFFD/g;function Zg(t){return(typeof t=="string"?t:""+t).replace(jC,`
`).replace(HC,"")}function Va(t,i,n){if(i=Zg(i),Zg(t)!==i&&n)throw Error(G(425))}function Pl(){}var Lh=null,Bh=null;function Oh(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Nh=typeof setTimeout=="function"?setTimeout:void 0,$C=typeof clearTimeout=="function"?clearTimeout:void 0,Qg=typeof Promise=="function"?Promise:void 0,WC=typeof queueMicrotask=="function"?queueMicrotask:typeof Qg<"u"?function(t){return Qg.resolve(null).then(t).catch(GC)}:Nh;function GC(t){setTimeout(function(){throw t})}function Hc(t,i){var n=i,r=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){t.removeChild(a),bo(i);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);bo(i)}function En(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return t}function Kg(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(i===0)return t;i--}else n==="/$"&&i++}t=t.previousSibling}return null}var br=Math.random().toString(36).slice(2),Ei="__reactFiber$"+br,Ao="__reactProps$"+br,Zi="__reactContainer$"+br,zh="__reactEvents$"+br,XC="__reactListeners$"+br,YC="__reactHandles$"+br;function ls(t){var i=t[Ei];if(i)return i;for(var n=t.parentNode;n;){if(i=n[Zi]||n[Ei]){if(n=i.alternate,i.child!==null||n!==null&&n.child!==null)for(t=Kg(t);t!==null;){if(n=t[Ei])return n;t=Kg(t)}return i}t=n,n=t.parentNode}return null}function Ho(t){return t=t[Ei]||t[Zi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ys(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function uu(t){return t[Ao]||null}var Uh=[],Zs=-1;function Nn(t){return{current:t}}function Mt(t){0>Zs||(t.current=Uh[Zs],Uh[Zs]=null,Zs--)}function kt(t,i){Zs++,Uh[Zs]=t.current,t.current=i}var Fn={},me=Nn(Fn),Me=Nn(!1),ps=Fn;function pr(t,i){var n=t.type.contextTypes;if(!n)return Fn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===i)return r.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=i[l];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),a}function Fe(t){return t=t.childContextTypes,t!=null}function El(){Mt(Me),Mt(me)}function qg(t,i,n){if(me.current!==Fn)throw Error(G(168));kt(me,i),kt(Me,n)}function fy(t,i,n){var r=t.stateNode;if(i=i.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in i))throw Error(G(108,D1(t)||"Unknown",a));return jt({},n,r)}function Tl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fn,ps=me.current,kt(me,t),kt(Me,Me.current),!0}function Jg(t,i,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=fy(t,i,ps),r.__reactInternalMemoizedMergedChildContext=t,Mt(Me),Mt(me),kt(me,t)):Mt(Me),kt(Me,n)}var Vi=null,cu=!1,$c=!1;function py(t){Vi===null?Vi=[t]:Vi.push(t)}function ZC(t){cu=!0,py(t)}function zn(){if(!$c&&Vi!==null){$c=!0;var t=0,i=Tt;try{var n=Vi;for(Tt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Vi=null,cu=!1}catch(a){throw Vi!==null&&(Vi=Vi.slice(t+1)),zv(Vd,zn),a}finally{Tt=i,$c=!1}}return null}var Qs=[],Ks=0,Al=null,kl=0,ei=[],ii=0,gs=null,ji=1,Hi="";function ss(t,i){Qs[Ks++]=kl,Qs[Ks++]=Al,Al=t,kl=i}function gy(t,i,n){ei[ii++]=ji,ei[ii++]=Hi,ei[ii++]=gs,gs=t;var r=ji;t=Hi;var a=32-vi(r)-1;r&=~(1<<a),n+=1;var l=32-vi(i)+a;if(30<l){var c=a-a%5;l=(r&(1<<c)-1).toString(32),r>>=c,a-=c,ji=1<<32-vi(i)+a|n<<a|r,Hi=l+t}else ji=1<<l|n<<a|r,Hi=t}function Qd(t){t.return!==null&&(ss(t,1),gy(t,1,0))}function Kd(t){for(;t===Al;)Al=Qs[--Ks],Qs[Ks]=null,kl=Qs[--Ks],Qs[Ks]=null;for(;t===gs;)gs=ei[--ii],ei[ii]=null,Hi=ei[--ii],ei[ii]=null,ji=ei[--ii],ei[ii]=null}var We=null,He=null,Lt=!1,_i=null;function my(t,i){var n=ni(5,null,null,0);n.elementType="DELETED",n.stateNode=i,n.return=t,i=t.deletions,i===null?(t.deletions=[n],t.flags|=16):i.push(n)}function tm(t,i){switch(t.tag){case 5:var n=t.type;return i=i.nodeType!==1||n.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(t.stateNode=i,We=t,He=En(i.firstChild),!0):!1;case 6:return i=t.pendingProps===""||i.nodeType!==3?null:i,i!==null?(t.stateNode=i,We=t,He=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(n=gs!==null?{id:ji,overflow:Hi}:null,t.memoizedState={dehydrated:i,treeContext:n,retryLane:1073741824},n=ni(18,null,null,0),n.stateNode=i,n.return=t,t.child=n,We=t,He=null,!0):!1;default:return!1}}function Vh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function jh(t){if(Lt){var i=He;if(i){var n=i;if(!tm(t,i)){if(Vh(t))throw Error(G(418));i=En(n.nextSibling);var r=We;i&&tm(t,i)?my(r,n):(t.flags=t.flags&-4097|2,Lt=!1,We=t)}}else{if(Vh(t))throw Error(G(418));t.flags=t.flags&-4097|2,Lt=!1,We=t}}}function em(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;We=t}function ja(t){if(t!==We)return!1;if(!Lt)return em(t),Lt=!0,!1;var i;if((i=t.tag!==3)&&!(i=t.tag!==5)&&(i=t.type,i=i!=="head"&&i!=="body"&&!Oh(t.type,t.memoizedProps)),i&&(i=He)){if(Vh(t))throw _y(),Error(G(418));for(;i;)my(t,i),i=En(i.nextSibling)}if(em(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));t:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(i===0){He=En(t.nextSibling);break t}i--}else n!=="$"&&n!=="$!"&&n!=="$?"||i++}t=t.nextSibling}He=null}}else He=We?En(t.stateNode.nextSibling):null;return!0}function _y(){for(var t=He;t;)t=En(t.nextSibling)}function gr(){He=We=null,Lt=!1}function qd(t){_i===null?_i=[t]:_i.push(t)}var QC=tn.ReactCurrentBatchConfig;function gi(t,i){if(t&&t.defaultProps){i=jt({},i),t=t.defaultProps;for(var n in t)i[n]===void 0&&(i[n]=t[n]);return i}return i}var Il=Nn(null),Rl=null,qs=null,Jd=null;function tf(){Jd=qs=Rl=null}function ef(t){var i=Il.current;Mt(Il),t._currentValue=i}function Hh(t,i,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,r!==null&&(r.childLanes|=i)):r!==null&&(r.childLanes&i)!==i&&(r.childLanes|=i),t===n)break;t=t.return}}function ur(t,i){Rl=t,Jd=qs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&i&&(De=!0),t.firstContext=null)}function ri(t){var i=t._currentValue;if(Jd!==t)if(t={context:t,memoizedValue:i,next:null},qs===null){if(Rl===null)throw Error(G(308));qs=t,Rl.dependencies={lanes:0,firstContext:t}}else qs=qs.next=t;return i}var us=null;function nf(t){us===null?us=[t]:us.push(t)}function vy(t,i,n,r){var a=i.interleaved;return a===null?(n.next=n,nf(i)):(n.next=a.next,a.next=n),i.interleaved=n,Qi(t,r)}function Qi(t,i){t.lanes|=i;var n=t.alternate;for(n!==null&&(n.lanes|=i),n=t,t=t.return;t!==null;)t.childLanes|=i,n=t.alternate,n!==null&&(n.childLanes|=i),n=t,t=t.return;return n.tag===3?n.stateNode:null}var gn=!1;function sf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yy(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wi(t,i){return{eventTime:t,lane:i,tag:0,payload:null,callback:null,next:null}}function Tn(t,i,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ct&2){var a=r.pending;return a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i,Qi(t,n)}return a=r.interleaved,a===null?(i.next=i,nf(r)):(i.next=a.next,a.next=i),r.interleaved=i,Qi(t,n)}function rl(t,i,n){if(i=i.updateQueue,i!==null&&(i=i.shared,(n&4194240)!==0)){var r=i.lanes;r&=t.pendingLanes,n|=r,i.lanes=n,jd(t,n)}}function im(t,i){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var c={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=c:l=l.next=c,n=n.next}while(n!==null);l===null?a=l=i:l=l.next=i}else a=l=i;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=i:t.next=i,n.lastBaseUpdate=i}function Dl(t,i,n,r){var a=t.updateQueue;gn=!1;var l=a.firstBaseUpdate,c=a.lastBaseUpdate,f=a.shared.pending;if(f!==null){a.shared.pending=null;var p=f,m=p.next;p.next=null,c===null?l=m:c.next=m,c=p;var v=t.alternate;v!==null&&(v=v.updateQueue,f=v.lastBaseUpdate,f!==c&&(f===null?v.firstBaseUpdate=m:f.next=m,v.lastBaseUpdate=p))}if(l!==null){var w=a.baseState;c=0,v=m=p=null,f=l;do{var x=f.lane,S=f.eventTime;if((r&x)===x){v!==null&&(v=v.next={eventTime:S,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});t:{var A=t,M=f;switch(x=i,S=n,M.tag){case 1:if(A=M.payload,typeof A=="function"){w=A.call(S,w,x);break t}w=A;break t;case 3:A.flags=A.flags&-65537|128;case 0:if(A=M.payload,x=typeof A=="function"?A.call(S,w,x):A,x==null)break t;w=jt({},w,x);break t;case 2:gn=!0}}f.callback!==null&&f.lane!==0&&(t.flags|=64,x=a.effects,x===null?a.effects=[f]:x.push(f))}else S={eventTime:S,lane:x,tag:f.tag,payload:f.payload,callback:f.callback,next:null},v===null?(m=v=S,p=w):v=v.next=S,c|=x;if(f=f.next,f===null){if(f=a.shared.pending,f===null)break;x=f,f=x.next,x.next=null,a.lastBaseUpdate=x,a.shared.pending=null}}while(1);if(v===null&&(p=w),a.baseState=p,a.firstBaseUpdate=m,a.lastBaseUpdate=v,i=a.shared.interleaved,i!==null){a=i;do c|=a.lane,a=a.next;while(a!==i)}else l===null&&(a.shared.lanes=0);_s|=c,t.lanes=c,t.memoizedState=w}}function nm(t,i,n){if(t=i.effects,i.effects=null,t!==null)for(i=0;i<t.length;i++){var r=t[i],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(G(191,a));a.call(r)}}}var xy=new vv.Component().refs;function $h(t,i,n,r){i=t.memoizedState,n=n(r,i),n=n==null?i:jt({},i,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var hu={isMounted:function(t){return(t=t._reactInternals)?xs(t)===t:!1},enqueueSetState:function(t,i,n){t=t._reactInternals;var r=Pe(),a=kn(t),l=Wi(r,a);l.payload=i,n!=null&&(l.callback=n),i=Tn(t,l,a),i!==null&&(yi(i,t,a,r),rl(i,t,a))},enqueueReplaceState:function(t,i,n){t=t._reactInternals;var r=Pe(),a=kn(t),l=Wi(r,a);l.tag=1,l.payload=i,n!=null&&(l.callback=n),i=Tn(t,l,a),i!==null&&(yi(i,t,a,r),rl(i,t,a))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var n=Pe(),r=kn(t),a=Wi(n,r);a.tag=2,i!=null&&(a.callback=i),i=Tn(t,a,r),i!==null&&(yi(i,t,r,n),rl(i,t,r))}};function sm(t,i,n,r,a,l,c){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,l,c):i.prototype&&i.prototype.isPureReactComponent?!Po(n,r)||!Po(a,l):!0}function wy(t,i,n){var r=!1,a=Fn,l=i.contextType;return typeof l=="object"&&l!==null?l=ri(l):(a=Fe(i)?ps:me.current,r=i.contextTypes,l=(r=r!=null)?pr(t,a):Fn),i=new i(n,l),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=hu,t.stateNode=i,i._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=l),i}function rm(t,i,n,r){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(n,r),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(n,r),i.state!==t&&hu.enqueueReplaceState(i,i.state,null)}function Wh(t,i,n,r){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs=xy,sf(t);var l=i.contextType;typeof l=="object"&&l!==null?a.context=ri(l):(l=Fe(i)?ps:me.current,a.context=pr(t,l)),a.state=t.memoizedState,l=i.getDerivedStateFromProps,typeof l=="function"&&($h(t,i,l,n),a.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(i=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),i!==a.state&&hu.enqueueReplaceState(a,a.state,null),Dl(t,n,a,r),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Xr(t,i,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var a=r,l=""+t;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===l?i.ref:(i=function(c){var f=a.refs;f===xy&&(f=a.refs={}),c===null?delete f[l]:f[l]=c},i._stringRef=l,i)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function Ha(t,i){throw t=Object.prototype.toString.call(i),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t))}function om(t){var i=t._init;return i(t._payload)}function Cy(t){function i(T,P){if(t){var k=T.deletions;k===null?(T.deletions=[P],T.flags|=16):k.push(P)}}function n(T,P){if(!t)return null;for(;P!==null;)i(T,P),P=P.sibling;return null}function r(T,P){for(T=new Map;P!==null;)P.key!==null?T.set(P.key,P):T.set(P.index,P),P=P.sibling;return T}function a(T,P){return T=In(T,P),T.index=0,T.sibling=null,T}function l(T,P,k){return T.index=k,t?(k=T.alternate,k!==null?(k=k.index,k<P?(T.flags|=2,P):k):(T.flags|=2,P)):(T.flags|=1048576,P)}function c(T){return t&&T.alternate===null&&(T.flags|=2),T}function f(T,P,k,C){return P===null||P.tag!==6?(P=Kc(k,T.mode,C),P.return=T,P):(P=a(P,k),P.return=T,P)}function p(T,P,k,C){var R=k.type;return R===$s?v(T,P,k.props.children,C,k.key):P!==null&&(P.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===pn&&om(R)===P.type)?(C=a(P,k.props),C.ref=Xr(T,P,k),C.return=T,C):(C=hl(k.type,k.key,k.props,null,T.mode,C),C.ref=Xr(T,P,k),C.return=T,C)}function m(T,P,k,C){return P===null||P.tag!==4||P.stateNode.containerInfo!==k.containerInfo||P.stateNode.implementation!==k.implementation?(P=qc(k,T.mode,C),P.return=T,P):(P=a(P,k.children||[]),P.return=T,P)}function v(T,P,k,C,R){return P===null||P.tag!==7?(P=fs(k,T.mode,C,R),P.return=T,P):(P=a(P,k),P.return=T,P)}function w(T,P,k){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Kc(""+P,T.mode,k),P.return=T,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Da:return k=hl(P.type,P.key,P.props,null,T.mode,k),k.ref=Xr(T,null,P),k.return=T,k;case Hs:return P=qc(P,T.mode,k),P.return=T,P;case pn:var C=P._init;return w(T,C(P._payload),k)}if(to(P)||jr(P))return P=fs(P,T.mode,k,null),P.return=T,P;Ha(T,P)}return null}function x(T,P,k,C){var R=P!==null?P.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return R!==null?null:f(T,P,""+k,C);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Da:return k.key===R?p(T,P,k,C):null;case Hs:return k.key===R?m(T,P,k,C):null;case pn:return R=k._init,x(T,P,R(k._payload),C)}if(to(k)||jr(k))return R!==null?null:v(T,P,k,C,null);Ha(T,k)}return null}function S(T,P,k,C,R){if(typeof C=="string"&&C!==""||typeof C=="number")return T=T.get(k)||null,f(P,T,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Da:return T=T.get(C.key===null?k:C.key)||null,p(P,T,C,R);case Hs:return T=T.get(C.key===null?k:C.key)||null,m(P,T,C,R);case pn:var H=C._init;return S(T,P,k,H(C._payload),R)}if(to(C)||jr(C))return T=T.get(k)||null,v(P,T,C,R,null);Ha(P,C)}return null}function A(T,P,k,C){for(var R=null,H=null,N=P,$=P=0,Z=null;N!==null&&$<k.length;$++){N.index>$?(Z=N,N=null):Z=N.sibling;var B=x(T,N,k[$],C);if(B===null){N===null&&(N=Z);break}t&&N&&B.alternate===null&&i(T,N),P=l(B,P,$),H===null?R=B:H.sibling=B,H=B,N=Z}if($===k.length)return n(T,N),Lt&&ss(T,$),R;if(N===null){for(;$<k.length;$++)N=w(T,k[$],C),N!==null&&(P=l(N,P,$),H===null?R=N:H.sibling=N,H=N);return Lt&&ss(T,$),R}for(N=r(T,N);$<k.length;$++)Z=S(N,T,$,k[$],C),Z!==null&&(t&&Z.alternate!==null&&N.delete(Z.key===null?$:Z.key),P=l(Z,P,$),H===null?R=Z:H.sibling=Z,H=Z);return t&&N.forEach(function(rt){return i(T,rt)}),Lt&&ss(T,$),R}function M(T,P,k,C){var R=jr(k);if(typeof R!="function")throw Error(G(150));if(k=R.call(k),k==null)throw Error(G(151));for(var H=R=null,N=P,$=P=0,Z=null,B=k.next();N!==null&&!B.done;$++,B=k.next()){N.index>$?(Z=N,N=null):Z=N.sibling;var rt=x(T,N,B.value,C);if(rt===null){N===null&&(N=Z);break}t&&N&&rt.alternate===null&&i(T,N),P=l(rt,P,$),H===null?R=rt:H.sibling=rt,H=rt,N=Z}if(B.done)return n(T,N),Lt&&ss(T,$),R;if(N===null){for(;!B.done;$++,B=k.next())B=w(T,B.value,C),B!==null&&(P=l(B,P,$),H===null?R=B:H.sibling=B,H=B);return Lt&&ss(T,$),R}for(N=r(T,N);!B.done;$++,B=k.next())B=S(N,T,$,B.value,C),B!==null&&(t&&B.alternate!==null&&N.delete(B.key===null?$:B.key),P=l(B,P,$),H===null?R=B:H.sibling=B,H=B);return t&&N.forEach(function(st){return i(T,st)}),Lt&&ss(T,$),R}function L(T,P,k,C){if(typeof k=="object"&&k!==null&&k.type===$s&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Da:t:{for(var R=k.key,H=P;H!==null;){if(H.key===R){if(R=k.type,R===$s){if(H.tag===7){n(T,H.sibling),P=a(H,k.props.children),P.return=T,T=P;break t}}else if(H.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===pn&&om(R)===H.type){n(T,H.sibling),P=a(H,k.props),P.ref=Xr(T,H,k),P.return=T,T=P;break t}n(T,H);break}else i(T,H);H=H.sibling}k.type===$s?(P=fs(k.props.children,T.mode,C,k.key),P.return=T,T=P):(C=hl(k.type,k.key,k.props,null,T.mode,C),C.ref=Xr(T,P,k),C.return=T,T=C)}return c(T);case Hs:t:{for(H=k.key;P!==null;){if(P.key===H)if(P.tag===4&&P.stateNode.containerInfo===k.containerInfo&&P.stateNode.implementation===k.implementation){n(T,P.sibling),P=a(P,k.children||[]),P.return=T,T=P;break t}else{n(T,P);break}else i(T,P);P=P.sibling}P=qc(k,T.mode,C),P.return=T,T=P}return c(T);case pn:return H=k._init,L(T,P,H(k._payload),C)}if(to(k))return A(T,P,k,C);if(jr(k))return M(T,P,k,C);Ha(T,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,P!==null&&P.tag===6?(n(T,P.sibling),P=a(P,k),P.return=T,T=P):(n(T,P),P=Kc(k,T.mode,C),P.return=T,T=P),c(T)):n(T,P)}return L}var mr=Cy(!0),by=Cy(!1),$o={},ki=Nn($o),ko=Nn($o),Io=Nn($o);function cs(t){if(t===$o)throw Error(G(174));return t}function rf(t,i){switch(kt(Io,i),kt(ko,t),kt(ki,$o),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:bh(null,"");break;default:t=t===8?i.parentNode:i,i=t.namespaceURI||null,t=t.tagName,i=bh(i,t)}Mt(ki),kt(ki,i)}function _r(){Mt(ki),Mt(ko),Mt(Io)}function Sy(t){cs(Io.current);var i=cs(ki.current),n=bh(i,t.type);i!==n&&(kt(ko,t),kt(ki,n))}function of(t){ko.current===t&&(Mt(ki),Mt(ko))}var zt=Nn(0);function Ml(t){for(var i=t;i!==null;){if(i.tag===13){var n=i.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Wc=[];function af(){for(var t=0;t<Wc.length;t++)Wc[t]._workInProgressVersionPrimary=null;Wc.length=0}var ol=tn.ReactCurrentDispatcher,Gc=tn.ReactCurrentBatchConfig,ms=0,Vt=null,qt=null,ne=null,Fl=!1,uo=!1,Ro=0,KC=0;function fe(){throw Error(G(321))}function lf(t,i){if(i===null)return!1;for(var n=0;n<i.length&&n<t.length;n++)if(!xi(t[n],i[n]))return!1;return!0}function uf(t,i,n,r,a,l){if(ms=l,Vt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ol.current=t===null||t.memoizedState===null?eb:ib,t=n(r,a),uo){l=0;do{if(uo=!1,Ro=0,25<=l)throw Error(G(301));l+=1,ne=qt=null,i.updateQueue=null,ol.current=nb,t=n(r,a)}while(uo)}if(ol.current=Ll,i=qt!==null&&qt.next!==null,ms=0,ne=qt=Vt=null,Fl=!1,i)throw Error(G(300));return t}function cf(){var t=Ro!==0;return Ro=0,t}function Si(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ne===null?Vt.memoizedState=ne=t:ne=ne.next=t,ne}function oi(){if(qt===null){var t=Vt.alternate;t=t!==null?t.memoizedState:null}else t=qt.next;var i=ne===null?Vt.memoizedState:ne.next;if(i!==null)ne=i,qt=t;else{if(t===null)throw Error(G(310));qt=t,t={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},ne===null?Vt.memoizedState=ne=t:ne=ne.next=t}return ne}function Do(t,i){return typeof i=="function"?i(t):i}function Xc(t){var i=oi(),n=i.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=qt,a=r.baseQueue,l=n.pending;if(l!==null){if(a!==null){var c=a.next;a.next=l.next,l.next=c}r.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,r=r.baseState;var f=c=null,p=null,m=l;do{var v=m.lane;if((ms&v)===v)p!==null&&(p=p.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),r=m.hasEagerState?m.eagerState:t(r,m.action);else{var w={lane:v,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};p===null?(f=p=w,c=r):p=p.next=w,Vt.lanes|=v,_s|=v}m=m.next}while(m!==null&&m!==l);p===null?c=r:p.next=f,xi(r,i.memoizedState)||(De=!0),i.memoizedState=r,i.baseState=c,i.baseQueue=p,n.lastRenderedState=r}if(t=n.interleaved,t!==null){a=t;do l=a.lane,Vt.lanes|=l,_s|=l,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[i.memoizedState,n.dispatch]}function Yc(t){var i=oi(),n=i.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,a=n.pending,l=i.memoizedState;if(a!==null){n.pending=null;var c=a=a.next;do l=t(l,c.action),c=c.next;while(c!==a);xi(l,i.memoizedState)||(De=!0),i.memoizedState=l,i.baseQueue===null&&(i.baseState=l),n.lastRenderedState=l}return[l,r]}function Py(){}function Ey(t,i){var n=Vt,r=oi(),a=i(),l=!xi(r.memoizedState,a);if(l&&(r.memoizedState=a,De=!0),r=r.queue,hf(ky.bind(null,n,r,t),[t]),r.getSnapshot!==i||l||ne!==null&&ne.memoizedState.tag&1){if(n.flags|=2048,Mo(9,Ay.bind(null,n,r,a,i),void 0,null),se===null)throw Error(G(349));ms&30||Ty(n,i,a)}return a}function Ty(t,i,n){t.flags|=16384,t={getSnapshot:i,value:n},i=Vt.updateQueue,i===null?(i={lastEffect:null,stores:null},Vt.updateQueue=i,i.stores=[t]):(n=i.stores,n===null?i.stores=[t]:n.push(t))}function Ay(t,i,n,r){i.value=n,i.getSnapshot=r,Iy(i)&&Ry(t)}function ky(t,i,n){return n(function(){Iy(i)&&Ry(t)})}function Iy(t){var i=t.getSnapshot;t=t.value;try{var n=i();return!xi(t,n)}catch{return!0}}function Ry(t){var i=Qi(t,1);i!==null&&yi(i,t,1,-1)}function am(t){var i=Si();return typeof t=="function"&&(t=t()),i.memoizedState=i.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Do,lastRenderedState:t},i.queue=t,t=t.dispatch=tb.bind(null,Vt,t),[i.memoizedState,t]}function Mo(t,i,n,r){return t={tag:t,create:i,destroy:n,deps:r,next:null},i=Vt.updateQueue,i===null?(i={lastEffect:null,stores:null},Vt.updateQueue=i,i.lastEffect=t.next=t):(n=i.lastEffect,n===null?i.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,i.lastEffect=t)),t}function Dy(){return oi().memoizedState}function al(t,i,n,r){var a=Si();Vt.flags|=t,a.memoizedState=Mo(1|i,n,void 0,r===void 0?null:r)}function du(t,i,n,r){var a=oi();r=r===void 0?null:r;var l=void 0;if(qt!==null){var c=qt.memoizedState;if(l=c.destroy,r!==null&&lf(r,c.deps)){a.memoizedState=Mo(i,n,l,r);return}}Vt.flags|=t,a.memoizedState=Mo(1|i,n,l,r)}function lm(t,i){return al(8390656,8,t,i)}function hf(t,i){return du(2048,8,t,i)}function My(t,i){return du(4,2,t,i)}function Fy(t,i){return du(4,4,t,i)}function Ly(t,i){if(typeof i=="function")return t=t(),i(t),function(){i(null)};if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function By(t,i,n){return n=n!=null?n.concat([t]):null,du(4,4,Ly.bind(null,i,t),n)}function df(){}function Oy(t,i){var n=oi();i=i===void 0?null:i;var r=n.memoizedState;return r!==null&&i!==null&&lf(i,r[1])?r[0]:(n.memoizedState=[t,i],t)}function Ny(t,i){var n=oi();i=i===void 0?null:i;var r=n.memoizedState;return r!==null&&i!==null&&lf(i,r[1])?r[0]:(t=t(),n.memoizedState=[t,i],t)}function zy(t,i,n){return ms&21?(xi(n,i)||(n=jv(),Vt.lanes|=n,_s|=n,t.baseState=!0),i):(t.baseState&&(t.baseState=!1,De=!0),t.memoizedState=n)}function qC(t,i){var n=Tt;Tt=n!==0&&4>n?n:4,t(!0);var r=Gc.transition;Gc.transition={};try{t(!1),i()}finally{Tt=n,Gc.transition=r}}function Uy(){return oi().memoizedState}function JC(t,i,n){var r=kn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Vy(t))jy(i,n);else if(n=vy(t,i,n,r),n!==null){var a=Pe();yi(n,t,r,a),Hy(n,i,r)}}function tb(t,i,n){var r=kn(t),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vy(t))jy(i,a);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=i.lastRenderedReducer,l!==null))try{var c=i.lastRenderedState,f=l(c,n);if(a.hasEagerState=!0,a.eagerState=f,xi(f,c)){var p=i.interleaved;p===null?(a.next=a,nf(i)):(a.next=p.next,p.next=a),i.interleaved=a;return}}catch{}finally{}n=vy(t,i,a,r),n!==null&&(a=Pe(),yi(n,t,r,a),Hy(n,i,r))}}function Vy(t){var i=t.alternate;return t===Vt||i!==null&&i===Vt}function jy(t,i){uo=Fl=!0;var n=t.pending;n===null?i.next=i:(i.next=n.next,n.next=i),t.pending=i}function Hy(t,i,n){if(n&4194240){var r=i.lanes;r&=t.pendingLanes,n|=r,i.lanes=n,jd(t,n)}}var Ll={readContext:ri,useCallback:fe,useContext:fe,useEffect:fe,useImperativeHandle:fe,useInsertionEffect:fe,useLayoutEffect:fe,useMemo:fe,useReducer:fe,useRef:fe,useState:fe,useDebugValue:fe,useDeferredValue:fe,useTransition:fe,useMutableSource:fe,useSyncExternalStore:fe,useId:fe,unstable_isNewReconciler:!1},eb={readContext:ri,useCallback:function(t,i){return Si().memoizedState=[t,i===void 0?null:i],t},useContext:ri,useEffect:lm,useImperativeHandle:function(t,i,n){return n=n!=null?n.concat([t]):null,al(4194308,4,Ly.bind(null,i,t),n)},useLayoutEffect:function(t,i){return al(4194308,4,t,i)},useInsertionEffect:function(t,i){return al(4,2,t,i)},useMemo:function(t,i){var n=Si();return i=i===void 0?null:i,t=t(),n.memoizedState=[t,i],t},useReducer:function(t,i,n){var r=Si();return i=n!==void 0?n(i):i,r.memoizedState=r.baseState=i,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},r.queue=t,t=t.dispatch=JC.bind(null,Vt,t),[r.memoizedState,t]},useRef:function(t){var i=Si();return t={current:t},i.memoizedState=t},useState:am,useDebugValue:df,useDeferredValue:function(t){return Si().memoizedState=t},useTransition:function(){var t=am(!1),i=t[0];return t=qC.bind(null,t[1]),Si().memoizedState=t,[i,t]},useMutableSource:function(){},useSyncExternalStore:function(t,i,n){var r=Vt,a=Si();if(Lt){if(n===void 0)throw Error(G(407));n=n()}else{if(n=i(),se===null)throw Error(G(349));ms&30||Ty(r,i,n)}a.memoizedState=n;var l={value:n,getSnapshot:i};return a.queue=l,lm(ky.bind(null,r,l,t),[t]),r.flags|=2048,Mo(9,Ay.bind(null,r,l,n,i),void 0,null),n},useId:function(){var t=Si(),i=se.identifierPrefix;if(Lt){var n=Hi,r=ji;n=(r&~(1<<32-vi(r)-1)).toString(32)+n,i=":"+i+"R"+n,n=Ro++,0<n&&(i+="H"+n.toString(32)),i+=":"}else n=KC++,i=":"+i+"r"+n.toString(32)+":";return t.memoizedState=i},unstable_isNewReconciler:!1},ib={readContext:ri,useCallback:Oy,useContext:ri,useEffect:hf,useImperativeHandle:By,useInsertionEffect:My,useLayoutEffect:Fy,useMemo:Ny,useReducer:Xc,useRef:Dy,useState:function(){return Xc(Do)},useDebugValue:df,useDeferredValue:function(t){var i=oi();return zy(i,qt.memoizedState,t)},useTransition:function(){var t=Xc(Do)[0],i=oi().memoizedState;return[t,i]},useMutableSource:Py,useSyncExternalStore:Ey,useId:Uy,unstable_isNewReconciler:!1},nb={readContext:ri,useCallback:Oy,useContext:ri,useEffect:hf,useImperativeHandle:By,useInsertionEffect:My,useLayoutEffect:Fy,useMemo:Ny,useReducer:Yc,useRef:Dy,useState:function(){return Yc(Do)},useDebugValue:df,useDeferredValue:function(t){var i=oi();return qt===null?i.memoizedState=t:zy(i,qt.memoizedState,t)},useTransition:function(){var t=Yc(Do)[0],i=oi().memoizedState;return[t,i]},useMutableSource:Py,useSyncExternalStore:Ey,useId:Uy,unstable_isNewReconciler:!1};function vr(t,i){try{var n="",r=i;do n+=R1(r),r=r.return;while(r);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:i,stack:a,digest:null}}function Zc(t,i,n){return{value:t,source:null,stack:n??null,digest:i??null}}function Gh(t,i){try{console.error(i.value)}catch(n){setTimeout(function(){throw n})}}var sb=typeof WeakMap=="function"?WeakMap:Map;function $y(t,i,n){n=Wi(-1,n),n.tag=3,n.payload={element:null};var r=i.value;return n.callback=function(){Ol||(Ol=!0,id=r),Gh(t,i)},n}function Wy(t,i,n){n=Wi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var a=i.value;n.payload=function(){return r(a)},n.callback=function(){Gh(t,i)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Gh(t,i),typeof r!="function"&&(An===null?An=new Set([this]):An.add(this));var c=i.stack;this.componentDidCatch(i.value,{componentStack:c!==null?c:""})}),n}function um(t,i,n){var r=t.pingCache;if(r===null){r=t.pingCache=new sb;var a=new Set;r.set(i,a)}else a=r.get(i),a===void 0&&(a=new Set,r.set(i,a));a.has(n)||(a.add(n),t=vb.bind(null,t,i,n),i.then(t,t))}function cm(t){do{var i;if((i=t.tag===13)&&(i=t.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return t;t=t.return}while(t!==null);return null}function hm(t,i,n,r,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===i?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(i=Wi(-1,1),i.tag=2,Tn(n,i,1))),n.lanes|=1),t)}var rb=tn.ReactCurrentOwner,De=!1;function Se(t,i,n,r){i.child=t===null?by(i,null,n,r):mr(i,t.child,n,r)}function dm(t,i,n,r,a){n=n.render;var l=i.ref;return ur(i,a),r=uf(t,i,n,r,l,a),n=cf(),t!==null&&!De?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a,Ki(t,i,a)):(Lt&&n&&Qd(i),i.flags|=1,Se(t,i,r,a),i.child)}function fm(t,i,n,r,a){if(t===null){var l=n.type;return typeof l=="function"&&!xf(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(i.tag=15,i.type=l,Gy(t,i,l,r,a)):(t=hl(n.type,null,r,i,i.mode,a),t.ref=i.ref,t.return=i,i.child=t)}if(l=t.child,!(t.lanes&a)){var c=l.memoizedProps;if(n=n.compare,n=n!==null?n:Po,n(c,r)&&t.ref===i.ref)return Ki(t,i,a)}return i.flags|=1,t=In(l,r),t.ref=i.ref,t.return=i,i.child=t}function Gy(t,i,n,r,a){if(t!==null){var l=t.memoizedProps;if(Po(l,r)&&t.ref===i.ref)if(De=!1,i.pendingProps=r=l,(t.lanes&a)!==0)t.flags&131072&&(De=!0);else return i.lanes=t.lanes,Ki(t,i,a)}return Xh(t,i,n,r,a)}function Xy(t,i,n){var r=i.pendingProps,a=r.children,l=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(tr,je),je|=n;else{if(!(n&1073741824))return t=l!==null?l.baseLanes|n:n,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:t,cachePool:null,transitions:null},i.updateQueue=null,kt(tr,je),je|=t,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,kt(tr,je),je|=r}else l!==null?(r=l.baseLanes|n,i.memoizedState=null):r=n,kt(tr,je),je|=r;return Se(t,i,a,n),i.child}function Yy(t,i){var n=i.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(i.flags|=512,i.flags|=2097152)}function Xh(t,i,n,r,a){var l=Fe(n)?ps:me.current;return l=pr(i,l),ur(i,a),n=uf(t,i,n,r,l,a),r=cf(),t!==null&&!De?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a,Ki(t,i,a)):(Lt&&r&&Qd(i),i.flags|=1,Se(t,i,n,a),i.child)}function pm(t,i,n,r,a){if(Fe(n)){var l=!0;Tl(i)}else l=!1;if(ur(i,a),i.stateNode===null)ll(t,i),wy(i,n,r),Wh(i,n,r,a),r=!0;else if(t===null){var c=i.stateNode,f=i.memoizedProps;c.props=f;var p=c.context,m=n.contextType;typeof m=="object"&&m!==null?m=ri(m):(m=Fe(n)?ps:me.current,m=pr(i,m));var v=n.getDerivedStateFromProps,w=typeof v=="function"||typeof c.getSnapshotBeforeUpdate=="function";w||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(f!==r||p!==m)&&rm(i,c,r,m),gn=!1;var x=i.memoizedState;c.state=x,Dl(i,r,c,a),p=i.memoizedState,f!==r||x!==p||Me.current||gn?(typeof v=="function"&&($h(i,n,v,r),p=i.memoizedState),(f=gn||sm(i,n,f,r,x,p,m))?(w||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(i.flags|=4194308)):(typeof c.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=r,i.memoizedState=p),c.props=r,c.state=p,c.context=m,r=f):(typeof c.componentDidMount=="function"&&(i.flags|=4194308),r=!1)}else{c=i.stateNode,yy(t,i),f=i.memoizedProps,m=i.type===i.elementType?f:gi(i.type,f),c.props=m,w=i.pendingProps,x=c.context,p=n.contextType,typeof p=="object"&&p!==null?p=ri(p):(p=Fe(n)?ps:me.current,p=pr(i,p));var S=n.getDerivedStateFromProps;(v=typeof S=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(f!==w||x!==p)&&rm(i,c,r,p),gn=!1,x=i.memoizedState,c.state=x,Dl(i,r,c,a);var A=i.memoizedState;f!==w||x!==A||Me.current||gn?(typeof S=="function"&&($h(i,n,S,r),A=i.memoizedState),(m=gn||sm(i,n,m,r,x,A,p)||!1)?(v||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(r,A,p),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(r,A,p)),typeof c.componentDidUpdate=="function"&&(i.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof c.componentDidUpdate!="function"||f===t.memoizedProps&&x===t.memoizedState||(i.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&x===t.memoizedState||(i.flags|=1024),i.memoizedProps=r,i.memoizedState=A),c.props=r,c.state=A,c.context=p,r=m):(typeof c.componentDidUpdate!="function"||f===t.memoizedProps&&x===t.memoizedState||(i.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&x===t.memoizedState||(i.flags|=1024),r=!1)}return Yh(t,i,n,r,l,a)}function Yh(t,i,n,r,a,l){Yy(t,i);var c=(i.flags&128)!==0;if(!r&&!c)return a&&Jg(i,n,!1),Ki(t,i,l);r=i.stateNode,rb.current=i;var f=c&&typeof n.getDerivedStateFromError!="function"?null:r.render();return i.flags|=1,t!==null&&c?(i.child=mr(i,t.child,null,l),i.child=mr(i,null,f,l)):Se(t,i,f,l),i.memoizedState=r.state,a&&Jg(i,n,!0),i.child}function Zy(t){var i=t.stateNode;i.pendingContext?qg(t,i.pendingContext,i.pendingContext!==i.context):i.context&&qg(t,i.context,!1),rf(t,i.containerInfo)}function gm(t,i,n,r,a){return gr(),qd(a),i.flags|=256,Se(t,i,n,r),i.child}var Zh={dehydrated:null,treeContext:null,retryLane:0};function Qh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Qy(t,i,n){var r=i.pendingProps,a=zt.current,l=!1,c=(i.flags&128)!==0,f;if((f=c)||(f=t!==null&&t.memoizedState===null?!1:(a&2)!==0),f?(l=!0,i.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),kt(zt,a&1),t===null)return jh(i),t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(i.mode&1?t.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(c=r.children,t=r.fallback,l?(r=i.mode,l=i.child,c={mode:"hidden",children:c},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=c):l=gu(c,r,0,null),t=fs(t,r,n,null),l.return=i,t.return=i,l.sibling=t,i.child=l,i.child.memoizedState=Qh(n),i.memoizedState=Zh,t):ff(i,c));if(a=t.memoizedState,a!==null&&(f=a.dehydrated,f!==null))return ob(t,i,c,r,f,a,n);if(l){l=r.fallback,c=i.mode,a=t.child,f=a.sibling;var p={mode:"hidden",children:r.children};return!(c&1)&&i.child!==a?(r=i.child,r.childLanes=0,r.pendingProps=p,i.deletions=null):(r=In(a,p),r.subtreeFlags=a.subtreeFlags&14680064),f!==null?l=In(f,l):(l=fs(l,c,n,null),l.flags|=2),l.return=i,r.return=i,r.sibling=l,i.child=r,r=l,l=i.child,c=t.child.memoizedState,c=c===null?Qh(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},l.memoizedState=c,l.childLanes=t.childLanes&~n,i.memoizedState=Zh,r}return l=t.child,t=l.sibling,r=In(l,{mode:"visible",children:r.children}),!(i.mode&1)&&(r.lanes=n),r.return=i,r.sibling=null,t!==null&&(n=i.deletions,n===null?(i.deletions=[t],i.flags|=16):n.push(t)),i.child=r,i.memoizedState=null,r}function ff(t,i){return i=gu({mode:"visible",children:i},t.mode,0,null),i.return=t,t.child=i}function $a(t,i,n,r){return r!==null&&qd(r),mr(i,t.child,null,n),t=ff(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function ob(t,i,n,r,a,l,c){if(n)return i.flags&256?(i.flags&=-257,r=Zc(Error(G(422))),$a(t,i,c,r)):i.memoizedState!==null?(i.child=t.child,i.flags|=128,null):(l=r.fallback,a=i.mode,r=gu({mode:"visible",children:r.children},a,0,null),l=fs(l,a,c,null),l.flags|=2,r.return=i,l.return=i,r.sibling=l,i.child=r,i.mode&1&&mr(i,t.child,null,c),i.child.memoizedState=Qh(c),i.memoizedState=Zh,l);if(!(i.mode&1))return $a(t,i,c,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var f=r.dgst;return r=f,l=Error(G(419)),r=Zc(l,r,void 0),$a(t,i,c,r)}if(f=(c&t.childLanes)!==0,De||f){if(r=se,r!==null){switch(c&-c){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|c)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,Qi(t,a),yi(r,t,a,-1))}return yf(),r=Zc(Error(G(421))),$a(t,i,c,r)}return a.data==="$?"?(i.flags|=128,i.child=t.child,i=yb.bind(null,t),a._reactRetry=i,null):(t=l.treeContext,He=En(a.nextSibling),We=i,Lt=!0,_i=null,t!==null&&(ei[ii++]=ji,ei[ii++]=Hi,ei[ii++]=gs,ji=t.id,Hi=t.overflow,gs=i),i=ff(i,r.children),i.flags|=4096,i)}function mm(t,i,n){t.lanes|=i;var r=t.alternate;r!==null&&(r.lanes|=i),Hh(t.return,i,n)}function Qc(t,i,n,r,a){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(l.isBackwards=i,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=a)}function Ky(t,i,n){var r=i.pendingProps,a=r.revealOrder,l=r.tail;if(Se(t,i,r.children,n),r=zt.current,r&2)r=r&1|2,i.flags|=128;else{if(t!==null&&t.flags&128)t:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mm(t,n,i);else if(t.tag===19)mm(t,n,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break t;for(;t.sibling===null;){if(t.return===null||t.return===i)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(kt(zt,r),!(i.mode&1))i.memoizedState=null;else switch(a){case"forwards":for(n=i.child,a=null;n!==null;)t=n.alternate,t!==null&&Ml(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=i.child,i.child=null):(a=n.sibling,n.sibling=null),Qc(i,!1,a,n,l);break;case"backwards":for(n=null,a=i.child,i.child=null;a!==null;){if(t=a.alternate,t!==null&&Ml(t)===null){i.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}Qc(i,!0,n,null,l);break;case"together":Qc(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ll(t,i){!(i.mode&1)&&t!==null&&(t.alternate=null,i.alternate=null,i.flags|=2)}function Ki(t,i,n){if(t!==null&&(i.dependencies=t.dependencies),_s|=i.lanes,!(n&i.childLanes))return null;if(t!==null&&i.child!==t.child)throw Error(G(153));if(i.child!==null){for(t=i.child,n=In(t,t.pendingProps),i.child=n,n.return=i;t.sibling!==null;)t=t.sibling,n=n.sibling=In(t,t.pendingProps),n.return=i;n.sibling=null}return i.child}function ab(t,i,n){switch(i.tag){case 3:Zy(i),gr();break;case 5:Sy(i);break;case 1:Fe(i.type)&&Tl(i);break;case 4:rf(i,i.stateNode.containerInfo);break;case 10:var r=i.type._context,a=i.memoizedProps.value;kt(Il,r._currentValue),r._currentValue=a;break;case 13:if(r=i.memoizedState,r!==null)return r.dehydrated!==null?(kt(zt,zt.current&1),i.flags|=128,null):n&i.child.childLanes?Qy(t,i,n):(kt(zt,zt.current&1),t=Ki(t,i,n),t!==null?t.sibling:null);kt(zt,zt.current&1);break;case 19:if(r=(n&i.childLanes)!==0,t.flags&128){if(r)return Ky(t,i,n);i.flags|=128}if(a=i.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),kt(zt,zt.current),r)break;return null;case 22:case 23:return i.lanes=0,Xy(t,i,n)}return Ki(t,i,n)}var qy,Kh,Jy,t0;qy=function(t,i){for(var n=i.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break;for(;n.sibling===null;){if(n.return===null||n.return===i)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kh=function(){};Jy=function(t,i,n,r){var a=t.memoizedProps;if(a!==r){t=i.stateNode,cs(ki.current);var l=null;switch(n){case"input":a=yh(t,a),r=yh(t,r),l=[];break;case"select":a=jt({},a,{value:void 0}),r=jt({},r,{value:void 0}),l=[];break;case"textarea":a=Ch(t,a),r=Ch(t,r),l=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pl)}Sh(n,r);var c;n=null;for(m in a)if(!r.hasOwnProperty(m)&&a.hasOwnProperty(m)&&a[m]!=null)if(m==="style"){var f=a[m];for(c in f)f.hasOwnProperty(c)&&(n||(n={}),n[c]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(vo.hasOwnProperty(m)?l||(l=[]):(l=l||[]).push(m,null));for(m in r){var p=r[m];if(f=a!=null?a[m]:void 0,r.hasOwnProperty(m)&&p!==f&&(p!=null||f!=null))if(m==="style")if(f){for(c in f)!f.hasOwnProperty(c)||p&&p.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in p)p.hasOwnProperty(c)&&f[c]!==p[c]&&(n||(n={}),n[c]=p[c])}else n||(l||(l=[]),l.push(m,n)),n=p;else m==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,f=f?f.__html:void 0,p!=null&&f!==p&&(l=l||[]).push(m,p)):m==="children"?typeof p!="string"&&typeof p!="number"||(l=l||[]).push(m,""+p):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(vo.hasOwnProperty(m)?(p!=null&&m==="onScroll"&&Dt("scroll",t),l||f===p||(l=[])):(l=l||[]).push(m,p))}n&&(l=l||[]).push("style",n);var m=l;(i.updateQueue=m)&&(i.flags|=4)}};t0=function(t,i,n,r){n!==r&&(i.flags|=4)};function Yr(t,i){if(!Lt)switch(t.tailMode){case"hidden":i=t.tail;for(var n=null;i!==null;)i.alternate!==null&&(n=i),i=i.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pe(t){var i=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(i)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=r,t.childLanes=n,i}function lb(t,i,n){var r=i.pendingProps;switch(Kd(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pe(i),null;case 1:return Fe(i.type)&&El(),pe(i),null;case 3:return r=i.stateNode,_r(),Mt(Me),Mt(me),af(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ja(i)?i.flags|=4:t===null||t.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,_i!==null&&(rd(_i),_i=null))),Kh(t,i),pe(i),null;case 5:of(i);var a=cs(Io.current);if(n=i.type,t!==null&&i.stateNode!=null)Jy(t,i,n,r,a),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!r){if(i.stateNode===null)throw Error(G(166));return pe(i),null}if(t=cs(ki.current),ja(i)){r=i.stateNode,n=i.type;var l=i.memoizedProps;switch(r[Ei]=i,r[Ao]=l,t=(i.mode&1)!==0,n){case"dialog":Dt("cancel",r),Dt("close",r);break;case"iframe":case"object":case"embed":Dt("load",r);break;case"video":case"audio":for(a=0;a<io.length;a++)Dt(io[a],r);break;case"source":Dt("error",r);break;case"img":case"image":case"link":Dt("error",r),Dt("load",r);break;case"details":Dt("toggle",r);break;case"input":Pg(r,l),Dt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Dt("invalid",r);break;case"textarea":Tg(r,l),Dt("invalid",r)}Sh(n,l),a=null;for(var c in l)if(l.hasOwnProperty(c)){var f=l[c];c==="children"?typeof f=="string"?r.textContent!==f&&(l.suppressHydrationWarning!==!0&&Va(r.textContent,f,t),a=["children",f]):typeof f=="number"&&r.textContent!==""+f&&(l.suppressHydrationWarning!==!0&&Va(r.textContent,f,t),a=["children",""+f]):vo.hasOwnProperty(c)&&f!=null&&c==="onScroll"&&Dt("scroll",r)}switch(n){case"input":Ma(r),Eg(r,l,!0);break;case"textarea":Ma(r),Ag(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Pl)}r=a,i.updateQueue=r,r!==null&&(i.flags|=4)}else{c=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Tv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=c.createElement(n,{is:r.is}):(t=c.createElement(n),n==="select"&&(c=t,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):t=c.createElementNS(t,n),t[Ei]=i,t[Ao]=r,qy(t,i,!1,!1),i.stateNode=t;t:{switch(c=Ph(n,r),n){case"dialog":Dt("cancel",t),Dt("close",t),a=r;break;case"iframe":case"object":case"embed":Dt("load",t),a=r;break;case"video":case"audio":for(a=0;a<io.length;a++)Dt(io[a],t);a=r;break;case"source":Dt("error",t),a=r;break;case"img":case"image":case"link":Dt("error",t),Dt("load",t),a=r;break;case"details":Dt("toggle",t),a=r;break;case"input":Pg(t,r),a=yh(t,r),Dt("invalid",t);break;case"option":a=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},a=jt({},r,{value:void 0}),Dt("invalid",t);break;case"textarea":Tg(t,r),a=Ch(t,r),Dt("invalid",t);break;default:a=r}Sh(n,a),f=a;for(l in f)if(f.hasOwnProperty(l)){var p=f[l];l==="style"?Iv(t,p):l==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&Av(t,p)):l==="children"?typeof p=="string"?(n!=="textarea"||p!=="")&&yo(t,p):typeof p=="number"&&yo(t,""+p):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(vo.hasOwnProperty(l)?p!=null&&l==="onScroll"&&Dt("scroll",t):p!=null&&Bd(t,l,p,c))}switch(n){case"input":Ma(t),Eg(t,r,!1);break;case"textarea":Ma(t),Ag(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Mn(r.value));break;case"select":t.multiple=!!r.multiple,l=r.value,l!=null?rr(t,!!r.multiple,l,!1):r.defaultValue!=null&&rr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Pl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return pe(i),null;case 6:if(t&&i.stateNode!=null)t0(t,i,t.memoizedProps,r);else{if(typeof r!="string"&&i.stateNode===null)throw Error(G(166));if(n=cs(Io.current),cs(ki.current),ja(i)){if(r=i.stateNode,n=i.memoizedProps,r[Ei]=i,(l=r.nodeValue!==n)&&(t=We,t!==null))switch(t.tag){case 3:Va(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Va(r.nodeValue,n,(t.mode&1)!==0)}l&&(i.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ei]=i,i.stateNode=r}return pe(i),null;case 13:if(Mt(zt),r=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Lt&&He!==null&&i.mode&1&&!(i.flags&128))_y(),gr(),i.flags|=98560,l=!1;else if(l=ja(i),r!==null&&r.dehydrated!==null){if(t===null){if(!l)throw Error(G(318));if(l=i.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(G(317));l[Ei]=i}else gr(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;pe(i),l=!1}else _i!==null&&(rd(_i),_i=null),l=!0;if(!l)return i.flags&65536?i:null}return i.flags&128?(i.lanes=n,i):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(i.child.flags|=8192,i.mode&1&&(t===null||zt.current&1?te===0&&(te=3):yf())),i.updateQueue!==null&&(i.flags|=4),pe(i),null);case 4:return _r(),Kh(t,i),t===null&&Eo(i.stateNode.containerInfo),pe(i),null;case 10:return ef(i.type._context),pe(i),null;case 17:return Fe(i.type)&&El(),pe(i),null;case 19:if(Mt(zt),l=i.memoizedState,l===null)return pe(i),null;if(r=(i.flags&128)!==0,c=l.rendering,c===null)if(r)Yr(l,!1);else{if(te!==0||t!==null&&t.flags&128)for(t=i.child;t!==null;){if(c=Ml(t),c!==null){for(i.flags|=128,Yr(l,!1),r=c.updateQueue,r!==null&&(i.updateQueue=r,i.flags|=4),i.subtreeFlags=0,r=n,n=i.child;n!==null;)l=n,t=r,l.flags&=14680066,c=l.alternate,c===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=c.childLanes,l.lanes=c.lanes,l.child=c.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=c.memoizedProps,l.memoizedState=c.memoizedState,l.updateQueue=c.updateQueue,l.type=c.type,t=c.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return kt(zt,zt.current&1|2),i.child}t=t.sibling}l.tail!==null&&Xt()>yr&&(i.flags|=128,r=!0,Yr(l,!1),i.lanes=4194304)}else{if(!r)if(t=Ml(c),t!==null){if(i.flags|=128,r=!0,n=t.updateQueue,n!==null&&(i.updateQueue=n,i.flags|=4),Yr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!c.alternate&&!Lt)return pe(i),null}else 2*Xt()-l.renderingStartTime>yr&&n!==1073741824&&(i.flags|=128,r=!0,Yr(l,!1),i.lanes=4194304);l.isBackwards?(c.sibling=i.child,i.child=c):(n=l.last,n!==null?n.sibling=c:i.child=c,l.last=c)}return l.tail!==null?(i=l.tail,l.rendering=i,l.tail=i.sibling,l.renderingStartTime=Xt(),i.sibling=null,n=zt.current,kt(zt,r?n&1|2:n&1),i):(pe(i),null);case 22:case 23:return vf(),r=i.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(i.flags|=8192),r&&i.mode&1?je&1073741824&&(pe(i),i.subtreeFlags&6&&(i.flags|=8192)):pe(i),null;case 24:return null;case 25:return null}throw Error(G(156,i.tag))}function ub(t,i){switch(Kd(i),i.tag){case 1:return Fe(i.type)&&El(),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return _r(),Mt(Me),Mt(me),af(),t=i.flags,t&65536&&!(t&128)?(i.flags=t&-65537|128,i):null;case 5:return of(i),null;case 13:if(Mt(zt),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(G(340));gr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Mt(zt),null;case 4:return _r(),null;case 10:return ef(i.type._context),null;case 22:case 23:return vf(),null;case 24:return null;default:return null}}var Wa=!1,ge=!1,cb=typeof WeakSet=="function"?WeakSet:Set,J=null;function Js(t,i){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Wt(t,i,r)}else n.current=null}function qh(t,i,n){try{n()}catch(r){Wt(t,i,r)}}var _m=!1;function hb(t,i){if(Lh=Cl,t=sy(),Zd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break t}var c=0,f=-1,p=-1,m=0,v=0,w=t,x=null;e:for(;;){for(var S;w!==n||a!==0&&w.nodeType!==3||(f=c+a),w!==l||r!==0&&w.nodeType!==3||(p=c+r),w.nodeType===3&&(c+=w.nodeValue.length),(S=w.firstChild)!==null;)x=w,w=S;for(;;){if(w===t)break e;if(x===n&&++m===a&&(f=c),x===l&&++v===r&&(p=c),(S=w.nextSibling)!==null)break;w=x,x=w.parentNode}w=S}n=f===-1||p===-1?null:{start:f,end:p}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bh={focusedElem:t,selectionRange:n},Cl=!1,J=i;J!==null;)if(i=J,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,J=t;else for(;J!==null;){i=J;try{var A=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var M=A.memoizedProps,L=A.memoizedState,T=i.stateNode,P=T.getSnapshotBeforeUpdate(i.elementType===i.type?M:gi(i.type,M),L);T.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var k=i.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(C){Wt(i,i.return,C)}if(t=i.sibling,t!==null){t.return=i.return,J=t;break}J=i.return}return A=_m,_m=!1,A}function co(t,i,n){var r=i.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var l=a.destroy;a.destroy=void 0,l!==void 0&&qh(i,n,l)}a=a.next}while(a!==r)}}function fu(t,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==i)}}function Jh(t){var i=t.ref;if(i!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof i=="function"?i(t):i.current=t}}function e0(t){var i=t.alternate;i!==null&&(t.alternate=null,e0(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&(delete i[Ei],delete i[Ao],delete i[zh],delete i[XC],delete i[YC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function i0(t){return t.tag===5||t.tag===3||t.tag===4}function vm(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||i0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function td(t,i,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,i?n.nodeType===8?n.parentNode.insertBefore(t,i):n.insertBefore(t,i):(n.nodeType===8?(i=n.parentNode,i.insertBefore(t,n)):(i=n,i.appendChild(t)),n=n._reactRootContainer,n!=null||i.onclick!==null||(i.onclick=Pl));else if(r!==4&&(t=t.child,t!==null))for(td(t,i,n),t=t.sibling;t!==null;)td(t,i,n),t=t.sibling}function ed(t,i,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,i?n.insertBefore(t,i):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ed(t,i,n),t=t.sibling;t!==null;)ed(t,i,n),t=t.sibling}var ue=null,mi=!1;function dn(t,i,n){for(n=n.child;n!==null;)n0(t,i,n),n=n.sibling}function n0(t,i,n){if(Ai&&typeof Ai.onCommitFiberUnmount=="function")try{Ai.onCommitFiberUnmount(ru,n)}catch{}switch(n.tag){case 5:ge||Js(n,i);case 6:var r=ue,a=mi;ue=null,dn(t,i,n),ue=r,mi=a,ue!==null&&(mi?(t=ue,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ue.removeChild(n.stateNode));break;case 18:ue!==null&&(mi?(t=ue,n=n.stateNode,t.nodeType===8?Hc(t.parentNode,n):t.nodeType===1&&Hc(t,n),bo(t)):Hc(ue,n.stateNode));break;case 4:r=ue,a=mi,ue=n.stateNode.containerInfo,mi=!0,dn(t,i,n),ue=r,mi=a;break;case 0:case 11:case 14:case 15:if(!ge&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var l=a,c=l.destroy;l=l.tag,c!==void 0&&(l&2||l&4)&&qh(n,i,c),a=a.next}while(a!==r)}dn(t,i,n);break;case 1:if(!ge&&(Js(n,i),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(f){Wt(n,i,f)}dn(t,i,n);break;case 21:dn(t,i,n);break;case 22:n.mode&1?(ge=(r=ge)||n.memoizedState!==null,dn(t,i,n),ge=r):dn(t,i,n);break;default:dn(t,i,n)}}function ym(t){var i=t.updateQueue;if(i!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cb),i.forEach(function(r){var a=xb.bind(null,t,r);n.has(r)||(n.add(r),r.then(a,a))})}}function pi(t,i){var n=i.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var l=t,c=i,f=c;t:for(;f!==null;){switch(f.tag){case 5:ue=f.stateNode,mi=!1;break t;case 3:ue=f.stateNode.containerInfo,mi=!0;break t;case 4:ue=f.stateNode.containerInfo,mi=!0;break t}f=f.return}if(ue===null)throw Error(G(160));n0(l,c,a),ue=null,mi=!1;var p=a.alternate;p!==null&&(p.return=null),a.return=null}catch(m){Wt(a,i,m)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)s0(i,t),i=i.sibling}function s0(t,i){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pi(i,t),bi(t),r&4){try{co(3,t,t.return),fu(3,t)}catch(M){Wt(t,t.return,M)}try{co(5,t,t.return)}catch(M){Wt(t,t.return,M)}}break;case 1:pi(i,t),bi(t),r&512&&n!==null&&Js(n,n.return);break;case 5:if(pi(i,t),bi(t),r&512&&n!==null&&Js(n,n.return),t.flags&32){var a=t.stateNode;try{yo(a,"")}catch(M){Wt(t,t.return,M)}}if(r&4&&(a=t.stateNode,a!=null)){var l=t.memoizedProps,c=n!==null?n.memoizedProps:l,f=t.type,p=t.updateQueue;if(t.updateQueue=null,p!==null)try{f==="input"&&l.type==="radio"&&l.name!=null&&Pv(a,l),Ph(f,c);var m=Ph(f,l);for(c=0;c<p.length;c+=2){var v=p[c],w=p[c+1];v==="style"?Iv(a,w):v==="dangerouslySetInnerHTML"?Av(a,w):v==="children"?yo(a,w):Bd(a,v,w,m)}switch(f){case"input":xh(a,l);break;case"textarea":Ev(a,l);break;case"select":var x=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var S=l.value;S!=null?rr(a,!!l.multiple,S,!1):x!==!!l.multiple&&(l.defaultValue!=null?rr(a,!!l.multiple,l.defaultValue,!0):rr(a,!!l.multiple,l.multiple?[]:"",!1))}a[Ao]=l}catch(M){Wt(t,t.return,M)}}break;case 6:if(pi(i,t),bi(t),r&4){if(t.stateNode===null)throw Error(G(162));a=t.stateNode,l=t.memoizedProps;try{a.nodeValue=l}catch(M){Wt(t,t.return,M)}}break;case 3:if(pi(i,t),bi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bo(i.containerInfo)}catch(M){Wt(t,t.return,M)}break;case 4:pi(i,t),bi(t);break;case 13:pi(i,t),bi(t),a=t.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(mf=Xt())),r&4&&ym(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(ge=(m=ge)||v,pi(i,t),ge=m):pi(i,t),bi(t),r&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!v&&t.mode&1)for(J=t,v=t.child;v!==null;){for(w=J=v;J!==null;){switch(x=J,S=x.child,x.tag){case 0:case 11:case 14:case 15:co(4,x,x.return);break;case 1:Js(x,x.return);var A=x.stateNode;if(typeof A.componentWillUnmount=="function"){r=x,n=x.return;try{i=r,A.props=i.memoizedProps,A.state=i.memoizedState,A.componentWillUnmount()}catch(M){Wt(r,n,M)}}break;case 5:Js(x,x.return);break;case 22:if(x.memoizedState!==null){wm(w);continue}}S!==null?(S.return=x,J=S):wm(w)}v=v.sibling}t:for(v=null,w=t;;){if(w.tag===5){if(v===null){v=w;try{a=w.stateNode,m?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(f=w.stateNode,p=w.memoizedProps.style,c=p!=null&&p.hasOwnProperty("display")?p.display:null,f.style.display=kv("display",c))}catch(M){Wt(t,t.return,M)}}}else if(w.tag===6){if(v===null)try{w.stateNode.nodeValue=m?"":w.memoizedProps}catch(M){Wt(t,t.return,M)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===t)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===t)break t;for(;w.sibling===null;){if(w.return===null||w.return===t)break t;v===w&&(v=null),w=w.return}v===w&&(v=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:pi(i,t),bi(t),r&4&&ym(t);break;case 21:break;default:pi(i,t),bi(t)}}function bi(t){var i=t.flags;if(i&2){try{t:{for(var n=t.return;n!==null;){if(i0(n)){var r=n;break t}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(yo(a,""),r.flags&=-33);var l=vm(t);ed(t,l,a);break;case 3:case 4:var c=r.stateNode.containerInfo,f=vm(t);td(t,f,c);break;default:throw Error(G(161))}}catch(p){Wt(t,t.return,p)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function db(t,i,n){J=t,r0(t)}function r0(t,i,n){for(var r=(t.mode&1)!==0;J!==null;){var a=J,l=a.child;if(a.tag===22&&r){var c=a.memoizedState!==null||Wa;if(!c){var f=a.alternate,p=f!==null&&f.memoizedState!==null||ge;f=Wa;var m=ge;if(Wa=c,(ge=p)&&!m)for(J=a;J!==null;)c=J,p=c.child,c.tag===22&&c.memoizedState!==null?Cm(a):p!==null?(p.return=c,J=p):Cm(a);for(;l!==null;)J=l,r0(l),l=l.sibling;J=a,Wa=f,ge=m}xm(t)}else a.subtreeFlags&8772&&l!==null?(l.return=a,J=l):xm(t)}}function xm(t){for(;J!==null;){var i=J;if(i.flags&8772){var n=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:ge||fu(5,i);break;case 1:var r=i.stateNode;if(i.flags&4&&!ge)if(n===null)r.componentDidMount();else{var a=i.elementType===i.type?n.memoizedProps:gi(i.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=i.updateQueue;l!==null&&nm(i,l,r);break;case 3:var c=i.updateQueue;if(c!==null){if(n=null,i.child!==null)switch(i.child.tag){case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}nm(i,c,n)}break;case 5:var f=i.stateNode;if(n===null&&i.flags&4){n=f;var p=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&n.focus();break;case"img":p.src&&(n.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var m=i.alternate;if(m!==null){var v=m.memoizedState;if(v!==null){var w=v.dehydrated;w!==null&&bo(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}ge||i.flags&512&&Jh(i)}catch(x){Wt(i,i.return,x)}}if(i===t){J=null;break}if(n=i.sibling,n!==null){n.return=i.return,J=n;break}J=i.return}}function wm(t){for(;J!==null;){var i=J;if(i===t){J=null;break}var n=i.sibling;if(n!==null){n.return=i.return,J=n;break}J=i.return}}function Cm(t){for(;J!==null;){var i=J;try{switch(i.tag){case 0:case 11:case 15:var n=i.return;try{fu(4,i)}catch(p){Wt(i,n,p)}break;case 1:var r=i.stateNode;if(typeof r.componentDidMount=="function"){var a=i.return;try{r.componentDidMount()}catch(p){Wt(i,a,p)}}var l=i.return;try{Jh(i)}catch(p){Wt(i,l,p)}break;case 5:var c=i.return;try{Jh(i)}catch(p){Wt(i,c,p)}}}catch(p){Wt(i,i.return,p)}if(i===t){J=null;break}var f=i.sibling;if(f!==null){f.return=i.return,J=f;break}J=i.return}}var fb=Math.ceil,Bl=tn.ReactCurrentDispatcher,pf=tn.ReactCurrentOwner,si=tn.ReactCurrentBatchConfig,Ct=0,se=null,Zt=null,ce=0,je=0,tr=Nn(0),te=0,Fo=null,_s=0,pu=0,gf=0,ho=null,Re=null,mf=0,yr=1/0,Ui=null,Ol=!1,id=null,An=null,Ga=!1,wn=null,Nl=0,fo=0,nd=null,ul=-1,cl=0;function Pe(){return Ct&6?Xt():ul!==-1?ul:ul=Xt()}function kn(t){return t.mode&1?Ct&2&&ce!==0?ce&-ce:QC.transition!==null?(cl===0&&(cl=jv()),cl):(t=Tt,t!==0||(t=window.event,t=t===void 0?16:Zv(t.type)),t):1}function yi(t,i,n,r){if(50<fo)throw fo=0,nd=null,Error(G(185));Vo(t,n,r),(!(Ct&2)||t!==se)&&(t===se&&(!(Ct&2)&&(pu|=n),te===4&&vn(t,ce)),Le(t,r),n===1&&Ct===0&&!(i.mode&1)&&(yr=Xt()+500,cu&&zn()))}function Le(t,i){var n=t.callbackNode;Q1(t,i);var r=wl(t,t===se?ce:0);if(r===0)n!==null&&Rg(n),t.callbackNode=null,t.callbackPriority=0;else if(i=r&-r,t.callbackPriority!==i){if(n!=null&&Rg(n),i===1)t.tag===0?ZC(bm.bind(null,t)):py(bm.bind(null,t)),WC(function(){!(Ct&6)&&zn()}),n=null;else{switch(Hv(r)){case 1:n=Vd;break;case 4:n=Uv;break;case 16:n=xl;break;case 536870912:n=Vv;break;default:n=xl}n=f0(n,o0.bind(null,t))}t.callbackPriority=i,t.callbackNode=n}}function o0(t,i){if(ul=-1,cl=0,Ct&6)throw Error(G(327));var n=t.callbackNode;if(cr()&&t.callbackNode!==n)return null;var r=wl(t,t===se?ce:0);if(r===0)return null;if(r&30||r&t.expiredLanes||i)i=zl(t,r);else{i=r;var a=Ct;Ct|=2;var l=l0();(se!==t||ce!==i)&&(Ui=null,yr=Xt()+500,ds(t,i));do try{mb();break}catch(f){a0(t,f)}while(1);tf(),Bl.current=l,Ct=a,Zt!==null?i=0:(se=null,ce=0,i=te)}if(i!==0){if(i===2&&(a=Ih(t),a!==0&&(r=a,i=sd(t,a))),i===1)throw n=Fo,ds(t,0),vn(t,r),Le(t,Xt()),n;if(i===6)vn(t,r);else{if(a=t.current.alternate,!(r&30)&&!pb(a)&&(i=zl(t,r),i===2&&(l=Ih(t),l!==0&&(r=l,i=sd(t,l))),i===1))throw n=Fo,ds(t,0),vn(t,r),Le(t,Xt()),n;switch(t.finishedWork=a,t.finishedLanes=r,i){case 0:case 1:throw Error(G(345));case 2:rs(t,Re,Ui);break;case 3:if(vn(t,r),(r&130023424)===r&&(i=mf+500-Xt(),10<i)){if(wl(t,0)!==0)break;if(a=t.suspendedLanes,(a&r)!==r){Pe(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Nh(rs.bind(null,t,Re,Ui),i);break}rs(t,Re,Ui);break;case 4:if(vn(t,r),(r&4194240)===r)break;for(i=t.eventTimes,a=-1;0<r;){var c=31-vi(r);l=1<<c,c=i[c],c>a&&(a=c),r&=~l}if(r=a,r=Xt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*fb(r/1960))-r,10<r){t.timeoutHandle=Nh(rs.bind(null,t,Re,Ui),r);break}rs(t,Re,Ui);break;case 5:rs(t,Re,Ui);break;default:throw Error(G(329))}}}return Le(t,Xt()),t.callbackNode===n?o0.bind(null,t):null}function sd(t,i){var n=ho;return t.current.memoizedState.isDehydrated&&(ds(t,i).flags|=256),t=zl(t,i),t!==2&&(i=Re,Re=n,i!==null&&rd(i)),t}function rd(t){Re===null?Re=t:Re.push.apply(Re,t)}function pb(t){for(var i=t;;){if(i.flags&16384){var n=i.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],l=a.getSnapshot;a=a.value;try{if(!xi(l(),a))return!1}catch{return!1}}}if(n=i.child,i.subtreeFlags&16384&&n!==null)n.return=i,i=n;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function vn(t,i){for(i&=~gf,i&=~pu,t.suspendedLanes|=i,t.pingedLanes&=~i,t=t.expirationTimes;0<i;){var n=31-vi(i),r=1<<n;t[n]=-1,i&=~r}}function bm(t){if(Ct&6)throw Error(G(327));cr();var i=wl(t,0);if(!(i&1))return Le(t,Xt()),null;var n=zl(t,i);if(t.tag!==0&&n===2){var r=Ih(t);r!==0&&(i=r,n=sd(t,r))}if(n===1)throw n=Fo,ds(t,0),vn(t,i),Le(t,Xt()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=i,rs(t,Re,Ui),Le(t,Xt()),null}function _f(t,i){var n=Ct;Ct|=1;try{return t(i)}finally{Ct=n,Ct===0&&(yr=Xt()+500,cu&&zn())}}function vs(t){wn!==null&&wn.tag===0&&!(Ct&6)&&cr();var i=Ct;Ct|=1;var n=si.transition,r=Tt;try{if(si.transition=null,Tt=1,t)return t()}finally{Tt=r,si.transition=n,Ct=i,!(Ct&6)&&zn()}}function vf(){je=tr.current,Mt(tr)}function ds(t,i){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$C(n)),Zt!==null)for(n=Zt.return;n!==null;){var r=n;switch(Kd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&El();break;case 3:_r(),Mt(Me),Mt(me),af();break;case 5:of(r);break;case 4:_r();break;case 13:Mt(zt);break;case 19:Mt(zt);break;case 10:ef(r.type._context);break;case 22:case 23:vf()}n=n.return}if(se=t,Zt=t=In(t.current,null),ce=je=i,te=0,Fo=null,gf=pu=_s=0,Re=ho=null,us!==null){for(i=0;i<us.length;i++)if(n=us[i],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,l=n.pending;if(l!==null){var c=l.next;l.next=a,r.next=c}n.pending=r}us=null}return t}function a0(t,i){do{var n=Zt;try{if(tf(),ol.current=Ll,Fl){for(var r=Vt.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Fl=!1}if(ms=0,ne=qt=Vt=null,uo=!1,Ro=0,pf.current=null,n===null||n.return===null){te=1,Fo=i,Zt=null;break}t:{var l=t,c=n.return,f=n,p=i;if(i=ce,f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var m=p,v=f,w=v.tag;if(!(v.mode&1)&&(w===0||w===11||w===15)){var x=v.alternate;x?(v.updateQueue=x.updateQueue,v.memoizedState=x.memoizedState,v.lanes=x.lanes):(v.updateQueue=null,v.memoizedState=null)}var S=cm(c);if(S!==null){S.flags&=-257,hm(S,c,f,l,i),S.mode&1&&um(l,m,i),i=S,p=m;var A=i.updateQueue;if(A===null){var M=new Set;M.add(p),i.updateQueue=M}else A.add(p);break t}else{if(!(i&1)){um(l,m,i),yf();break t}p=Error(G(426))}}else if(Lt&&f.mode&1){var L=cm(c);if(L!==null){!(L.flags&65536)&&(L.flags|=256),hm(L,c,f,l,i),qd(vr(p,f));break t}}l=p=vr(p,f),te!==4&&(te=2),ho===null?ho=[l]:ho.push(l),l=c;do{switch(l.tag){case 3:l.flags|=65536,i&=-i,l.lanes|=i;var T=$y(l,p,i);im(l,T);break t;case 1:f=p;var P=l.type,k=l.stateNode;if(!(l.flags&128)&&(typeof P.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(An===null||!An.has(k)))){l.flags|=65536,i&=-i,l.lanes|=i;var C=Wy(l,f,i);im(l,C);break t}}l=l.return}while(l!==null)}c0(n)}catch(R){i=R,Zt===n&&n!==null&&(Zt=n=n.return);continue}break}while(1)}function l0(){var t=Bl.current;return Bl.current=Ll,t===null?Ll:t}function yf(){(te===0||te===3||te===2)&&(te=4),se===null||!(_s&268435455)&&!(pu&268435455)||vn(se,ce)}function zl(t,i){var n=Ct;Ct|=2;var r=l0();(se!==t||ce!==i)&&(Ui=null,ds(t,i));do try{gb();break}catch(a){a0(t,a)}while(1);if(tf(),Ct=n,Bl.current=r,Zt!==null)throw Error(G(261));return se=null,ce=0,te}function gb(){for(;Zt!==null;)u0(Zt)}function mb(){for(;Zt!==null&&!V1();)u0(Zt)}function u0(t){var i=d0(t.alternate,t,je);t.memoizedProps=t.pendingProps,i===null?c0(t):Zt=i,pf.current=null}function c0(t){var i=t;do{var n=i.alternate;if(t=i.return,i.flags&32768){if(n=ub(n,i),n!==null){n.flags&=32767,Zt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{te=6,Zt=null;return}}else if(n=lb(n,i,je),n!==null){Zt=n;return}if(i=i.sibling,i!==null){Zt=i;return}Zt=i=t}while(i!==null);te===0&&(te=5)}function rs(t,i,n){var r=Tt,a=si.transition;try{si.transition=null,Tt=1,_b(t,i,n,r)}finally{si.transition=a,Tt=r}return null}function _b(t,i,n,r){do cr();while(wn!==null);if(Ct&6)throw Error(G(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var l=n.lanes|n.childLanes;if(K1(t,l),t===se&&(Zt=se=null,ce=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ga||(Ga=!0,f0(xl,function(){return cr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=si.transition,si.transition=null;var c=Tt;Tt=1;var f=Ct;Ct|=4,pf.current=null,hb(t,n),s0(n,t),OC(Bh),Cl=!!Lh,Bh=Lh=null,t.current=n,db(n),j1(),Ct=f,Tt=c,si.transition=l}else t.current=n;if(Ga&&(Ga=!1,wn=t,Nl=a),l=t.pendingLanes,l===0&&(An=null),W1(n.stateNode),Le(t,Xt()),i!==null)for(r=t.onRecoverableError,n=0;n<i.length;n++)a=i[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Ol)throw Ol=!1,t=id,id=null,t;return Nl&1&&t.tag!==0&&cr(),l=t.pendingLanes,l&1?t===nd?fo++:(fo=0,nd=t):fo=0,zn(),null}function cr(){if(wn!==null){var t=Hv(Nl),i=si.transition,n=Tt;try{if(si.transition=null,Tt=16>t?16:t,wn===null)var r=!1;else{if(t=wn,wn=null,Nl=0,Ct&6)throw Error(G(331));var a=Ct;for(Ct|=4,J=t.current;J!==null;){var l=J,c=l.child;if(J.flags&16){var f=l.deletions;if(f!==null){for(var p=0;p<f.length;p++){var m=f[p];for(J=m;J!==null;){var v=J;switch(v.tag){case 0:case 11:case 15:co(8,v,l)}var w=v.child;if(w!==null)w.return=v,J=w;else for(;J!==null;){v=J;var x=v.sibling,S=v.return;if(e0(v),v===m){J=null;break}if(x!==null){x.return=S,J=x;break}J=S}}}var A=l.alternate;if(A!==null){var M=A.child;if(M!==null){A.child=null;do{var L=M.sibling;M.sibling=null,M=L}while(M!==null)}}J=l}}if(l.subtreeFlags&2064&&c!==null)c.return=l,J=c;else t:for(;J!==null;){if(l=J,l.flags&2048)switch(l.tag){case 0:case 11:case 15:co(9,l,l.return)}var T=l.sibling;if(T!==null){T.return=l.return,J=T;break t}J=l.return}}var P=t.current;for(J=P;J!==null;){c=J;var k=c.child;if(c.subtreeFlags&2064&&k!==null)k.return=c,J=k;else t:for(c=P;J!==null;){if(f=J,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:fu(9,f)}}catch(R){Wt(f,f.return,R)}if(f===c){J=null;break t}var C=f.sibling;if(C!==null){C.return=f.return,J=C;break t}J=f.return}}if(Ct=a,zn(),Ai&&typeof Ai.onPostCommitFiberRoot=="function")try{Ai.onPostCommitFiberRoot(ru,t)}catch{}r=!0}return r}finally{Tt=n,si.transition=i}}return!1}function Sm(t,i,n){i=vr(n,i),i=$y(t,i,1),t=Tn(t,i,1),i=Pe(),t!==null&&(Vo(t,1,i),Le(t,i))}function Wt(t,i,n){if(t.tag===3)Sm(t,t,n);else for(;i!==null;){if(i.tag===3){Sm(i,t,n);break}else if(i.tag===1){var r=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(An===null||!An.has(r))){t=vr(n,t),t=Wy(i,t,1),i=Tn(i,t,1),t=Pe(),i!==null&&(Vo(i,1,t),Le(i,t));break}}i=i.return}}function vb(t,i,n){var r=t.pingCache;r!==null&&r.delete(i),i=Pe(),t.pingedLanes|=t.suspendedLanes&n,se===t&&(ce&n)===n&&(te===4||te===3&&(ce&130023424)===ce&&500>Xt()-mf?ds(t,0):gf|=n),Le(t,i)}function h0(t,i){i===0&&(t.mode&1?(i=Ba,Ba<<=1,!(Ba&130023424)&&(Ba=4194304)):i=1);var n=Pe();t=Qi(t,i),t!==null&&(Vo(t,i,n),Le(t,n))}function yb(t){var i=t.memoizedState,n=0;i!==null&&(n=i.retryLane),h0(t,n)}function xb(t,i){var n=0;switch(t.tag){case 13:var r=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(i),h0(t,n)}var d0;d0=function(t,i,n){if(t!==null)if(t.memoizedProps!==i.pendingProps||Me.current)De=!0;else{if(!(t.lanes&n)&&!(i.flags&128))return De=!1,ab(t,i,n);De=!!(t.flags&131072)}else De=!1,Lt&&i.flags&1048576&&gy(i,kl,i.index);switch(i.lanes=0,i.tag){case 2:var r=i.type;ll(t,i),t=i.pendingProps;var a=pr(i,me.current);ur(i,n),a=uf(null,i,r,t,a,n);var l=cf();return i.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Fe(r)?(l=!0,Tl(i)):l=!1,i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,sf(i),a.updater=hu,i.stateNode=a,a._reactInternals=i,Wh(i,r,t,n),i=Yh(null,i,r,!0,l,n)):(i.tag=0,Lt&&l&&Qd(i),Se(null,i,a,n),i=i.child),i;case 16:r=i.elementType;t:{switch(ll(t,i),t=i.pendingProps,a=r._init,r=a(r._payload),i.type=r,a=i.tag=Cb(r),t=gi(r,t),a){case 0:i=Xh(null,i,r,t,n);break t;case 1:i=pm(null,i,r,t,n);break t;case 11:i=dm(null,i,r,t,n);break t;case 14:i=fm(null,i,r,gi(r.type,t),n);break t}throw Error(G(306,r,""))}return i;case 0:return r=i.type,a=i.pendingProps,a=i.elementType===r?a:gi(r,a),Xh(t,i,r,a,n);case 1:return r=i.type,a=i.pendingProps,a=i.elementType===r?a:gi(r,a),pm(t,i,r,a,n);case 3:t:{if(Zy(i),t===null)throw Error(G(387));r=i.pendingProps,l=i.memoizedState,a=l.element,yy(t,i),Dl(i,r,null,n);var c=i.memoizedState;if(r=c.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},i.updateQueue.baseState=l,i.memoizedState=l,i.flags&256){a=vr(Error(G(423)),i),i=gm(t,i,r,n,a);break t}else if(r!==a){a=vr(Error(G(424)),i),i=gm(t,i,r,n,a);break t}else for(He=En(i.stateNode.containerInfo.firstChild),We=i,Lt=!0,_i=null,n=by(i,null,r,n),i.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gr(),r===a){i=Ki(t,i,n);break t}Se(t,i,r,n)}i=i.child}return i;case 5:return Sy(i),t===null&&jh(i),r=i.type,a=i.pendingProps,l=t!==null?t.memoizedProps:null,c=a.children,Oh(r,a)?c=null:l!==null&&Oh(r,l)&&(i.flags|=32),Yy(t,i),Se(t,i,c,n),i.child;case 6:return t===null&&jh(i),null;case 13:return Qy(t,i,n);case 4:return rf(i,i.stateNode.containerInfo),r=i.pendingProps,t===null?i.child=mr(i,null,r,n):Se(t,i,r,n),i.child;case 11:return r=i.type,a=i.pendingProps,a=i.elementType===r?a:gi(r,a),dm(t,i,r,a,n);case 7:return Se(t,i,i.pendingProps,n),i.child;case 8:return Se(t,i,i.pendingProps.children,n),i.child;case 12:return Se(t,i,i.pendingProps.children,n),i.child;case 10:t:{if(r=i.type._context,a=i.pendingProps,l=i.memoizedProps,c=a.value,kt(Il,r._currentValue),r._currentValue=c,l!==null)if(xi(l.value,c)){if(l.children===a.children&&!Me.current){i=Ki(t,i,n);break t}}else for(l=i.child,l!==null&&(l.return=i);l!==null;){var f=l.dependencies;if(f!==null){c=l.child;for(var p=f.firstContext;p!==null;){if(p.context===r){if(l.tag===1){p=Wi(-1,n&-n),p.tag=2;var m=l.updateQueue;if(m!==null){m=m.shared;var v=m.pending;v===null?p.next=p:(p.next=v.next,v.next=p),m.pending=p}}l.lanes|=n,p=l.alternate,p!==null&&(p.lanes|=n),Hh(l.return,n,i),f.lanes|=n;break}p=p.next}}else if(l.tag===10)c=l.type===i.type?null:l.child;else if(l.tag===18){if(c=l.return,c===null)throw Error(G(341));c.lanes|=n,f=c.alternate,f!==null&&(f.lanes|=n),Hh(c,n,i),c=l.sibling}else c=l.child;if(c!==null)c.return=l;else for(c=l;c!==null;){if(c===i){c=null;break}if(l=c.sibling,l!==null){l.return=c.return,c=l;break}c=c.return}l=c}Se(t,i,a.children,n),i=i.child}return i;case 9:return a=i.type,r=i.pendingProps.children,ur(i,n),a=ri(a),r=r(a),i.flags|=1,Se(t,i,r,n),i.child;case 14:return r=i.type,a=gi(r,i.pendingProps),a=gi(r.type,a),fm(t,i,r,a,n);case 15:return Gy(t,i,i.type,i.pendingProps,n);case 17:return r=i.type,a=i.pendingProps,a=i.elementType===r?a:gi(r,a),ll(t,i),i.tag=1,Fe(r)?(t=!0,Tl(i)):t=!1,ur(i,n),wy(i,r,a),Wh(i,r,a,n),Yh(null,i,r,!0,t,n);case 19:return Ky(t,i,n);case 22:return Xy(t,i,n)}throw Error(G(156,i.tag))};function f0(t,i){return zv(t,i)}function wb(t,i,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ni(t,i,n,r){return new wb(t,i,n,r)}function xf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Cb(t){if(typeof t=="function")return xf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nd)return 11;if(t===zd)return 14}return 2}function In(t,i){var n=t.alternate;return n===null?(n=ni(t.tag,i,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=i,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,i=t.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function hl(t,i,n,r,a,l){var c=2;if(r=t,typeof t=="function")xf(t)&&(c=1);else if(typeof t=="string")c=5;else t:switch(t){case $s:return fs(n.children,a,l,i);case Od:c=8,a|=8;break;case gh:return t=ni(12,n,i,a|2),t.elementType=gh,t.lanes=l,t;case mh:return t=ni(13,n,i,a),t.elementType=mh,t.lanes=l,t;case _h:return t=ni(19,n,i,a),t.elementType=_h,t.lanes=l,t;case Cv:return gu(n,a,l,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xv:c=10;break t;case wv:c=9;break t;case Nd:c=11;break t;case zd:c=14;break t;case pn:c=16,r=null;break t}throw Error(G(130,t==null?t:typeof t,""))}return i=ni(c,n,i,a),i.elementType=t,i.type=r,i.lanes=l,i}function fs(t,i,n,r){return t=ni(7,t,r,i),t.lanes=n,t}function gu(t,i,n,r){return t=ni(22,t,r,i),t.elementType=Cv,t.lanes=n,t.stateNode={isHidden:!1},t}function Kc(t,i,n){return t=ni(6,t,null,i),t.lanes=n,t}function qc(t,i,n){return i=ni(4,t.children!==null?t.children:[],t.key,i),i.lanes=n,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function bb(t,i,n,r,a){this.tag=i,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dc(0),this.expirationTimes=Dc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dc(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function wf(t,i,n,r,a,l,c,f,p){return t=new bb(t,i,n,f,p),i===1?(i=1,l===!0&&(i|=8)):i=0,l=ni(3,null,null,i),t.current=l,l.stateNode=t,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sf(l),t}function Sb(t,i,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hs,key:r==null?null:""+r,children:t,containerInfo:i,implementation:n}}function p0(t){if(!t)return Fn;t=t._reactInternals;t:{if(xs(t)!==t||t.tag!==1)throw Error(G(170));var i=t;do{switch(i.tag){case 3:i=i.stateNode.context;break t;case 1:if(Fe(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break t}}i=i.return}while(i!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(Fe(n))return fy(t,n,i)}return i}function g0(t,i,n,r,a,l,c,f,p){return t=wf(n,r,!0,t,a,l,c,f,p),t.context=p0(null),n=t.current,r=Pe(),a=kn(n),l=Wi(r,a),l.callback=i??null,Tn(n,l,a),t.current.lanes=a,Vo(t,a,r),Le(t,r),t}function mu(t,i,n,r){var a=i.current,l=Pe(),c=kn(a);return n=p0(n),i.context===null?i.context=n:i.pendingContext=n,i=Wi(l,c),i.payload={element:t},r=r===void 0?null:r,r!==null&&(i.callback=r),t=Tn(a,i,c),t!==null&&(yi(t,a,c,l),rl(t,a,c)),c}function Ul(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Pm(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<i?n:i}}function Cf(t,i){Pm(t,i),(t=t.alternate)&&Pm(t,i)}function Pb(){return null}var m0=typeof reportError=="function"?reportError:function(t){console.error(t)};function bf(t){this._internalRoot=t}_u.prototype.render=bf.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(G(409));mu(t,i,null,null)};_u.prototype.unmount=bf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;vs(function(){mu(null,t,null,null)}),i[Zi]=null}};function _u(t){this._internalRoot=t}_u.prototype.unstable_scheduleHydration=function(t){if(t){var i=Gv();t={blockedOn:null,target:t,priority:i};for(var n=0;n<_n.length&&i!==0&&i<_n[n].priority;n++);_n.splice(n,0,t),n===0&&Yv(t)}};function Sf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Em(){}function Eb(t,i,n,r,a){if(a){if(typeof r=="function"){var l=r;r=function(){var m=Ul(c);l.call(m)}}var c=g0(i,r,t,0,null,!1,!1,"",Em);return t._reactRootContainer=c,t[Zi]=c.current,Eo(t.nodeType===8?t.parentNode:t),vs(),c}for(;a=t.lastChild;)t.removeChild(a);if(typeof r=="function"){var f=r;r=function(){var m=Ul(p);f.call(m)}}var p=wf(t,0,!1,null,null,!1,!1,"",Em);return t._reactRootContainer=p,t[Zi]=p.current,Eo(t.nodeType===8?t.parentNode:t),vs(function(){mu(i,p,n,r)}),p}function yu(t,i,n,r,a){var l=n._reactRootContainer;if(l){var c=l;if(typeof a=="function"){var f=a;a=function(){var p=Ul(c);f.call(p)}}mu(i,c,t,a)}else c=Eb(n,i,t,a,r);return Ul(c)}$v=function(t){switch(t.tag){case 3:var i=t.stateNode;if(i.current.memoizedState.isDehydrated){var n=eo(i.pendingLanes);n!==0&&(jd(i,n|1),Le(i,Xt()),!(Ct&6)&&(yr=Xt()+500,zn()))}break;case 13:vs(function(){var r=Qi(t,1);if(r!==null){var a=Pe();yi(r,t,1,a)}}),Cf(t,1)}};Hd=function(t){if(t.tag===13){var i=Qi(t,134217728);if(i!==null){var n=Pe();yi(i,t,134217728,n)}Cf(t,134217728)}};Wv=function(t){if(t.tag===13){var i=kn(t),n=Qi(t,i);if(n!==null){var r=Pe();yi(n,t,i,r)}Cf(t,i)}};Gv=function(){return Tt};Xv=function(t,i){var n=Tt;try{return Tt=t,i()}finally{Tt=n}};Th=function(t,i,n){switch(i){case"input":if(xh(t,n),i=n.name,n.type==="radio"&&i!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<n.length;i++){var r=n[i];if(r!==t&&r.form===t.form){var a=uu(r);if(!a)throw Error(G(90));Sv(r),xh(r,a)}}}break;case"textarea":Ev(t,n);break;case"select":i=n.value,i!=null&&rr(t,!!n.multiple,i,!1)}};Mv=_f;Fv=vs;var Tb={usingClientEntryPoint:!1,Events:[Ho,Ys,uu,Rv,Dv,_f]},Zr={findFiberByHostInstance:ls,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Ab={bundleType:Zr.bundleType,version:Zr.version,rendererPackageName:Zr.rendererPackageName,rendererConfig:Zr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ov(t),t===null?null:t.stateNode},findFiberByHostInstance:Zr.findFiberByHostInstance||Pb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xa.isDisabled&&Xa.supportsFiber)try{ru=Xa.inject(Ab),Ai=Xa}catch{}}Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tb;Ye.createPortal=function(t,i){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sf(i))throw Error(G(200));return Sb(t,i,null,n)};Ye.createRoot=function(t,i){if(!Sf(t))throw Error(G(299));var n=!1,r="",a=m0;return i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(r=i.identifierPrefix),i.onRecoverableError!==void 0&&(a=i.onRecoverableError)),i=wf(t,1,!1,null,null,n,!1,r,a),t[Zi]=i.current,Eo(t.nodeType===8?t.parentNode:t),new bf(i)};Ye.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=Ov(i),t=t===null?null:t.stateNode,t};Ye.flushSync=function(t){return vs(t)};Ye.hydrate=function(t,i,n){if(!vu(i))throw Error(G(200));return yu(null,t,i,!0,n)};Ye.hydrateRoot=function(t,i,n){if(!Sf(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,a=!1,l="",c=m0;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),i=g0(i,null,t,1,n??null,a,!1,l,c),t[Zi]=i.current,Eo(t),r)for(t=0;t<r.length;t++)n=r[t],a=n._getVersion,a=a(n._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[n,a]:i.mutableSourceEagerHydrationData.push(n,a);return new _u(i)};Ye.render=function(t,i,n){if(!vu(i))throw Error(G(200));return yu(null,t,i,!1,n)};Ye.unmountComponentAtNode=function(t){if(!vu(t))throw Error(G(40));return t._reactRootContainer?(vs(function(){yu(null,null,t,!1,function(){t._reactRootContainer=null,t[Zi]=null})}),!0):!1};Ye.unstable_batchedUpdates=_f;Ye.unstable_renderSubtreeIntoContainer=function(t,i,n,r){if(!vu(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return yu(t,i,n,!1,r)};Ye.version="18.2.0-next-9e3b772b8-20220608";function _0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_0)}catch(t){console.error(t)}}_0(),gv.exports=Ye;var kb=gv.exports,Tm=kb;fh.createRoot=Tm.createRoot,fh.hydrateRoot=Tm.hydrateRoot;/**
 * @remix-run/router v1.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vl(){return Vl=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vl.apply(this,arguments)}var Cn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Cn||(Cn={}));const Am="popstate";function Ib(t){t===void 0&&(t={});function i(r,a){let{pathname:l,search:c,hash:f}=r.location;return od("",{pathname:l,search:c,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:v0(a)}return Db(i,n,null,t)}function Be(t,i){if(t===!1||t===null||typeof t>"u")throw new Error(i)}function Pf(t,i){if(!t){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function Rb(){return Math.random().toString(36).substr(2,8)}function km(t,i){return{usr:t.state,key:t.key,idx:i}}function od(t,i,n,r){return n===void 0&&(n=null),Vl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof i=="string"?xu(i):i,{state:n,key:i&&i.key||r||Rb()})}function v0(t){let{pathname:i="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(i+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(i+=r.charAt(0)==="#"?r:"#"+r),i}function xu(t){let i={};if(t){let n=t.indexOf("#");n>=0&&(i.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(i.search=t.substr(r),t=t.substr(0,r)),t&&(i.pathname=t)}return i}function Db(t,i,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,f=Cn.Pop,p=null,m=v();m==null&&(m=0,c.replaceState(Vl({},c.state,{idx:m}),""));function v(){return(c.state||{idx:null}).idx}function w(){f=Cn.Pop;let L=v(),T=L==null?null:L-m;m=L,p&&p({action:f,location:M.location,delta:T})}function x(L,T){f=Cn.Push;let P=od(M.location,L,T);n&&n(P,L),m=v()+1;let k=km(P,m),C=M.createHref(P);try{c.pushState(k,"",C)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;a.location.assign(C)}l&&p&&p({action:f,location:M.location,delta:1})}function S(L,T){f=Cn.Replace;let P=od(M.location,L,T);n&&n(P,L),m=v();let k=km(P,m),C=M.createHref(P);c.replaceState(k,"",C),l&&p&&p({action:f,location:M.location,delta:0})}function A(L){let T=a.location.origin!=="null"?a.location.origin:a.location.href,P=typeof L=="string"?L:v0(L);return Be(T,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,T)}let M={get action(){return f},get location(){return t(a,c)},listen(L){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(Am,w),p=L,()=>{a.removeEventListener(Am,w),p=null}},createHref(L){return i(a,L)},createURL:A,encodeLocation(L){let T=A(L);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:x,replace:S,go(L){return c.go(L)}};return M}var Im;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Im||(Im={}));function Mb(t,i,n){n===void 0&&(n="/");let r=typeof i=="string"?xu(i):i,a=w0(r.pathname||"/",n);if(a==null)return null;let l=y0(t);Fb(l);let c=null;for(let f=0;c==null&&f<l.length;++f)c=Hb(l[f],Gb(a));return c}function y0(t,i,n,r){i===void 0&&(i=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(l,c,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(Be(p.relativePath.startsWith(r),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(r.length));let m=hr([r,p.relativePath]),v=n.concat(p);l.children&&l.children.length>0&&(Be(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),y0(l.children,i,v,m)),!(l.path==null&&!l.index)&&i.push({path:m,score:Vb(m,l.index),routesMeta:v})};return t.forEach((l,c)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))a(l,c);else for(let p of x0(l.path))a(l,c,p)}),i}function x0(t){let i=t.split("/");if(i.length===0)return[];let[n,...r]=i,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=x0(r.join("/")),f=[];return f.push(...c.map(p=>p===""?l:[l,p].join("/"))),a&&f.push(...c),f.map(p=>t.startsWith("/")&&p===""?"/":p)}function Fb(t){t.sort((i,n)=>i.score!==n.score?n.score-i.score:jb(i.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Lb=/^:\w+$/,Bb=3,Ob=2,Nb=1,zb=10,Ub=-2,Rm=t=>t==="*";function Vb(t,i){let n=t.split("/"),r=n.length;return n.some(Rm)&&(r+=Ub),i&&(r+=Ob),n.filter(a=>!Rm(a)).reduce((a,l)=>a+(Lb.test(l)?Bb:l===""?Nb:zb),r)}function jb(t,i){return t.length===i.length&&t.slice(0,-1).every((r,a)=>r===i[a])?t[t.length-1]-i[i.length-1]:0}function Hb(t,i){let{routesMeta:n}=t,r={},a="/",l=[];for(let c=0;c<n.length;++c){let f=n[c],p=c===n.length-1,m=a==="/"?i:i.slice(a.length)||"/",v=$b({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},m);if(!v)return null;Object.assign(r,v.params);let w=f.route;l.push({params:r,pathname:hr([a,v.pathname]),pathnameBase:Yb(hr([a,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(a=hr([a,v.pathnameBase]))}return l}function $b(t,i){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Wb(t.path,t.caseSensitive,t.end),a=i.match(n);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:r.reduce((m,v,w)=>{if(v==="*"){let x=f[w]||"";c=l.slice(0,l.length-x.length).replace(/(.)\/+$/,"$1")}return m[v]=Xb(f[w]||"",v),m},{}),pathname:l,pathnameBase:c,pattern:t}}function Wb(t,i,n){i===void 0&&(i=!1),n===void 0&&(n=!0),Pf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(c,f)=>(r.push(f),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,i?void 0:"i"),r]}function Gb(t){try{return decodeURI(t)}catch(i){return Pf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+i+").")),t}}function Xb(t,i){try{return decodeURIComponent(t)}catch(n){return Pf(!1,'The value for the URL param "'+i+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function w0(t,i){if(i==="/")return t;if(!t.toLowerCase().startsWith(i.toLowerCase()))return null;let n=i.endsWith("/")?i.length-1:i.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const hr=t=>t.join("/").replace(/\/\/+/g,"/"),Yb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function Zb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const C0=["post","put","patch","delete"];new Set(C0);const Qb=["get",...C0];new Set(Qb);/**
 * React Router v6.14.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ad(){return ad=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ad.apply(this,arguments)}const Kb=O.createContext(null),qb=O.createContext(null),b0=O.createContext(null),wu=O.createContext(null),Cu=O.createContext({outlet:null,matches:[],isDataRoute:!1}),S0=O.createContext(null);function Ef(){return O.useContext(wu)!=null}function P0(){return Ef()||Be(!1),O.useContext(wu).location}function Jb(t,i){return tS(t,i)}function tS(t,i,n){Ef()||Be(!1);let{navigator:r}=O.useContext(b0),{matches:a}=O.useContext(Cu),l=a[a.length-1],c=l?l.params:{};l&&l.pathname;let f=l?l.pathnameBase:"/";l&&l.route;let p=P0(),m;if(i){var v;let M=typeof i=="string"?xu(i):i;f==="/"||(v=M.pathname)!=null&&v.startsWith(f)||Be(!1),m=M}else m=p;let w=m.pathname||"/",x=f==="/"?w:w.slice(f.length)||"/",S=Mb(t,{pathname:x}),A=rS(S&&S.map(M=>Object.assign({},M,{params:Object.assign({},c,M.params),pathname:hr([f,r.encodeLocation?r.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?f:hr([f,r.encodeLocation?r.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),a,n);return i&&A?O.createElement(wu.Provider,{value:{location:ad({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Cn.Pop}},A):A}function eS(){let t=uS(),i=Zb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},l=null;return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},i),n?O.createElement("pre",{style:a},n):null,l)}const iS=O.createElement(eS,null);class nS extends O.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,n){return n.location!==i.location||n.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error||n.error,location:n.location,revalidation:i.revalidation||n.revalidation}}componentDidCatch(i,n){console.error("React Router caught the following error during render",i,n)}render(){return this.state.error?O.createElement(Cu.Provider,{value:this.props.routeContext},O.createElement(S0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sS(t){let{routeContext:i,match:n,children:r}=t,a=O.useContext(Kb);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(Cu.Provider,{value:i},r)}function rS(t,i,n){var r;if(i===void 0&&(i=[]),n===void 0&&(n=null),t==null){var a;if((a=n)!=null&&a.errors)t=n.matches;else return null}let l=t,c=(r=n)==null?void 0:r.errors;if(c!=null){let f=l.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id]));f>=0||Be(!1),l=l.slice(0,Math.min(l.length,f+1))}return l.reduceRight((f,p,m)=>{let v=p.route.id?c==null?void 0:c[p.route.id]:null,w=null;n&&(w=p.route.errorElement||iS);let x=i.concat(l.slice(0,m+1)),S=()=>{let A;return v?A=w:p.route.Component?A=O.createElement(p.route.Component,null):p.route.element?A=p.route.element:A=f,O.createElement(sS,{match:p,routeContext:{outlet:f,matches:x,isDataRoute:n!=null},children:A})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?O.createElement(nS,{location:n.location,revalidation:n.revalidation,component:w,error:v,children:S(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):S()},null)}var Dm;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(Dm||(Dm={}));var jl;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(jl||(jl={}));function oS(t){let i=O.useContext(qb);return i||Be(!1),i}function aS(t){let i=O.useContext(Cu);return i||Be(!1),i}function lS(t){let i=aS(),n=i.matches[i.matches.length-1];return n.route.id||Be(!1),n.route.id}function uS(){var t;let i=O.useContext(S0),n=oS(jl.UseRouteError),r=lS(jl.UseRouteError);return i||((t=n.errors)==null?void 0:t[r])}function E0(t){Be(!1)}function cS(t){let{basename:i="/",children:n=null,location:r,navigationType:a=Cn.Pop,navigator:l,static:c=!1}=t;Ef()&&Be(!1);let f=i.replace(/^\/*/,"/"),p=O.useMemo(()=>({basename:f,navigator:l,static:c}),[f,l,c]);typeof r=="string"&&(r=xu(r));let{pathname:m="/",search:v="",hash:w="",state:x=null,key:S="default"}=r,A=O.useMemo(()=>{let M=w0(m,f);return M==null?null:{location:{pathname:M,search:v,hash:w,state:x,key:S},navigationType:a}},[f,m,v,w,x,S,a]);return A==null?null:O.createElement(b0.Provider,{value:p},O.createElement(wu.Provider,{children:n,value:A}))}function hS(t){let{children:i,location:n}=t;return Jb(ld(i),n)}var Mm;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(Mm||(Mm={}));new Promise(()=>{});function ld(t,i){i===void 0&&(i=[]);let n=[];return O.Children.forEach(t,(r,a)=>{if(!O.isValidElement(r))return;let l=[...i,a];if(r.type===O.Fragment){n.push.apply(n,ld(r.props.children,l));return}r.type!==E0&&Be(!1),!r.props.index||!r.props.children||Be(!1);let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=ld(r.props.children,l)),n.push(c)}),n}/**
 * React Router DOM v6.14.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const dS="startTransition",Fm=y1[dS];function fS(t){let{basename:i,children:n,future:r,window:a}=t,l=O.useRef();l.current==null&&(l.current=Ib({window:a,v5Compat:!0}));let c=l.current,[f,p]=O.useState({action:c.action,location:c.location}),{v7_startTransition:m}=r||{},v=O.useCallback(w=>{m&&Fm?Fm(()=>p(w)):p(w)},[p,m]);return O.useLayoutEffect(()=>c.listen(v),[c,v]),O.createElement(cS,{basename:i,children:n,location:f.location,navigationType:f.action,navigator:c})}var Lm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(Lm||(Lm={}));var Bm;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Bm||(Bm={}));const pS="modulepreload",gS=function(t){return"/2023/nene/"+t},Om={},mS=function(i,n,r){if(!n||n.length===0)return i();const a=document.getElementsByTagName("link");return Promise.all(n.map(l=>{if(l=gS(l),l in Om)return;Om[l]=!0;const c=l.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(!!r)for(let v=a.length-1;v>=0;v--){const w=a[v];if(w.href===l&&(!c||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${f}`))return;const m=document.createElement("link");if(m.rel=c?"stylesheet":pS,c||(m.as="script",m.crossOrigin=""),m.href=l,document.head.appendChild(m),c)return new Promise((v,w)=>{m.addEventListener("load",v),m.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>i())},T0=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),bu=O.createContext({}),Su=O.createContext(null),Pu=typeof document<"u",Hl=Pu?O.useLayoutEffect:O.useEffect,A0=O.createContext({strict:!1});function _S(t,i,n,r){const{visualElement:a}=O.useContext(bu),l=O.useContext(A0),c=O.useContext(Su),f=O.useContext(T0).reducedMotion,p=O.useRef();r=r||l.renderer,!p.current&&r&&(p.current=r(t,{visualState:i,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f}));const m=p.current;return O.useInsertionEffect(()=>{m&&m.update(n,c)}),Hl(()=>{m&&m.render()}),O.useEffect(()=>{m&&m.updateFeatures()}),(window.HandoffAppearAnimations?Hl:O.useEffect)(()=>{m&&m.animationState&&m.animationState.animateChanges()}),m}function er(t){return typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function vS(t,i,n){return O.useCallback(r=>{r&&t.mount&&t.mount(r),i&&(r?i.mount(r):i.unmount()),n&&(typeof n=="function"?n(r):er(n)&&(n.current=r))},[i])}function Lo(t){return typeof t=="string"||Array.isArray(t)}function Eu(t){return typeof t=="object"&&typeof t.start=="function"}const Tf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Af=["initial",...Tf];function Tu(t){return Eu(t.animate)||Af.some(i=>Lo(t[i]))}function k0(t){return!!(Tu(t)||t.variants)}function yS(t,i){if(Tu(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Lo(n)?n:void 0,animate:Lo(r)?r:void 0}}return t.inherit!==!1?i:{}}function xS(t){const{initial:i,animate:n}=yS(t,O.useContext(bu));return O.useMemo(()=>({initial:i,animate:n}),[Nm(i),Nm(n)])}function Nm(t){return Array.isArray(t)?t.join(" "):t}const zm={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bo={};for(const t in zm)Bo[t]={isEnabled:i=>zm[t].some(n=>!!i[n])};function wS(t){for(const i in t)Bo[i]={...Bo[i],...t[i]}}const kf=O.createContext({}),I0=O.createContext({}),CS=Symbol.for("motionComponentSymbol");function bS({preloadedFeatures:t,createVisualElement:i,useRender:n,useVisualState:r,Component:a}){t&&wS(t);function l(f,p){let m;const v={...O.useContext(T0),...f,layoutId:SS(f)},{isStatic:w}=v,x=xS(f),S=r(f,w);if(!w&&Pu){x.visualElement=_S(a,S,v,i);const A=O.useContext(I0),M=O.useContext(A0).strict;x.visualElement&&(m=x.visualElement.loadFeatures(v,M,t,A))}return O.createElement(bu.Provider,{value:x},m&&x.visualElement?O.createElement(m,{visualElement:x.visualElement,...v}):null,n(a,f,vS(S,x.visualElement,p),S,w,x.visualElement))}const c=O.forwardRef(l);return c[CS]=a,c}function SS({layoutId:t}){const i=O.useContext(kf).id;return i&&t!==void 0?i+"-"+t:t}function PS(t){function i(r,a={}){return bS(t(r,a))}if(typeof Proxy>"u")return i;const n=new Map;return new Proxy(i,{get:(r,a)=>(n.has(a)||n.set(a,i(a)),n.get(a))})}const ES=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function If(t){return typeof t!="string"||t.includes("-")?!1:!!(ES.indexOf(t)>-1||/[A-Z]/.test(t))}const $l={};function TS(t){Object.assign($l,t)}const Wo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ws=new Set(Wo);function R0(t,{layout:i,layoutId:n}){return ws.has(t)||t.startsWith("origin")||(i||n!==void 0)&&(!!$l[t]||t==="opacity")}const Oe=t=>!!(t&&t.getVelocity),AS={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},kS=Wo.length;function IS(t,{enableHardwareAcceleration:i=!0,allowTransformNone:n=!0},r,a){let l="";for(let c=0;c<kS;c++){const f=Wo[c];if(t[f]!==void 0){const p=AS[f]||f;l+=`${p}(${t[f]}) `}}return i&&!t.z&&(l+="translateZ(0)"),l=l.trim(),a?l=a(t,r?"":l):n&&r&&(l="none"),l}const D0=t=>i=>typeof i=="string"&&i.startsWith(t),M0=D0("--"),ud=D0("var(--"),RS=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,DS=(t,i)=>i&&typeof t=="number"?i.transform(t):t,Ln=(t,i,n)=>Math.min(Math.max(n,t),i),Cs={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},po={...Cs,transform:t=>Ln(0,1,t)},Ya={...Cs,default:1},go=t=>Math.round(t*1e5)/1e5,Au=/(-)?([\d]*\.?[\d])+/g,F0=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,MS=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Go(t){return typeof t=="string"}const Xo=t=>({test:i=>Go(i)&&i.endsWith(t)&&i.split(" ").length===1,parse:parseFloat,transform:i=>`${i}${t}`}),fn=Xo("deg"),Ii=Xo("%"),lt=Xo("px"),FS=Xo("vh"),LS=Xo("vw"),Um={...Ii,parse:t=>Ii.parse(t)/100,transform:t=>Ii.transform(t*100)},Vm={...Cs,transform:Math.round},L0={borderWidth:lt,borderTopWidth:lt,borderRightWidth:lt,borderBottomWidth:lt,borderLeftWidth:lt,borderRadius:lt,radius:lt,borderTopLeftRadius:lt,borderTopRightRadius:lt,borderBottomRightRadius:lt,borderBottomLeftRadius:lt,width:lt,maxWidth:lt,height:lt,maxHeight:lt,size:lt,top:lt,right:lt,bottom:lt,left:lt,padding:lt,paddingTop:lt,paddingRight:lt,paddingBottom:lt,paddingLeft:lt,margin:lt,marginTop:lt,marginRight:lt,marginBottom:lt,marginLeft:lt,rotate:fn,rotateX:fn,rotateY:fn,rotateZ:fn,scale:Ya,scaleX:Ya,scaleY:Ya,scaleZ:Ya,skew:fn,skewX:fn,skewY:fn,distance:lt,translateX:lt,translateY:lt,translateZ:lt,x:lt,y:lt,z:lt,perspective:lt,transformPerspective:lt,opacity:po,originX:Um,originY:Um,originZ:lt,zIndex:Vm,fillOpacity:po,strokeOpacity:po,numOctaves:Vm};function Rf(t,i,n,r){const{style:a,vars:l,transform:c,transformOrigin:f}=t;let p=!1,m=!1,v=!0;for(const w in i){const x=i[w];if(M0(w)){l[w]=x;continue}const S=L0[w],A=DS(x,S);if(ws.has(w)){if(p=!0,c[w]=A,!v)continue;x!==(S.default||0)&&(v=!1)}else w.startsWith("origin")?(m=!0,f[w]=A):a[w]=A}if(i.transform||(p||r?a.transform=IS(t.transform,n,v,r):a.transform&&(a.transform="none")),m){const{originX:w="50%",originY:x="50%",originZ:S=0}=f;a.transformOrigin=`${w} ${x} ${S}`}}const Df=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function B0(t,i,n){for(const r in i)!Oe(i[r])&&!R0(r,n)&&(t[r]=i[r])}function BS({transformTemplate:t},i,n){return O.useMemo(()=>{const r=Df();return Rf(r,i,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[i])}function OS(t,i,n){const r=t.style||{},a={};return B0(a,r,t),Object.assign(a,BS(t,i,n)),t.transformValues?t.transformValues(a):a}function NS(t,i,n){const r={},a=OS(t,i,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=a,r}const zS=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function Wl(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||zS.has(t)}let O0=t=>!Wl(t);function US(t){t&&(O0=i=>i.startsWith("on")?!Wl(i):t(i))}try{US(require("@emotion/is-prop-valid").default)}catch{}function VS(t,i,n){const r={};for(const a in t)a==="values"&&typeof t.values=="object"||(O0(a)||n===!0&&Wl(a)||!i&&!Wl(a)||t.draggable&&a.startsWith("onDrag"))&&(r[a]=t[a]);return r}function jm(t,i,n){return typeof t=="string"?t:lt.transform(i+n*t)}function jS(t,i,n){const r=jm(i,t.x,t.width),a=jm(n,t.y,t.height);return`${r} ${a}`}const HS={offset:"stroke-dashoffset",array:"stroke-dasharray"},$S={offset:"strokeDashoffset",array:"strokeDasharray"};function WS(t,i,n=1,r=0,a=!0){t.pathLength=1;const l=a?HS:$S;t[l.offset]=lt.transform(-r);const c=lt.transform(i),f=lt.transform(n);t[l.array]=`${c} ${f}`}function Mf(t,{attrX:i,attrY:n,attrScale:r,originX:a,originY:l,pathLength:c,pathSpacing:f=1,pathOffset:p=0,...m},v,w,x){if(Rf(t,m,v,x),w){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:S,style:A,dimensions:M}=t;S.transform&&(M&&(A.transform=S.transform),delete S.transform),M&&(a!==void 0||l!==void 0||A.transform)&&(A.transformOrigin=jS(M,a!==void 0?a:.5,l!==void 0?l:.5)),i!==void 0&&(S.x=i),n!==void 0&&(S.y=n),r!==void 0&&(S.scale=r),c!==void 0&&WS(S,c,f,p,!1)}const N0=()=>({...Df(),attrs:{}}),Ff=t=>typeof t=="string"&&t.toLowerCase()==="svg";function GS(t,i,n,r){const a=O.useMemo(()=>{const l=N0();return Mf(l,i,{enableHardwareAcceleration:!1},Ff(r),t.transformTemplate),{...l.attrs,style:{...l.style}}},[i]);if(t.style){const l={};B0(l,t.style,t),a.style={...l,...a.style}}return a}function XS(t=!1){return(n,r,a,{latestValues:l},c)=>{const p=(If(n)?GS:NS)(r,l,c,n),v={...VS(r,typeof n=="string",t),...p,ref:a},{children:w}=r,x=O.useMemo(()=>Oe(w)?w.get():w,[w]);return O.createElement(n,{...v,children:x})}}const Lf=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function z0(t,{style:i,vars:n},r,a){Object.assign(t.style,i,a&&a.getProjectionStyles(r));for(const l in n)t.style.setProperty(l,n[l])}const U0=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function V0(t,i,n,r){z0(t,i,void 0,r);for(const a in i.attrs)t.setAttribute(U0.has(a)?a:Lf(a),i.attrs[a])}function Bf(t,i){const{style:n}=t,r={};for(const a in n)(Oe(n[a])||i.style&&Oe(i.style[a])||R0(a,t))&&(r[a]=n[a]);return r}function j0(t,i){const n=Bf(t,i);for(const r in t)if(Oe(t[r])||Oe(i[r])){const a=Wo.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[a]=t[r]}return n}function Of(t,i,n,r={},a={}){return typeof i=="function"&&(i=i(n!==void 0?n:t.custom,r,a)),typeof i=="string"&&(i=t.variants&&t.variants[i]),typeof i=="function"&&(i=i(n!==void 0?n:t.custom,r,a)),i}function H0(t){const i=O.useRef(null);return i.current===null&&(i.current=t()),i.current}const Gl=t=>Array.isArray(t),YS=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),ZS=t=>Gl(t)?t[t.length-1]||0:t;function dl(t){const i=Oe(t)?t.get():t;return YS(i)?i.toValue():i}function QS({scrapeMotionValuesFromProps:t,createRenderState:i,onMount:n},r,a,l){const c={latestValues:KS(r,a,l,t),renderState:i()};return n&&(c.mount=f=>n(r,f,c)),c}const $0=t=>(i,n)=>{const r=O.useContext(bu),a=O.useContext(Su),l=()=>QS(t,i,r,a);return n?l():H0(l)};function KS(t,i,n,r){const a={},l=r(t,{});for(const x in l)a[x]=dl(l[x]);let{initial:c,animate:f}=t;const p=Tu(t),m=k0(t);i&&m&&!p&&t.inherit!==!1&&(c===void 0&&(c=i.initial),f===void 0&&(f=i.animate));let v=n?n.initial===!1:!1;v=v||c===!1;const w=v?f:c;return w&&typeof w!="boolean"&&!Eu(w)&&(Array.isArray(w)?w:[w]).forEach(S=>{const A=Of(t,S);if(!A)return;const{transitionEnd:M,transition:L,...T}=A;for(const P in T){let k=T[P];if(Array.isArray(k)){const C=v?k.length-1:0;k=k[C]}k!==null&&(a[P]=k)}for(const P in M)a[P]=M[P]}),a}const qS={useVisualState:$0({scrapeMotionValuesFromProps:j0,createRenderState:N0,onMount:(t,i,{renderState:n,latestValues:r})=>{try{n.dimensions=typeof i.getBBox=="function"?i.getBBox():i.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}Mf(n,r,{enableHardwareAcceleration:!1},Ff(i.tagName),t.transformTemplate),V0(i,n)}})},JS={useVisualState:$0({scrapeMotionValuesFromProps:Bf,createRenderState:Df})};function tP(t,{forwardMotionProps:i=!1},n,r){return{...If(t)?qS:JS,preloadedFeatures:n,useRender:XS(i),createVisualElement:r,Component:t}}function $i(t,i,n,r={passive:!0}){return t.addEventListener(i,n,r),()=>t.removeEventListener(i,n)}const W0=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function ku(t,i="page"){return{point:{x:t[i+"X"],y:t[i+"Y"]}}}const eP=t=>i=>W0(i)&&t(i,ku(i));function Gi(t,i,n,r){return $i(t,i,eP(n),r)}const iP=(t,i)=>n=>i(t(n)),Rn=(...t)=>t.reduce(iP);function G0(t){let i=null;return()=>{const n=()=>{i=null};return i===null?(i=t,n):!1}}const Hm=G0("dragHorizontal"),$m=G0("dragVertical");function X0(t){let i=!1;if(t==="y")i=$m();else if(t==="x")i=Hm();else{const n=Hm(),r=$m();n&&r?i=()=>{n(),r()}:(n&&n(),r&&r())}return i}function Y0(){const t=X0(!0);return t?(t(),!1):!0}class Un{constructor(i){this.isMounted=!1,this.node=i}update(){}}function nP(t){let i=[],n=[],r=0,a=!1,l=!1;const c=new WeakSet,f={schedule:(p,m=!1,v=!1)=>{const w=v&&a,x=w?i:n;return m&&c.add(p),x.indexOf(p)===-1&&(x.push(p),w&&a&&(r=i.length)),p},cancel:p=>{const m=n.indexOf(p);m!==-1&&n.splice(m,1),c.delete(p)},process:p=>{if(a){l=!0;return}if(a=!0,[i,n]=[n,i],n.length=0,r=i.length,r)for(let m=0;m<r;m++){const v=i[m];v(p),c.has(v)&&(f.schedule(v),t())}a=!1,l&&(l=!1,f.process(p))}};return f}const Nt={delta:0,timestamp:0,isProcessing:!1},sP=40;let cd=!0,Oo=!1;const Iu=["read","update","preRender","render","postRender"],dr=Iu.reduce((t,i)=>(t[i]=nP(()=>Oo=!0),t),{}),rP=t=>dr[t].process(Nt),Z0=t=>{Oo=!1,Nt.delta=cd?1e3/60:Math.max(Math.min(t-Nt.timestamp,sP),1),Nt.timestamp=t,Nt.isProcessing=!0,Iu.forEach(rP),Nt.isProcessing=!1,Oo&&(cd=!1,requestAnimationFrame(Z0))},oP=()=>{Oo=!0,cd=!0,Nt.isProcessing||requestAnimationFrame(Z0)},Bt=Iu.reduce((t,i)=>{const n=dr[i];return t[i]=(r,a=!1,l=!1)=>(Oo||oP(),n.schedule(r,a,l)),t},{});function qi(t){Iu.forEach(i=>dr[i].cancel(t))}function Wm(t,i){const n="pointer"+(i?"enter":"leave"),r="onHover"+(i?"Start":"End"),a=(l,c)=>{if(l.type==="touch"||Y0())return;const f=t.getProps();t.animationState&&f.whileHover&&t.animationState.setActive("whileHover",i),f[r]&&Bt.update(()=>f[r](l,c))};return Gi(t.current,n,a,{passive:!t.getProps()[r]})}class aP extends Un{mount(){this.unmount=Rn(Wm(this.node,!0),Wm(this.node,!1))}unmount(){}}class lP extends Un{constructor(){super(...arguments),this.isActive=!1}onFocus(){let i=!1;try{i=this.node.current.matches(":focus-visible")}catch{i=!0}!i||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Rn($i(this.node.current,"focus",()=>this.onFocus()),$i(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Q0=(t,i)=>i?t===i?!0:Q0(t,i.parentElement):!1,Jt=t=>t;function Jc(t,i){if(!i)return;const n=new PointerEvent("pointer"+t);i(n,ku(n))}class uP extends Un{constructor(){super(...arguments),this.removeStartListeners=Jt,this.removeEndListeners=Jt,this.removeAccessibleListeners=Jt,this.startPointerPress=(i,n)=>{if(this.removeEndListeners(),this.isPressing)return;const r=this.node.getProps(),l=Gi(window,"pointerup",(f,p)=>{if(!this.checkPressEnd())return;const{onTap:m,onTapCancel:v}=this.node.getProps();Bt.update(()=>{Q0(this.node.current,f.target)?m&&m(f,p):v&&v(f,p)})},{passive:!(r.onTap||r.onPointerUp)}),c=Gi(window,"pointercancel",(f,p)=>this.cancelPress(f,p),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Rn(l,c),this.startPress(i,n)},this.startAccessiblePress=()=>{const i=l=>{if(l.key!=="Enter"||this.isPressing)return;const c=f=>{f.key!=="Enter"||!this.checkPressEnd()||Jc("up",(p,m)=>{const{onTap:v}=this.node.getProps();v&&Bt.update(()=>v(p,m))})};this.removeEndListeners(),this.removeEndListeners=$i(this.node.current,"keyup",c),Jc("down",(f,p)=>{this.startPress(f,p)})},n=$i(this.node.current,"keydown",i),r=()=>{this.isPressing&&Jc("cancel",(l,c)=>this.cancelPress(l,c))},a=$i(this.node.current,"blur",r);this.removeAccessibleListeners=Rn(n,a)}}startPress(i,n){this.isPressing=!0;const{onTapStart:r,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Bt.update(()=>r(i,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Y0()}cancelPress(i,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Bt.update(()=>r(i,n))}mount(){const i=this.node.getProps(),n=Gi(this.node.current,"pointerdown",this.startPointerPress,{passive:!(i.onTapStart||i.onPointerStart)}),r=$i(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Rn(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const hd=new WeakMap,th=new WeakMap,cP=t=>{const i=hd.get(t.target);i&&i(t)},hP=t=>{t.forEach(cP)};function dP({root:t,...i}){const n=t||document;th.has(n)||th.set(n,{});const r=th.get(n),a=JSON.stringify(i);return r[a]||(r[a]=new IntersectionObserver(hP,{root:t,...i})),r[a]}function fP(t,i,n){const r=dP(i);return hd.set(t,n),r.observe(t),()=>{hd.delete(t),r.unobserve(t)}}const pP={some:0,all:1};class gP extends Un{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:i={}}=this.node.getProps(),{root:n,margin:r,amount:a="some",once:l}=i,c={root:n?n.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:pP[a]},f=p=>{const{isIntersecting:m}=p;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:v,onViewportLeave:w}=this.node.getProps(),x=m?v:w;x&&x(p)};return fP(this.node.current,c,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:i,prevProps:n}=this.node;["amount","margin","root"].some(mP(i,n))&&this.startObserver()}unmount(){}}function mP({viewport:t={}},{viewport:i={}}={}){return n=>t[n]!==i[n]}const _P={inView:{Feature:gP},tap:{Feature:uP},focus:{Feature:lP},hover:{Feature:aP}};function K0(t,i){if(!Array.isArray(i))return!1;const n=i.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(i[r]!==t[r])return!1;return!0}function vP(t){const i={};return t.values.forEach((n,r)=>i[r]=n.get()),i}function yP(t){const i={};return t.values.forEach((n,r)=>i[r]=n.getVelocity()),i}function Ru(t,i,n){const r=t.getProps();return Of(r,i,n!==void 0?n:r.custom,vP(t),yP(t))}const xP="framerAppearId",wP="data-"+Lf(xP);let CP=Jt,Nf=Jt;const Dn=t=>t*1e3,Xi=t=>t/1e3,bP={current:!1},q0=t=>Array.isArray(t)&&typeof t[0]=="number";function J0(t){return!!(!t||typeof t=="string"&&tx[t]||q0(t)||Array.isArray(t)&&t.every(J0))}const no=([t,i,n,r])=>`cubic-bezier(${t}, ${i}, ${n}, ${r})`,tx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:no([0,.65,.55,1]),circOut:no([.55,0,1,.45]),backIn:no([.31,.01,.66,-.59]),backOut:no([.33,1.53,.69,.99])};function ex(t){if(t)return q0(t)?no(t):Array.isArray(t)?t.map(ex):tx[t]}function SP(t,i,n,{delay:r=0,duration:a,repeat:l=0,repeatType:c="loop",ease:f,times:p}={}){const m={[i]:n};p&&(m.offset=p);const v=ex(f);return Array.isArray(v)&&(m.easing=v),t.animate(m,{delay:r,duration:a,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"})}const Gm={waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate")},eh={},ix={};for(const t in Gm)ix[t]=()=>(eh[t]===void 0&&(eh[t]=Gm[t]()),eh[t]);function PP(t,{repeat:i,repeatType:n="loop"}){const r=i&&n!=="loop"&&i%2===1?0:t.length-1;return t[r]}const nx=(t,i,n)=>(((1-3*n+3*i)*t+(3*n-6*i))*t+3*i)*t,EP=1e-7,TP=12;function AP(t,i,n,r,a){let l,c,f=0;do c=i+(n-i)/2,l=nx(c,r,a)-t,l>0?n=c:i=c;while(Math.abs(l)>EP&&++f<TP);return c}function Yo(t,i,n,r){if(t===i&&n===r)return Jt;const a=l=>AP(l,0,1,t,n);return l=>l===0||l===1?l:nx(a(l),i,r)}const kP=Yo(.42,0,1,1),IP=Yo(0,0,.58,1),sx=Yo(.42,0,.58,1),RP=t=>Array.isArray(t)&&typeof t[0]!="number",rx=t=>i=>i<=.5?t(2*i)/2:(2-t(2*(1-i)))/2,ox=t=>i=>1-t(1-i),ax=t=>1-Math.sin(Math.acos(t)),zf=ox(ax),DP=rx(zf),lx=Yo(.33,1.53,.69,.99),Uf=ox(lx),MP=rx(Uf),FP=t=>(t*=2)<1?.5*Uf(t):.5*(2-Math.pow(2,-10*(t-1))),LP={linear:Jt,easeIn:kP,easeInOut:sx,easeOut:IP,circIn:ax,circInOut:DP,circOut:zf,backIn:Uf,backInOut:MP,backOut:lx,anticipate:FP},Xm=t=>{if(Array.isArray(t)){Nf(t.length===4);const[i,n,r,a]=t;return Yo(i,n,r,a)}else if(typeof t=="string")return LP[t];return t},Vf=(t,i)=>n=>!!(Go(n)&&MS.test(n)&&n.startsWith(t)||i&&Object.prototype.hasOwnProperty.call(n,i)),ux=(t,i,n)=>r=>{if(!Go(r))return r;const[a,l,c,f]=r.match(Au);return{[t]:parseFloat(a),[i]:parseFloat(l),[n]:parseFloat(c),alpha:f!==void 0?parseFloat(f):1}},BP=t=>Ln(0,255,t),ih={...Cs,transform:t=>Math.round(BP(t))},hs={test:Vf("rgb","red"),parse:ux("red","green","blue"),transform:({red:t,green:i,blue:n,alpha:r=1})=>"rgba("+ih.transform(t)+", "+ih.transform(i)+", "+ih.transform(n)+", "+go(po.transform(r))+")"};function OP(t){let i="",n="",r="",a="";return t.length>5?(i=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),a=t.substring(7,9)):(i=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),a=t.substring(4,5),i+=i,n+=n,r+=r,a+=a),{red:parseInt(i,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const dd={test:Vf("#"),parse:OP,transform:hs.transform},ir={test:Vf("hsl","hue"),parse:ux("hue","saturation","lightness"),transform:({hue:t,saturation:i,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ii.transform(go(i))+", "+Ii.transform(go(n))+", "+go(po.transform(r))+")"},be={test:t=>hs.test(t)||dd.test(t)||ir.test(t),parse:t=>hs.test(t)?hs.parse(t):ir.test(t)?ir.parse(t):dd.parse(t),transform:t=>Go(t)?t:t.hasOwnProperty("red")?hs.transform(t):ir.transform(t)},Ut=(t,i,n)=>-n*t+n*i+t;function nh(t,i,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(i-t)*6*n:n<1/2?i:n<2/3?t+(i-t)*(2/3-n)*6:t}function NP({hue:t,saturation:i,lightness:n,alpha:r}){t/=360,i/=100,n/=100;let a=0,l=0,c=0;if(!i)a=l=c=n;else{const f=n<.5?n*(1+i):n+i-n*i,p=2*n-f;a=nh(p,f,t+1/3),l=nh(p,f,t),c=nh(p,f,t-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:r}}const sh=(t,i,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(i*i-r)+r))},zP=[dd,hs,ir],UP=t=>zP.find(i=>i.test(t));function Ym(t){const i=UP(t);let n=i.parse(t);return i===ir&&(n=NP(n)),n}const cx=(t,i)=>{const n=Ym(t),r=Ym(i),a={...n};return l=>(a.red=sh(n.red,r.red,l),a.green=sh(n.green,r.green,l),a.blue=sh(n.blue,r.blue,l),a.alpha=Ut(n.alpha,r.alpha,l),hs.transform(a))};function VP(t){var i,n;return isNaN(t)&&Go(t)&&(((i=t.match(Au))===null||i===void 0?void 0:i.length)||0)+(((n=t.match(F0))===null||n===void 0?void 0:n.length)||0)>0}const hx={regex:RS,countKey:"Vars",token:"${v}",parse:Jt},dx={regex:F0,countKey:"Colors",token:"${c}",parse:be.parse},fx={regex:Au,countKey:"Numbers",token:"${n}",parse:Cs.parse};function rh(t,{regex:i,countKey:n,token:r,parse:a}){const l=t.tokenised.match(i);l&&(t["num"+n]=l.length,t.tokenised=t.tokenised.replace(i,r),t.values.push(...l.map(a)))}function Xl(t){const i=t.toString(),n={value:i,tokenised:i,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&rh(n,hx),rh(n,dx),rh(n,fx),n}function px(t){return Xl(t).values}function gx(t){const{values:i,numColors:n,numVars:r,tokenised:a}=Xl(t),l=i.length;return c=>{let f=a;for(let p=0;p<l;p++)p<r?f=f.replace(hx.token,c[p]):p<r+n?f=f.replace(dx.token,be.transform(c[p])):f=f.replace(fx.token,go(c[p]));return f}}const jP=t=>typeof t=="number"?0:t;function HP(t){const i=px(t);return gx(t)(i.map(jP))}const Bn={test:VP,parse:px,createTransformer:gx,getAnimatableNone:HP},mx=(t,i)=>n=>`${n>0?i:t}`;function _x(t,i){return typeof t=="number"?n=>Ut(t,i,n):be.test(t)?cx(t,i):t.startsWith("var(")?mx(t,i):yx(t,i)}const vx=(t,i)=>{const n=[...t],r=n.length,a=t.map((l,c)=>_x(l,i[c]));return l=>{for(let c=0;c<r;c++)n[c]=a[c](l);return n}},$P=(t,i)=>{const n={...t,...i},r={};for(const a in n)t[a]!==void 0&&i[a]!==void 0&&(r[a]=_x(t[a],i[a]));return a=>{for(const l in r)n[l]=r[l](a);return n}},yx=(t,i)=>{const n=Bn.createTransformer(i),r=Xl(t),a=Xl(i);return r.numVars===a.numVars&&r.numColors===a.numColors&&r.numNumbers>=a.numNumbers?Rn(vx(r.values,a.values),n):mx(t,i)},No=(t,i,n)=>{const r=i-t;return r===0?1:(n-t)/r},Zm=(t,i)=>n=>Ut(t,i,n);function WP(t){return typeof t=="number"?Zm:typeof t=="string"?be.test(t)?cx:yx:Array.isArray(t)?vx:typeof t=="object"?$P:Zm}function GP(t,i,n){const r=[],a=n||WP(t[0]),l=t.length-1;for(let c=0;c<l;c++){let f=a(t[c],t[c+1]);if(i){const p=Array.isArray(i)?i[c]||Jt:i;f=Rn(p,f)}r.push(f)}return r}function xx(t,i,{clamp:n=!0,ease:r,mixer:a}={}){const l=t.length;if(Nf(l===i.length),l===1)return()=>i[0];t[0]>t[l-1]&&(t=[...t].reverse(),i=[...i].reverse());const c=GP(i,r,a),f=c.length,p=m=>{let v=0;if(f>1)for(;v<t.length-2&&!(m<t[v+1]);v++);const w=No(t[v],t[v+1],m);return c[v](w)};return n?m=>p(Ln(t[0],t[l-1],m)):p}function XP(t,i){const n=t[t.length-1];for(let r=1;r<=i;r++){const a=No(0,i,r);t.push(Ut(n,1,a))}}function YP(t){const i=[0];return XP(i,t.length-1),i}function ZP(t,i){return t.map(n=>n*i)}function QP(t,i){return t.map(()=>i||sx).splice(0,t.length-1)}function Yl({duration:t=300,keyframes:i,times:n,ease:r="easeInOut"}){const a=RP(r)?r.map(Xm):Xm(r),l={done:!1,value:i[0]},c=ZP(n&&n.length===i.length?n:YP(i),t),f=xx(c,i,{ease:Array.isArray(a)?a:QP(i,a)});return{calculatedDuration:t,next:p=>(l.value=f(p),l.done=p>=t,l)}}function wx(t,i){return i?t*(1e3/i):0}const KP=5;function Cx(t,i,n){const r=Math.max(i-KP,0);return wx(n-t(r),i-r)}const oh=.001,qP=.01,Qm=10,JP=.05,tE=1;function eE({duration:t=800,bounce:i=.25,velocity:n=0,mass:r=1}){let a,l;CP(t<=Dn(Qm));let c=1-i;c=Ln(JP,tE,c),t=Ln(qP,Qm,Xi(t)),c<1?(a=m=>{const v=m*c,w=v*t,x=v-n,S=fd(m,c),A=Math.exp(-w);return oh-x/S*A},l=m=>{const w=m*c*t,x=w*n+n,S=Math.pow(c,2)*Math.pow(m,2)*t,A=Math.exp(-w),M=fd(Math.pow(m,2),c);return(-a(m)+oh>0?-1:1)*((x-S)*A)/M}):(a=m=>{const v=Math.exp(-m*t),w=(m-n)*t+1;return-oh+v*w},l=m=>{const v=Math.exp(-m*t),w=(n-m)*(t*t);return v*w});const f=5/t,p=nE(a,l,f);if(t=Dn(t),isNaN(p))return{stiffness:100,damping:10,duration:t};{const m=Math.pow(p,2)*r;return{stiffness:m,damping:c*2*Math.sqrt(r*m),duration:t}}}const iE=12;function nE(t,i,n){let r=n;for(let a=1;a<iE;a++)r=r-t(r)/i(r);return r}function fd(t,i){return t*Math.sqrt(1-i*i)}const sE=["duration","bounce"],rE=["stiffness","damping","mass"];function Km(t,i){return i.some(n=>t[n]!==void 0)}function oE(t){let i={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Km(t,rE)&&Km(t,sE)){const n=eE(t);i={...i,...n,velocity:0,mass:1},i.isResolvedFromDuration=!0}return i}function bx({keyframes:t,restDelta:i,restSpeed:n,...r}){const a=t[0],l=t[t.length-1],c={done:!1,value:a},{stiffness:f,damping:p,mass:m,velocity:v,duration:w,isResolvedFromDuration:x}=oE(r),S=v?-Xi(v):0,A=p/(2*Math.sqrt(f*m)),M=l-a,L=Xi(Math.sqrt(f/m)),T=Math.abs(M)<5;n||(n=T?.01:2),i||(i=T?.005:.5);let P;if(A<1){const k=fd(L,A);P=C=>{const R=Math.exp(-A*L*C);return l-R*((S+A*L*M)/k*Math.sin(k*C)+M*Math.cos(k*C))}}else if(A===1)P=k=>l-Math.exp(-L*k)*(M+(S+L*M)*k);else{const k=L*Math.sqrt(A*A-1);P=C=>{const R=Math.exp(-A*L*C),H=Math.min(k*C,300);return l-R*((S+A*L*M)*Math.sinh(H)+k*M*Math.cosh(H))/k}}return{calculatedDuration:x&&w||null,next:k=>{const C=P(k);if(x)c.done=k>=w;else{let R=S;k!==0&&(A<1?R=Cx(P,k,C):R=0);const H=Math.abs(R)<=n,N=Math.abs(l-C)<=i;c.done=H&&N}return c.value=c.done?l:C,c}}}function qm({keyframes:t,velocity:i=0,power:n=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:c,min:f,max:p,restDelta:m=.5,restSpeed:v}){const w=t[0],x={done:!1,value:w},S=$=>f!==void 0&&$<f||p!==void 0&&$>p,A=$=>f===void 0?p:p===void 0||Math.abs(f-$)<Math.abs(p-$)?f:p;let M=n*i;const L=w+M,T=c===void 0?L:c(L);T!==L&&(M=T-w);const P=$=>-M*Math.exp(-$/r),k=$=>T+P($),C=$=>{const Z=P($),B=k($);x.done=Math.abs(Z)<=m,x.value=x.done?T:B};let R,H;const N=$=>{S(x.value)&&(R=$,H=bx({keyframes:[x.value,A(x.value)],velocity:Cx(k,$,x.value),damping:a,stiffness:l,restDelta:m,restSpeed:v}))};return N(0),{calculatedDuration:null,next:$=>{let Z=!1;return!H&&R===void 0&&(Z=!0,C($),N($)),R!==void 0&&$>R?H.next($-R):(!Z&&C($),x)}}}const aE=t=>{const i=({timestamp:n})=>t(n);return{start:()=>Bt.update(i,!0),stop:()=>qi(i),now:()=>Nt.isProcessing?Nt.timestamp:performance.now()}},Jm=2e4;function t_(t){let i=0;const n=50;let r=t.next(i);for(;!r.done&&i<Jm;)i+=n,r=t.next(i);return i>=Jm?1/0:i}const lE={decay:qm,inertia:qm,tween:Yl,keyframes:Yl,spring:bx};function Zl({autoplay:t=!0,delay:i=0,driver:n=aE,keyframes:r,type:a="keyframes",repeat:l=0,repeatDelay:c=0,repeatType:f="loop",onPlay:p,onStop:m,onComplete:v,onUpdate:w,...x}){let S=1,A=!1,M,L;const T=()=>{M&&M(),L=new Promise(at=>{M=at})};T();let P;const k=lE[a]||Yl;let C;k!==Yl&&typeof r[0]!="number"&&(C=xx([0,100],r,{clamp:!1}),r=[0,100]);const R=k({...x,keyframes:r});let H;f==="mirror"&&(H=k({...x,keyframes:[...r].reverse(),velocity:-(x.velocity||0)}));let N="idle",$=null,Z=null,B=null;R.calculatedDuration===null&&l&&(R.calculatedDuration=t_(R));const{calculatedDuration:rt}=R;let st=1/0,Q=1/0;rt!==null&&(st=rt+c,Q=st*(l+1)-c);let ct=0;const _t=at=>{if(Z===null)return;S>0&&(Z=Math.min(Z,at)),S<0&&(Z=Math.min(at-Q/S,Z)),$!==null?ct=$:ct=Math.round(at-Z)*S;const gt=ct-i*(S>=0?1:-1),Et=S>=0?gt<0:gt>Q;ct=Math.max(gt,0),N==="finished"&&$===null&&(ct=Q);let Qe=ct,Ri=R;if(l){const jn=ct/st;let en=Math.floor(jn),ai=jn%1;!ai&&jn>=1&&(ai=1),ai===1&&en--,en=Math.min(en,l+1);const Ps=!!(en%2);Ps&&(f==="reverse"?(ai=1-ai,c&&(ai-=c/st)):f==="mirror"&&(Ri=H));let nn=Ln(0,1,ai);ct>Q&&(nn=f==="reverse"&&Ps?1:0),Qe=nn*st}const ee=Et?{done:!1,value:r[0]}:Ri.next(Qe);C&&(ee.value=C(ee.value));let{done:ft}=ee;!Et&&rt!==null&&(ft=S>=0?ct>=Q:ct<=0);const Sr=$===null&&(N==="finished"||N==="running"&&ft);return w&&w(ee.value),Sr&&K(),ee},St=()=>{P&&P.stop(),P=void 0},xt=()=>{N="idle",St(),T(),Z=B=null},K=()=>{N="finished",v&&v(),St(),T()},ot=()=>{if(A)return;P||(P=n(_t));const at=P.now();p&&p(),$!==null?Z=at-$:(!Z||N==="finished")&&(Z=at),B=Z,$=null,N="running",P.start()};t&&ot();const ut={then(at,gt){return L.then(at,gt)},get time(){return Xi(ct)},set time(at){at=Dn(at),ct=at,$!==null||!P||S===0?$=at:Z=P.now()-at/S},get duration(){const at=R.calculatedDuration===null?t_(R):R.calculatedDuration;return Xi(at)},get speed(){return S},set speed(at){at===S||!P||(S=at,ut.time=Xi(ct))},get state(){return N},play:ot,pause:()=>{N="paused",$=ct},stop:()=>{A=!0,N!=="idle"&&(N="idle",m&&m(),xt())},cancel:()=>{B!==null&&_t(B),xt()},complete:()=>{N="finished"},sample:at=>(Z=0,_t(at))};return ut}const uE=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Za=10,cE=2e4,hE=(t,i)=>i.type==="spring"||t==="backgroundColor"||!J0(i.ease);function dE(t,i,{onUpdate:n,onComplete:r,...a}){if(!(ix.waapi()&&uE.has(i)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let c=!1,f,p;const m=()=>{p=new Promise(T=>{f=T})};m();let{keyframes:v,duration:w=300,ease:x,times:S}=a;if(hE(i,a)){const T=Zl({...a,repeat:0,delay:0});let P={done:!1,value:v[0]};const k=[];let C=0;for(;!P.done&&C<cE;)P=T.sample(C),k.push(P.value),C+=Za;S=void 0,v=k,w=C-Za,x="linear"}const A=SP(t.owner.current,i,v,{...a,duration:w,ease:x,times:S}),M=()=>A.cancel(),L=()=>{Bt.update(M),f(),m()};return A.onfinish=()=>{t.set(PP(v,a)),r&&r(),L()},{then(T,P){return p.then(T,P)},get time(){return Xi(A.currentTime||0)},set time(T){A.currentTime=Dn(T)},get speed(){return A.playbackRate},set speed(T){A.playbackRate=T},get duration(){return Xi(w)},play:()=>{c||(A.play(),qi(M))},pause:()=>A.pause(),stop:()=>{if(c=!0,A.playState==="idle")return;const{currentTime:T}=A;if(T){const P=Zl({...a,autoplay:!1});t.setWithVelocity(P.sample(T-Za).value,P.sample(T).value,Za)}L()},complete:()=>A.finish(),cancel:L}}function fE({keyframes:t,delay:i,onUpdate:n,onComplete:r}){const a=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Jt,pause:Jt,stop:Jt,then:l=>(l(),Promise.resolve()),cancel:Jt,complete:Jt});return i?Zl({keyframes:[0,1],duration:0,delay:i,onComplete:a}):a()}const pE={type:"spring",stiffness:500,damping:25,restSpeed:10},gE=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),mE={type:"keyframes",duration:.8},_E={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},vE=(t,{keyframes:i})=>i.length>2?mE:ws.has(t)?t.startsWith("scale")?gE(i[1]):pE:_E,pd=(t,i)=>t==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(Bn.test(i)||i==="0")&&!i.startsWith("url(")),yE=new Set(["brightness","contrast","saturate","opacity"]);function xE(t){const[i,n]=t.slice(0,-1).split("(");if(i==="drop-shadow")return t;const[r]=n.match(Au)||[];if(!r)return t;const a=n.replace(r,"");let l=yE.has(i)?1:0;return r!==n&&(l*=100),i+"("+l+a+")"}const wE=/([a-z-]*)\(.*?\)/g,gd={...Bn,getAnimatableNone:t=>{const i=t.match(wE);return i?i.map(xE).join(" "):t}},CE={...L0,color:be,backgroundColor:be,outlineColor:be,fill:be,stroke:be,borderColor:be,borderTopColor:be,borderRightColor:be,borderBottomColor:be,borderLeftColor:be,filter:gd,WebkitFilter:gd},jf=t=>CE[t];function Sx(t,i){let n=jf(t);return n!==gd&&(n=Bn),n.getAnimatableNone?n.getAnimatableNone(i):void 0}const Px=t=>/^0[^.\s]+$/.test(t);function bE(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||Px(t)}function SE(t,i,n,r){const a=pd(i,n);let l;Array.isArray(n)?l=[...n]:l=[null,n];const c=r.from!==void 0?r.from:t.get();let f;const p=[];for(let m=0;m<l.length;m++)l[m]===null&&(l[m]=m===0?c:l[m-1]),bE(l[m])&&p.push(m),typeof l[m]=="string"&&l[m]!=="none"&&l[m]!=="0"&&(f=l[m]);if(a&&p.length&&f)for(let m=0;m<p.length;m++){const v=p[m];l[v]=Sx(i,f)}return l}function PE({when:t,delay:i,delayChildren:n,staggerChildren:r,staggerDirection:a,repeat:l,repeatType:c,repeatDelay:f,from:p,elapsed:m,...v}){return!!Object.keys(v).length}function Ex(t,i){return t[i]||t.default||t}const Hf=(t,i,n,r={})=>a=>{const l=Ex(r,t)||{},c=l.delay||r.delay||0;let{elapsed:f=0}=r;f=f-Dn(c);const p=SE(i,t,n,l),m=p[0],v=p[p.length-1],w=pd(t,m),x=pd(t,v);let S={keyframes:p,velocity:i.getVelocity(),ease:"easeOut",...l,delay:-f,onUpdate:A=>{i.set(A),l.onUpdate&&l.onUpdate(A)},onComplete:()=>{a(),l.onComplete&&l.onComplete()}};if(PE(l)||(S={...S,...vE(t,S)}),S.duration&&(S.duration=Dn(S.duration)),S.repeatDelay&&(S.repeatDelay=Dn(S.repeatDelay)),!w||!x||bP.current||l.type===!1)return fE(S);if(i.owner&&i.owner.current instanceof HTMLElement&&!i.owner.getProps().onUpdate){const A=dE(i,t,S);if(A)return A}return Zl(S)};function Ql(t){return!!(Oe(t)&&t.add)}const EE=t=>/^\-?\d*\.?\d+$/.test(t);function $f(t,i){t.indexOf(i)===-1&&t.push(i)}function Wf(t,i){const n=t.indexOf(i);n>-1&&t.splice(n,1)}class Gf{constructor(){this.subscriptions=[]}add(i){return $f(this.subscriptions,i),()=>Wf(this.subscriptions,i)}notify(i,n,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](i,n,r);else for(let l=0;l<a;l++){const c=this.subscriptions[l];c&&c(i,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const TE=t=>!isNaN(parseFloat(t));class AE{constructor(i,n={}){this.version="10.12.17",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,a=!0)=>{this.prev=this.current,this.current=r;const{delta:l,timestamp:c}=Nt;this.lastUpdated!==c&&(this.timeDelta=l,this.lastUpdated=c,Bt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Bt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=i,this.canTrackVelocity=TE(this.current),this.owner=n.owner}onChange(i){return this.on("change",i)}on(i,n){this.events[i]||(this.events[i]=new Gf);const r=this.events[i].add(n);return i==="change"?()=>{r(),Bt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const i in this.events)this.events[i].clear()}attach(i,n){this.passiveEffect=i,this.stopPassiveEffect=n}set(i,n=!0){!n||!this.passiveEffect?this.updateAndNotify(i,n):this.passiveEffect(i,this.updateAndNotify)}setWithVelocity(i,n,r){this.set(n),this.prev=i,this.timeDelta=r}jump(i){this.updateAndNotify(i),this.prev=i,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?wx(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(i){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=i(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xr(t,i){return new AE(t,i)}const Tx=t=>i=>i.test(t),kE={test:t=>t==="auto",parse:t=>t},Ax=[Cs,lt,Ii,fn,LS,FS,kE],Qr=t=>Ax.find(Tx(t)),IE=[...Ax,be,Bn],RE=t=>IE.find(Tx(t));function DE(t,i,n){t.hasValue(i)?t.getValue(i).set(n):t.addValue(i,xr(n))}function ME(t,i){const n=Ru(t,i);let{transitionEnd:r={},transition:a={},...l}=n?t.makeTargetAnimatable(n,!1):{};l={...l,...r};for(const c in l){const f=ZS(l[c]);DE(t,c,f)}}function FE(t,i,n){var r,a;const l=Object.keys(i).filter(f=>!t.hasValue(f)),c=l.length;if(c)for(let f=0;f<c;f++){const p=l[f],m=i[p];let v=null;Array.isArray(m)&&(v=m[0]),v===null&&(v=(a=(r=n[p])!==null&&r!==void 0?r:t.readValue(p))!==null&&a!==void 0?a:i[p]),v!=null&&(typeof v=="string"&&(EE(v)||Px(v))?v=parseFloat(v):!RE(v)&&Bn.test(m)&&(v=Sx(p,m)),t.addValue(p,xr(v,{owner:t})),n[p]===void 0&&(n[p]=v),v!==null&&t.setBaseTarget(p,v))}}function LE(t,i){return i?(i[t]||i.default||i).from:void 0}function BE(t,i,n){const r={};for(const a in t){const l=LE(a,i);if(l!==void 0)r[a]=l;else{const c=n.getValue(a);c&&(r[a]=c.get())}}return r}function OE({protectedKeys:t,needsAnimating:i},n){const r=t.hasOwnProperty(n)&&i[n]!==!0;return i[n]=!1,r}function kx(t,i,{delay:n=0,transitionOverride:r,type:a}={}){let{transition:l=t.getDefaultTransition(),transitionEnd:c,...f}=t.makeTargetAnimatable(i);const p=t.getValue("willChange");r&&(l=r);const m=[],v=a&&t.animationState&&t.animationState.getState()[a];for(const w in f){const x=t.getValue(w),S=f[w];if(!x||S===void 0||v&&OE(v,w))continue;const A={delay:n,elapsed:0,...l};if(window.HandoffAppearAnimations&&!x.hasAnimated){const L=t.getProps()[wP];L&&(A.elapsed=window.HandoffAppearAnimations(L,w,x,Bt))}x.start(Hf(w,x,S,t.shouldReduceMotion&&ws.has(w)?{type:!1}:A));const M=x.animation;Ql(p)&&(p.add(w),M.then(()=>p.remove(w))),m.push(M)}return c&&Promise.all(m).then(()=>{c&&ME(t,c)}),m}function md(t,i,n={}){const r=Ru(t,i,n.custom);let{transition:a=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(a=n.transitionOverride);const l=r?()=>Promise.all(kx(t,r,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(p=0)=>{const{delayChildren:m=0,staggerChildren:v,staggerDirection:w}=a;return NE(t,i,m+p,v,w,n)}:()=>Promise.resolve(),{when:f}=a;if(f){const[p,m]=f==="beforeChildren"?[l,c]:[c,l];return p().then(()=>m())}else return Promise.all([l(),c(n.delay)])}function NE(t,i,n=0,r=0,a=1,l){const c=[],f=(t.variantChildren.size-1)*r,p=a===1?(m=0)=>m*r:(m=0)=>f-m*r;return Array.from(t.variantChildren).sort(zE).forEach((m,v)=>{m.notify("AnimationStart",i),c.push(md(m,i,{...l,delay:n+p(v)}).then(()=>m.notify("AnimationComplete",i)))}),Promise.all(c)}function zE(t,i){return t.sortNodePosition(i)}function UE(t,i,n={}){t.notify("AnimationStart",i);let r;if(Array.isArray(i)){const a=i.map(l=>md(t,l,n));r=Promise.all(a)}else if(typeof i=="string")r=md(t,i,n);else{const a=typeof i=="function"?Ru(t,i,n.custom):i;r=Promise.all(kx(t,a,n))}return r.then(()=>t.notify("AnimationComplete",i))}const VE=[...Tf].reverse(),jE=Tf.length;function HE(t){return i=>Promise.all(i.map(({animation:n,options:r})=>UE(t,n,r)))}function $E(t){let i=HE(t);const n=GE();let r=!0;const a=(p,m)=>{const v=Ru(t,m);if(v){const{transition:w,transitionEnd:x,...S}=v;p={...p,...S,...x}}return p};function l(p){i=p(t)}function c(p,m){const v=t.getProps(),w=t.getVariantContext(!0)||{},x=[],S=new Set;let A={},M=1/0;for(let T=0;T<jE;T++){const P=VE[T],k=n[P],C=v[P]!==void 0?v[P]:w[P],R=Lo(C),H=P===m?k.isActive:null;H===!1&&(M=T);let N=C===w[P]&&C!==v[P]&&R;if(N&&r&&t.manuallyAnimateOnMount&&(N=!1),k.protectedKeys={...A},!k.isActive&&H===null||!C&&!k.prevProp||Eu(C)||typeof C=="boolean")continue;const $=WE(k.prevProp,C);let Z=$||P===m&&k.isActive&&!N&&R||T>M&&R;const B=Array.isArray(C)?C:[C];let rt=B.reduce(a,{});H===!1&&(rt={});const{prevResolvedValues:st={}}=k,Q={...st,...rt},ct=_t=>{Z=!0,S.delete(_t),k.needsAnimating[_t]=!0};for(const _t in Q){const St=rt[_t],xt=st[_t];A.hasOwnProperty(_t)||(St!==xt?Gl(St)&&Gl(xt)?!K0(St,xt)||$?ct(_t):k.protectedKeys[_t]=!0:St!==void 0?ct(_t):S.add(_t):St!==void 0&&S.has(_t)?ct(_t):k.protectedKeys[_t]=!0)}k.prevProp=C,k.prevResolvedValues=rt,k.isActive&&(A={...A,...rt}),r&&t.blockInitialAnimation&&(Z=!1),Z&&!N&&x.push(...B.map(_t=>({animation:_t,options:{type:P,...p}})))}if(S.size){const T={};S.forEach(P=>{const k=t.getBaseTarget(P);k!==void 0&&(T[P]=k)}),x.push({animation:T})}let L=!!x.length;return r&&v.initial===!1&&!t.manuallyAnimateOnMount&&(L=!1),r=!1,L?i(x):Promise.resolve()}function f(p,m,v){var w;if(n[p].isActive===m)return Promise.resolve();(w=t.variantChildren)===null||w===void 0||w.forEach(S=>{var A;return(A=S.animationState)===null||A===void 0?void 0:A.setActive(p,m)}),n[p].isActive=m;const x=c(v,p);for(const S in n)n[S].protectedKeys={};return x}return{animateChanges:c,setActive:f,setAnimateFunction:l,getState:()=>n}}function WE(t,i){return typeof i=="string"?i!==t:Array.isArray(i)?!K0(i,t):!1}function ns(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function GE(){return{animate:ns(!0),whileInView:ns(),whileHover:ns(),whileTap:ns(),whileDrag:ns(),whileFocus:ns(),exit:ns()}}class XE extends Un{constructor(i){super(i),i.animationState||(i.animationState=$E(i))}updateAnimationControlsSubscription(){const{animate:i}=this.node.getProps();this.unmount(),Eu(i)&&(this.unmount=i.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:i}=this.node.getProps(),{animate:n}=this.node.prevProps||{};i!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let YE=0;class ZE extends Un{constructor(){super(...arguments),this.id=YE++}update(){if(!this.node.presenceContext)return;const{isPresent:i,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||i===a)return;const l=this.node.animationState.setActive("exit",!i,{custom:r??this.node.getProps().custom});n&&!i&&l.then(()=>n(this.id))}mount(){const{register:i}=this.node.presenceContext||{};i&&(this.unmount=i(this.id))}unmount(){}}const QE={animation:{Feature:XE},exit:{Feature:ZE}},e_=(t,i)=>Math.abs(t-i);function KE(t,i){const n=e_(t.x,i.x),r=e_(t.y,i.y);return Math.sqrt(n**2+r**2)}class Ix{constructor(i,n,{transformPagePoint:r}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=lh(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,w=KE(m.offset,{x:0,y:0})>=3;if(!v&&!w)return;const{point:x}=m,{timestamp:S}=Nt;this.history.push({...x,timestamp:S});const{onStart:A,onMove:M}=this.handlers;v||(A&&A(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,m)},this.handlePointerMove=(m,v)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=ah(v,this.transformPagePoint),Bt.update(this.updatePoint,!0)},this.handlePointerUp=(m,v)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:w,onSessionEnd:x}=this.handlers,S=lh(m.type==="pointercancel"?this.lastMoveEventInfo:ah(v,this.transformPagePoint),this.history);this.startEvent&&w&&w(m,S),x&&x(m,S)},!W0(i))return;this.handlers=n,this.transformPagePoint=r;const a=ku(i),l=ah(a,this.transformPagePoint),{point:c}=l,{timestamp:f}=Nt;this.history=[{...c,timestamp:f}];const{onSessionStart:p}=n;p&&p(i,lh(l,this.history)),this.removeListeners=Rn(Gi(window,"pointermove",this.handlePointerMove),Gi(window,"pointerup",this.handlePointerUp),Gi(window,"pointercancel",this.handlePointerUp))}updateHandlers(i){this.handlers=i}end(){this.removeListeners&&this.removeListeners(),qi(this.updatePoint)}}function ah(t,i){return i?{point:i(t.point)}:t}function i_(t,i){return{x:t.x-i.x,y:t.y-i.y}}function lh({point:t},i){return{point:t,delta:i_(t,Rx(i)),offset:i_(t,qE(i)),velocity:JE(i,.1)}}function qE(t){return t[0]}function Rx(t){return t[t.length-1]}function JE(t,i){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const a=Rx(t);for(;n>=0&&(r=t[n],!(a.timestamp-r.timestamp>Dn(i)));)n--;if(!r)return{x:0,y:0};const l=Xi(a.timestamp-r.timestamp);if(l===0)return{x:0,y:0};const c={x:(a.x-r.x)/l,y:(a.y-r.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function Xe(t){return t.max-t.min}function _d(t,i=0,n=.01){return Math.abs(t-i)<=n}function n_(t,i,n,r=.5){t.origin=r,t.originPoint=Ut(i.min,i.max,t.origin),t.scale=Xe(n)/Xe(i),(_d(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Ut(n.min,n.max,t.origin)-t.originPoint,(_d(t.translate)||isNaN(t.translate))&&(t.translate=0)}function mo(t,i,n,r){n_(t.x,i.x,n.x,r?r.originX:void 0),n_(t.y,i.y,n.y,r?r.originY:void 0)}function s_(t,i,n){t.min=n.min+i.min,t.max=t.min+Xe(i)}function tT(t,i,n){s_(t.x,i.x,n.x),s_(t.y,i.y,n.y)}function r_(t,i,n){t.min=i.min-n.min,t.max=t.min+Xe(i)}function _o(t,i,n){r_(t.x,i.x,n.x),r_(t.y,i.y,n.y)}function eT(t,{min:i,max:n},r){return i!==void 0&&t<i?t=r?Ut(i,t,r.min):Math.max(t,i):n!==void 0&&t>n&&(t=r?Ut(n,t,r.max):Math.min(t,n)),t}function o_(t,i,n){return{min:i!==void 0?t.min+i:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function iT(t,{top:i,left:n,bottom:r,right:a}){return{x:o_(t.x,n,a),y:o_(t.y,i,r)}}function a_(t,i){let n=i.min-t.min,r=i.max-t.max;return i.max-i.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function nT(t,i){return{x:a_(t.x,i.x),y:a_(t.y,i.y)}}function sT(t,i){let n=.5;const r=Xe(t),a=Xe(i);return a>r?n=No(i.min,i.max-r,t.min):r>a&&(n=No(t.min,t.max-a,i.min)),Ln(0,1,n)}function rT(t,i){const n={};return i.min!==void 0&&(n.min=i.min-t.min),i.max!==void 0&&(n.max=i.max-t.min),n}const vd=.35;function oT(t=vd){return t===!1?t=0:t===!0&&(t=vd),{x:l_(t,"left","right"),y:l_(t,"top","bottom")}}function l_(t,i,n){return{min:u_(t,i),max:u_(t,n)}}function u_(t,i){return typeof t=="number"?t:t[i]||0}const c_=()=>({translate:0,scale:1,origin:0,originPoint:0}),nr=()=>({x:c_(),y:c_()}),h_=()=>({min:0,max:0}),Yt=()=>({x:h_(),y:h_()});function Pi(t){return[t("x"),t("y")]}function Dx({top:t,left:i,right:n,bottom:r}){return{x:{min:i,max:n},y:{min:t,max:r}}}function aT({x:t,y:i}){return{top:i.min,right:t.max,bottom:i.max,left:t.min}}function lT(t,i){if(!i)return t;const n=i({x:t.left,y:t.top}),r=i({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function uh(t){return t===void 0||t===1}function yd({scale:t,scaleX:i,scaleY:n}){return!uh(t)||!uh(i)||!uh(n)}function os(t){return yd(t)||Mx(t)||t.z||t.rotate||t.rotateX||t.rotateY}function Mx(t){return d_(t.x)||d_(t.y)}function d_(t){return t&&t!=="0%"}function Kl(t,i,n){const r=t-n,a=i*r;return n+a}function f_(t,i,n,r,a){return a!==void 0&&(t=Kl(t,a,r)),Kl(t,n,r)+i}function xd(t,i=0,n=1,r,a){t.min=f_(t.min,i,n,r,a),t.max=f_(t.max,i,n,r,a)}function Fx(t,{x:i,y:n}){xd(t.x,i.translate,i.scale,i.originPoint),xd(t.y,n.translate,n.scale,n.originPoint)}function uT(t,i,n,r=!1){const a=n.length;if(!a)return;i.x=i.y=1;let l,c;for(let f=0;f<a;f++){l=n[f],c=l.projectionDelta;const p=l.instance;p&&p.style&&p.style.display==="contents"||(r&&l.options.layoutScroll&&l.scroll&&l!==l.root&&sr(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(i.x*=c.x.scale,i.y*=c.y.scale,Fx(t,c)),r&&os(l.latestValues)&&sr(t,l.latestValues))}i.x=p_(i.x),i.y=p_(i.y)}function p_(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function mn(t,i){t.min=t.min+i,t.max=t.max+i}function g_(t,i,[n,r,a]){const l=i[a]!==void 0?i[a]:.5,c=Ut(t.min,t.max,l);xd(t,i[n],i[r],c,i.scale)}const cT=["x","scaleX","originX"],hT=["y","scaleY","originY"];function sr(t,i){g_(t.x,i,cT),g_(t.y,i,hT)}function Lx(t,i){return Dx(lT(t.getBoundingClientRect(),i))}function dT(t,i,n){const r=Lx(t,n),{scroll:a}=i;return a&&(mn(r.x,a.offset.x),mn(r.y,a.offset.y)),r}const fT=new WeakMap;class pT{constructor(i){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Yt(),this.visualElement=i}start(i,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=p=>{this.stopAnimation(),n&&this.snapToCursor(ku(p,"page").point)},l=(p,m)=>{const{drag:v,dragPropagation:w,onDragStart:x}=this.getProps();if(v&&!w&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=X0(v),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Pi(A=>{let M=this.getAxisMotionValue(A).get()||0;if(Ii.test(M)){const{projection:L}=this.visualElement;if(L&&L.layout){const T=L.layout.layoutBox[A];T&&(M=Xe(T)*(parseFloat(M)/100))}}this.originPoint[A]=M}),x&&Bt.update(()=>x(p,m),!1,!0);const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},c=(p,m)=>{const{dragPropagation:v,dragDirectionLock:w,onDirectionLock:x,onDrag:S}=this.getProps();if(!v&&!this.openGlobalLock)return;const{offset:A}=m;if(w&&this.currentDirection===null){this.currentDirection=gT(A),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",m.point,A),this.updateAxis("y",m.point,A),this.visualElement.render(),S&&S(p,m)},f=(p,m)=>this.stop(p,m);this.panSession=new Ix(i,{onSessionStart:a,onStart:l,onMove:c,onSessionEnd:f},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(i,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&Bt.update(()=>l(i,n))}cancel(){this.isDragging=!1;const{projection:i,animationState:n}=this.visualElement;i&&(i.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(i,n,r){const{drag:a}=this.getProps();if(!r||!Qa(i,a,this.currentDirection))return;const l=this.getAxisMotionValue(i);let c=this.originPoint[i]+r[i];this.constraints&&this.constraints[i]&&(c=eT(c,this.constraints[i],this.elastic[i])),l.set(c)}resolveConstraints(){const{dragConstraints:i,dragElastic:n}=this.getProps(),{layout:r}=this.visualElement.projection||{},a=this.constraints;i&&er(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&r?this.constraints=iT(r.layoutBox,i):this.constraints=!1,this.elastic=oT(n),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Pi(l=>{this.getAxisMotionValue(l)&&(this.constraints[l]=rT(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:i,onMeasureDragConstraints:n}=this.getProps();if(!i||!er(i))return!1;const r=i.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=dT(r,a.root,this.visualElement.getTransformPagePoint());let c=nT(a.layout.layoutBox,l);if(n){const f=n(aT(c));this.hasMutatedConstraints=!!f,f&&(c=Dx(f))}return c}startAnimation(i){const{drag:n,dragMomentum:r,dragElastic:a,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:f}=this.getProps(),p=this.constraints||{},m=Pi(v=>{if(!Qa(v,n,this.currentDirection))return;let w=p&&p[v]||{};c&&(w={min:0,max:0});const x=a?200:1e6,S=a?40:1e7,A={type:"inertia",velocity:r?i[v]:0,bounceStiffness:x,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...l,...w};return this.startAxisValueAnimation(v,A)});return Promise.all(m).then(f)}startAxisValueAnimation(i,n){const r=this.getAxisMotionValue(i);return r.start(Hf(i,r,0,n))}stopAnimation(){Pi(i=>this.getAxisMotionValue(i).stop())}getAxisMotionValue(i){const n="_drag"+i.toUpperCase(),r=this.visualElement.getProps(),a=r[n];return a||this.visualElement.getValue(i,(r.initial?r.initial[i]:void 0)||0)}snapToCursor(i){Pi(n=>{const{drag:r}=this.getProps();if(!Qa(n,r,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(n);if(a&&a.layout){const{min:c,max:f}=a.layout.layoutBox[n];l.set(i[n]-Ut(c,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:i,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!er(n)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Pi(c=>{const f=this.getAxisMotionValue(c);if(f){const p=f.get();a[c]=sT({min:p,max:p},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Pi(c=>{if(!Qa(c,i,null))return;const f=this.getAxisMotionValue(c),{min:p,max:m}=this.constraints[c];f.set(Ut(p,m,a[c]))})}addListeners(){if(!this.visualElement.current)return;fT.set(this.visualElement,this);const i=this.visualElement.current,n=Gi(i,"pointerdown",p=>{const{drag:m,dragListener:v=!0}=this.getProps();m&&v&&this.start(p)}),r=()=>{const{dragConstraints:p}=this.getProps();er(p)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),r();const c=$i(window,"resize",()=>this.scalePositionWithinConstraints()),f=a.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m})=>{this.isDragging&&m&&(Pi(v=>{const w=this.getAxisMotionValue(v);w&&(this.originPoint[v]+=p[v].translate,w.set(w.get()+p[v].translate))}),this.visualElement.render())});return()=>{c(),n(),l(),f&&f()}}getProps(){const i=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:c=vd,dragMomentum:f=!0}=i;return{...i,drag:n,dragDirectionLock:r,dragPropagation:a,dragConstraints:l,dragElastic:c,dragMomentum:f}}}function Qa(t,i,n){return(i===!0||i===t)&&(n===null||n===t)}function gT(t,i=10){let n=null;return Math.abs(t.y)>i?n="y":Math.abs(t.x)>i&&(n="x"),n}class mT extends Un{constructor(i){super(i),this.removeGroupControls=Jt,this.removeListeners=Jt,this.controls=new pT(i)}mount(){const{dragControls:i}=this.node.getProps();i&&(this.removeGroupControls=i.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Jt}unmount(){this.removeGroupControls(),this.removeListeners()}}const m_=t=>(i,n)=>{t&&Bt.update(()=>t(i,n))};class _T extends Un{constructor(){super(...arguments),this.removePointerDownListener=Jt}onPointerDown(i){this.session=new Ix(i,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:i,onPanStart:n,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:m_(i),onStart:m_(n),onMove:r,onEnd:(l,c)=>{delete this.session,a&&Bt.update(()=>a(l,c))}}}mount(){this.removePointerDownListener=Gi(this.node.current,"pointerdown",i=>this.onPointerDown(i))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function vT(){const t=O.useContext(Su);if(t===null)return[!0,null];const{isPresent:i,onExitComplete:n,register:r}=t,a=O.useId();return O.useEffect(()=>r(a),[]),!i&&n?[!1,()=>n&&n(a)]:[!0]}const fl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function __(t,i){return i.max===i.min?0:t/(i.max-i.min)*100}const Kr={correct:(t,i)=>{if(!i.target)return t;if(typeof t=="string")if(lt.test(t))t=parseFloat(t);else return t;const n=__(t,i.target.x),r=__(t,i.target.y);return`${n}% ${r}%`}},yT={correct:(t,{treeScale:i,projectionDelta:n})=>{const r=t,a=Bn.parse(t);if(a.length>5)return r;const l=Bn.createTransformer(t),c=typeof a[0]!="number"?1:0,f=n.x.scale*i.x,p=n.y.scale*i.y;a[0+c]/=f,a[1+c]/=p;const m=Ut(f,p,.5);return typeof a[2+c]=="number"&&(a[2+c]/=m),typeof a[3+c]=="number"&&(a[3+c]/=m),l(a)}};class xT extends su.Component{componentDidMount(){const{visualElement:i,layoutGroup:n,switchLayoutGroup:r,layoutId:a}=this.props,{projection:l}=i;TS(wT),l&&(n.group&&n.group.add(l),r&&r.register&&a&&r.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),fl.hasEverUpdated=!0}getSnapshotBeforeUpdate(i){const{layoutDependency:n,visualElement:r,drag:a,isPresent:l}=this.props,c=r.projection;return c&&(c.isPresent=l,a||i.layoutDependency!==n||n===void 0?c.willUpdate():this.safeToRemove(),i.isPresent!==l&&(l?c.promote():c.relegate()||Bt.postRender(()=>{const f=c.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:i}=this.props.visualElement;i&&(i.root.didUpdate(),queueMicrotask(()=>{!i.currentAnimation&&i.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:i,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:a}=i;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:i}=this.props;i&&i()}render(){return null}}function Bx(t){const[i,n]=vT(),r=O.useContext(kf);return su.createElement(xT,{...t,layoutGroup:r,switchLayoutGroup:O.useContext(I0),isPresent:i,safeToRemove:n})}const wT={borderRadius:{...Kr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Kr,borderTopRightRadius:Kr,borderBottomLeftRadius:Kr,borderBottomRightRadius:Kr,boxShadow:yT},Ox=["TopLeft","TopRight","BottomLeft","BottomRight"],CT=Ox.length,v_=t=>typeof t=="string"?parseFloat(t):t,y_=t=>typeof t=="number"||lt.test(t);function bT(t,i,n,r,a,l){a?(t.opacity=Ut(0,n.opacity!==void 0?n.opacity:1,ST(r)),t.opacityExit=Ut(i.opacity!==void 0?i.opacity:1,0,PT(r))):l&&(t.opacity=Ut(i.opacity!==void 0?i.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let c=0;c<CT;c++){const f=`border${Ox[c]}Radius`;let p=x_(i,f),m=x_(n,f);if(p===void 0&&m===void 0)continue;p||(p=0),m||(m=0),p===0||m===0||y_(p)===y_(m)?(t[f]=Math.max(Ut(v_(p),v_(m),r),0),(Ii.test(m)||Ii.test(p))&&(t[f]+="%")):t[f]=m}(i.rotate||n.rotate)&&(t.rotate=Ut(i.rotate||0,n.rotate||0,r))}function x_(t,i){return t[i]!==void 0?t[i]:t.borderRadius}const ST=Nx(0,.5,zf),PT=Nx(.5,.95,Jt);function Nx(t,i,n){return r=>r<t?0:r>i?1:n(No(t,i,r))}function w_(t,i){t.min=i.min,t.max=i.max}function ti(t,i){w_(t.x,i.x),w_(t.y,i.y)}function C_(t,i,n,r,a){return t-=i,t=Kl(t,1/n,r),a!==void 0&&(t=Kl(t,1/a,r)),t}function ET(t,i=0,n=1,r=.5,a,l=t,c=t){if(Ii.test(i)&&(i=parseFloat(i),i=Ut(c.min,c.max,i/100)-c.min),typeof i!="number")return;let f=Ut(l.min,l.max,r);t===l&&(f-=i),t.min=C_(t.min,i,n,f,a),t.max=C_(t.max,i,n,f,a)}function b_(t,i,[n,r,a],l,c){ET(t,i[n],i[r],i[a],i.scale,l,c)}const TT=["x","scaleX","originX"],AT=["y","scaleY","originY"];function S_(t,i,n,r){b_(t.x,i,TT,n?n.x:void 0,r?r.x:void 0),b_(t.y,i,AT,n?n.y:void 0,r?r.y:void 0)}function P_(t){return t.translate===0&&t.scale===1}function zx(t){return P_(t.x)&&P_(t.y)}function wd(t,i){return t.x.min===i.x.min&&t.x.max===i.x.max&&t.y.min===i.y.min&&t.y.max===i.y.max}function E_(t){return Xe(t.x)/Xe(t.y)}class kT{constructor(){this.members=[]}add(i){$f(this.members,i),i.scheduleRender()}remove(i){if(Wf(this.members,i),i===this.prevLead&&(this.prevLead=void 0),i===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(i){const n=this.members.findIndex(a=>i===a);if(n===0)return!1;let r;for(let a=n;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){r=l;break}}return r?(this.promote(r),!0):!1}promote(i,n){const r=this.lead;if(i!==r&&(this.prevLead=r,this.lead=i,i.show(),r)){r.instance&&r.scheduleRender(),i.scheduleRender(),i.resumeFrom=r,n&&(i.resumeFrom.preserveOpacity=!0),r.snapshot&&(i.snapshot=r.snapshot,i.snapshot.latestValues=r.animationValues||r.latestValues),i.root&&i.root.isUpdating&&(i.isLayoutDirty=!0);const{crossfade:a}=i.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(i=>{const{options:n,resumingFrom:r}=i;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(i=>{i.instance&&i.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function T_(t,i,n){let r="";const a=t.x.translate/i.x,l=t.y.translate/i.y;if((a||l)&&(r=`translate3d(${a}px, ${l}px, 0) `),(i.x!==1||i.y!==1)&&(r+=`scale(${1/i.x}, ${1/i.y}) `),n){const{rotate:p,rotateX:m,rotateY:v}=n;p&&(r+=`rotate(${p}deg) `),m&&(r+=`rotateX(${m}deg) `),v&&(r+=`rotateY(${v}deg) `)}const c=t.x.scale*i.x,f=t.y.scale*i.y;return(c!==1||f!==1)&&(r+=`scale(${c}, ${f})`),r||"none"}const IT=(t,i)=>t.depth-i.depth;class RT{constructor(){this.children=[],this.isDirty=!1}add(i){$f(this.children,i),this.isDirty=!0}remove(i){Wf(this.children,i),this.isDirty=!0}forEach(i){this.isDirty&&this.children.sort(IT),this.isDirty=!1,this.children.forEach(i)}}function DT(t,i){const n=performance.now(),r=({timestamp:a})=>{const l=a-n;l>=i&&(qi(r),t(l-i))};return Bt.read(r,!0),()=>qi(r)}function MT(t){window.MotionDebug&&window.MotionDebug.record(t)}function FT(t){return t instanceof SVGElement&&t.tagName!=="svg"}function LT(t,i,n){const r=Oe(t)?t:xr(t);return r.start(Hf("",r,i,n)),r.animation}const A_=["","X","Y","Z"],k_=1e3;let BT=0;const as={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Ux({attachResizeListener:t,defaultParent:i,measureScroll:n,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(c={},f=i==null?void 0:i()){this.id=BT++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{as.totalNodes=as.resolvedTargetDeltas=as.recalculatedProjection=0,this.nodes.forEach(zT),this.nodes.forEach($T),this.nodes.forEach(WT),this.nodes.forEach(UT),MT(as)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new RT)}addEventListener(c,f){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Gf),this.eventHandlers.get(c).add(f)}notifyListeners(c,...f){const p=this.eventHandlers.get(c);p&&p.notify(...f)}hasListeners(c){return this.eventHandlers.has(c)}mount(c,f=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=FT(c),this.instance=c;const{layoutId:p,layout:m,visualElement:v}=this.options;if(v&&!v.current&&v.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),f&&(m||p)&&(this.isLayoutDirty=!0),t){let w;const x=()=>this.root.updateBlockedByResize=!1;t(c,()=>{this.root.updateBlockedByResize=!0,w&&w(),w=DT(x,250),fl.hasAnimatedSinceResize&&(fl.hasAnimatedSinceResize=!1,this.nodes.forEach(R_))})}p&&this.root.registerSharedNode(p,this),this.options.animate!==!1&&v&&(p||m)&&this.addEventListener("didUpdate",({delta:w,hasLayoutChanged:x,hasRelativeTargetChanged:S,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const M=this.options.transition||v.getDefaultTransition()||QT,{onLayoutAnimationStart:L,onLayoutAnimationComplete:T}=v.getProps(),P=!this.targetLayout||!wd(this.targetLayout,A)||S,k=!x&&S;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||k||x&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(w,k);const C={...Ex(M,"layout"),onPlay:L,onComplete:T};(v.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else x||R_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,qi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(GT),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const w=this.path[v];w.shouldResetTransform=!0,w.updateScroll("snapshot"),w.options.layoutRoot&&w.willUpdate(!1)}const{layoutId:f,layout:p}=this.options;if(f===void 0&&!p)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(I_);return}this.isUpdating||this.nodes.forEach(jT),this.isUpdating=!1,this.nodes.forEach(HT),this.nodes.forEach(OT),this.nodes.forEach(NT),this.clearAllSnapshots();const f=performance.now();Nt.delta=Ln(0,1e3/60,f-Nt.timestamp),Nt.timestamp=f,Nt.isProcessing=!0,dr.update.process(Nt),dr.preRender.process(Nt),dr.render.process(Nt),Nt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(VT),this.sharedNodes.forEach(XT)}scheduleUpdateProjection(){Bt.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){Bt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Yt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let f=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(f=!1),f&&(this.scroll={animationId:this.root.animationId,phase:c,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!a)return;const c=this.isLayoutDirty||this.shouldResetTransform,f=this.projectionDelta&&!zx(this.projectionDelta),p=this.getTransformTemplate(),m=p?p(this.latestValues,""):void 0,v=m!==this.prevTransformTemplateValue;c&&(f||os(this.latestValues)||v)&&(a(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const f=this.measurePageBox();let p=this.removeElementScroll(f);return c&&(p=this.removeTransform(p)),KT(p),{animationId:this.root.animationId,measuredBox:f,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return Yt();const f=c.measureViewportBox(),{scroll:p}=this.root;return p&&(mn(f.x,p.offset.x),mn(f.y,p.offset.y)),f}removeElementScroll(c){const f=Yt();ti(f,c);for(let p=0;p<this.path.length;p++){const m=this.path[p],{scroll:v,options:w}=m;if(m!==this.root&&v&&w.layoutScroll){if(v.isRoot){ti(f,c);const{scroll:x}=this.root;x&&(mn(f.x,-x.offset.x),mn(f.y,-x.offset.y))}mn(f.x,v.offset.x),mn(f.y,v.offset.y)}}return f}applyTransform(c,f=!1){const p=Yt();ti(p,c);for(let m=0;m<this.path.length;m++){const v=this.path[m];!f&&v.options.layoutScroll&&v.scroll&&v!==v.root&&sr(p,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),os(v.latestValues)&&sr(p,v.latestValues)}return os(this.latestValues)&&sr(p,this.latestValues),p}removeTransform(c){const f=Yt();ti(f,c);for(let p=0;p<this.path.length;p++){const m=this.path[p];if(!m.instance||!os(m.latestValues))continue;yd(m.latestValues)&&m.updateSnapshot();const v=Yt(),w=m.measurePageBox();ti(v,w),S_(f,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,v)}return os(this.latestValues)&&S_(f,this.latestValues),f}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Nt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var f;const p=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=p.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=p.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=p.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==p;if(!(c||m&&this.isSharedProjectionDirty||this.isProjectionDirty||!((f=this.parent)===null||f===void 0)&&f.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:w,layoutId:x}=this.options;if(!(!this.layout||!(w||x))){if(this.resolvedRelativeTargetAt=Nt.timestamp,!this.targetDelta&&!this.relativeTarget){const S=this.getClosestProjectingParent();S&&S.layout&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Yt(),this.relativeTargetOrigin=Yt(),_o(this.relativeTargetOrigin,this.layout.layoutBox,S.layout.layoutBox),ti(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Yt(),this.targetWithTransforms=Yt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),tT(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ti(this.target,this.layout.layoutBox),Fx(this.target,this.targetDelta)):ti(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const S=this.getClosestProjectingParent();S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Yt(),this.relativeTargetOrigin=Yt(),_o(this.relativeTargetOrigin,this.target,S.target),ti(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}as.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||yd(this.parent.latestValues)||Mx(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var c;const f=this.getLead(),p=!!this.resumingFrom||this!==f;let m=!0;if((this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty)&&(m=!1),p&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===Nt.timestamp&&(m=!1),m)return;const{layout:v,layoutId:w}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(v||w))return;ti(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,S=this.treeScale.y;uT(this.layoutCorrected,this.treeScale,this.path,p),f.layout&&!f.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(f.target=f.layout.layoutBox);const{target:A}=f;if(!A){this.projectionTransform&&(this.projectionDelta=nr(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=nr(),this.projectionDeltaWithTransform=nr());const M=this.projectionTransform;mo(this.projectionDelta,this.layoutCorrected,A,this.latestValues),this.projectionTransform=T_(this.projectionDelta,this.treeScale),(this.projectionTransform!==M||this.treeScale.x!==x||this.treeScale.y!==S)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A)),as.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),c){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(c,f=!1){const p=this.snapshot,m=p?p.latestValues:{},v={...this.latestValues},w=nr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const x=Yt(),S=p?p.source:void 0,A=this.layout?this.layout.source:void 0,M=S!==A,L=this.getStack(),T=!L||L.members.length<=1,P=!!(M&&!T&&this.options.crossfade===!0&&!this.path.some(ZT));this.animationProgress=0;let k;this.mixTargetDelta=C=>{const R=C/1e3;D_(w.x,c.x,R),D_(w.y,c.y,R),this.setTargetDelta(w),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_o(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),YT(this.relativeTarget,this.relativeTargetOrigin,x,R),k&&wd(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=Yt()),ti(k,this.relativeTarget)),M&&(this.animationValues=v,bT(v,m,this.latestValues,R,P,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(qi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Bt.update(()=>{fl.hasAnimatedSinceResize=!0,this.currentAnimation=LT(0,k_,{...c,onUpdate:f=>{this.mixTargetDelta(f),c.onUpdate&&c.onUpdate(f)},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(k_),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:f,target:p,layout:m,latestValues:v}=c;if(!(!f||!p||!m)){if(this!==c&&this.layout&&m&&Vx(this.options.animationType,this.layout.layoutBox,m.layoutBox)){p=this.target||Yt();const w=Xe(this.layout.layoutBox.x);p.x.min=c.target.x.min,p.x.max=p.x.min+w;const x=Xe(this.layout.layoutBox.y);p.y.min=c.target.y.min,p.y.max=p.y.min+x}ti(f,p),sr(f,v),mo(this.projectionDeltaWithTransform,this.layoutCorrected,f,v)}}registerSharedNode(c,f){this.sharedNodes.has(c)||this.sharedNodes.set(c,new kT),this.sharedNodes.get(c).add(f);const m=f.options.initialPromotionConfig;f.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(f):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var c;const{layoutId:f}=this.options;return f?((c=this.getStack())===null||c===void 0?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:f}=this.options;return f?(c=this.getStack())===null||c===void 0?void 0:c.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:f,preserveFollowOpacity:p}={}){const m=this.getStack();m&&m.promote(this,p),c&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetRotation(){const{visualElement:c}=this.options;if(!c)return;let f=!1;const{latestValues:p}=c;if((p.rotate||p.rotateX||p.rotateY||p.rotateZ)&&(f=!0),!f)return;const m={};for(let v=0;v<A_.length;v++){const w="rotate"+A_[v];p[w]&&(m[w]=p[w],c.setStaticValue(w,0))}c.render();for(const v in m)c.setStaticValue(v,m[v]);c.scheduleRender()}getProjectionStyles(c={}){var f,p;const m={};if(!this.instance||this.isSVG)return m;if(this.isVisible)m.visibility="";else return{visibility:"hidden"};const v=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,m.opacity="",m.pointerEvents=dl(c.pointerEvents)||"",m.transform=v?v(this.latestValues,""):"none",m;const w=this.getLead();if(!this.projectionDelta||!this.layout||!w.target){const M={};return this.options.layoutId&&(M.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,M.pointerEvents=dl(c.pointerEvents)||""),this.hasProjected&&!os(this.latestValues)&&(M.transform=v?v({},""):"none",this.hasProjected=!1),M}const x=w.animationValues||w.latestValues;this.applyTransformsToTarget(),m.transform=T_(this.projectionDeltaWithTransform,this.treeScale,x),v&&(m.transform=v(x,m.transform));const{x:S,y:A}=this.projectionDelta;m.transformOrigin=`${S.origin*100}% ${A.origin*100}% 0`,w.animationValues?m.opacity=w===this?(p=(f=x.opacity)!==null&&f!==void 0?f:this.latestValues.opacity)!==null&&p!==void 0?p:1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:m.opacity=w===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const M in $l){if(x[M]===void 0)continue;const{correct:L,applyTo:T}=$l[M],P=m.transform==="none"?x[M]:L(x[M],w);if(T){const k=T.length;for(let C=0;C<k;C++)m[T[C]]=P}else m[M]=P}return this.options.layoutId&&(m.pointerEvents=w===this?dl(c.pointerEvents)||"":"none"),m}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var f;return(f=c.currentAnimation)===null||f===void 0?void 0:f.stop()}),this.root.nodes.forEach(I_),this.root.sharedNodes.clear()}}}function OT(t){t.updateLayout()}function NT(t){var i;const n=((i=t.resumeFrom)===null||i===void 0?void 0:i.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=t.layout,{animationType:l}=t.options,c=n.source!==t.layout.source;l==="size"?Pi(w=>{const x=c?n.measuredBox[w]:n.layoutBox[w],S=Xe(x);x.min=r[w].min,x.max=x.min+S}):Vx(l,n.layoutBox,r)&&Pi(w=>{const x=c?n.measuredBox[w]:n.layoutBox[w],S=Xe(r[w]);x.max=x.min+S,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[w].max=t.relativeTarget[w].min+S)});const f=nr();mo(f,r,n.layoutBox);const p=nr();c?mo(p,t.applyTransform(a,!0),n.measuredBox):mo(p,r,n.layoutBox);const m=!zx(f);let v=!1;if(!t.resumeFrom){const w=t.getClosestProjectingParent();if(w&&!w.resumeFrom){const{snapshot:x,layout:S}=w;if(x&&S){const A=Yt();_o(A,n.layoutBox,x.layoutBox);const M=Yt();_o(M,r,S.layoutBox),wd(A,M)||(v=!0),w.options.layoutRoot&&(t.relativeTarget=M,t.relativeTargetOrigin=A,t.relativeParent=w)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:p,layoutDelta:f,hasLayoutChanged:m,hasRelativeTargetChanged:v})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function zT(t){as.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function UT(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function VT(t){t.clearSnapshot()}function I_(t){t.clearMeasurements()}function jT(t){t.isLayoutDirty=!1}function HT(t){const{visualElement:i}=t.options;i&&i.getProps().onBeforeLayoutMeasure&&i.notify("BeforeLayoutMeasure"),t.resetTransform()}function R_(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function $T(t){t.resolveTargetDelta()}function WT(t){t.calcProjection()}function GT(t){t.resetRotation()}function XT(t){t.removeLeadSnapshot()}function D_(t,i,n){t.translate=Ut(i.translate,0,n),t.scale=Ut(i.scale,1,n),t.origin=i.origin,t.originPoint=i.originPoint}function M_(t,i,n,r){t.min=Ut(i.min,n.min,r),t.max=Ut(i.max,n.max,r)}function YT(t,i,n,r){M_(t.x,i.x,n.x,r),M_(t.y,i.y,n.y,r)}function ZT(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const QT={duration:.45,ease:[.4,0,.1,1]};function F_(t){t.min=Math.round(t.min),t.max=Math.round(t.max)}function KT(t){F_(t.x),F_(t.y)}function Vx(t,i,n){return t==="position"||t==="preserve-aspect"&&!_d(E_(i),E_(n),.2)}const qT=Ux({attachResizeListener:(t,i)=>$i(t,"resize",i),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ch={current:void 0},jx=Ux({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ch.current){const t=new qT({});t.mount(window),t.setOptions({layoutScroll:!0}),ch.current=t}return ch.current},resetTransform:(t,i)=>{t.style.transform=i!==void 0?i:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),JT={pan:{Feature:_T},drag:{Feature:mT,ProjectionNode:jx,MeasureLayout:Bx}},tA=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function eA(t){const i=tA.exec(t);if(!i)return[,];const[,n,r]=i;return[n,r]}function Cd(t,i,n=1){const[r,a]=eA(t);if(!r)return;const l=window.getComputedStyle(i).getPropertyValue(r);return l?l.trim():ud(a)?Cd(a,i,n+1):a}function iA(t,{...i},n){const r=t.current;if(!(r instanceof Element))return{target:i,transitionEnd:n};n&&(n={...n}),t.values.forEach(a=>{const l=a.get();if(!ud(l))return;const c=Cd(l,r);c&&a.set(c)});for(const a in i){const l=i[a];if(!ud(l))continue;const c=Cd(l,r);c&&(i[a]=c,n||(n={}),n[a]===void 0&&(n[a]=l))}return{target:i,transitionEnd:n}}const nA=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Hx=t=>nA.has(t),sA=t=>Object.keys(t).some(Hx),L_=t=>t===Cs||t===lt,B_=(t,i)=>parseFloat(t.split(", ")[i]),O_=(t,i)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const a=r.match(/^matrix3d\((.+)\)$/);if(a)return B_(a[1],i);{const l=r.match(/^matrix\((.+)\)$/);return l?B_(l[1],t):0}},rA=new Set(["x","y","z"]),oA=Wo.filter(t=>!rA.has(t));function aA(t){const i=[];return oA.forEach(n=>{const r=t.getValue(n);r!==void 0&&(i.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),i.length&&t.render(),i}const N_={width:({x:t},{paddingLeft:i="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(i)-parseFloat(n),height:({y:t},{paddingTop:i="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(i)-parseFloat(n),top:(t,{top:i})=>parseFloat(i),left:(t,{left:i})=>parseFloat(i),bottom:({y:t},{top:i})=>parseFloat(i)+(t.max-t.min),right:({x:t},{left:i})=>parseFloat(i)+(t.max-t.min),x:O_(4,13),y:O_(5,14)},lA=(t,i,n)=>{const r=i.measureViewportBox(),a=i.current,l=getComputedStyle(a),{display:c}=l,f={};c==="none"&&i.setStaticValue("display",t.display||"block"),n.forEach(m=>{f[m]=N_[m](r,l)}),i.render();const p=i.measureViewportBox();return n.forEach(m=>{const v=i.getValue(m);v&&v.jump(f[m]),t[m]=N_[m](p,l)}),t},uA=(t,i,n={},r={})=>{i={...i},r={...r};const a=Object.keys(i).filter(Hx);let l=[],c=!1;const f=[];if(a.forEach(p=>{const m=t.getValue(p);if(!t.hasValue(p))return;let v=n[p],w=Qr(v);const x=i[p];let S;if(Gl(x)){const A=x.length,M=x[0]===null?1:0;v=x[M],w=Qr(v);for(let L=M;L<A&&x[L]!==null;L++)S?Nf(Qr(x[L])===S):S=Qr(x[L])}else S=Qr(x);if(w!==S)if(L_(w)&&L_(S)){const A=m.get();typeof A=="string"&&m.set(parseFloat(A)),typeof x=="string"?i[p]=parseFloat(x):Array.isArray(x)&&S===lt&&(i[p]=x.map(parseFloat))}else w!=null&&w.transform&&(S!=null&&S.transform)&&(v===0||x===0)?v===0?m.set(S.transform(v)):i[p]=w.transform(x):(c||(l=aA(t),c=!0),f.push(p),r[p]=r[p]!==void 0?r[p]:i[p],m.jump(x))}),f.length){const p=f.indexOf("height")>=0?window.pageYOffset:null,m=lA(i,t,f);return l.length&&l.forEach(([v,w])=>{t.getValue(v).set(w)}),t.render(),Pu&&p!==null&&window.scrollTo({top:p}),{target:m,transitionEnd:r}}else return{target:i,transitionEnd:r}};function cA(t,i,n,r){return sA(i)?uA(t,i,n,r):{target:i,transitionEnd:r}}const hA=(t,i,n,r)=>{const a=iA(t,i,r);return i=a.target,r=a.transitionEnd,cA(t,i,n,r)},bd={current:null},$x={current:!1};function dA(){if($x.current=!0,!!Pu)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),i=()=>bd.current=t.matches;t.addListener(i),i()}else bd.current=!1}function fA(t,i,n){const{willChange:r}=i;for(const a in i){const l=i[a],c=n[a];if(Oe(l))t.addValue(a,l),Ql(r)&&r.add(a);else if(Oe(c))t.addValue(a,xr(l,{owner:t})),Ql(r)&&r.remove(a);else if(c!==l)if(t.hasValue(a)){const f=t.getValue(a);!f.hasAnimated&&f.set(l)}else{const f=t.getStaticValue(a);t.addValue(a,xr(f!==void 0?f:l,{owner:t}))}}for(const a in n)i[a]===void 0&&t.removeValue(a);return i}const z_=new WeakMap,Wx=Object.keys(Bo),pA=Wx.length,U_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],gA=Af.length;class mA{constructor({parent:i,props:n,presenceContext:r,reducedMotionConfig:a,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Bt.render(this.render,!1,!0);const{latestValues:f,renderState:p}=l;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=p,this.parent=i,this.props=n,this.presenceContext=r,this.depth=i?i.depth+1:0,this.reducedMotionConfig=a,this.options=c,this.isControllingVariants=Tu(n),this.isVariantNode=k0(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(i&&i.current);const{willChange:m,...v}=this.scrapeMotionValuesFromProps(n,{});for(const w in v){const x=v[w];f[w]!==void 0&&Oe(x)&&(x.set(f[w],!1),Ql(m)&&m.add(w))}}scrapeMotionValuesFromProps(i,n){return{}}mount(i){this.current=i,z_.set(i,this),this.projection&&!this.projection.instance&&this.projection.mount(i),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),$x.current||dA(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:bd.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){z_.delete(this.current),this.projection&&this.projection.unmount(),qi(this.notifyUpdate),qi(this.render),this.valueSubscriptions.forEach(i=>i()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const i in this.events)this.events[i].clear();for(const i in this.features)this.features[i].unmount();this.current=null}bindToMotionValue(i,n){const r=ws.has(i),a=n.on("change",c=>{this.latestValues[i]=c,this.props.onUpdate&&Bt.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),l=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(i,()=>{a(),l()})}sortNodePosition(i){return!this.current||!this.sortInstanceNodePosition||this.type!==i.type?0:this.sortInstanceNodePosition(this.current,i.current)}loadFeatures({children:i,...n},r,a,l){let c,f;for(let p=0;p<pA;p++){const m=Wx[p],{isEnabled:v,Feature:w,ProjectionNode:x,MeasureLayout:S}=Bo[m];x&&(c=x),v(n)&&(!this.features[m]&&w&&(this.features[m]=new w(this)),S&&(f=S))}if(!this.projection&&c){this.projection=new c(this.latestValues,this.parent&&this.parent.projection);const{layoutId:p,layout:m,drag:v,dragConstraints:w,layoutScroll:x,layoutRoot:S}=n;this.projection.setOptions({layoutId:p,layout:m,alwaysMeasureLayout:!!v||w&&er(w),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof m=="string"?m:"both",initialPromotionConfig:l,layoutScroll:x,layoutRoot:S})}return f}updateFeatures(){for(const i in this.features){const n=this.features[i];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Yt()}getStaticValue(i){return this.latestValues[i]}setStaticValue(i,n){this.latestValues[i]=n}makeTargetAnimatable(i,n=!0){return this.makeTargetAnimatableFromInstance(i,this.props,n)}update(i,n){(i.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=i,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<U_.length;r++){const a=U_[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l=i["on"+a];l&&(this.propEventSubscriptions[a]=this.on(a,l))}this.prevMotionValues=fA(this,this.scrapeMotionValuesFromProps(i,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(i){return this.props.variants?this.props.variants[i]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(i=!1){if(i)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<gA;r++){const a=Af[r],l=this.props[a];(Lo(l)||l===!1)&&(n[a]=l)}return n}addVariantChild(i){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(i),()=>n.variantChildren.delete(i)}addValue(i,n){n!==this.values.get(i)&&(this.removeValue(i),this.bindToMotionValue(i,n)),this.values.set(i,n),this.latestValues[i]=n.get()}removeValue(i){this.values.delete(i);const n=this.valueSubscriptions.get(i);n&&(n(),this.valueSubscriptions.delete(i)),delete this.latestValues[i],this.removeValueFromRenderState(i,this.renderState)}hasValue(i){return this.values.has(i)}getValue(i,n){if(this.props.values&&this.props.values[i])return this.props.values[i];let r=this.values.get(i);return r===void 0&&n!==void 0&&(r=xr(n,{owner:this}),this.addValue(i,r)),r}readValue(i){return this.latestValues[i]!==void 0||!this.current?this.latestValues[i]:this.readValueFromInstance(this.current,i,this.options)}setBaseTarget(i,n){this.baseTarget[i]=n}getBaseTarget(i){var n;const{initial:r}=this.props,a=typeof r=="string"||typeof r=="object"?(n=Of(this.props,r))===null||n===void 0?void 0:n[i]:void 0;if(r&&a!==void 0)return a;const l=this.getBaseTargetFromProps(this.props,i);return l!==void 0&&!Oe(l)?l:this.initialValues[i]!==void 0&&a===void 0?void 0:this.baseTarget[i]}on(i,n){return this.events[i]||(this.events[i]=new Gf),this.events[i].add(n)}notify(i,...n){this.events[i]&&this.events[i].notify(...n)}}class Gx extends mA{sortInstanceNodePosition(i,n){return i.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(i,n){return i.style?i.style[n]:void 0}removeValueFromRenderState(i,{vars:n,style:r}){delete n[i],delete r[i]}makeTargetAnimatableFromInstance({transition:i,transitionEnd:n,...r},{transformValues:a},l){let c=BE(r,i||{},this);if(a&&(n&&(n=a(n)),r&&(r=a(r)),c&&(c=a(c))),l){FE(this,r,c);const f=hA(this,r,c,n);n=f.transitionEnd,r=f.target}return{transition:i,transitionEnd:n,...r}}}function _A(t){return window.getComputedStyle(t)}class vA extends Gx{readValueFromInstance(i,n){if(ws.has(n)){const r=jf(n);return r&&r.default||0}else{const r=_A(i),a=(M0(n)?r.getPropertyValue(n):r[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(i,{transformPagePoint:n}){return Lx(i,n)}build(i,n,r,a){Rf(i,n,r,a.transformTemplate)}scrapeMotionValuesFromProps(i,n){return Bf(i,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:i}=this.props;Oe(i)&&(this.childSubscription=i.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(i,n,r,a){z0(i,n,r,a)}}class yA extends Gx{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(i,n){return i[n]}readValueFromInstance(i,n){if(ws.has(n)){const r=jf(n);return r&&r.default||0}return n=U0.has(n)?n:Lf(n),i.getAttribute(n)}measureInstanceViewportBox(){return Yt()}scrapeMotionValuesFromProps(i,n){return j0(i,n)}build(i,n,r,a){Mf(i,n,r,this.isSVGTag,a.transformTemplate)}renderInstance(i,n,r,a){V0(i,n,r,a)}mount(i){this.isSVGTag=Ff(i.tagName),super.mount(i)}}const xA=(t,i)=>If(t)?new yA(i,{enableHardwareAcceleration:!1}):new vA(i,{enableHardwareAcceleration:!0}),wA={layout:{ProjectionNode:jx,MeasureLayout:Bx}},CA={...QE,..._P,...JT,...wA},V_=PS((t,i)=>tP(t,i,CA,xA));function Xx(){const t=O.useRef(!1);return Hl(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function bA(){const t=Xx(),[i,n]=O.useState(0),r=O.useCallback(()=>{t.current&&n(i+1)},[i]);return[O.useCallback(()=>Bt.postRender(r),[r]),i]}class SA extends O.Component{getSnapshotBeforeUpdate(i){const n=this.props.childRef.current;if(n&&i.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PA({children:t,isPresent:i}){const n=O.useId(),r=O.useRef(null),a=O.useRef({width:0,height:0,top:0,left:0});return O.useInsertionEffect(()=>{const{width:l,height:c,top:f,left:p}=a.current;if(i||!r.current||!l||!c)return;r.current.dataset.motionPopId=n;const m=document.createElement("style");return document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            top: ${f}px !important;
            left: ${p}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[i]),O.createElement(SA,{isPresent:i,childRef:r,sizeRef:a},O.cloneElement(t,{ref:r}))}const hh=({children:t,initial:i,isPresent:n,onExitComplete:r,custom:a,presenceAffectsLayout:l,mode:c})=>{const f=H0(EA),p=O.useId(),m=O.useMemo(()=>({id:p,initial:i,isPresent:n,custom:a,onExitComplete:v=>{f.set(v,!0);for(const w of f.values())if(!w)return;r&&r()},register:v=>(f.set(v,!1),()=>f.delete(v))}),l?void 0:[n]);return O.useMemo(()=>{f.forEach((v,w)=>f.set(w,!1))},[n]),O.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),c==="popLayout"&&(t=O.createElement(PA,{isPresent:n},t)),O.createElement(Su.Provider,{value:m},t)};function EA(){return new Map}function TA(t){return O.useEffect(()=>()=>t(),[])}const js=t=>t.key||"";function AA(t,i){t.forEach(n=>{const r=js(n);i.set(r,n)})}function kA(t){const i=[];return O.Children.forEach(t,n=>{O.isValidElement(n)&&i.push(n)}),i}const IA=({children:t,custom:i,initial:n=!0,onExitComplete:r,exitBeforeEnter:a,presenceAffectsLayout:l=!0,mode:c="sync"})=>{const f=O.useContext(kf).forceRender||bA()[0],p=Xx(),m=kA(t);let v=m;const w=O.useRef(new Map).current,x=O.useRef(v),S=O.useRef(new Map).current,A=O.useRef(!0);if(Hl(()=>{A.current=!1,AA(m,S),x.current=v}),TA(()=>{A.current=!0,S.clear(),w.clear()}),A.current)return O.createElement(O.Fragment,null,v.map(P=>O.createElement(hh,{key:js(P),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:l,mode:c},P)));v=[...v];const M=x.current.map(js),L=m.map(js),T=M.length;for(let P=0;P<T;P++){const k=M[P];L.indexOf(k)===-1&&!w.has(k)&&w.set(k,void 0)}return c==="wait"&&w.size&&(v=[]),w.forEach((P,k)=>{if(L.indexOf(k)!==-1)return;const C=S.get(k);if(!C)return;const R=M.indexOf(k);let H=P;if(!H){const N=()=>{S.delete(k),w.delete(k);const $=x.current.findIndex(Z=>Z.key===k);if(x.current.splice($,1),!w.size){if(x.current=m,p.current===!1)return;f(),r&&r()}};H=O.createElement(hh,{key:js(C),isPresent:!1,onExitComplete:N,custom:i,presenceAffectsLayout:l,mode:c},C),w.set(k,H)}v.splice(R,0,H)}),v=v.map(P=>{const k=P.key;return w.has(k)?P:O.createElement(hh,{key:js(P),isPresent:!0,presenceAffectsLayout:l,mode:c},P)}),O.createElement(O.Fragment,null,w.size?v:v.map(P=>O.cloneElement(P)))};let RA={data:""},DA=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||RA,MA=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,FA=/\/\*[^]*?\*\/|  +/g,j_=/\n+/g,yn=(t,i)=>{let n="",r="",a="";for(let l in t){let c=t[l];l[0]=="@"?l[1]=="i"?n=l+" "+c+";":r+=l[1]=="f"?yn(c,l):l+"{"+yn(c,l[1]=="k"?"":i)+"}":typeof c=="object"?r+=yn(c,i?i.replace(/([^,])+/g,f=>l.replace(/(^:.*)|([^,])+/g,p=>/&/.test(p)?p.replace(/&/g,f):f?f+" "+p:p)):l):c!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=yn.p?yn.p(l,c):l+":"+c+";")}return n+(i&&a?i+"{"+a+"}":a)+r},Ni={},Yx=t=>{if(typeof t=="object"){let i="";for(let n in t)i+=n+Yx(t[n]);return i}return t},LA=(t,i,n,r,a)=>{let l=Yx(t),c=Ni[l]||(Ni[l]=(p=>{let m=0,v=11;for(;m<p.length;)v=101*v+p.charCodeAt(m++)>>>0;return"go"+v})(l));if(!Ni[c]){let p=l!==t?t:(m=>{let v,w,x=[{}];for(;v=MA.exec(m.replace(FA,""));)v[4]?x.shift():v[3]?(w=v[3].replace(j_," ").trim(),x.unshift(x[0][w]=x[0][w]||{})):x[0][v[1]]=v[2].replace(j_," ").trim();return x[0]})(t);Ni[c]=yn(a?{["@keyframes "+c]:p}:p,n?"":"."+c)}let f=n&&Ni.g?Ni.g:null;return n&&(Ni.g=Ni[c]),((p,m,v,w)=>{w?m.data=m.data.replace(w,p):m.data.indexOf(p)===-1&&(m.data=v?p+m.data:m.data+p)})(Ni[c],i,r,f),c},BA=(t,i,n)=>t.reduce((r,a,l)=>{let c=i[l];if(c&&c.call){let f=c(n),p=f&&f.props&&f.props.className||/^go/.test(f)&&f;c=p?"."+p:f&&typeof f=="object"?f.props?"":yn(f,""):f===!1?"":f}return r+a+(c??"")},"");function Du(t){let i=this||{},n=t.call?t(i.p):t;return LA(n.unshift?n.raw?BA(n,[].slice.call(arguments,1),i.p):n.reduce((r,a)=>Object.assign(r,a&&a.call?a(i.p):a),{}):n,DA(i.target),i.g,i.o,i.k)}let Zx,Sd,Pd;Du.bind({g:1});let Ji=Du.bind({k:1});function OA(t,i,n,r){yn.p=i,Zx=t,Sd=n,Pd=r}function Vn(t,i){let n=this||{};return function(){let r=arguments;function a(l,c){let f=Object.assign({},l),p=f.className||a.className;n.p=Object.assign({theme:Sd&&Sd()},f),n.o=/ *go\d+/.test(p),f.className=Du.apply(n,r)+(p?" "+p:""),i&&(f.ref=c);let m=t;return t[0]&&(m=f.as||t,delete f.as),Pd&&m[0]&&Pd(f),Zx(m,f)}return i?i(a):a}}var NA=t=>typeof t=="function",ql=(t,i)=>NA(t)?t(i):t,zA=(()=>{let t=0;return()=>(++t).toString()})(),Qx=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let i=matchMedia("(prefers-reduced-motion: reduce)");t=!i||i.matches}return t}})(),UA=20,pl=new Map,VA=1e3,H_=t=>{if(pl.has(t))return;let i=setTimeout(()=>{pl.delete(t),bs({type:4,toastId:t})},VA);pl.set(t,i)},jA=t=>{let i=pl.get(t);i&&clearTimeout(i)},Ed=(t,i)=>{switch(i.type){case 0:return{...t,toasts:[i.toast,...t.toasts].slice(0,UA)};case 1:return i.toast.id&&jA(i.toast.id),{...t,toasts:t.toasts.map(l=>l.id===i.toast.id?{...l,...i.toast}:l)};case 2:let{toast:n}=i;return t.toasts.find(l=>l.id===n.id)?Ed(t,{type:1,toast:n}):Ed(t,{type:0,toast:n});case 3:let{toastId:r}=i;return r?H_(r):t.toasts.forEach(l=>{H_(l.id)}),{...t,toasts:t.toasts.map(l=>l.id===r||r===void 0?{...l,visible:!1}:l)};case 4:return i.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(l=>l.id!==i.toastId)};case 5:return{...t,pausedAt:i.time};case 6:let a=i.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+a}))}}},gl=[],ml={toasts:[],pausedAt:void 0},bs=t=>{ml=Ed(ml,t),gl.forEach(i=>{i(ml)})},HA={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},$A=(t={})=>{let[i,n]=O.useState(ml);O.useEffect(()=>(gl.push(n),()=>{let a=gl.indexOf(n);a>-1&&gl.splice(a,1)}),[i]);let r=i.toasts.map(a=>{var l,c;return{...t,...t[a.type],...a,duration:a.duration||((l=t[a.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||HA[a.type],style:{...t.style,...(c=t[a.type])==null?void 0:c.style,...a.style}}});return{...i,toasts:r}},WA=(t,i="blank",n)=>({createdAt:Date.now(),visible:!0,type:i,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||zA()}),Zo=t=>(i,n)=>{let r=WA(i,t,n);return bs({type:2,toast:r}),r.id},$e=(t,i)=>Zo("blank")(t,i);$e.error=Zo("error");$e.success=Zo("success");$e.loading=Zo("loading");$e.custom=Zo("custom");$e.dismiss=t=>{bs({type:3,toastId:t})};$e.remove=t=>bs({type:4,toastId:t});$e.promise=(t,i,n)=>{let r=$e.loading(i.loading,{...n,...n==null?void 0:n.loading});return t.then(a=>($e.success(ql(i.success,a),{id:r,...n,...n==null?void 0:n.success}),a)).catch(a=>{$e.error(ql(i.error,a),{id:r,...n,...n==null?void 0:n.error})}),t};var GA=(t,i)=>{bs({type:1,toast:{id:t,height:i}})},XA=()=>{bs({type:5,time:Date.now()})},YA=t=>{let{toasts:i,pausedAt:n}=$A(t);O.useEffect(()=>{if(n)return;let l=Date.now(),c=i.map(f=>{if(f.duration===1/0)return;let p=(f.duration||0)+f.pauseDuration-(l-f.createdAt);if(p<0){f.visible&&$e.dismiss(f.id);return}return setTimeout(()=>$e.dismiss(f.id),p)});return()=>{c.forEach(f=>f&&clearTimeout(f))}},[i,n]);let r=O.useCallback(()=>{n&&bs({type:6,time:Date.now()})},[n]),a=O.useCallback((l,c)=>{let{reverseOrder:f=!1,gutter:p=8,defaultPosition:m}=c||{},v=i.filter(S=>(S.position||m)===(l.position||m)&&S.height),w=v.findIndex(S=>S.id===l.id),x=v.filter((S,A)=>A<w&&S.visible).length;return v.filter(S=>S.visible).slice(...f?[x+1]:[0,x]).reduce((S,A)=>S+(A.height||0)+p,0)},[i]);return{toasts:i,handlers:{updateHeight:GA,startPause:XA,endPause:r,calculateOffset:a}}},ZA=Ji`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,QA=Ji`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,KA=Ji`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,qA=Vn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ZA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${QA} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${KA} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,JA=Ji`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,t2=Vn("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${JA} 1s linear infinite;
`,e2=Ji`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,i2=Ji`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,n2=Vn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${e2} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${i2} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,s2=Vn("div")`
  position: absolute;
`,r2=Vn("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,o2=Ji`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,a2=Vn("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${o2} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,l2=({toast:t})=>{let{icon:i,type:n,iconTheme:r}=t;return i!==void 0?typeof i=="string"?O.createElement(a2,null,i):i:n==="blank"?null:O.createElement(r2,null,O.createElement(t2,{...r}),n!=="loading"&&O.createElement(s2,null,n==="error"?O.createElement(qA,{...r}):O.createElement(n2,{...r})))},u2=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,c2=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,h2="0%{opacity:0;} 100%{opacity:1;}",d2="0%{opacity:1;} 100%{opacity:0;}",f2=Vn("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,p2=Vn("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,g2=(t,i)=>{let n=t.includes("top")?1:-1,[r,a]=Qx()?[h2,d2]:[u2(n),c2(n)];return{animation:i?`${Ji(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ji(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},m2=O.memo(({toast:t,position:i,style:n,children:r})=>{let a=t.height?g2(t.position||i||"top-center",t.visible):{opacity:0},l=O.createElement(l2,{toast:t}),c=O.createElement(p2,{...t.ariaProps},ql(t.message,t));return O.createElement(f2,{className:t.className,style:{...a,...n,...t.style}},typeof r=="function"?r({icon:l,message:c}):O.createElement(O.Fragment,null,l,c))});OA(O.createElement);var _2=({id:t,className:i,style:n,onHeightUpdate:r,children:a})=>{let l=O.useCallback(c=>{if(c){let f=()=>{let p=c.getBoundingClientRect().height;r(t,p)};f(),new MutationObserver(f).observe(c,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return O.createElement("div",{ref:l,className:i,style:n},a)},v2=(t,i)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Qx()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${i*(n?1:-1)}px)`,...r,...a}},y2=Du`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ka=16,x2=({reverseOrder:t,position:i="top-center",toastOptions:n,gutter:r,children:a,containerStyle:l,containerClassName:c})=>{let{toasts:f,handlers:p}=YA(n);return O.createElement("div",{style:{position:"fixed",zIndex:9999,top:Ka,left:Ka,right:Ka,bottom:Ka,pointerEvents:"none",...l},className:c,onMouseEnter:p.startPause,onMouseLeave:p.endPause},f.map(m=>{let v=m.position||i,w=p.calculateOffset(m,{reverseOrder:t,gutter:r,defaultPosition:i}),x=v2(v,w);return O.createElement(_2,{id:m.id,key:m.id,onHeightUpdate:p.updateHeight,className:m.visible?y2:"",style:x},m.type==="custom"?ql(m.message,m):a?a(m):O.createElement(m2,{toast:m,position:v}))}))},Ak=$e;function w2(){if(console&&console.warn){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];typeof i[0]=="string"&&(i[0]=`react-i18next:: ${i[0]}`),console.warn(...i)}}const $_={};function Td(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];typeof i[0]=="string"&&$_[i[0]]||(typeof i[0]=="string"&&($_[i[0]]=new Date),w2(...i))}const Kx=(t,i)=>()=>{if(t.isInitialized)i();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),i()};t.on("initialized",n)}};function W_(t,i,n){t.loadNamespaces(i,Kx(t,n))}function G_(t,i,n,r){typeof n=="string"&&(n=[n]),n.forEach(a=>{t.options.ns.indexOf(a)<0&&t.options.ns.push(a)}),t.loadLanguages(i,Kx(t,r))}function C2(t,i){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=i.languages[0],a=i.options?i.options.fallbackLng:!1,l=i.languages[i.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const c=(f,p)=>{const m=i.services.backendConnector.state[`${f}|${p}`];return m===-1||m===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!c(i.isLanguageChangingTo,t)?!1:!!(i.hasResourceBundle(r,t)||!i.services.backendConnector.backend||i.options.resources&&!i.options.partialBundledLanguages||c(r,t)&&(!a||c(l,t)))}function b2(t,i){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!i.languages||!i.languages.length?(Td("i18n.languages were undefined or empty",i.languages),!0):i.options.ignoreJSONStructure!==void 0?i.hasLoadedNamespace(t,{lng:n.lng,precheck:(a,l)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&a.services.backendConnector.backend&&a.isLanguageChangingTo&&!l(a.isLanguageChangingTo,t))return!1}}):C2(t,i,n)}const S2=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,P2={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},E2=t=>P2[t],T2=t=>t.replace(S2,E2);let Ad={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:T2};function A2(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ad={...Ad,...t}}function k2(){return Ad}let qx;function I2(t){qx=t}function R2(){return qx}const D2={type:"3rdParty",init(t){A2(t.options.react),I2(t)}},M2=O.createContext();class F2{constructor(){this.usedNamespaces={}}addUsedNamespaces(i){i.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const L2=(t,i)=>{const n=O.useRef();return O.useEffect(()=>{n.current=i?n.current:t},[t,i]),n.current};function B2(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=i,{i18n:r,defaultNS:a}=O.useContext(M2)||{},l=n||r||R2();if(l&&!l.reportNamespaces&&(l.reportNamespaces=new F2),!l){Td("You will need to pass in an i18next instance by using initReactI18next");const k=(R,H)=>typeof H=="string"?H:H&&typeof H=="object"&&typeof H.defaultValue=="string"?H.defaultValue:Array.isArray(R)?R[R.length-1]:R,C=[k,{},!1];return C.t=k,C.i18n={},C.ready=!1,C}l.options.react&&l.options.react.wait!==void 0&&Td("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const c={...k2(),...l.options.react,...i},{useSuspense:f,keyPrefix:p}=c;let m=t||a||l.options&&l.options.defaultNS;m=typeof m=="string"?[m]:m||["translation"],l.reportNamespaces.addUsedNamespaces&&l.reportNamespaces.addUsedNamespaces(m);const v=(l.isInitialized||l.initializedStoreOnce)&&m.every(k=>b2(k,l,c));function w(){return l.getFixedT(i.lng||null,c.nsMode==="fallback"?m:m[0],p)}const[x,S]=O.useState(w);let A=m.join();i.lng&&(A=`${i.lng}${A}`);const M=L2(A),L=O.useRef(!0);O.useEffect(()=>{const{bindI18n:k,bindI18nStore:C}=c;L.current=!0,!v&&!f&&(i.lng?G_(l,i.lng,m,()=>{L.current&&S(w)}):W_(l,m,()=>{L.current&&S(w)})),v&&M&&M!==A&&L.current&&S(w);function R(){L.current&&S(w)}return k&&l&&l.on(k,R),C&&l&&l.store.on(C,R),()=>{L.current=!1,k&&l&&k.split(" ").forEach(H=>l.off(H,R)),C&&l&&C.split(" ").forEach(H=>l.store.off(H,R))}},[l,A]);const T=O.useRef(!0);O.useEffect(()=>{L.current&&!T.current&&S(w),T.current=!1},[l,p]);const P=[x,l,v];if(P.t=x,P.i18n=l,P.ready=v,v||!v&&!f)return P;throw new Promise(k=>{i.lng?G_(l,i.lng,m,()=>k()):W_(l,m,()=>k())})}let Ce=[],Ss=(t,i)=>{let n=[],r={get(){return r.lc||r.listen(()=>{})(),r.value},l:i||0,lc:0,listen(a,l){return r.lc=n.push(a,l||r.l)/2,()=>{let c=n.indexOf(a);~c&&(n.splice(c,2),r.lc--,r.lc||r.off())}},notify(a){let l=!Ce.length;for(let c=0;c<n.length;c+=2)Ce.push(n[c],r.value,a,n[c+1]);if(l){for(let c=0;c<Ce.length;c+=4){let f=!1;for(let p=c+7;p<Ce.length;p+=4)if(Ce[p]<Ce[c+3]){f=!0;break}f?Ce.push(Ce[c],Ce[c+1],Ce[c+2],Ce[c+3]):Ce[c](Ce[c+1],Ce[c+2])}Ce.length=0}},off(){},set(a){r.value!==a&&(r.value=a,r.notify())},subscribe(a,l){let c=r.listen(a,l);return a(r.value),c},value:t};return r};function O2(t,i,n){let r=new Set([...i,void 0]);return t.listen((a,l)=>{r.has(l)&&n(a,l)})}function N2(t,i={}){let n=O.useCallback(a=>i.keys?O2(t,i.keys,a):t.listen(a),[i.keys,t]),r=t.get.bind(t);return O.useSyncExternalStore(n,r,r)}/*!
 * excalibur - 0.27.0 - 2022-7-8
 * https://github.com/excaliburjs/Excalibur
 * Copyright (c) 2022 Excalibur.js <https://github.com/excaliburjs/Excalibur/graphs/contributors>
 * Licensed BSD-2-Clause
 * @preserve
 */var z2={4662:(t,i,n)=>{n(3430);var r=n(8791);t.exports=r("Array","sort")},8343:(t,i,n)=>{n(4769);var r=n(9276);t.exports=r.Object.keys},7111:(t,i,n)=>{var r=n(6733),a=n(9821),l=TypeError;t.exports=function(c){if(r(c))return c;throw l(a(c)+" is not a function")}},1176:(t,i,n)=>{var r=n(5052),a=String,l=TypeError;t.exports=function(c){if(r(c))return c;throw l(a(c)+" is not an object")}},9540:(t,i,n)=>{var r=n(905),a=n(3231),l=n(9646),c=function(f){return function(p,m,v){var w=r(p),x=l(w),S=a(v,x),A;if(f&&m!=m){for(;x>S;)if(A=w[S++],A!=A)return!0}else for(;x>S;S++)if((f||S in w)&&w[S]===m)return f||S||0;return!f&&-1}};t.exports={includes:c(!0),indexOf:c(!1)}},6038:(t,i,n)=>{var r=n(4229);t.exports=function(a,l){var c=[][a];return!!c&&r(function(){c.call(null,l||function(){return 1},1)})}},9794:(t,i,n)=>{var r=n(3231),a=n(9646),l=n(2324),c=Array,f=Math.max;t.exports=function(p,m,v){for(var w=a(p),x=r(m,w),S=r(v===void 0?w:v,w),A=c(f(S-x,0)),M=0;x<S;x++,M++)l(A,M,p[x]);return A.length=M,A}},3867:(t,i,n)=>{var r=n(9794),a=Math.floor,l=function(p,m){var v=p.length,w=a(v/2);return v<8?c(p,m):f(p,l(r(p,0,w),m),l(r(p,w),m),m)},c=function(p,m){for(var v=p.length,w=1,x,S;w<v;){for(S=w,x=p[w];S&&m(p[S-1],x)>0;)p[S]=p[--S];S!==w++&&(p[S]=x)}return p},f=function(p,m,v,w){for(var x=m.length,S=v.length,A=0,M=0;A<x||M<S;)p[A+M]=A<x&&M<S?w(m[A],v[M])<=0?m[A++]:v[M++]:A<x?m[A++]:v[M++];return p};t.exports=l},7079:(t,i,n)=>{var r=n(5968),a=r({}.toString),l=r("".slice);t.exports=function(c){return l(a(c),8,-1)}},1589:(t,i,n)=>{var r=n(1601),a=n(6733),l=n(7079),c=n(95),f=c("toStringTag"),p=Object,m=l(function(){return arguments}())=="Arguments",v=function(w,x){try{return w[x]}catch{}};t.exports=r?l:function(w){var x,S,A;return w===void 0?"Undefined":w===null?"Null":typeof(S=v(x=p(w),f))=="string"?S:m?l(x):(A=l(x))=="Object"&&a(x.callee)?"Arguments":A}},7081:(t,i,n)=>{var r=n(8270),a=n(4826),l=n(7933),c=n(1787);t.exports=function(f,p,m){for(var v=a(p),w=c.f,x=l.f,S=0;S<v.length;S++){var A=v[S];!r(f,A)&&!(m&&r(m,A))&&w(f,A,x(p,A))}}},5762:(t,i,n)=>{var r=n(7400),a=n(1787),l=n(5358);t.exports=r?function(c,f,p){return a.f(c,f,l(1,p))}:function(c,f,p){return c[f]=p,c}},5358:t=>{t.exports=function(i,n){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:n}}},2324:(t,i,n)=>{var r=n(9310),a=n(1787),l=n(5358);t.exports=function(c,f,p){var m=r(f);m in c?a.f(c,m,l(0,p)):c[m]=p}},4768:(t,i,n)=>{var r=n(6733),a=n(1787),l=n(6039),c=n(8400);t.exports=function(f,p,m,v){v||(v={});var w=v.enumerable,x=v.name!==void 0?v.name:p;if(r(m)&&l(m,x,v),v.global)w?f[p]=m:c(p,m);else{try{v.unsafe?f[p]&&(w=!0):delete f[p]}catch{}w?f[p]=m:a.f(f,p,{value:m,enumerable:!1,configurable:!v.nonConfigurable,writable:!v.nonWritable})}return f}},8400:(t,i,n)=>{var r=n(9859),a=Object.defineProperty;t.exports=function(l,c){try{a(r,l,{value:c,configurable:!0,writable:!0})}catch{r[l]=c}return c}},9563:(t,i,n)=>{var r=n(9821),a=TypeError;t.exports=function(l,c){if(!delete l[c])throw a("Cannot delete property "+r(c)+" of "+r(l))}},7400:(t,i,n)=>{var r=n(4229);t.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},2635:(t,i,n)=>{var r=n(9859),a=n(5052),l=r.document,c=a(l)&&a(l.createElement);t.exports=function(f){return c?l.createElement(f):{}}},2671:(t,i,n)=>{var r=n(598),a=r.match(/firefox\/(\d+)/i);t.exports=!!a&&+a[1]},8506:(t,i,n)=>{var r=n(598);t.exports=/MSIE|Trident/.test(r)},598:(t,i,n)=>{var r=n(1333);t.exports=r("navigator","userAgent")||""},6358:(t,i,n)=>{var r=n(9859),a=n(598),l=r.process,c=r.Deno,f=l&&l.versions||c&&c.version,p=f&&f.v8,m,v;p&&(m=p.split("."),v=m[0]>0&&m[0]<4?1:+(m[0]+m[1])),!v&&a&&(m=a.match(/Edge\/(\d+)/),(!m||m[1]>=74)&&(m=a.match(/Chrome\/(\d+)/),m&&(v=+m[1]))),t.exports=v},9811:(t,i,n)=>{var r=n(598),a=r.match(/AppleWebKit\/(\d+)\./);t.exports=!!a&&+a[1]},8791:(t,i,n)=>{var r=n(9859),a=n(5968);t.exports=function(l,c){return a(r[l].prototype[c])}},3837:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3103:(t,i,n)=>{var r=n(9859),a=n(7933).f,l=n(5762),c=n(4768),f=n(8400),p=n(7081),m=n(6541);t.exports=function(v,w){var x=v.target,S=v.global,A=v.stat,M,L,T,P,k,C;if(S?L=r:A?L=r[x]||f(x,{}):L=(r[x]||{}).prototype,L)for(T in w){if(k=w[T],v.dontCallGetSet?(C=a(L,T),P=C&&C.value):P=L[T],M=m(S?T:x+(A?".":"#")+T,v.forced),!M&&P!==void 0){if(typeof k==typeof P)continue;p(k,P)}(v.sham||P&&P.sham)&&l(k,"sham",!0),c(L,T,k,v)}}},4229:t=>{t.exports=function(i){try{return!!i()}catch{return!0}}},7188:(t,i,n)=>{var r=n(4229);t.exports=!r(function(){var a=function(){}.bind();return typeof a!="function"||a.hasOwnProperty("prototype")})},266:(t,i,n)=>{var r=n(7188),a=Function.prototype.call;t.exports=r?a.bind(a):function(){return a.apply(a,arguments)}},1805:(t,i,n)=>{var r=n(7400),a=n(8270),l=Function.prototype,c=r&&Object.getOwnPropertyDescriptor,f=a(l,"name"),p=f&&function(){}.name==="something",m=f&&(!r||r&&c(l,"name").configurable);t.exports={EXISTS:f,PROPER:p,CONFIGURABLE:m}},5968:(t,i,n)=>{var r=n(7188),a=Function.prototype,l=a.bind,c=a.call,f=r&&l.bind(c,c);t.exports=r?function(p){return p&&f(p)}:function(p){return p&&function(){return c.apply(p,arguments)}}},1333:(t,i,n)=>{var r=n(9859),a=n(6733),l=function(c){return a(c)?c:void 0};t.exports=function(c,f){return arguments.length<2?l(r[c]):r[c]&&r[c][f]}},5300:(t,i,n)=>{var r=n(7111);t.exports=function(a,l){var c=a[l];return c==null?void 0:r(c)}},9859:(t,i,n)=>{var r=function(a){return a&&a.Math==Math&&a};t.exports=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof n.g=="object"&&n.g)||function(){return this}()||Function("return this")()},8270:(t,i,n)=>{var r=n(5968),a=n(2991),l=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(f,p){return l(a(f),p)}},5977:t=>{t.exports={}},4394:(t,i,n)=>{var r=n(7400),a=n(4229),l=n(2635);t.exports=!r&&!a(function(){return Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a!=7})},9337:(t,i,n)=>{var r=n(5968),a=n(4229),l=n(7079),c=Object,f=r("".split);t.exports=a(function(){return!c("z").propertyIsEnumerable(0)})?function(p){return l(p)=="String"?f(p,""):c(p)}:c},8511:(t,i,n)=>{var r=n(5968),a=n(6733),l=n(5353),c=r(Function.toString);a(l.inspectSource)||(l.inspectSource=function(f){return c(f)}),t.exports=l.inspectSource},6407:(t,i,n)=>{var r=n(8694),a=n(9859),l=n(5968),c=n(5052),f=n(5762),p=n(8270),m=n(5353),v=n(4399),w=n(5977),x="Object already initialized",S=a.TypeError,A=a.WeakMap,M,L,T,P=function(Z){return T(Z)?L(Z):M(Z,{})},k=function(Z){return function(B){var rt;if(!c(B)||(rt=L(B)).type!==Z)throw S("Incompatible receiver, "+Z+" required");return rt}};if(r||m.state){var C=m.state||(m.state=new A),R=l(C.get),H=l(C.has),N=l(C.set);M=function(Z,B){if(H(C,Z))throw new S(x);return B.facade=Z,N(C,Z,B),B},L=function(Z){return R(C,Z)||{}},T=function(Z){return H(C,Z)}}else{var $=v("state");w[$]=!0,M=function(Z,B){if(p(Z,$))throw new S(x);return B.facade=Z,f(Z,$,B),B},L=function(Z){return p(Z,$)?Z[$]:{}},T=function(Z){return p(Z,$)}}t.exports={set:M,get:L,has:T,enforce:P,getterFor:k}},6733:t=>{t.exports=function(i){return typeof i=="function"}},6541:(t,i,n)=>{var r=n(4229),a=n(6733),l=/#|\.prototype\./,c=function(w,x){var S=p[f(w)];return S==v?!0:S==m?!1:a(x)?r(x):!!x},f=c.normalize=function(w){return String(w).replace(l,".").toLowerCase()},p=c.data={},m=c.NATIVE="N",v=c.POLYFILL="P";t.exports=c},5052:(t,i,n)=>{var r=n(6733);t.exports=function(a){return typeof a=="object"?a!==null:r(a)}},4231:t=>{t.exports=!1},9395:(t,i,n)=>{var r=n(1333),a=n(6733),l=n(1321),c=n(6969),f=Object;t.exports=c?function(p){return typeof p=="symbol"}:function(p){var m=r("Symbol");return a(m)&&l(m.prototype,f(p))}},9646:(t,i,n)=>{var r=n(4237);t.exports=function(a){return r(a.length)}},6039:(t,i,n)=>{var r=n(4229),a=n(6733),l=n(8270),c=n(7400),f=n(1805).CONFIGURABLE,p=n(8511),m=n(6407),v=m.enforce,w=m.get,x=Object.defineProperty,S=c&&!r(function(){return x(function(){},"length",{value:8}).length!==8}),A=String(String).split("String"),M=t.exports=function(L,T,P){String(T).slice(0,7)==="Symbol("&&(T="["+String(T).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),P&&P.getter&&(T="get "+T),P&&P.setter&&(T="set "+T),(!l(L,"name")||f&&L.name!==T)&&(c?x(L,"name",{value:T,configurable:!0}):L.name=T),S&&P&&l(P,"arity")&&L.length!==P.arity&&x(L,"length",{value:P.arity});try{P&&l(P,"constructor")&&P.constructor?c&&x(L,"prototype",{writable:!1}):L.prototype&&(L.prototype=void 0)}catch{}var k=v(L);return l(k,"source")||(k.source=A.join(typeof T=="string"?T:"")),L};Function.prototype.toString=M(function(){return a(this)&&w(this).source||p(this)},"toString")},917:t=>{var i=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(a){var l=+a;return(l>0?n:i)(l)}},3839:(t,i,n)=>{var r=n(6358),a=n(4229);t.exports=!!Object.getOwnPropertySymbols&&!a(function(){var l=Symbol();return!String(l)||!(Object(l)instanceof Symbol)||!Symbol.sham&&r&&r<41})},8694:(t,i,n)=>{var r=n(9859),a=n(6733),l=n(8511),c=r.WeakMap;t.exports=a(c)&&/native code/.test(l(c))},1787:(t,i,n)=>{var r=n(7400),a=n(4394),l=n(7137),c=n(1176),f=n(9310),p=TypeError,m=Object.defineProperty,v=Object.getOwnPropertyDescriptor,w="enumerable",x="configurable",S="writable";i.f=r?l?function(M,L,T){if(c(M),L=f(L),c(T),typeof M=="function"&&L==="prototype"&&"value"in T&&S in T&&!T[S]){var P=v(M,L);P&&P[S]&&(M[L]=T.value,T={configurable:x in T?T[x]:P[x],enumerable:w in T?T[w]:P[w],writable:!1})}return m(M,L,T)}:m:function(M,L,T){if(c(M),L=f(L),c(T),a)try{return m(M,L,T)}catch{}if("get"in T||"set"in T)throw p("Accessors not supported");return"value"in T&&(M[L]=T.value),M}},7933:(t,i,n)=>{var r=n(7400),a=n(266),l=n(9195),c=n(5358),f=n(905),p=n(9310),m=n(8270),v=n(4394),w=Object.getOwnPropertyDescriptor;i.f=r?w:function(S,A){if(S=f(S),A=p(A),v)try{return w(S,A)}catch{}if(m(S,A))return c(!a(l.f,S,A),S[A])}},8151:(t,i,n)=>{var r=n(140),a=n(3837),l=a.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(f){return r(f,l)}},894:(t,i)=>{i.f=Object.getOwnPropertySymbols},1321:(t,i,n)=>{var r=n(5968);t.exports=r({}.isPrototypeOf)},140:(t,i,n)=>{var r=n(5968),a=n(8270),l=n(905),c=n(9540).indexOf,f=n(5977),p=r([].push);t.exports=function(m,v){var w=l(m),x=0,S=[],A;for(A in w)!a(f,A)&&a(w,A)&&p(S,A);for(;v.length>x;)a(w,A=v[x++])&&(~c(S,A)||p(S,A));return S}},5632:(t,i,n)=>{var r=n(140),a=n(3837);t.exports=Object.keys||function(c){return r(c,a)}},9195:(t,i)=>{var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!n.call({1:2},1);i.f=a?function(c){var f=r(this,c);return!!f&&f.enumerable}:n},2914:(t,i,n)=>{var r=n(266),a=n(6733),l=n(5052),c=TypeError;t.exports=function(f,p){var m,v;if(p==="string"&&a(m=f.toString)&&!l(v=r(m,f))||a(m=f.valueOf)&&!l(v=r(m,f))||p!=="string"&&a(m=f.toString)&&!l(v=r(m,f)))return v;throw c("Can't convert object to primitive value")}},4826:(t,i,n)=>{var r=n(1333),a=n(5968),l=n(8151),c=n(894),f=n(1176),p=a([].concat);t.exports=r("Reflect","ownKeys")||function(v){var w=l.f(f(v)),x=c.f;return x?p(w,x(v)):w}},9276:(t,i,n)=>{var r=n(9859);t.exports=r},8885:t=>{var i=TypeError;t.exports=function(n){if(n==null)throw i("Can't call method on "+n);return n}},4399:(t,i,n)=>{var r=n(3036),a=n(1441),l=r("keys");t.exports=function(c){return l[c]||(l[c]=a(c))}},5353:(t,i,n)=>{var r=n(9859),a=n(8400),l="__core-js_shared__",c=r[l]||a(l,{});t.exports=c},3036:(t,i,n)=>{var r=n(4231),a=n(5353);(t.exports=function(l,c){return a[l]||(a[l]=c!==void 0?c:{})})("versions",[]).push({version:"3.23.3",mode:r?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.3/LICENSE",source:"https://github.com/zloirock/core-js"})},3231:(t,i,n)=>{var r=n(3329),a=Math.max,l=Math.min;t.exports=function(c,f){var p=r(c);return p<0?a(p+f,0):l(p,f)}},905:(t,i,n)=>{var r=n(9337),a=n(8885);t.exports=function(l){return r(a(l))}},3329:(t,i,n)=>{var r=n(917);t.exports=function(a){var l=+a;return l!==l||l===0?0:r(l)}},4237:(t,i,n)=>{var r=n(3329),a=Math.min;t.exports=function(l){return l>0?a(r(l),9007199254740991):0}},2991:(t,i,n)=>{var r=n(8885),a=Object;t.exports=function(l){return a(r(l))}},2066:(t,i,n)=>{var r=n(266),a=n(5052),l=n(9395),c=n(5300),f=n(2914),p=n(95),m=TypeError,v=p("toPrimitive");t.exports=function(w,x){if(!a(w)||l(w))return w;var S=c(w,v),A;if(S){if(x===void 0&&(x="default"),A=r(S,w,x),!a(A)||l(A))return A;throw m("Can't convert object to primitive value")}return x===void 0&&(x="number"),f(w,x)}},9310:(t,i,n)=>{var r=n(2066),a=n(9395);t.exports=function(l){var c=r(l,"string");return a(c)?c:c+""}},1601:(t,i,n)=>{var r=n(95),a=r("toStringTag"),l={};l[a]="z",t.exports=String(l)==="[object z]"},3326:(t,i,n)=>{var r=n(1589),a=String;t.exports=function(l){if(r(l)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return a(l)}},9821:t=>{var i=String;t.exports=function(n){try{return i(n)}catch{return"Object"}}},1441:(t,i,n)=>{var r=n(5968),a=0,l=Math.random(),c=r(1 .toString);t.exports=function(f){return"Symbol("+(f===void 0?"":f)+")_"+c(++a+l,36)}},6969:(t,i,n)=>{var r=n(3839);t.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},7137:(t,i,n)=>{var r=n(7400),a=n(4229);t.exports=r&&a(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},95:(t,i,n)=>{var r=n(9859),a=n(3036),l=n(8270),c=n(1441),f=n(3839),p=n(6969),m=a("wks"),v=r.Symbol,w=v&&v.for,x=p?v:v&&v.withoutSetter||c;t.exports=function(S){if(!l(m,S)||!(f||typeof m[S]=="string")){var A="Symbol."+S;f&&l(v,S)?m[S]=v[S]:p&&w?m[S]=w(A):m[S]=x(A)}return m[S]}},3430:(t,i,n)=>{var r=n(3103),a=n(5968),l=n(7111),c=n(2991),f=n(9646),p=n(9563),m=n(3326),v=n(4229),w=n(3867),x=n(6038),S=n(2671),A=n(8506),M=n(6358),L=n(9811),T=[],P=a(T.sort),k=a(T.push),C=v(function(){T.sort(void 0)}),R=v(function(){T.sort(null)}),H=x("sort"),N=!v(function(){if(M)return M<70;if(!(S&&S>3)){if(A)return!0;if(L)return L<603;var B="",rt,st,Q,ct;for(rt=65;rt<76;rt++){switch(st=String.fromCharCode(rt),rt){case 66:case 69:case 70:case 72:Q=3;break;case 68:case 71:Q=4;break;default:Q=2}for(ct=0;ct<47;ct++)T.push({k:st+ct,v:Q})}for(T.sort(function(_t,St){return St.v-_t.v}),ct=0;ct<T.length;ct++)st=T[ct].k.charAt(0),B.charAt(B.length-1)!==st&&(B+=st);return B!=="DGBEFHACIJK"}}),$=C||!R||!H||!N,Z=function(B){return function(rt,st){return st===void 0?-1:rt===void 0?1:B!==void 0?+B(rt,st)||0:m(rt)>m(st)?1:-1}};r({target:"Array",proto:!0,forced:$},{sort:function(rt){rt!==void 0&&l(rt);var st=c(this);if(N)return rt===void 0?P(st):P(st,rt);var Q=[],ct=f(st),_t,St;for(St=0;St<ct;St++)St in st&&k(Q,st[St]);for(w(Q,Z(rt)),_t=Q.length,St=0;St<_t;)st[St]=Q[St++];for(;St<ct;)p(st,St++);return st}})},4769:(t,i,n)=>{var r=n(3103),a=n(2991),l=n(5632),c=n(4229),f=c(function(){l(1)});r({target:"Object",stat:!0,forced:f},{keys:function(m){return l(a(m))}})},1388:(t,i,n)=>{n.d(i,{Z:()=>p});var r=n(272),a=n.n(r),l=n(2609),c=n.n(l),f=c()(a());f.push([t.id,`/* Buttons styles start */\r
\r
button#excalibur-play {\r
  display: inline-block;\r
  position: relative;\r
  z-index: 999;\r
  border-radius: 6px;\r
  border: none;\r
  /*border: 3px solid;\r
    border-color: white;\r
    box-shadow: 0 0 10px #ccc;*/\r
  padding: 1rem 1.5rem 1rem 4rem;\r
  margin: 0;\r
  text-decoration: none;\r
  background: #00b233;\r
  color: #ffffff;\r
  font-family: sans-serif;\r
  font-size: 2rem;\r
  white-space: nowrap;\r
  line-height: 1;\r
  cursor: pointer;\r
  text-align: center;\r
  transition: background 250ms ease-in-out, transform 150ms ease;\r
  -webkit-appearance: none;\r
  -moz-appearance: none;\r
\r
  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */\r
  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */\r
  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */\r
  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */\r
  animation: excalibur-button-fadein 200ms;\r
}\r
\r
/*\r
button#excalibur-play {\r
  display: none;\r
}*/\r
\r
button#excalibur-play:after {\r
  position: absolute;\r
  content: '';\r
  border: 8px solid;\r
  border-color: transparent transparent transparent white;\r
  left: 35px;\r
  top: 24px;\r
  width: 0;\r
  height: 0;\r
}\r
\r
button#excalibur-play:before {\r
  position: absolute;\r
  content: '';\r
  border: 3px solid;\r
  left: 19px;\r
  top: 14px;\r
  border-radius: 20px;\r
  width: 30px;\r
  height: 30px;\r
}\r
\r
button#excalibur-play:hover,\r
button#excalibur-play:focus {\r
  background: #00982c;\r
}\r
\r
button#excalibur-play:focus {\r
  outline: 1px solid #fff;\r
  outline-offset: -4px;\r
}\r
\r
button#excalibur-play:active {\r
  transform: scale(0.99);\r
}\r
\r
@keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Firefox < 16 */\r
@-moz-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Safari, Chrome and Opera > 12.1 */\r
@-webkit-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Internet Explorer */\r
@-ms-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Opera < 12.1 */\r
@-o-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
`,"",{version:3,sources:["webpack://./Loader.css"],names:[],mappings:"AAAA,yBAAyB;;AAEzB;EACE,qBAAqB;EACrB,kBAAkB;EAClB,YAAY;EACZ,kBAAkB;EAClB,YAAY;EACZ;;+BAE6B;EAC7B,8BAA8B;EAC9B,SAAS;EACT,qBAAqB;EACrB,mBAAmB;EACnB,cAAc;EACd,uBAAuB;EACvB,eAAe;EACf,mBAAmB;EACnB,cAAc;EACd,eAAe;EACf,kBAAkB;EAClB,8DAA8D;EAC9D,wBAAwB;EACxB,qBAAqB;;EAErB,gDAAgD,EAAE,oCAAoC;EACtF,6CAA6C,EAAE,iBAAiB;EAChE,4CAA4C,EAAE,sBAAsB;EACpE,2CAA2C,EAAE,iBAAiB;EAC9D,wCAAwC;AAC1C;;AAEA;;;EAGE;;AAEF;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,uDAAuD;EACvD,UAAU;EACV,SAAS;EACT,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,UAAU;EACV,SAAS;EACT,mBAAmB;EACnB,WAAW;EACX,YAAY;AACd;;AAEA;;EAEE,mBAAmB;AACrB;;AAEA;EACE,uBAAuB;EACvB,oBAAoB;AACtB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,oCAAoC;AACpC;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,sBAAsB;AACtB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF",sourcesContent:[`/* Buttons styles start */\r
\r
button#excalibur-play {\r
  display: inline-block;\r
  position: relative;\r
  z-index: 999;\r
  border-radius: 6px;\r
  border: none;\r
  /*border: 3px solid;\r
    border-color: white;\r
    box-shadow: 0 0 10px #ccc;*/\r
  padding: 1rem 1.5rem 1rem 4rem;\r
  margin: 0;\r
  text-decoration: none;\r
  background: #00b233;\r
  color: #ffffff;\r
  font-family: sans-serif;\r
  font-size: 2rem;\r
  white-space: nowrap;\r
  line-height: 1;\r
  cursor: pointer;\r
  text-align: center;\r
  transition: background 250ms ease-in-out, transform 150ms ease;\r
  -webkit-appearance: none;\r
  -moz-appearance: none;\r
\r
  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */\r
  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */\r
  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */\r
  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */\r
  animation: excalibur-button-fadein 200ms;\r
}\r
\r
/*\r
button#excalibur-play {\r
  display: none;\r
}*/\r
\r
button#excalibur-play:after {\r
  position: absolute;\r
  content: '';\r
  border: 8px solid;\r
  border-color: transparent transparent transparent white;\r
  left: 35px;\r
  top: 24px;\r
  width: 0;\r
  height: 0;\r
}\r
\r
button#excalibur-play:before {\r
  position: absolute;\r
  content: '';\r
  border: 3px solid;\r
  left: 19px;\r
  top: 14px;\r
  border-radius: 20px;\r
  width: 30px;\r
  height: 30px;\r
}\r
\r
button#excalibur-play:hover,\r
button#excalibur-play:focus {\r
  background: #00982c;\r
}\r
\r
button#excalibur-play:focus {\r
  outline: 1px solid #fff;\r
  outline-offset: -4px;\r
}\r
\r
button#excalibur-play:active {\r
  transform: scale(0.99);\r
}\r
\r
@keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Firefox < 16 */\r
@-moz-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Safari, Chrome and Opera > 12.1 */\r
@-webkit-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Internet Explorer */\r
@-ms-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Opera < 12.1 */\r
@-o-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
`],sourceRoot:""}]);const p=f},7379:(t,i,n)=>{n.d(i,{Z:()=>p});var r=n(272),a=n.n(r),l=n(2609),c=n.n(l),f=c()(a());f.push([t.id,`\r
#ex-toast-container {\r
  position: absolute;\r
  height: 0;\r
  min-width: 50%;\r
  left: 50%;\r
  top: 0;\r
}\r
\r
.ex-toast-message {\r
  left: -50%;\r
  position: relative;\r
  display: flex;\r
  justify-content: space-between;\r
\r
\r
  padding: 10px;\r
  margin-top: 5px;\r
  font-size: 18px;\r
  font-family: sans-serif;\r
  border-radius: 6px;\r
  border: 3px solid #b7b779;\r
  background-color: rgb(253, 253, 192);\r
}\r
\r
\r
.ex-toast-message button {\r
  align-self: flex-start;\r
}`,"",{version:3,sources:["webpack://./Util/Toaster.css"],names:[],mappings:";AACA;EACE,kBAAkB;EAClB,SAAS;EACT,cAAc;EACd,SAAS;EACT,MAAM;AACR;;AAEA;EACE,UAAU;EACV,kBAAkB;EAClB,aAAa;EACb,8BAA8B;;;EAG9B,aAAa;EACb,eAAe;EACf,eAAe;EACf,uBAAuB;EACvB,kBAAkB;EAClB,yBAAyB;EACzB,oCAAoC;AACtC;;;AAGA;EACE,sBAAsB;AACxB",sourcesContent:[`\r
#ex-toast-container {\r
  position: absolute;\r
  height: 0;\r
  min-width: 50%;\r
  left: 50%;\r
  top: 0;\r
}\r
\r
.ex-toast-message {\r
  left: -50%;\r
  position: relative;\r
  display: flex;\r
  justify-content: space-between;\r
\r
\r
  padding: 10px;\r
  margin-top: 5px;\r
  font-size: 18px;\r
  font-family: sans-serif;\r
  border-radius: 6px;\r
  border: 3px solid #b7b779;\r
  background-color: rgb(253, 253, 192);\r
}\r
\r
\r
.ex-toast-message button {\r
  align-self: flex-start;\r
}`],sourceRoot:""}]);const p=f},2609:t=>{t.exports=function(i){var n=[];return n.toString=function(){return this.map(function(a){var l="",c=typeof a[5]<"u";return a[4]&&(l+="@supports (".concat(a[4],") {")),a[2]&&(l+="@media ".concat(a[2]," {")),c&&(l+="@layer".concat(a[5].length>0?" ".concat(a[5]):""," {")),l+=i(a),c&&(l+="}"),a[2]&&(l+="}"),a[4]&&(l+="}"),l}).join("")},n.i=function(a,l,c,f,p){typeof a=="string"&&(a=[[null,a,void 0]]);var m={};if(c)for(var v=0;v<this.length;v++){var w=this[v][0];w!=null&&(m[w]=!0)}for(var x=0;x<a.length;x++){var S=[].concat(a[x]);c&&m[S[0]]||(typeof p<"u"&&(typeof S[5]>"u"||(S[1]="@layer".concat(S[5].length>0?" ".concat(S[5]):""," {").concat(S[1],"}")),S[5]=p),l&&(S[2]&&(S[1]="@media ".concat(S[2]," {").concat(S[1],"}")),S[2]=l),f&&(S[4]?(S[1]="@supports (".concat(S[4],") {").concat(S[1],"}"),S[4]=f):S[4]="".concat(f)),n.push(S))}},n}},272:t=>{t.exports=function(i){var n=i[1],r=i[3];if(!r)return n;if(typeof btoa=="function"){var a=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),c="/*# ".concat(l," */"),f=r.sources.map(function(p){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(p," */")});return[n].concat(f).concat([c]).join(`
`)}return[n].join(`
`)}}},X_={};function Ft(t){var i=X_[t];if(i!==void 0)return i.exports;var n=X_[t]={id:t,exports:{}};return z2[t](n,n.exports,Ft),n.exports}Ft.n=t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return Ft.d(i,{a:i}),i};Ft.d=(t,i)=>{for(var n in i)Ft.o(i,n)&&!Ft.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})};Ft.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();Ft.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i);Ft.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var I={};(()=>{Ft.d(I,{fWn:()=>Rr,Ia8:()=>dp,rqv:()=>bc,hLI:()=>Ds,yyv:()=>tg,tX5:()=>Wu,vtX:()=>Li,r7K:()=>ap,lCh:()=>zp,cE4:()=>Et,fwF:()=>un,sce:()=>Fr,_c7:()=>hi,KUs:()=>Xp,Ajp:()=>As,RDh:()=>ya,_H9:()=>pa,mxs:()=>Sp,OmD:()=>mt,kBf:()=>Q,C4F:()=>aa,NQt:()=>xc,JjN:()=>lg,V1s:()=>Op,Xz7:()=>sa,Cdc:()=>ha,FKn:()=>re,wTW:()=>Je,SUY:()=>wc,ab2:()=>ua,GfZ:()=>Ci,YMS:()=>ln,oyv:()=>Kt,aUb:()=>Qn,SdD:()=>Tr,JUv:()=>Mi,jEj:()=>qn,TFq:()=>ui,HDU:()=>Jo,R_y:()=>qo,ydN:()=>Zn,t50:()=>Er,s$$:()=>vc,v2G:()=>pt,Ilk:()=>B,s9i:()=>rg,dxL:()=>Kn,LLX:()=>sg,wA2:()=>ze,R_p:()=>de,IQ$:()=>Qp,I5F:()=>$,X8$:()=>Yp,FR6:()=>Ko,U8o:()=>Qo,kbG:()=>Ne,iS_:()=>Gu,cGG:()=>og,RPN:()=>va,skb:()=>Jp,SLU:()=>qu,RdJ:()=>ye,cNu:()=>Ep,gU7:()=>np,LSk:()=>Tp,Nmp:()=>ma,d1Y:()=>Qt,xrL:()=>cc,sRW:()=>hc,cmV:()=>_g,qWz:()=>bp,N0Q:()=>Cp,q8b:()=>Ot,ynB:()=>ke,jT9:()=>Fp,wAz:()=>Ls,D4V:()=>Ns,N6H:()=>Zu,W1A:()=>Yu,JHW:()=>ae,v2K:()=>Vp,pBf:()=>sn,GMl:()=>ee,zW2:()=>t,B0K:()=>rc,Nv7:()=>na,C_p:()=>Ar,iqw:()=>li,MUA:()=>Qu,xqU:()=>Xu,pTp:()=>Pp,vUK:()=>c,j9l:()=>gc,Zxw:()=>Ms,Hdx:()=>ga,Z$d:()=>da,iqV:()=>hg,o$7:()=>Or,olM:()=>ct,Zm$:()=>ft,$QH:()=>ai,i78:()=>Ps,h6u:()=>ju,hts:()=>Vu,j88:()=>zu,VME:()=>Uu,nt:()=>qw,Ukr:()=>Ur,zsu:()=>Ae,oA6:()=>xe,TVh:()=>Lr,TwZ:()=>pc,GTT:()=>hp,xxj:()=>qp,XdK:()=>$u,Jmb:()=>Ke,cXo:()=>Ku,Dm5:()=>Es,IIB:()=>r,zI0:()=>la,LYD:()=>ba,cEG:()=>eg,SEl:()=>jw,t9V:()=>pg,SKZ:()=>Sr,__J:()=>Vw,RI$:()=>Bp,x12:()=>Pc,ccz:()=>ve,aNw:()=>ep,xwn:()=>Mp,dNK:()=>Dp,ini:()=>H,YdH:()=>N,y3G:()=>gt,l57:()=>at,xn0:()=>oc,t2V:()=>mc,uxB:()=>$t,cpd:()=>Gp,fiy:()=>gp,$XZ:()=>mp,uqK:()=>an,STE:()=>Jf,y$z:()=>wi,mAD:()=>ig,sOq:()=>Ue,hUw:()=>_a,_0G:()=>Hw,Sqs:()=>mg,hpZ:()=>wa,Vol:()=>Kp,wIZ:()=>it,cBi:()=>Sa,RFv:()=>Rs,kfC:()=>Ca,mgq:()=>Ec,YVA:()=>ie,Kgp:()=>Kf,HH$:()=>Wn,M_d:()=>Bu,rgh:()=>Pr,Ra6:()=>Nu,KhR:()=>en,BS5:()=>Hn,xhz:()=>$n,xOq:()=>Lu,a9j:()=>nn,bHk:()=>Ou,CgK:()=>jn,cuY:()=>Di,kvE:()=>Ir,SBu:()=>ia,AE_:()=>jp,ctO:()=>Hp,OLH:()=>Lp,kky:()=>m,nSF:()=>ks,zHn:()=>Fi,zwx:()=>Zp,AeJ:()=>ca,hLz:()=>up,D9g:()=>Up,wA:()=>fp,jhr:()=>pp,GVs:()=>ec,_zO:()=>ta,w6$:()=>vp,mhV:()=>_p,MOD:()=>Ve,kwd:()=>xp,Lmr:()=>yp,xsS:()=>Br,lLr:()=>ic,Z$r:()=>Z,IXb:()=>_c,SGH:()=>ng,SMj:()=>hn,L34:()=>e1,exe:()=>qe,bnF:()=>oe,MFA:()=>st,$uU:()=>tp,jyi:()=>Xn,E03:()=>ea,V6q:()=>Ts,rg2:()=>Cc,DVW:()=>ra,nVo:()=>Rp,F6N:()=>gg,xP7:()=>ci,Odq:()=>$p,Zif:()=>Ie,ZGJ:()=>lc,MJk:()=>dg,xvT:()=>Dr,PHM:()=>fa,dpR:()=>wt,n9L:()=>Ip,KwO:()=>kp,B7y:()=>Fs,x7r:()=>fg,wx7:()=>kr,Uvn:()=>tt,OFT:()=>uc,xzN:()=>Np,M5Z:()=>v,ZrN:()=>a,OWs:()=>C,dF9:()=>ac,oZy:()=>rn,rD2:()=>on,VHo:()=>Hu,ohE:()=>Yn,R$E:()=>qf,q3I:()=>Wp,Pab:()=>A,uZ5:()=>S,McK:()=>f,F9c:()=>w,k0b:()=>fc,hnT:()=>Ww,RSJ:()=>Zw,Mku:()=>Xw,h90:()=>Kw,rms:()=>Qw,ErP:()=>$w,aVg:()=>Yw,lPc:()=>Gw,Z8E:()=>lp,_N2:()=>Mr,yFn:()=>Lw,lNv:()=>cp,cu9:()=>Ap,MZQ:()=>sp,FUM:()=>rp,BxR:()=>vt,vdf:()=>P,iaL:()=>k,w6H:()=>T,Q4c:()=>Rw,Xxe:()=>x,Uxb:()=>M,Yr5:()=>L,Bhw:()=>R,yOA:()=>i});var t={};Ft.r(t),Ft.d(t,{ActivateEvent:()=>Wu,CollisionEndEvent:()=>Tr,CollisionPostSolveEvent:()=>Jo,CollisionPreSolveEvent:()=>qo,CollisionStartEvent:()=>Er,ContactEndEvent:()=>Ko,ContactStartEvent:()=>Qo,DeactivateEvent:()=>Gu,EnterTriggerEvent:()=>Zu,EnterViewPortEvent:()=>Yu,EventTypes:()=>ee,ExitTriggerEvent:()=>Qu,ExitViewPortEvent:()=>Xu,GameEvent:()=>ft,GameStartEvent:()=>ai,GameStopEvent:()=>Ps,GamepadAxisEvent:()=>ju,GamepadButtonEvent:()=>Vu,GamepadConnectEvent:()=>zu,GamepadDisconnectEvent:()=>Uu,HiddenEvent:()=>$u,InitializeEvent:()=>Es,KillEvent:()=>Sr,PostCollisionEvent:()=>Wn,PostDebugDrawEvent:()=>Bu,PostDrawEvent:()=>Pr,PostFrameEvent:()=>Nu,PostKillEvent:()=>en,PostUpdateEvent:()=>Hn,PreCollisionEvent:()=>$n,PreDebugDrawEvent:()=>Lu,PreDrawEvent:()=>nn,PreFrameEvent:()=>Ou,PreKillEvent:()=>jn,PreUpdateEvent:()=>Di,VisibleEvent:()=>Hu});var i={};Ft.r(i),Ft.d(i,{getAttributeComponentSize:()=>Zf,getAttributePointerType:()=>Qf,getGlTypeSizeBytes:()=>tc});var n={};Ft.r(n),Ft.d(n,{circle:()=>Tw,line:()=>nc,point:()=>Pw,roundRect:()=>sc,vector:()=>Ew});var r={};Ft.r(r),Ft.d(r,{Axes:()=>zr,Buttons:()=>Nr,Gamepad:()=>Ta,Gamepads:()=>Ea,KeyEvent:()=>Pa,Keyboard:()=>ag,Keys:()=>yc,NativePointerButton:()=>cn,PointerButton:()=>Bi,PointerComponent:()=>Rs,PointerEvent:()=>Vr,PointerEventReceiver:()=>Aa,PointerScope:()=>Bs,PointerSystem:()=>Ca,PointerType:()=>Oi,WheelDeltaMode:()=>Os,WheelEvent:()=>ug});var a={};Ft.r(a),Ft.d(a,{ConsoleAppender:()=>$,DrawUtil:()=>n,EasingFunctions:()=>Ot,LogLevel:()=>H,Logger:()=>N,Observable:()=>wi,ScreenAppender:()=>Z,addItemToArray:()=>St,contains:()=>K,delay:()=>ut,fail:()=>ot,getPosition:()=>_t,removeItemFromArray:()=>xt}),Ft(4662),Ft(8343);function l(){if(typeof window>"u"&&(window={audioContext:function(){}}),typeof window<"u"&&!window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(d){window.setInterval(d,1e3/60)}),typeof window<"u"&&!window.cancelAnimationFrame&&(window.cancelAnimationFrame=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(){}),typeof window<"u"&&!window.AudioContext){if(window.webkitAudioContext){const e=window.webkitAudioContext.prototype.decodeAudioData;window.webkitAudioContext.prototype.decodeAudioData=function(s){return new Promise((o,u)=>{e.call(this,s,o,u)})}}window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext||window.oAudioContext}typeof window<"u"&&!window.devicePixelRatio&&(window.devicePixelRatio=window.devicePixelRatio||1)}class c{static useCanvasGraphicsContext(){c.enable("use-canvas-context")}static freeze(){c._FROZEN=!0}static _reset(){c._FROZEN=!1,c._FLAGS={}}static enable(e){if(this._FROZEN)throw Error("Feature flags can only be enabled before Engine constructor time");c._FLAGS[e]=!0}static disable(e){if(this._FROZEN)throw Error("Feature flags can only be disabled before Engine constructor time");c._FLAGS[e]=!1}static isEnabled(e){return!!c._FLAGS[e]}static show(){return Object.keys(c._FLAGS)}}c._FROZEN=!1,c._FLAGS={};function f(d,e){return{type:d,value:e}}const p=4294967295;class m{constructor(e){this.seed=e,this._lowerMask=2147483647,this._upperMask=2147483648,this._w=32,this._n=624,this._m=397,this._a=2567483615,this._u=11,this._s=7,this._b=2636928640,this._t=15,this._c=4022730752,this._l=18,this._f=1812433253,this._mt=new Array(this._n),this._mt[0]=(e||Date.now())>>>0;for(let s=1;s<this._n;s++){const o=this._mt[s-1]^this._mt[s-1]>>>this._w-2;this._mt[s]=(this._f*((o&4294901760)>>>16)<<16)+this._f*(o&65535)+s>>>0}this._index=this._n}_twist(){const e=[0,this._a];let s=0,o=0;for(;o<this._n-this._m;o++)s=this._mt[o]&this._upperMask|this._mt[o+1]&this._lowerMask,this._mt[o]=this._mt[o+this._m]^s>>>1^e[s&1]&p;for(;o<this._n-1;o++)s=this._mt[o]&this._upperMask|this._mt[o+1]&this._lowerMask,this._mt[o]=this._mt[o+(this._m-this._n)]^s>>>1^e[s&1]&p;s=this._mt[this._n-1]&this._upperMask|this._mt[0]&this._lowerMask,this._mt[this._n-1]=this._mt[this._m-1]^s>>>1^e[s&1]&p,this._index=0}nextInt(){this._index>=this._n&&this._twist();let e=this._mt[this._index++];return e^=e>>>this._u,e^=e<<this._s&this._b,e^=e<<this._t&this._c,e^=e>>>this._l,e>>>0}next(){return this.nextInt()*(1/4294967296)}floating(e,s){return(s-e)*this.next()+e}integer(e,s){return Math.floor((s-e+1)*this.next()+e)}bool(e=.5){return this.next()<=e}pickOne(e){return e[this.integer(0,e.length-1)]}pickSet(e,s,o=!1){return o?this._pickSetWithDuplicates(e,s):this._pickSetWithoutDuplicates(e,s)}_pickSetWithoutDuplicates(e,s){if(s>e.length||s<0)throw new Error("Invalid number of elements to pick, must pick a value 0 < n <= length");if(s===e.length)return e;const o=new Array(s);let u=0;const h=e.slice(0);for(;u<s;){const g=this.integer(0,h.length-1);o[u++]=h[g],h.splice(g,1)}return o}_pickSetWithDuplicates(e,s){if(s<0)throw new Error("Invalid number of elements to pick, must pick a value 0 <= n < MAX_INT");const o=new Array(s);for(let u=0;u<s;u++)o[u]=this.pickOne(e);return o}shuffle(e){const s=e.slice(0);let o=null;for(let u=0;u<s.length-2;u++){const h=this.integer(u,s.length-1);o=s[u],s[u]=s[h],s[h]=o}return s}range(e,s,o){const u=new Array(e);for(let h=0;h<e;h++)u[h]=this.integer(s,o);return u}d4(){return this.integer(1,4)}d6(){return this.integer(1,6)}d8(){return this.integer(1,8)}d10(){return this.integer(1,10)}d12(){return this.integer(1,12)}d20(){return this.integer(1,20)}}const v=Math.PI*2;function w(d){return d>=0?d-Math.floor(d):d-Math.ceil(d)}function x(d){return d===0?0:d<0?-1:1}function S(d,e,s){return Math.min(Math.max(e,d),s)}function A(d){let e=d;if(d>v)for(;e>v;)e-=v;if(d<0)for(;e<0;)e+=v;return e}function M(d){return 180/Math.PI*d}function L(d){return d/180*Math.PI}const T=(d,e)=>Array.from(new Array(e-d+1),(s,o)=>o+d);function P(d,e,s=new m){return s?s.floating(d,e):d+Math.random()*(e-d)}function k(d,e,s=new m){return s?s.integer(d,e):Math.round(P(d,e))}class C{constructor(e,s){this._x=0,this._y=0,this._x=e,this._y=s}static get Zero(){return new C(0,0)}static get One(){return new C(1,1)}static get Half(){return new C(.5,.5)}static get Up(){return new C(0,-1)}static get Down(){return new C(0,1)}static get Left(){return new C(-1,0)}static get Right(){return new C(1,0)}static fromAngle(e){return new C(Math.cos(e),Math.sin(e))}static isValid(e){return!(e==null||isNaN(e.x)||isNaN(e.y)||e.x===1/0||e.y===1/0||e.x===-1/0||e.y===-1/0)}static distance(e,s){return Math.sqrt(Math.pow(e.x-s.x,2)+Math.pow(e.y-s.y,2))}static min(e,s){return new C(Math.min(e.x,s.x),Math.min(e.y,s.y))}static max(e,s){return new C(Math.max(e.x,s.x),Math.max(e.y,s.y))}get x(){return this._x}set x(e){this._x=e}get y(){return this._y}set y(e){this._y=e}setTo(e,s){this.x=e,this.y=s}equals(e,s=.001){return Math.abs(this.x-e.x)<=s&&Math.abs(this.y-e.y)<=s}distance(e){if(!e)return Math.sqrt(this.x*this.x+this.y*this.y);const s=this.x-e.x,o=this.y-e.y;return Math.sqrt(s*s+o*o)}squareDistance(e){e||(e=C.Zero);const s=this.x-e.x,o=this.y-e.y;return s*s+o*o}clampMagnitude(e){const s=this.size,o=S(s,0,e);return this.size=o,this}get size(){return this.distance()}set size(e){const s=this.normalize().scale(e);this.setTo(s.x,s.y)}normalize(){const e=this.distance();return e>0?new C(this.x/e,this.y/e):new C(0,1)}average(e){return this.add(e).scale(.5)}scale(e,s){const o=s||new C(0,0);return e instanceof C?(o.x=this.x*e.x,o.y=this.y*e.y):(o.x=this.x*e,o.y=this.y*e),o}add(e,s){return s?(s.x=this.x+e.x,s.y=this.y+e.y,s):new C(this.x+e.x,this.y+e.y)}sub(e){return new C(this.x-e.x,this.y-e.y)}addEqual(e){return this.setTo(this.x+e.x,this.y+e.y),this}subEqual(e){return this.setTo(this.x-e.x,this.y-e.y),this}scaleEqual(e){return this.setTo(this.x*e,this.y*e),this}dot(e){return this.x*e.x+this.y*e.y}cross(e){if(e instanceof C)return this.x*e.y-this.y*e.x;if(typeof e=="number")return new C(e*this.y,-e*this.x)}static cross(e,s){return new C(-e*s.y,e*s.x)}perpendicular(){return new C(this.y,-this.x)}normal(){return this.perpendicular().normalize()}negate(){return this.scale(-1)}toAngle(){return Math.atan2(this.y,this.x)}rotate(e,s){s||(s=new C(0,0));const o=Math.sin(e),u=Math.cos(e),h=u*(this.x-s.x)-o*(this.y-s.y)+s.x,g=o*(this.x-s.x)+u*(this.y-s.y)+s.y;return new C(h,g)}clone(e){const s=e??new C(0,0);return s.x=this.x,s.y=this.y,s}toString(e){return e?`(${this.x.toFixed(e)}, ${this.y.toFixed(e)})`:`(${this.x}, ${this.y})`}}function R(d,e){return new C(d,e)}var H;(function(d){d[d.Debug=0]="Debug",d[d.Info=1]="Info",d[d.Warn=2]="Warn",d[d.Error=3]="Error",d[d.Fatal=4]="Fatal"})(H||(H={}));class N{constructor(){if(this._appenders=[],this.defaultLevel=H.Info,N._INSTANCE)throw new Error("Logger is a singleton");return N._INSTANCE=this,N._INSTANCE.addAppender(new $),N._INSTANCE}static getInstance(){return N._INSTANCE==null&&(N._INSTANCE=new N),N._INSTANCE}addAppender(e){this._appenders.push(e)}clearAppenders(){this._appenders.length=0}_log(e,s){e==null&&(e=this.defaultLevel);const o=this._appenders.length;for(let u=0;u<o;u++)e>=this.defaultLevel&&this._appenders[u].log(e,s)}debug(...e){this._log(H.Debug,e)}info(...e){this._log(H.Info,e)}warn(...e){this._log(H.Warn,e)}error(...e){this._log(H.Error,e)}fatal(...e){this._log(H.Fatal,e)}}N._INSTANCE=null;class ${log(e,s){if(!console&&!console.log&&console.warn&&console.error)return;const o=[];o.unshift.apply(o,s),o.unshift("["+H[e]+"] : "),e<H.Warn?console.log.apply?console.log.apply(console,o):console.log(o.join(" ")):e<H.Error?console.warn.apply?console.warn.apply(console,o):console.warn(o.join(" ")):console.error.apply?console.error.apply(console,o):console.error(o.join(" "))}}class Z{constructor(e,s){this._messages=[],this._canvas=document.createElement("canvas"),this._canvas.width=e||window.innerWidth,this._canvas.height=s||window.innerHeight,this._canvas.style.position="absolute",this._ctx=this._canvas.getContext("2d"),document.body.appendChild(this._canvas)}log(e,s){const o=s.join(",");this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._messages.unshift("["+H[e]+"] : "+o);let u=10,h=1;for(let g=0;g<this._messages.length;g++)this._ctx.fillStyle="rgba(255,255,255,"+h.toFixed(2)+")",this._ctx.fillText(this._messages[g],200,u),u+=10,h=h>0?h-.05:0}}class B{constructor(e,s,o,u){this.r=e,this.g=s,this.b=o,this.a=u??1}static fromRGB(e,s,o,u){return new B(e,s,o,u)}static fromRGBString(e){const s=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)/i;let o=null;if(o=e.match(s)){const u=parseInt(o[1],10),h=parseInt(o[2],10),g=parseInt(o[3],10);let _=1;return o[4]&&(_=parseFloat(o[4])),new B(u,h,g,_)}else throw new Error("Invalid rgb/a string: "+e)}static fromHex(e){const s=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i;let o=null;if(o=e.match(s)){const u=parseInt(o[1],16),h=parseInt(o[2],16),g=parseInt(o[3],16);let _=1;return o[4]&&(_=parseInt(o[4],16)/255),new B(u,h,g,_)}else throw new Error("Invalid hex string: "+e)}static fromHSL(e,s,o,u=1){return new rt(e,s,o,u).toRGBA()}lighten(e=.1){const s=rt.fromRGBA(this.r,this.g,this.b,this.a);return s.l+=(1-s.l)*e,s.toRGBA()}darken(e=.1){const s=rt.fromRGBA(this.r,this.g,this.b,this.a);return s.l-=s.l*e,s.toRGBA()}saturate(e=.1){const s=rt.fromRGBA(this.r,this.g,this.b,this.a);return s.s+=s.s*e,s.toRGBA()}desaturate(e=.1){const s=rt.fromRGBA(this.r,this.g,this.b,this.a);return s.s-=s.s*e,s.toRGBA()}multiply(e){const s=e.r/255*this.r/255*255,o=e.g/255*this.g/255*255,u=e.b/255*this.b/255*255,h=e.a*this.a;return new B(s,o,u,h)}screen(e){const s=e.invert(),o=e.invert();return s.multiply(o).invert()}invert(){return new B(255-this.r,255-this.g,255-this.b,1-this.a)}average(e){const s=(e.r+this.r)/2,o=(e.g+this.g)/2,u=(e.b+this.b)/2,h=(e.a+this.a)/2;return new B(s,o,u,h)}equal(e){return this.toString()===e.toString()}toString(e="rgb"){switch(e){case"rgb":return this.toRGBA();case"hsl":return this.toHSLA();case"hex":return this.toHex();default:throw new Error("Invalid Color format")}}_componentToHex(e){const s=e.toString(16);return s.length===1?"0"+s:s}toHex(){return"#"+this._componentToHex(this.r)+this._componentToHex(this.g)+this._componentToHex(this.b)}toRGBA(){const e=String(this.r.toFixed(0))+", "+String(this.g.toFixed(0))+", "+String(this.b.toFixed(0));return this.a!==void 0||this.a!==null?"rgba("+e+", "+String(this.a)+")":"rgb("+e+")"}toHSLA(){return rt.fromRGBA(this.r,this.g,this.b,this.a).toString()}fillStyle(){return this.toString()}clone(){return new B(this.r,this.g,this.b,this.a)}static get Black(){return B.fromHex("#000000")}static get White(){return B.fromHex("#FFFFFF")}static get Gray(){return B.fromHex("#808080")}static get LightGray(){return B.fromHex("#D3D3D3")}static get DarkGray(){return B.fromHex("#A9A9A9")}static get Yellow(){return B.fromHex("#FFFF00")}static get Orange(){return B.fromHex("#FFA500")}static get Red(){return B.fromHex("#FF0000")}static get Vermilion(){return B.fromHex("#FF5B31")}static get Rose(){return B.fromHex("#FF007F")}static get Magenta(){return B.fromHex("#FF00FF")}static get Violet(){return B.fromHex("#7F00FF")}static get Blue(){return B.fromHex("#0000FF")}static get Azure(){return B.fromHex("#007FFF")}static get Cyan(){return B.fromHex("#00FFFF")}static get Viridian(){return B.fromHex("#59978F")}static get Green(){return B.fromHex("#00FF00")}static get Chartreuse(){return B.fromHex("#7FFF00")}static get Transparent(){return B.fromHex("#FFFFFF00")}static get ExcaliburBlue(){return B.fromHex("#176BAA")}}class rt{constructor(e,s,o,u){this.h=e,this.s=s,this.l=o,this.a=u}static hue2rgb(e,s,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?e+(s-e)*6*o:o<1/2?s:o<2/3?e+(s-e)*(2/3-o)*6:e}static fromRGBA(e,s,o,u){e/=255,s/=255,o/=255;const h=Math.max(e,s,o),g=Math.min(e,s,o);let _,y;const b=(h+g)/2;if(h===g)_=y=0;else{const E=h-g;switch(y=b>.5?E/(2-h-g):E/(h+g),h){case e:_=(s-o)/E+(s<o?6:0);break;case s:_=(o-e)/E+2;break;case o:_=(e-s)/E+4;break}_/=6}return new rt(_,y,b,u)}toRGBA(){let e,s,o;if(this.s===0)e=s=o=this.l;else{const u=this.l<.5?this.l*(1+this.s):this.l+this.s-this.l*this.s,h=2*this.l-u;e=rt.hue2rgb(h,u,this.h+1/3),s=rt.hue2rgb(h,u,this.h),o=rt.hue2rgb(h,u,this.h-1/3)}return new B(e*255,s*255,o*255,this.a)}toString(){const e=this.h.toFixed(0),s=this.s.toFixed(0),o=this.l.toFixed(0),u=this.a.toFixed(0);return`hsla(${e}, ${s}, ${o}, ${u})`}}var st;(function(d){d.None="None",d.Top="Top",d.Bottom="Bottom",d.Left="Left",d.Right="Right"})(st||(st={})),function(d){function e(o){return o===d.Top?d.Bottom:o===d.Bottom?d.Top:o===d.Left?d.Right:o===d.Right?d.Left:d.None}d.getOpposite=e;function s(o){const u=[C.Left,C.Right,C.Up,C.Down],h=[d.Left,d.Right,d.Top,d.Bottom];let g=-Number.MAX_VALUE,_=-1;for(let y=0;y<u.length;y++)u[y].dot(o)>g&&(g=u[y].dot(o),_=y);return h[_]}d.fromDirection=s}(st||(st={}));class Q{constructor(e=0,s=0,o=0,u=0){typeof e=="object"?(this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom):typeof e=="number"&&(this.left=e,this.top=s,this.right=o,this.bottom=u)}clone(){return new Q(this.left,this.top,this.right,this.bottom)}static getSideFromIntersection(e){return e&&e?Math.abs(e.x)>Math.abs(e.y)?e.x<0?st.Right:st.Left:e.y<0?st.Bottom:st.Top:st.None}static fromPoints(e){let s=1/0,o=1/0,u=-1/0,h=-1/0;for(let g=0;g<e.length;g++)e[g].x<s&&(s=e[g].x),e[g].x>u&&(u=e[g].x),e[g].y<o&&(o=e[g].y),e[g].y>h&&(h=e[g].y);return new Q(s,o,u,h)}static fromDimension(e,s,o=C.Half,u=C.Zero){return new Q(-e*o.x+u.x,-s*o.y+u.y,e-e*o.x+u.x,s-s*o.y+u.y)}get width(){return this.right-this.left}get height(){return this.bottom-this.top}hasZeroDimensions(){return this.width===0||this.height===0}get center(){return new C((this.left+this.right)/2,(this.top+this.bottom)/2)}translate(e){return new Q(this.left+e.x,this.top+e.y,this.right+e.x,this.bottom+e.y)}rotate(e,s=C.Zero){const o=this.getPoints().map(u=>u.rotate(e,s));return Q.fromPoints(o)}scale(e,s=C.Zero){const o=this.translate(s);return new Q(o.left*e.x,o.top*e.y,o.right*e.x,o.bottom*e.y)}transform(e){const s=e.data[0]*this.left,o=e.data[1]*this.left,u=e.data[0]*this.right,h=e.data[1]*this.right,g=e.data[2]*this.top,_=e.data[3]*this.top,y=e.data[2]*this.bottom,b=e.data[3]*this.bottom,E=e.getPosition(),D=Math.min(s,u)+Math.min(g,y)+E.x,F=Math.min(o,h)+Math.min(_,b)+E.y,z=Math.max(s,u)+Math.max(g,y)+E.x,j=Math.max(o,h)+Math.max(_,b)+E.y;return new Q({left:D,top:F,right:z,bottom:j})}getPerimeter(){const e=this.width,s=this.height;return 2*(e+s)}getPoints(){const e=[];return e.push(new C(this.left,this.top)),e.push(new C(this.right,this.top)),e.push(new C(this.right,this.bottom)),e.push(new C(this.left,this.bottom)),e}rayCast(e,s=1/0){let o=-1/0,u=1/0;const h=e.dir.x===0?Number.MAX_VALUE:1/e.dir.x,g=e.dir.y===0?Number.MAX_VALUE:1/e.dir.y,_=(this.left-e.pos.x)*h,y=(this.right-e.pos.x)*h;o=Math.min(_,y),u=Math.max(_,y);const b=(this.top-e.pos.y)*g,E=(this.bottom-e.pos.y)*g;return o=Math.max(o,Math.min(b,E)),u=Math.min(u,Math.max(b,E)),u>=Math.max(0,o)&&o<s}rayCastTime(e,s=1/0){let o=-1/0,u=1/0;const h=e.dir.x===0?Number.MAX_VALUE:1/e.dir.x,g=e.dir.y===0?Number.MAX_VALUE:1/e.dir.y,_=(this.left-e.pos.x)*h,y=(this.right-e.pos.x)*h;o=Math.min(_,y),u=Math.max(_,y);const b=(this.top-e.pos.y)*g,E=(this.bottom-e.pos.y)*g;return o=Math.max(o,Math.min(b,E)),u=Math.min(u,Math.max(b,E)),u>=Math.max(0,o)&&o<s?o:-1}contains(e){return e instanceof C?this.left<=e.x&&this.top<=e.y&&this.bottom>=e.y&&this.right>=e.x:e instanceof Q?this.left<=e.left&&this.top<=e.top&&e.bottom<=this.bottom&&e.right<=this.right:!1}combine(e){return new Q(Math.min(this.left,e.left),Math.min(this.top,e.top),Math.max(this.right,e.right),Math.max(this.bottom,e.bottom))}get dimensions(){return new C(this.width,this.height)}overlaps(e,s){const o=s||0;if(e.hasZeroDimensions())return this.contains(e);if(this.hasZeroDimensions())return e.contains(this);const u=this.combine(e);return u.width+o<e.width+this.width&&u.height+o<e.height+this.height}intersect(e){const s=this.combine(e);if(s.width<e.width+this.width&&s.height<e.height+this.height&&!s.dimensions.equals(e.dimensions)&&!s.dimensions.equals(this.dimensions)){let o=0;this.right>=e.left&&this.right<=e.right?o=e.left-this.right:o=e.right-this.left;let u=0;return this.top<=e.bottom&&this.top>=e.top?u=e.bottom-this.top:u=e.top-this.bottom,Math.abs(o)<Math.abs(u)?new C(o,0):new C(0,u)}else if(s.dimensions.equals(e.dimensions)||s.dimensions.equals(this.dimensions)){let o=0;this.width-e.width>=0?this.right-e.right<=e.left-this.left?o=e.left-this.right:o=e.right-this.left:e.right-this.right<=this.left-e.left?o=this.left-e.right:o=this.right-e.left;let u=0;return this.height-e.height>=0?this.bottom-e.bottom<=e.top-this.top?u=e.top-this.bottom:u=e.bottom-this.top:e.bottom-this.bottom<=this.top-e.top?u=this.top-e.bottom:u=this.bottom-e.top,Math.abs(o)<Math.abs(u)?new C(o,0):new C(0,u)}else return null}intersectWithSide(e){const s=this.intersect(e);return Q.getSideFromIntersection(s)}draw(e,s=B.Yellow){e.debug.drawRect(this.left,this.top,this.width,this.height,{color:s})}}class ct{constructor(){this._isCompleted=!1,this.promise=new Promise((e,s)=>{this._resolver=e,this._rejecter=s})}get isCompleted(){return this._isCompleted}resolve(e){this._isCompleted||(this._isCompleted=!0,this._resolver(e))}reject(e){this._isCompleted||(this._isCompleted=!0,this._rejecter(e))}}function _t(d){let e=0,s=0;const o=h=>{e+=h.offsetLeft,h.offsetParent&&o(h.offsetParent)},u=h=>{s+=h.offsetTop,h.offsetParent&&u(h.offsetParent)};return o(d),u(d),new C(e,s)}function St(d,e){return e.indexOf(d)===-1?(e.push(d),!0):!1}function xt(d,e){let s=-1;return(s=e.indexOf(d))>-1?(e.splice(s,1),!0):!1}function K(d,e){for(let s=0;s<d.length;s++)if(d[s]===e)return!0;return!1}function ot(d){throw new Error(d)}function ut(d,e){var s;const o=new ct;return((s=e==null?void 0:e.schedule.bind(e))!==null&&s!==void 0?s:setTimeout)(()=>{o.resolve()},d),o.promise}var at;(function(d){d[d.X=12]="X",d[d.Y=13]="Y"})(at||(at={}));class gt{constructor(){this.data=new Float32Array(16),this._scaleX=1,this._scaleSignX=1,this._scaleY=1,this._scaleSignY=1}static ortho(e,s,o,u,h,g){const _=new gt;return _.data[0]=2/(s-e),_.data[1]=0,_.data[2]=0,_.data[3]=0,_.data[4]=0,_.data[5]=2/(u-o),_.data[6]=0,_.data[7]=0,_.data[8]=0,_.data[9]=0,_.data[10]=-2/(g-h),_.data[11]=0,_.data[12]=-(s+e)/(s-e),_.data[13]=-(u+o)/(u-o),_.data[14]=-(g+h)/(g-h),_.data[15]=1,_}clone(e){const s=e||new gt;return s.data[0]=this.data[0],s.data[1]=this.data[1],s.data[2]=this.data[2],s.data[3]=this.data[3],s.data[4]=this.data[4],s.data[5]=this.data[5],s.data[6]=this.data[6],s.data[7]=this.data[7],s.data[8]=this.data[8],s.data[9]=this.data[9],s.data[10]=this.data[10],s.data[11]=this.data[11],s.data[12]=this.data[12],s.data[13]=this.data[13],s.data[14]=this.data[14],s.data[15]=this.data[15],s}toDOMMatrix(){return new DOMMatrix([...this.data])}static fromFloat32Array(e){const s=new gt;return s.data=e,s}static identity(){const e=new gt;return e.data[0]=1,e.data[1]=0,e.data[2]=0,e.data[3]=0,e.data[4]=0,e.data[5]=1,e.data[6]=0,e.data[7]=0,e.data[8]=0,e.data[9]=0,e.data[10]=1,e.data[11]=0,e.data[12]=0,e.data[13]=0,e.data[14]=0,e.data[15]=1,e}reset(){const e=this;return e.data[0]=1,e.data[1]=0,e.data[2]=0,e.data[3]=0,e.data[4]=0,e.data[5]=1,e.data[6]=0,e.data[7]=0,e.data[8]=0,e.data[9]=0,e.data[10]=1,e.data[11]=0,e.data[12]=0,e.data[13]=0,e.data[14]=0,e.data[15]=1,e}static translation(e,s){const o=gt.identity();return o.data[12]=e,o.data[13]=s,o}static scale(e,s){const o=gt.identity();return o.data[0]=e,o.data[5]=s,o.data[10]=1,o.data[15]=1,o}static rotation(e){const s=gt.identity();return s.data[0]=Math.cos(e),s.data[4]=-Math.sin(e),s.data[1]=Math.sin(e),s.data[5]=Math.cos(e),s}multiply(e,s){if(e instanceof C){const o=s||new C(0,0),u=e,h=u.x*this.data[0]+u.y*this.data[4]+this.data[12],g=u.x*this.data[1]+u.y*this.data[5]+this.data[13];return o.x=h,o.y=g,o}else{const o=s||new gt,u=e,h=this.data[0],g=this.data[1],_=this.data[2],y=this.data[3],b=this.data[4],E=this.data[5],D=this.data[6],F=this.data[7],z=this.data[8],j=this.data[9],X=this.data[10],Y=this.data[11],U=this.data[12],V=this.data[13],et=this.data[14],q=this.data[15],ht=u.data[0],nt=u.data[1],W=u.data[2],At=u.data[3],It=u.data[4],Rt=u.data[5],Pt=u.data[6],le=u.data[7],di=u.data[8],fi=u.data[9],Jn=u.data[10],ts=u.data[11],es=u.data[12],is=u.data[13],dt=u.data[14],Ia=u.data[15];o.data[0]=h*ht+b*nt+z*W+U*At,o.data[1]=g*ht+E*nt+j*W+V*At,o.data[2]=_*ht+D*nt+X*W+et*At,o.data[3]=y*ht+F*nt+Y*W+q*At,o.data[4]=h*It+b*Rt+z*Pt+U*le,o.data[5]=g*It+E*Rt+j*Pt+V*le,o.data[6]=_*It+D*Rt+X*Pt+et*le,o.data[7]=y*It+F*Rt+Y*Pt+q*le,o.data[8]=h*di+b*fi+z*Jn+U*ts,o.data[9]=g*di+E*fi+j*Jn+V*ts,o.data[10]=_*di+D*fi+X*Jn+et*ts,o.data[11]=y*di+F*fi+Y*Jn+q*ts,o.data[12]=h*es+b*is+z*dt+U*Ia,o.data[13]=g*es+E*is+j*dt+V*Ia,o.data[14]=_*es+D*is+X*dt+et*Ia,o.data[15]=y*es+F*is+Y*dt+q*Ia;const vg=this.getScale();return o._scaleSignX=x(vg.x)*x(o._scaleSignX),o._scaleSignY=x(vg.y)*x(o._scaleSignY),o}}translate(e,s){const o=this.data[0],u=this.data[1],h=this.data[2],g=this.data[3],_=this.data[4],y=this.data[5],b=this.data[6],E=this.data[7],D=this.data[8],F=this.data[9],z=this.data[10],j=this.data[11],X=this.data[12],Y=this.data[13],U=this.data[14],V=this.data[15],et=0,q=1;return this.data[12]=o*e+_*s+D*et+X*q,this.data[13]=u*e+y*s+F*et+Y*q,this.data[14]=h*e+b*s+z*et+U*q,this.data[15]=g*e+E*s+j*et+V*q,this}setPosition(e,s){this.data[12]=e,this.data[13]=s}getPosition(){return R(this.data[12],this.data[13])}rotate(e){const s=this.data[0],o=this.data[1],u=this.data[2],h=this.data[3],g=this.data[4],_=this.data[5],y=this.data[6],b=this.data[7],E=Math.sin(e),D=Math.cos(e);return this.data[0]=D*s+E*g,this.data[1]=D*o+E*_,this.data[2]=D*u+E*y,this.data[3]=D*h+E*b,this.data[4]=D*g-E*s,this.data[5]=D*_-E*o,this.data[6]=D*y-E*u,this.data[7]=D*b-E*h,this}scale(e,s){const o=this.data[0],u=this.data[1],h=this.data[2],g=this.data[3],_=this.data[4],y=this.data[5],b=this.data[6],E=this.data[7];return this.data[0]=o*e,this.data[1]=u*e,this.data[2]=h*e,this.data[3]=g*e,this.data[4]=_*s,this.data[5]=y*s,this.data[6]=b*s,this.data[7]=E*s,this}setRotation(e){const s=this.getScale(),o=Math.sin(e),u=Math.cos(e);this.data[0]=u*s.x,this.data[1]=o*s.y,this.data[4]=-o*s.x,this.data[5]=u*s.y}getRotation(){const e=Math.atan2(this.data[1]/this.getScaleY(),this.data[0]/this.getScaleX());return A(e)}getScaleX(){const e=R(this.data[0],this.data[4]).size;return this._scaleSignX*e}getScaleY(){const e=R(this.data[1],this.data[5]).size;return this._scaleSignY*e}getScale(){return R(this.getScaleX(),this.getScaleY())}setScaleX(e){if(this._scaleX===e)return;this._scaleSignX=x(e);const s=R(this.data[0]*this._scaleSignX,this.data[4]*this._scaleSignX).normalize();this.data[0]=s.x*e,this.data[4]=s.y*e,this._scaleX=e}setScaleY(e){if(this._scaleY===e)return;this._scaleSignY=x(e);const s=R(this.data[1]*this._scaleSignY,this.data[5]*this._scaleSignY).normalize();this.data[1]=s.x*e,this.data[5]=s.y*e,this._scaleY=e}setScale(e){this.setScaleX(e.x),this.setScaleY(e.y)}getBasisDeterminant(){return this.data[0]*this.data[5]-this.data[1]*this.data[4]}getAffineInverse(e){const o=1/this.getBasisDeterminant(),u=this.data[0],h=this.data[4],g=this.data[1],_=this.data[5],y=e||gt.identity();y.data[0]=_*o,y.data[1]=-g*o,y.data[4]=-h*o,y.data[5]=u*o;const b=this.data[12],E=this.data[13];return y.data[12]=-(b*y.data[0]+E*y.data[4]),y.data[13]=-(b*y.data[1]+E*y.data[5]),y}isIdentity(){return this.data[0]===1&&this.data[1]===0&&this.data[2]===0&&this.data[3]===0&&this.data[4]===0&&this.data[5]===1&&this.data[6]===0&&this.data[7]===0&&this.data[8]===0&&this.data[9]===0&&this.data[10]===1&&this.data[11]===0&&this.data[12]===0&&this.data[13]===0&&this.data[14]===0&&this.data[15]===1}toString(){return`
[${this.data[0]} ${this.data[4]} ${this.data[8]} ${this.data[12]}]
[${this.data[1]} ${this.data[5]} ${this.data[9]} ${this.data[13]}]
[${this.data[2]} ${this.data[6]} ${this.data[10]} ${this.data[14]}]
[${this.data[3]} ${this.data[7]} ${this.data[11]} ${this.data[15]}]
`}}class Et{constructor(){this.data=new Float64Array(6),this._scale=new Float64Array([1,1]),this._scaleSignX=1,this._scaleSignY=1}toDOMMatrix(){return new DOMMatrix([...this.data])}static identity(){const e=new Et;return e.data[0]=1,e.data[1]=0,e.data[2]=0,e.data[3]=1,e.data[4]=0,e.data[5]=0,e}static translation(e,s){const o=Et.identity();return o.data[4]=e,o.data[5]=s,o}static scale(e,s){const o=Et.identity();return o.data[0]=e,o.data[3]=s,o._scale[0]=e,o._scale[1]=s,o}static rotation(e){const s=Et.identity();return s.data[0]=Math.cos(e),s.data[1]=Math.sin(e),s.data[2]=-Math.sin(e),s.data[3]=Math.cos(e),s}setPosition(e,s){this.data[4]=e,this.data[5]=s}getPosition(){return R(this.data[4],this.data[5])}rotate(e){const s=this.data[0],o=this.data[1],u=this.data[2],h=this.data[3],g=Math.sin(e),_=Math.cos(e);return this.data[0]=_*s+g*u,this.data[1]=_*o+g*h,this.data[2]=_*u-g*s,this.data[3]=_*h-g*o,this}translate(e,s){const o=this.data[0],u=this.data[1],h=this.data[2],g=this.data[3],_=this.data[4],y=this.data[5];return this.data[4]=o*e+h*s+_,this.data[5]=u*e+g*s+y,this}scale(e,s){const o=this.data[0],u=this.data[1],h=this.data[2],g=this.data[3];return this.data[0]=o*e,this.data[1]=u*e,this.data[2]=h*s,this.data[3]=g*s,this._scale[0]=e,this._scale[1]=s,this}determinant(){return this.data[0]*this.data[3]-this.data[1]*this.data[2]}inverse(e){const o=1/this.determinant(),u=this.data[0],h=this.data[2],g=this.data[1],_=this.data[3],y=e||Et.identity();y.data[0]=_*o,y.data[1]=-g*o,y.data[2]=-h*o,y.data[3]=u*o;const b=this.data[4],E=this.data[5];return y.data[4]=-(b*y.data[0]+E*y.data[2]),y.data[5]=-(b*y.data[1]+E*y.data[3]),y}multiply(e,s){if(e instanceof C){const o=s||new C(0,0),u=e,h=u.x*this.data[0]+u.y*this.data[2]+this.data[4],g=u.x*this.data[1]+u.y*this.data[3]+this.data[5];return o.x=h,o.y=g,o}else{const o=s||new Et,u=e,h=this.data[0],g=this.data[1],_=this.data[2],y=this.data[3],b=this.data[4],E=this.data[5],D=u.data[0],F=u.data[1],z=u.data[2],j=u.data[3],X=u.data[4],Y=u.data[5];o.data[0]=h*D+_*F,o.data[1]=g*D+y*F,o.data[2]=h*z+_*j,o.data[3]=g*z+y*j,o.data[4]=h*X+_*Y+b,o.data[5]=g*X+y*Y+E;const U=this.getScale();return o._scaleSignX=x(U.x)*x(o._scaleSignX),o._scaleSignY=x(U.y)*x(o._scaleSignY),o}}to4x4(){const e=new gt;return e.data[0]=this.data[0],e.data[1]=this.data[1],e.data[2]=0,e.data[3]=0,e.data[4]=this.data[2],e.data[5]=this.data[3],e.data[6]=0,e.data[7]=0,e.data[8]=0,e.data[9]=0,e.data[10]=1,e.data[11]=0,e.data[12]=this.data[4],e.data[13]=this.data[5],e.data[14]=0,e.data[15]=1,e}setRotation(e){const s=this.getScale(),o=Math.sin(e),u=Math.cos(e);this.data[0]=u*s.x,this.data[1]=o*s.y,this.data[2]=-o*s.x,this.data[3]=u*s.y}getRotation(){const e=Math.atan2(this.data[1]/this.getScaleY(),this.data[0]/this.getScaleX());return A(e)}getScaleX(){const e=R(this.data[0],this.data[2]).distance();return this._scaleSignX*e}getScaleY(){const e=R(this.data[1],this.data[3]).distance();return this._scaleSignY*e}getScale(){return R(this.getScaleX(),this.getScaleY())}setScaleX(e){if(e===this._scale[0])return;this._scaleSignX=x(e);const s=R(this.data[0]*this._scaleSignX,this.data[2]*this._scaleSignX).normalize();this.data[0]=s.x*e,this.data[2]=s.y*e,this._scale[0]=e}setScaleY(e){if(e===this._scale[1])return;this._scaleSignY=x(e);const s=R(this.data[1]*this._scaleSignY,this.data[3]*this._scaleSignY).normalize();this.data[1]=s.x*e,this.data[3]=s.y*e,this._scale[1]=e}setScale(e){this.setScaleX(e.x),this.setScaleY(e.y)}isIdentity(){return this.data[0]===1&&this.data[1]===0&&this.data[2]===0&&this.data[3]===1&&this.data[4]===0&&this.data[5]===0}reset(){const e=this;return e.data[0]=1,e.data[1]=0,e.data[2]=0,e.data[3]=1,e.data[4]=0,e.data[5]=0,e}clone(e){const s=e||new Et;return s.data[0]=this.data[0],s.data[1]=this.data[1],s.data[2]=this.data[2],s.data[3]=this.data[3],s.data[4]=this.data[4],s.data[5]=this.data[5],s}toString(){return`
[${this.data[0]} ${this.data[2]} ${this.data[4]}]
[${this.data[1]} ${this.data[3]} ${this.data[5]}]
[0 0 1]
`}}class Qe{constructor(){this._transforms=[],this._currentTransform=Et.identity()}save(){this._transforms.push(this._currentTransform),this._currentTransform=this._currentTransform.clone()}restore(){this._currentTransform=this._transforms.pop()}translate(e,s){return this._currentTransform.translate(e,s)}rotate(e){return this._currentTransform.rotate(e)}scale(e,s){return this._currentTransform.scale(e,s)}set current(e){this._currentTransform=e}get current(){return this._currentTransform}}class Ri{constructor(){this._states=[],this._currentState=this._getDefaultState()}_getDefaultState(){return{opacity:1,z:0,tint:B.White}}_cloneState(){return{opacity:this._currentState.opacity,z:this._currentState.z,tint:this._currentState.tint.clone()}}save(){this._states.push(this._currentState),this._currentState=this._cloneState()}restore(){this._currentState=this._states.pop()}get current(){return this._currentState}set current(e){this._currentState=e}}var ee;(function(d){d.Kill="kill",d.PreKill="prekill",d.PostKill="postkill",d.PreDraw="predraw",d.PostDraw="postdraw",d.PreDebugDraw="predebugdraw",d.PostDebugDraw="postdebugdraw",d.PreUpdate="preupdate",d.PostUpdate="postupdate",d.PreFrame="preframe",d.PostFrame="postframe",d.PreCollision="precollision",d.CollisionStart="collisionstart",d.CollisionEnd="collisionend",d.PostCollision="postcollision",d.Initialize="initialize",d.Activate="activate",d.Deactivate="deactivate",d.ExitViewport="exitviewport",d.EnterViewport="enterviewport",d.ExitTrigger="exit",d.EnterTrigger="enter",d.Connect="connect",d.Disconnect="disconnect",d.Button="button",d.Axis="axis",d.Visible="visible",d.Hidden="hidden",d.Start="start",d.Stop="stop",d.PointerUp="pointerup",d.PointerDown="pointerdown",d.PointerMove="pointermove",d.PointerEnter="pointerenter",d.PointerLeave="pointerleave",d.PointerCancel="pointercancel",d.PointerWheel="pointerwheel",d.Up="up",d.Down="down",d.Move="move",d.Enter="enter",d.Leave="leave",d.Cancel="cancel",d.Wheel="wheel",d.Press="press",d.Release="release",d.Hold="hold",d.PointerDragStart="pointerdragstart",d.PointerDragEnd="pointerdragend",d.PointerDragEnter="pointerdragenter",d.PointerDragLeave="pointerdragleave",d.PointerDragMove="pointerdragmove"})(ee||(ee={}));class ft{constructor(){this._bubbles=!0}get bubbles(){return this._bubbles}set bubbles(e){this._bubbles=e}stopPropagation(){this.bubbles=!1}}class Sr extends ft{constructor(e){super(),this.target=e}}class jn extends ft{constructor(e){super(),this.target=e}}class en extends ft{constructor(e){super(),this.target=e}}class ai extends ft{constructor(e){super(),this.target=e}}class Ps extends ft{constructor(e){super(),this.target=e}}class nn extends ft{constructor(e,s,o){super(),this.ctx=e,this.delta=s,this.target=o}}class Pr extends ft{constructor(e,s,o){super(),this.ctx=e,this.delta=s,this.target=o}}class Lu extends ft{constructor(e,s){super(),this.ctx=e,this.target=s}}class Bu extends ft{constructor(e,s){super(),this.ctx=e,this.target=s}}class Di extends ft{constructor(e,s,o){super(),this.engine=e,this.delta=s,this.target=o}}class Hn extends ft{constructor(e,s,o){super(),this.engine=e,this.delta=s,this.target=o}}class Ou extends ft{constructor(e,s){super(),this.engine=e,this.prevStats=s,this.target=e}}class Nu extends ft{constructor(e,s){super(),this.engine=e,this.stats=s,this.target=e}}class zu extends ft{constructor(e,s){super(),this.index=e,this.gamepad=s,this.target=s}}class Uu extends ft{constructor(e,s){super(),this.index=e,this.gamepad=s,this.target=s}}class Vu extends ft{constructor(e,s,o){super(),this.button=e,this.value=s,this.target=o}}class ju extends ft{constructor(e,s,o){super(),this.axis=e,this.value=s,this.target=o}}class Hu extends ft{constructor(e){super(),this.target=e}}class $u extends ft{constructor(e){super(),this.target=e}}class $n extends ft{constructor(e,s,o,u){super(),this.other=s,this.side=o,this.intersection=u,this.target=e}}class Wn extends ft{constructor(e,s,o,u){super(),this.other=s,this.side=o,this.intersection=u,this.target=e}get actor(){return this.target}set actor(e){this.target=e}}class Qo{constructor(e,s,o){this.target=e,this.other=s,this.contact=o}}class Ko{constructor(e,s){this.target=e,this.other=s}}class qo{constructor(e,s,o,u,h){this.target=e,this.other=s,this.side=o,this.intersection=u,this.contact=h}}class Jo{constructor(e,s,o,u,h){this.target=e,this.other=s,this.side=o,this.intersection=u,this.contact=h}}class Er extends ft{constructor(e,s,o){super(),this.other=s,this.contact=o,this.target=e}get actor(){return this.target}set actor(e){this.target=e}}class Tr extends ft{constructor(e,s){super(),this.other=s,this.target=e}get actor(){return this.target}set actor(e){this.target=e}}class Es extends ft{constructor(e,s){super(),this.engine=e,this.target=s}}class Wu extends ft{constructor(e,s){super(),this.context=e,this.target=s}}class Gu extends ft{constructor(e,s){super(),this.context=e,this.target=s}}class Xu extends ft{constructor(e){super(),this.target=e}}class Yu extends ft{constructor(e){super(),this.target=e}}class Zu extends ft{constructor(e,s){super(),this.target=e,this.actor=s}}class Qu extends ft{constructor(e,s){super(),this.target=e,this.actor=s}}class sn{constructor(){this._handlers={},this._wiredEventDispatchers=[],this._deferedHandlerRemovals=[]}clear(){this._handlers={},this._wiredEventDispatchers=[]}_processDeferredHandlerRemovals(){for(const e of this._deferedHandlerRemovals)this._removeHandler(e.name,e.handler);this._deferedHandlerRemovals.length=0}emit(e,s){if(this._processDeferredHandlerRemovals(),!e)return;e=e.toLowerCase(),s||(s=new ft);let o,u;if(this._handlers[e])for(o=0,u=this._handlers[e].length,o;o<u;o++)this._handlers[e][o](s);for(o=0,u=this._wiredEventDispatchers.length,o;o<u;o++)this._wiredEventDispatchers[o].emit(e,s)}on(e,s){this._processDeferredHandlerRemovals(),e=e.toLowerCase(),this._handlers[e]||(this._handlers[e]=[]),this._handlers[e].push(s)}off(e,s){this._deferedHandlerRemovals.push({name:e,handler:s})}_removeHandler(e,s){e=e.toLowerCase();const o=this._handlers[e];if(o)if(!s)this._handlers[e].length=0;else{const u=o.indexOf(s);u>-1&&this._handlers[e].splice(u,1)}}once(e,s){this._processDeferredHandlerRemovals();const o=u=>{const h=u||new ft;this.off(e,o),s(h)};this.on(e,o)}wire(e){e._wiredEventDispatchers.push(this)}unwire(e){const s=e._wiredEventDispatchers.indexOf(this);s>-1&&e._wiredEventDispatchers.splice(s,1)}}class ta{constructor(e,s,o=!0){this.path=e,this.responseType=s,this.bustCache=o,this.data=null,this.logger=N.getInstance(),this.events=new sn}isLoaded(){return this.data!==null}_cacheBust(e){return/\?\w*=\w*/.test(e)?e+="&__="+Date.now():e+="?__="+Date.now(),e}load(){return new Promise((e,s)=>{if(this.data!==null){this.logger.debug("Already have data for resource",this.path),this.events.emit("complete",this.data),e(this.data);return}const o=new XMLHttpRequest;o.open("GET",this.bustCache?this._cacheBust(this.path):this.path,!0),o.responseType=this.responseType,o.addEventListener("loadstart",u=>this.events.emit("loadstart",u)),o.addEventListener("progress",u=>this.events.emit("progress",u)),o.addEventListener("error",u=>this.events.emit("error",u)),o.addEventListener("load",u=>this.events.emit("load",u)),o.addEventListener("load",()=>{if(o.status!==0&&o.status!==200){this.logger.error("Failed to load resource ",this.path," server responded with error code",o.status),this.events.emit("error",o.response),s(new Error(o.statusText));return}this.data=o.response,this.events.emit("complete",this.data),this.logger.debug("Completed loading resource",this.path),e(this.data)}),o.send()})}}function Gn(d,e){return d&&(d.__isProxy===void 0?new Proxy(d,{set:(s,o,u)=>(s[o]!==u&&(s[o]=u,typeof o=="string"&&o[0]!=="_"&&e(s)),!0),get:(s,o)=>o!=="__isProxy"?s[o]:!0}):d)}function Yf(d,e){return d&&(d.__isProxy===void 0?new Proxy(d,{set:(s,o,u)=>(s[o]=u,typeof o=="string"&&o[0]!=="_"&&e(s),!0),get:(s,o)=>o!=="__isProxy"?s[o]:!0}):d)}class Ae{constructor(e){var s,o,u,h,g,_;this.id=Ae._ID++,this.transform=Et.identity(),this.tint=null,this._transformStale=!0,this.showDebug=!1,this._flipHorizontal=!1,this._flipVertical=!1,this._rotation=0,this.opacity=1,this._scale=C.One,this._origin=null,this._width=0,this._height=0,e&&(this.origin=(s=e.origin)!==null&&s!==void 0?s:this.origin,this.flipHorizontal=(o=e.flipHorizontal)!==null&&o!==void 0?o:this.flipHorizontal,this.flipVertical=(u=e.flipVertical)!==null&&u!==void 0?u:this.flipVertical,this.rotation=(h=e.rotation)!==null&&h!==void 0?h:this.rotation,this.opacity=(g=e.opacity)!==null&&g!==void 0?g:this.opacity,this.scale=(_=e.scale)!==null&&_!==void 0?_:this.scale)}isStale(){return this._transformStale}get flipHorizontal(){return this._flipHorizontal}set flipHorizontal(e){this._flipHorizontal=e,this._transformStale=!0}get flipVertical(){return this._flipVertical}set flipVertical(e){this._flipVertical=e,this._transformStale=!0}get rotation(){return this._rotation}set rotation(e){this._rotation=e,this._transformStale=!0}get scale(){return this._scale}set scale(e){this._scale=Gn(e,()=>{this._transformStale=!0}),this._transformStale=!0}get origin(){return this._origin}set origin(e){this._origin=Gn(e,()=>{this._transformStale=!0}),this._transformStale=!0}cloneGraphicOptions(){return{origin:this.origin?this.origin.clone():null,flipHorizontal:this.flipHorizontal,flipVertical:this.flipVertical,rotation:this.rotation,opacity:this.opacity,scale:this.scale?this.scale.clone():null}}get width(){return Math.abs(this._width*this.scale.x)}get height(){return Math.abs(this._height*this.scale.y)}set width(e){this._width=e,this._transformStale=!0}set height(e){this._height=e,this._transformStale=!0}get localBounds(){return Q.fromDimension(this.width,this.height,C.Zero)}draw(e,s,o){this._preDraw(e,s,o),this._drawImage(e,0,0),this._postDraw(e)}_preDraw(e,s,o){e.save(),e.translate(s,o),this._transformStale&&(this.transform.reset(),this.transform.scale(Math.abs(this.scale.x),Math.abs(this.scale.y)),this._rotate(this.transform),this._flip(this.transform),this._transformStale=!1),e.multiply(this.transform),e.opacity=e.opacity*this.opacity,this.tint&&(e.tint=this.tint)}_rotate(e){var s;const o=this.scale.x>0?1:-1,u=this.scale.y>0?1:-1,h=(s=this.origin)!==null&&s!==void 0?s:R(this.width/2,this.height/2);e.translate(h.x,h.y),e.rotate(this.rotation),e.scale(o,u),e.translate(-h.x,-h.y)}_flip(e){this.flipHorizontal&&(e.translate(this.width/this.scale.x,0),e.scale(-1,1)),this.flipVertical&&(e.translate(0,this.height/this.scale.y),e.scale(1,-1))}_postDraw(e){this.showDebug&&e.debug.drawRect(0,0,this.width,this.height),e.restore()}}Ae._ID=0;class Xn extends Ae{constructor(e){var s,o;super(e),this._logger=N.getInstance(),this._dirty=!0,this._logNotLoadedWarning=!1,this.image=e.image;const{width:u,height:h}=e;this.sourceView=(s=e.sourceView)!==null&&s!==void 0?s:{x:0,y:0,width:u??0,height:h??0},this.destSize=(o=e.destSize)!==null&&o!==void 0?o:{width:u??0,height:h??0},this._updateSpriteDimensions(),this.image.ready.then(()=>{this._updateSpriteDimensions()})}static from(e){return new Xn({image:e})}get width(){return Math.abs(this.destSize.width*this.scale.x)}get height(){return Math.abs(this.destSize.height*this.scale.y)}set width(e){e/=Math.abs(this.scale.x),this.destSize.width=e,super.width=Math.ceil(this.destSize.width)}set height(e){e/=Math.abs(this.scale.y),this.destSize.height=e,super.height=Math.ceil(this.destSize.height)}_updateSpriteDimensions(){var e,s,o,u,h,g;const{width:_,height:y}=this.image;this.sourceView.width=((e=this.sourceView)===null||e===void 0?void 0:e.width)||_,this.sourceView.height=((s=this.sourceView)===null||s===void 0?void 0:s.height)||y,this.destSize.width=((o=this.destSize)===null||o===void 0?void 0:o.width)||((u=this.sourceView)===null||u===void 0?void 0:u.width)||_,this.destSize.height=((h=this.destSize)===null||h===void 0?void 0:h.height)||((g=this.sourceView)===null||g===void 0?void 0:g.height)||y,this.width=Math.ceil(this.destSize.width)*this.scale.x,this.height=Math.ceil(this.destSize.height)*this.scale.y}_preDraw(e,s,o){this.image.isLoaded()&&this._dirty&&(this._dirty=!1,this._updateSpriteDimensions()),super._preDraw(e,s,o)}_drawImage(e,s,o){this.image.isLoaded()?e.drawImage(this.image.image,this.sourceView.x,this.sourceView.y,this.sourceView.width,this.sourceView.height,s,o,this.destSize.width,this.destSize.height):(this._logNotLoadedWarning||this._logger.warn(`ImageSource ${this.image.path} is not yet loaded and won't be drawn. Please call .load() or include in a Loader.

Read https://excaliburjs.com/docs/imagesource for more information.`),this._logNotLoadedWarning=!0)}clone(){return new Xn({image:this.image,sourceView:{...this.sourceView},destSize:{...this.destSize},...this.cloneGraphicOptions()})}}var Ke;(function(d){d.Pixel="Pixel",d.Blended="Blended"})(Ke||(Ke={}));class wt{static register(e){wt._GL=e,wt._MAX_TEXTURE_SIZE=e.getParameter(e.MAX_TEXTURE_SIZE)}static get(e){return wt._TEXTURE_MAP.get(e)}static has(e){return wt._TEXTURE_MAP.has(e)}static load(e,s,o=!1){const u=wt._GL;if(!u)return null;let h=null;if(wt.has(e)&&(h=wt.get(e)),h)return o&&(u.bindTexture(u.TEXTURE_2D,h),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,e)),h;h=u.createTexture(),wt.checkImageSizeSupportedAndLog(e),u.bindTexture(u.TEXTURE_2D,h),u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE);const g=s??wt.filtering;return u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,g===Ke.Pixel?u.NEAREST:u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,g===Ke.Pixel?u.NEAREST:u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,e),wt._TEXTURE_MAP.set(e,h),h}static delete(e){const s=wt._GL;if(!s)return null;let o=null;wt.has(e)&&(o=wt.get(e),s.deleteTexture(o))}static checkImageSizeSupportedAndLog(e){var s;const o=(s=e.dataset.originalSrc)!==null&&s!==void 0?s:"internal canvas bitmap";return e.width>wt._MAX_TEXTURE_SIZE||e.height>wt._MAX_TEXTURE_SIZE?(wt._LOGGER.error(`The image [${o}] provided to Excalibur is too large for the device's maximum texture size of (${wt._MAX_TEXTURE_SIZE}x${wt._MAX_TEXTURE_SIZE}) please resize to an image for excalibur to render properly.

Images will likely render as black rectangles.

Read more here: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits`),!1):((e.width>4096||e.height>4096)&&wt._LOGGER.warn(`The image [${o}] provided to excalibur is too large may not work on all mobile devices, it is recommended you resize images to a maximum (4096x4096).

Images will likely render as black rectangles on some mobile platforms.

Read more here: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits`),!0)}}wt._LOGGER=N.getInstance(),wt.filtering=Ke.Blended,wt._TEXTURE_MAP=new Map,wt._MAX_TEXTURE_SIZE=0;class Ku{constructor(e,s=!1,o){this.path=e,this._logger=N.getInstance(),this.data=new Image,this._readyFuture=new ct,this.ready=this._readyFuture.promise,this._resource=new ta(e,"blob",s),this._filtering=o,(e.endsWith(".svg")||e.endsWith(".gif"))&&this._logger.warn(`Image type is not fully supported, you may have mixed results ${e}. Fully supported: jpg, bmp, and png`)}get width(){return this.image.naturalWidth}get height(){return this.image.naturalHeight}isLoaded(){return this._src||(this._src=this.data.src),!!this._src}get image(){return this.data}async load(){if(this.isLoaded())return this.data;try{let e;if(this.path.includes("data:image/"))e=this.path;else{const u=await this._resource.load();e=URL.createObjectURL(u)}const s=new Image,o=new ct;s.onload=()=>o.resolve(),s.src=e,s.setAttribute("data-original-src",this.path),await o.promise,this.data=s}catch(e){throw`Error loading ImageSource from path '${this.path}' with error [${e.message}]`}return wt.load(this.data,this._filtering),this._readyFuture.resolve(this.data),this.data}toSprite(){return Xn.from(this)}unload(){this.data=new Image}}class Ts{constructor(e){this._logger=N.getInstance(),this.sprites=[];const{sprites:s,rows:o,columns:u}=e;this.sprites=s,this.rows=o??1,this.columns=u??this.sprites.length}getSprite(e,s){if(e>=this.columns||e<0)return this._logger.warn(`No sprite exists in the SpriteSheet at (${e}, ${s}), x: ${e} should be between 0 and ${this.columns-1}`),null;if(s>=this.rows||s<0)return this._logger.warn(`No sprite exists in the SpriteSheet at (${e}, ${s}), y: ${s} should be between 0 and ${this.rows-1}`),null;const o=e+s*this.columns;return this.sprites[o]}static fromImageSourceWithSourceViews(e){const s=e.sourceViews.map(o=>new Xn({image:e.image,sourceView:o}));return new Ts({sprites:s})}static fromImageSource(e){var s;const o=[];e.spacing=(s=e.spacing)!==null&&s!==void 0?s:{};const{image:u,grid:{rows:h,columns:g,spriteWidth:_,spriteHeight:y},spacing:{originOffset:b,margin:E}}=e,D={x:0,y:0,...b},F={x:0,y:0,...E};for(let z=0;z<g;z++)for(let j=0;j<h;j++)o[z+j*g]=new Xn({image:u,sourceView:{x:z*_+F.x*z+D.x,y:j*y+F.y*j+D.y,width:_,height:y},destSize:{height:y,width:_}});return new Ts({sprites:o,rows:h,columns:g})}}class ea extends Ae{constructor(e){super(e),this._text="",this.alphabet="",this.shadow=null,this.caseInsensitive=!1,this.spacing=0,this._logger=N.getInstance(),this._alreadyWarnedAlphabet=!1,this._alreadyWarnedSpriteSheet=!1;const{alphabet:s,spriteSheet:o,caseInsensitive:u,spacing:h,shadow:g}=e;this.alphabet=s,this.spriteSheet=o,this.caseInsensitive=u??this.caseInsensitive,this.spacing=h??this.spacing,this.shadow=g??this.shadow}_getCharacterSprites(e){const s=[],o=this.caseInsensitive?e.toLocaleLowerCase():e,u=this.caseInsensitive?this.alphabet.toLocaleLowerCase():this.alphabet;for(let h=0;h<o.length;h++){const g=o[h];let _=u.indexOf(g);_===-1&&(_=0,this._alreadyWarnedAlphabet||(this._logger.warn(`SpriteFont - Cannot find letter '${g}' in configured alphabet '${u}'.`),this._logger.warn("There maybe be more issues in the SpriteFont configuration. No additional warnings will be logged."),this._alreadyWarnedAlphabet=!0));const y=this.spriteSheet.sprites[_];y?s.push(y):this._alreadyWarnedSpriteSheet||(this._logger.warn(`SpriteFont - Cannot find sprite for '${g}' at index '${_}' in configured SpriteSheet`),this._logger.warn("There maybe be more issues in the SpriteFont configuration. No additional warnings will be logged."),this._alreadyWarnedSpriteSheet=!0)}return s}measureText(e){const s=e.split(`
`),o=s.reduce((_,y)=>_.length>y.length?_:y),u=this._getCharacterSprites(o);let h=0,g=0;for(const _ of u)h+=_.width+this.spacing,g=Math.max(g,_.height);return Q.fromDimension(h,g*s.length,C.Zero)}_drawImage(e,s,o){let u=0,h=0,g=0;const _=this._text.split(`
`);for(const y of _){for(const b of this._getCharacterSprites(y))b.draw(e,s+u,o+h),u+=b.width+this.spacing,g=Math.max(g,b.height);u=0,h+=g}}render(e,s,o,u,h){this._text=s;const g=this.measureText(s);this.width=g.width,this.height=g.height,this.shadow&&(e.save(),e.translate(this.shadow.offset.x,this.shadow.offset.y),this.draw(e,u,h),e.restore()),this.draw(e,u,h)}clone(){return new ea({alphabet:this.alphabet,spriteSheet:this.spriteSheet,spacing:this.spacing})}}const ew="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAAwCAYAAAD+f6R/AAAAAXNSR0IArs4c6QAABcJJREFUeJztnemu7CgMhGE07//KmT9NhrAFVzkQndQntXRP3/bCZkwCSQhCCCGEEEIIIYQQQog/TRz953Ecx/nDGIe/vdNhlc9tIz605Fk/ZmWfsO1hn9Gxuv1KHbvb3iL/VN+d1WORbyr7yR/5b9M4vjNeqko6jPJHq5wGHU151o9J2Udse9hndCxuv0rH7rY3yD/Wdyf13MrnQeDfkZIUSGKM4ff3cWN82pEZuTyQGX2IxeyR63va//8VNCYCq+1yEkLtWyagXv1P1r1H+110gP3PzT4gT8uW/mdQ8mUG8E9DqOz4MS9ICKGbXpS2BpnIrRzYeS96cll08INlCMl2/glzdcfazuuPqQO03lmqrBHsf272Q6NODXj6zzZIJd/LAHYTg3Mays5gBi7ZR27fOgs0yj8rm36DLMFiPgkAdXHKOwUQeMCQ/adSh/qBQrT/tPxbAwA9+DOZEILPAATSuHMgTv7+Auk/df2lHPCZLvMSLJe34LkEQ9PwXF1SRTllMYgvIaflqyVAjLGbsiCDcOK76jflxZ+sINPyROc5071yKWK5CJTV3dMp6+tBlyCtNlhAq/+XbWoBDcRNXYBMzD4VvQygSuPYC2jGGaSSOxXfy3dTUEsanIvNeepm38N/hssSALTPZnAXfwIYRJn2b7UBcw0FKX+nDdAMpm2j9WVnxrUa7TXaVAca/B+TgaAVh6R/rH0P/5m01dt/RLYViJn+w/bhVX2P7f/duqom5qb02pRLCLGIMgBU1wCEEN9BAUCID6MAIMSHUQAQ4sMoAAjxYRQAhPgwd1uB0fuZ7H3cnn2P+9mr/Pe4B8/eB/fwP4eRtci/0f6OfTCPt/9oHwC6G6y19RHZDumxmwzR4eE/s/2Tte/q/+XLdc9DeJ19diesQc/j7Z8fCe4tAS4CxZ7sp7eiJi7HiZmjmOTGJs+93CbS3nP0XIPH3vW8/qz6QPnX2QdsV/1uw/iZYvg8ACeHd28rpPzfNfhL+7vkw/4Ou9s+Onhbv91elpKZ48Dl6bzpwwibHigRArf+Ptk9+L3Y1Q5OB4LgCeSBw1iuB3GeJh1/HrX/zF0A9Mk+u45zMkc3r4rWPomma5+p/514LB+Zo93MErJ1JHxXPzByGa/licRYVKbpeQCoQ6Q8yxuCwJF9IPsoDkHAo/3Tx26cvA4EtJ/n04w8QOq/mrR7ddfLAC5BYFNlVI/0CnOVUflOpvJUQMx9AIMIW/nWDM67/qw0+95v9goBqD9j+72u/KD9U89IbnQbMIR2Zbneh5zUY7Hdk7XIP3UffVb+r+wDYAZLq+1n1+C7y3/ny2r7p5yeByDEh9HzAIQQJwoAQnwYBQAhPowCgBBjoNu3hNxSFACE6INuKvPajPZ4EFEAEKINcybGYzOd247WEd3TgA2jlmjEyrd+j9hvfVbD2PWQ3ZmGlu2HyO8og8eBuNUvNYWoDgMVpwHTJoLWdz1Y+ZYOy5uF7t6PPruZxANrud1lQXkP0jsGz/Yz+vGGMuygFyhSPcJnc1pMnQZElc+cRnoAlxdTvoDuK7puqF7uCQy+3fyFMiA02/vJQHh7DQDogMPTSGFNA56HTzbZ9yAfBOb1Zyo3qGM3MfMZ3f76huXf6xlmAHknMlLNXsBBBvbljIz9Uyz5Y5TzIBLR/qy/rNyrZ8+L/0BZ0m+tgXD0OK5XZxC/9P7I/g4hVFvzXf1/6i5A7+3AlijMPBLMZfCvuAp7A9rY56ApHitmLQc7c8bOv6ftAxlM9Xp35nkEK7nJetBsaMhtAAAuOLQGXwhh2dXQnn1rZ/a42BI3dL7L+jkFAbQddwdA9Ah35yMKhgEgVT46EFh5D4jz+OgavNKxeBCd1wDSJ/97oR8eoJkLi9t9/BDgDHTJ5NE7Dnzechh914OVv9M1K9PCqsfqb88XVg9qN9lm6nG176UPu+zn17GOxuO0vOWEEC/j+LFKTgghlvEfYJaLS+SA2O0AAAAASUVORK5CYII=";class qu{constructor(){this.fontSheet=ew,this.size=16,this.load()}load(){return this._imageSource=new Ku(this.fontSheet),this._imageSource.load().then(()=>{this._spriteSheet=Ts.fromImageSource({image:this._imageSource,grid:{rows:3,columns:16,spriteWidth:16,spriteHeight:16}}),this._spriteFont=new ea({alphabet:`0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ,!'&."?-()+ `,caseInsensitive:!0,spriteSheet:this._spriteSheet,spacing:-6})})}write(e,s,o){this._imageSource.isLoaded()&&this._spriteFont.render(e,s,null,o.x,o.y)}}class iw{constructor(e,s){this._gl=e,this._texture=s}use(){const e=this._gl;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this._texture)}disable(){const e=this._gl;e.bindTexture(e.TEXTURE_2D,null)}}class Ju{constructor(e){this.width=e.width,this.height=e.height,this._gl=e.gl,this._setupFramebuffer()}setResolution(e,s){const o=this._gl;this.width=e,this.height=s,o.bindTexture(o.TEXTURE_2D,this._frameTexture),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,this.width,this.height,0,o.RGBA,o.UNSIGNED_BYTE,null)}get frameBuffer(){return this._frameBuffer}get frameTexture(){return this._frameTexture}_setupFramebuffer(){const e=this._gl;this._frameTexture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._frameTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);const s=e.COLOR_ATTACHMENT0;this._frameBuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this._frameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,s,e.TEXTURE_2D,this._frameTexture,0),this.disable()}toRenderSource(){return new iw(this._gl,this._frameTexture)}use(){const e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._frameBuffer),e.viewport(0,0,this.width,this.height)}disable(){const e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null)}}class li{static clear(){li._GL=null}static register(e){li._GL=e}static get gl(){if(!li._GL)throw Error("Attempted gl access before init");return li._GL}}const nw=`#version 300 es\r
in vec2 a_position;\r
in vec4 a_color;\r
\r
out lowp vec4 v_color;\r
\r
uniform mat4 u_matrix;\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Passthrough the color\r
   v_color = a_color;\r
}`,sw=`#version 300 es\r
precision mediump float;\r
\r
// Color\r
in lowp vec4 v_color;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  fragColor = v_color;\r
}`;function tc(d,e){switch(e){case d.FLOAT:return 4;case d.SHORT:return 2;case d.UNSIGNED_SHORT:return 2;case d.BYTE:return 1;case d.UNSIGNED_BYTE:return 1;default:return 1}}function Zf(d,e){switch(e){case d.LOW_FLOAT:case d.HIGH_FLOAT:case d.FLOAT:return 1;case d.FLOAT_VEC2:return 2;case d.FLOAT_VEC3:return 3;case d.FLOAT_VEC4:return 4;case d.BYTE:return 1;case d.UNSIGNED_BYTE:return 1;case d.UNSIGNED_SHORT:case d.SHORT:return 1;default:return 1}}function Qf(d,e){switch(e){case d.LOW_FLOAT:case d.HIGH_FLOAT:case d.FLOAT:case d.FLOAT_VEC2:case d.FLOAT_VEC3:case d.FLOAT_VEC4:return d.FLOAT;case d.BYTE:return d.BYTE;case d.UNSIGNED_BYTE:return d.UNSIGNED_BYTE;case d.SHORT:return d.SHORT;case d.UNSIGNED_SHORT:return d.UNSIGNED_SHORT;default:return d.FLOAT}}class qe{constructor(e){this._gl=li.gl,this.uniforms={},this.attributes={},this._compiled=!1;const{vertexSource:s,fragmentSource:o}=e;this.vertexSource=s,this.fragmentSource=o}get compiled(){return this._compiled}use(){this._gl.useProgram(this.program),qe._ACTIVE_SHADER_INSTANCE=this}isCurrentlyBound(){return qe._ACTIVE_SHADER_INSTANCE===this}compile(){const e=this._gl,s=this._compileShader(e,this.vertexSource,e.VERTEX_SHADER),o=this._compileShader(e,this.fragmentSource,e.FRAGMENT_SHADER);this.program=this._createProgram(e,s,o);const u=this.getAttributes();for(const g of u)this.attributes[g.name]=g;const h=this.getUniforms();for(const g of h)this.uniforms[g.name]=g;return this._compiled=!0,this.program}getUniforms(){const e=this._gl,s=e.getProgramParameter(this.program,e.ACTIVE_UNIFORMS),o=[];for(let u=0;u<s;u++){const h=e.getActiveUniform(this.program,u),g=e.getUniformLocation(this.program,h.name);o.push({name:h.name,glType:h.type,location:g})}return o}getAttributes(){const e=this._gl,s=e.getProgramParameter(this.program,e.ACTIVE_ATTRIBUTES),o=[];for(let u=0;u<s;u++){const h=e.getActiveAttrib(this.program,u),g=e.getAttribLocation(this.program,h.name);o.push({name:h.name,glType:Qf(e,h.type),size:Zf(e,h.type),location:g,normalized:!1})}return o}setTexture(e,s){const o=this._gl;o.activeTexture(o.TEXTURE0+e),o.bindTexture(o.TEXTURE_2D,s)}setUniformInt(e,s){this.setUniform("uniform1i",e,~~s)}setUniformIntArray(e,s){this.setUniform("uniform1iv",e,s)}setUniformBoolean(e,s){this.setUniform("uniform1i",e,s?1:0)}setUniformFloat(e,s){this.setUniform("uniform1f",e,s)}setUniformFloatArray(e,s){this.setUniform("uniform1fv",e,s)}setUniformFloatVector(e,s){this.setUniform("uniform2f",e,s.x,s.y)}setUniformMatrix(e,s){this.setUniform("uniformMatrix4fv",e,!1,s.data)}setUniform(e,s,...o){if(!this._compiled)throw Error(`Must compile shader before setting a uniform ${e}:${s}`);if(!this.isCurrentlyBound())throw Error("Currently accessed shader instance is not the current active shader in WebGL, must call `shader.use()` before setting uniforms");const h=this._gl.getUniformLocation(this.program,s);if(h){const g=[h,...o];this._gl[e].apply(this._gl,g)}else throw Error(`Uniform ${e}:${s} doesn't exist or is not used in the shader source code, unused uniforms are optimized away by most browsers`)}_createProgram(e,s,o){const u=e.createProgram();if(u===null)throw Error("Could not create graphics shader program");if(e.attachShader(u,s),e.attachShader(u,o),e.linkProgram(u),!e.getProgramParameter(u,e.LINK_STATUS))throw Error(`Could not link the program: [${e.getProgramInfoLog(u)}]`);return u}_compileShader(e,s,o){const u=e.VERTEX_SHADER===o?"vertex":"fragment",h=e.createShader(o);if(h===null)throw Error(`Could not build shader: [${s}]`);if(e.shaderSource(h,s),e.compileShader(h),!e.getShaderParameter(h,e.COMPILE_STATUS)){const _=e.getShaderInfoLog(h);throw Error(`Could not compile ${u} shader:

${_}${this._processSourceForError(s,_)}`)}return h}_processSourceForError(e,s){const o=e.split(`
`),u=s.search(/\d:\d/),h=s.indexOf(" ",u),[g,_]=s.slice(u,h).split(":").map(y=>Number(y));for(let y=0;y<o.length;y++)o[y]=`${y+1}: ${o[y]}${_===y+1?" <----- ERROR!":""}`;return`

Source:
`+o.join(`
`)}}qe._ACTIVE_SHADER_INSTANCE=null;class rn{constructor(e){this._gl=li.gl,this.type="dynamic";const{size:s,type:o,data:u}=e;if(this.buffer=this._gl.createBuffer(),!u&&!s)throw Error("Must either provide data or a size to the VertexBuffer");u?this.bufferData=u:this.bufferData=new Float32Array(s),this.type=o??this.type;const h=this._gl;h.bindBuffer(h.ARRAY_BUFFER,this.buffer),h.bufferData(h.ARRAY_BUFFER,this.bufferData,this.type==="static"?h.STATIC_DRAW:h.DYNAMIC_DRAW)}bind(){const e=this._gl;e.bindBuffer(e.ARRAY_BUFFER,this.buffer)}upload(e){const s=this._gl;s.bindBuffer(s.ARRAY_BUFFER,this.buffer),e?s.bufferSubData(s.ARRAY_BUFFER,0,this.bufferData,0,e):s.bufferData(s.ARRAY_BUFFER,this.bufferData,this.type==="static"?s.STATIC_DRAW:s.DYNAMIC_DRAW)}}class on{constructor(e){this._gl=li.gl,this._logger=N.getInstance(),this._layout=[],this._attributes=[],this._vertexTotalSizeBytes=0;const{shader:s,vertexBuffer:o,attributes:u}=e;this._vertexBuffer=o,this._attributes=u,this._shader=s,this.initialize()}get vertexBuffer(){return this._vertexBuffer}get attributes(){return this._attributes}get totalVertexSizeBytes(){return this._vertexTotalSizeBytes}initialize(){if(!this._shader.compiled)throw Error("Shader not compiled, shader must be compiled before defining a vertex layout");this._layout.length=0;const e=this._shader.attributes;for(const o of this._attributes){const u=e[o[0]];if(!u)throw Error(`The attribute named: ${o[0]} size ${o[1]} not found in the shader source code:
 ${this._shader.vertexSource}`);if(u.size!==o[1])throw Error(`VertexLayout size definition for attribute: [${o[0]}, ${o[1]}], doesnt match shader source size ${u.size}:
 ${this._shader.vertexSource}`);this._layout.push(u)}let s=0;for(const o of this._layout){const u=tc(this._gl,o.glType);this._vertexTotalSizeBytes+=u*o.size,s+=o.size}this._vertexBuffer.bufferData.length%s!==0&&this._logger.warn(`The vertex component size (${s})  does divide evenly into the specified vertex buffer (${this._vertexBuffer.bufferData.length})`)}use(e=!1,s){const o=this._gl;if(!this._shader.isCurrentlyBound())throw Error("Shader associated with this vertex layout is not active! Call shader.use() before layout.use()");this._vertexBuffer.bind(),e&&this._vertexBuffer.upload(s);let u=0;for(const h of this._layout)o.vertexAttribPointer(h.location,h.size,h.glType,h.normalized,this.totalVertexSizeBytes,u),o.enableVertexAttribArray(h.location),u+=tc(o,h.glType)*h.size}}class Gt{static clear(){Gt.DrawCallCount=0,Gt.DrawnImagesCount=0}}Gt.DrawCallCount=0,Gt.DrawnImagesCount=0;class rw{constructor(){this.type="ex.line",this.priority=0,this._maxLines=10922,this._vertexIndex=0,this._lineCount=0}initialize(e,s){this._gl=e,this._context=s,this._shader=new qe({vertexSource:nw,fragmentSource:sw}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._vertexBuffer=new rn({size:6*2*this._maxLines,type:"dynamic"}),this._layout=new on({vertexBuffer:this._vertexBuffer,shader:this._shader,attributes:[["a_position",2],["a_color",4]]})}draw(e,s,o){this._isFull()&&this.flush(),this._lineCount++;const u=this._context.getTransform(),h=u.multiply(e),g=u.multiply(s),_=this._vertexBuffer.bufferData;_[this._vertexIndex++]=h.x,_[this._vertexIndex++]=h.y,_[this._vertexIndex++]=o.r/255,_[this._vertexIndex++]=o.g/255,_[this._vertexIndex++]=o.b/255,_[this._vertexIndex++]=o.a,_[this._vertexIndex++]=g.x,_[this._vertexIndex++]=g.y,_[this._vertexIndex++]=o.r/255,_[this._vertexIndex++]=o.g/255,_[this._vertexIndex++]=o.b/255,_[this._vertexIndex++]=o.a}_isFull(){return this._lineCount>=this._maxLines}hasPendingDraws(){return this._lineCount!==0}flush(){if(this._lineCount===0)return;const e=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),e.drawArrays(e.LINES,0,this._lineCount*2),Gt.DrawnImagesCount+=this._lineCount,Gt.DrawCallCount++,this._vertexIndex=0,this._lineCount=0}}const ow=`#version 300 es\r
in vec2 a_position;\r
in vec4 a_color;\r
in float a_size;\r
out lowp vec4 v_color;\r
uniform mat4 u_matrix;\r
\r
void main() {\r
  gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
  gl_PointSize = a_size * 2.0;\r
  v_color = a_color;\r
}`,aw=`#version 300 es\r
\r
precision mediump float;\r
in lowp vec4 v_color;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  float r = 0.0, delta = 0.0, alpha = 1.0;\r
  vec2 cxy = 2.0 * gl_PointCoord - 1.0;\r
  r = dot(cxy, cxy);\r
\r
  delta = fwidth(r);\r
  alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\r
  // "premultiply" the color by alpha\r
  vec4 color = v_color;\r
  color.a = color.a * alpha;\r
  color.rgb = color.rgb * color.a;\r
  fragColor = color;\r
}`;class lw{constructor(){this.type="ex.point",this.priority=0,this._maxPoints=10922,this._pointCount=0,this._vertexIndex=0}initialize(e,s){this._gl=e,this._context=s,this._shader=new qe({vertexSource:ow,fragmentSource:aw}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._buffer=new rn({size:7*this._maxPoints,type:"dynamic"}),this._layout=new on({shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_color",4],["a_size",1]]})}draw(e,s,o){this._isFull()&&this.flush(),this._pointCount++;const u=this._context.getTransform(),h=this._context.opacity,g=this._context.snapToPixel,_=u.multiply(e);g&&(_.x=~~(_.x+vt),_.y=~~(_.y+vt));const y=this._buffer.bufferData;y[this._vertexIndex++]=_.x,y[this._vertexIndex++]=_.y,y[this._vertexIndex++]=s.r/255,y[this._vertexIndex++]=s.g/255,y[this._vertexIndex++]=s.b/255,y[this._vertexIndex++]=s.a*h,y[this._vertexIndex++]=o*Math.max(u.getScaleX(),u.getScaleY())}_isFull(){return this._pointCount>=this._maxPoints}hasPendingDraws(){return this._pointCount!==0}flush(){if(this._pointCount===0)return;const e=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),e.drawArrays(e.POINTS,0,this._pointCount),Gt.DrawnImagesCount+=this._pointCount,Gt.DrawCallCount++,this._pointCount=0,this._vertexIndex=0}}const uw=`#version 300 es\r
in vec2 a_position;\r
\r
in vec2 a_texcoord;\r
out vec2 v_texcoord;\r
\r
void main() {\r
  gl_Position = vec4(a_position, 0.0, 1.0);\r
\r
  // Pass the texcoord to the fragment shader.\r
  v_texcoord = a_texcoord;\r
}`,cw=`#version 300 es\r
precision mediump float;\r
\r
// Passed in from the vertex shader.\r
in vec2 v_texcoord;\r
\r
// The texture.\r
uniform sampler2D u_texture;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
   fragColor = texture(u_texture, v_texcoord);\r
}`;class hw{constructor(e){this._gl=e,this._shader=new qe({vertexSource:uw,fragmentSource:cw}),this._shader.compile(),this._buffer=new rn({type:"static",data:new Float32Array([-1,-1,0,0,-1,1,0,1,1,-1,1,0,1,-1,1,0,-1,1,0,1,1,1,1,1])}),this._layout=new on({shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_texcoord",2]]}),this._buffer.upload()}renderWithPostProcessor(e){const s=this._gl;e.getShader().use(),e.getLayout().use(),s.drawArrays(s.TRIANGLES,0,6)}renderToScreen(){const e=this._gl;this._shader.use(),this._layout.use(),e.drawArrays(e.TRIANGLES,0,6)}}class ia{constructor(e,s){this._gl=li.gl,this._logger=N.getInstance();const o=this._gl;this.buffer=o.createBuffer(),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.buffer);const u=e*6;if(!s)this.bufferData=new Uint32Array(u);else{const _=Math.floor(16383.5);this.bufferGlType=o.UNSIGNED_SHORT,this.bufferData=new Uint16Array(u),e>_&&this._logger.warn(`Total quads exceeds hardware index buffer limit (uint16), max(${_}) requested quads(${e})`)}let h=0;for(let g=0;g<u;g+=6)this.bufferData[g+0]=h+0,this.bufferData[g+1]=h+1,this.bufferData[g+2]=h+2,this.bufferData[g+3]=h+2,this.bufferData[g+4]=h+1,this.bufferData[g+5]=h+3,h+=4;o.bufferData(o.ELEMENT_ARRAY_BUFFER,this.bufferData,o.STATIC_DRAW)}get size(){return this.bufferData.length}upload(){const e=this._gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.buffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.bufferData,e.STATIC_DRAW)}bind(){const e=this._gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.buffer)}}const dw=`#version 300 es\r
precision mediump float;\r
\r
// UV coord\r
in vec2 v_texcoord;\r
\r
// Texture index\r
in lowp float v_textureIndex;\r
\r
// Textures in the current draw\r
uniform sampler2D u_textures[%%count%%];\r
\r
// Opacity\r
in float v_opacity;\r
\r
in vec4 v_tint;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
   // In order to support the most efficient sprite batching, we have multiple\r
   // textures loaded into the gpu (usually 8) this picker logic skips over textures\r
   // that do not apply to a particular sprite.\r
\r
   vec4 color = vec4(1.0, 0, 0, 1.0);\r
\r
   // GLSL is templated out to pick the right texture and set the vec4 color\r
   %%texture_picker%%\r
\r
   color.rgb = color.rgb * v_opacity;\r
   color.a = color.a * v_opacity;\r
   fragColor = color * v_tint;\r
}`,fw=`#version 300 es\r
in vec2 a_position;\r
\r
// Opacity \r
in float a_opacity;\r
out float v_opacity;\r
\r
// UV coordinate\r
in vec2 a_texcoord;\r
out vec2 v_texcoord;\r
\r
// Texture number\r
in lowp float a_textureIndex;\r
out lowp float v_textureIndex;\r
\r
in vec4 a_tint;\r
out vec4 v_tint;\r
\r
uniform mat4 u_matrix;\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Pass through the Opacity to the fragment shader\r
   v_opacity = a_opacity;\r
   // Pass through the UV coord to the fragment shader\r
   v_texcoord = a_texcoord;\r
   // Pass through the texture number to the fragment shader\r
   v_textureIndex = a_textureIndex;\r
   // Pass through the tint\r
   v_tint = a_tint;\r
}`;class pw{constructor(){this.type="ex.image",this.priority=0,this._maxImages=10922,this._maxTextures=0,this._imageCount=0,this._textures=[],this._vertexIndex=0}initialize(e,s){this._gl=e,this._context=s,this._maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),125);const o=this._transformFragmentSource(dw,this._maxTextures);this._shader=new qe({fragmentSource:o,vertexSource:fw}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",s.ortho),this._shader.setUniformIntArray("u_textures",[...Array(this._maxTextures)].map((u,h)=>h)),this._buffer=new rn({size:10*4*this._maxImages,type:"dynamic"}),this._layout=new on({shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_opacity",1],["a_texcoord",2],["a_textureIndex",1],["a_tint",4]]}),this._quads=new ia(this._maxImages,!0)}_transformFragmentSource(e,s){let o=e.replace("%%count%%",s.toString()),u="";for(let h=0;h<s;h++)h===0?u+=`if (v_textureIndex <= ${h}.5) {
`:u+=`   else if (v_textureIndex <= ${h}.5) {
`,u+=`      color = texture(u_textures[${h}], v_texcoord);
`,u+=`   }
`;return o=o.replace("%%texture_picker%%",u),o}_addImageAsTexture(e){const s=wt.load(e);this._textures.indexOf(s)===-1&&this._textures.push(s)}_bindTextures(e){for(let s=0;s<this._maxTextures;s++)e.activeTexture(e.TEXTURE0+s),e.bindTexture(e.TEXTURE_2D,this._textures[s]||this._textures[0])}_getTextureIdForImage(e){return e?this._textures.indexOf(wt.get(e)):-1}_isFull(){return this._imageCount>=this._maxImages||this._textures.length>=this._maxTextures}draw(e,s,o,u,h,g,_,y,b){var E,D,F,z;this._isFull()&&this.flush(),this._imageCount++,this._addImageAsTexture(e);let j=(e==null?void 0:e.width)||u||0,X=(e==null?void 0:e.height)||h||0,Y=[0,0,(E=u??(e==null?void 0:e.width))!==null&&E!==void 0?E:0,(D=h??(e==null?void 0:e.height))!==null&&D!==void 0?D:0],U=[s??1,o??1];g!==void 0&&_!==void 0&&y!==void 0&&b!==void 0&&(Y=[s??1,o??1,(F=u??(e==null?void 0:e.width))!==null&&F!==void 0?F:0,(z=h??(e==null?void 0:e.height))!==null&&z!==void 0?z:0],U=[g,_],j=y,X=b),s=Y[0],o=Y[1];const V=Y[2],et=Y[3],q=this._context.getTransform(),ht=this._context.opacity,nt=this._context.snapToPixel;let W=R(U[0],U[1]),At=R(U[0]+j,U[1]),It=R(U[0],U[1]+X),Rt=R(U[0]+j,U[1]+X);W=q.multiply(W),At=q.multiply(At),It=q.multiply(It),Rt=q.multiply(Rt),nt&&(W.x=~~(W.x+vt),W.y=~~(W.y+vt),At.x=~~(At.x+vt),At.y=~~(At.y+vt),It.x=~~(It.x+vt),It.y=~~(It.y+vt),Rt.x=~~(Rt.x+vt),Rt.y=~~(Rt.y+vt));const Pt=this._context.tint,le=this._getTextureIdForImage(e),di=e.width||j,fi=e.height||X,Jn=s/di,ts=o/fi,es=(s+V-.01)/di,is=(o+et-.01)/fi,dt=this._layout.vertexBuffer.bufferData;dt[this._vertexIndex++]=W.x,dt[this._vertexIndex++]=W.y,dt[this._vertexIndex++]=ht,dt[this._vertexIndex++]=Jn,dt[this._vertexIndex++]=ts,dt[this._vertexIndex++]=le,dt[this._vertexIndex++]=Pt.r/255,dt[this._vertexIndex++]=Pt.g/255,dt[this._vertexIndex++]=Pt.b/255,dt[this._vertexIndex++]=Pt.a,dt[this._vertexIndex++]=It.x,dt[this._vertexIndex++]=It.y,dt[this._vertexIndex++]=ht,dt[this._vertexIndex++]=Jn,dt[this._vertexIndex++]=is,dt[this._vertexIndex++]=le,dt[this._vertexIndex++]=Pt.r/255,dt[this._vertexIndex++]=Pt.g/255,dt[this._vertexIndex++]=Pt.b/255,dt[this._vertexIndex++]=Pt.a,dt[this._vertexIndex++]=At.x,dt[this._vertexIndex++]=At.y,dt[this._vertexIndex++]=ht,dt[this._vertexIndex++]=es,dt[this._vertexIndex++]=ts,dt[this._vertexIndex++]=le,dt[this._vertexIndex++]=Pt.r/255,dt[this._vertexIndex++]=Pt.g/255,dt[this._vertexIndex++]=Pt.b/255,dt[this._vertexIndex++]=Pt.a,dt[this._vertexIndex++]=Rt.x,dt[this._vertexIndex++]=Rt.y,dt[this._vertexIndex++]=ht,dt[this._vertexIndex++]=es,dt[this._vertexIndex++]=is,dt[this._vertexIndex++]=le,dt[this._vertexIndex++]=Pt.r/255,dt[this._vertexIndex++]=Pt.g/255,dt[this._vertexIndex++]=Pt.b/255,dt[this._vertexIndex++]=Pt.a}hasPendingDraws(){return this._imageCount!==0}flush(){if(this._imageCount===0)return;const e=this._gl;this._shader.use(),this._layout.use(!0,4*10*this._imageCount),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._bindTextures(e),this._quads.bind(),e.drawElements(e.TRIANGLES,this._imageCount*6,this._quads.bufferGlType,0),Gt.DrawnImagesCount+=this._imageCount,Gt.DrawCallCount++,this._imageCount=0,this._vertexIndex=0,this._textures.length=0}}const gw=`#version 300 es\r
\r
precision mediump float;\r
\r
// UV coord\r
in vec2 v_uv;\r
\r
in vec2 v_size; // in pixels\r
\r
// Color coord to blend with image\r
in lowp vec4 v_color;\r
\r
// Stroke color if used\r
in lowp vec4 v_strokeColor;\r
\r
// Stroke thickness if used\r
in lowp float v_strokeThickness; // in pixels\r
\r
// Opacity\r
in float v_opacity;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
    // modified from https://stackoverflow.com/questions/59197671/glsl-rounded-rectangle-with-variable-border\r
    vec2 uv = v_uv;\r
    vec2 fragCoord = uv * v_size;\r
    float maxX = v_size.x - v_strokeThickness;\r
    float minX = v_strokeThickness;\r
    float maxY = v_size.y - v_strokeThickness;\r
    float minY = v_strokeThickness;\r
\r
    if (fragCoord.x < maxX && fragCoord.x > minX &&\r
        fragCoord.y < maxY && fragCoord.y > minY) {\r
      fragColor = v_color;\r
    } else {\r
      fragColor = v_strokeColor;\r
    }\r
    fragColor.a *= v_opacity;\r
    fragColor.rgb *= fragColor.a;\r
\r
    // vec2 v2CenteredPos     = abs(fragCoord - v_size.xy / 2.0);\r
    // vec2 v2HalfShapeSizePx = v_size.xy/2.0 - v_strokeThickness/2.0;\r
\r
    // float fHalfBorderDist      = 0.0;\r
    // float fHalfBorderThickness = 0.0;\r
\r
    // if (fragCoord.x > max(v_radius, v_strokeThickness) && \r
    //     fragCoord.x < v_size.x - max(v_radius, v_strokeThickness))\r
    // {\r
    //     fHalfBorderDist      = v2CenteredPos.y - v2HalfShapeSizePx.y;\r
    //     fHalfBorderThickness = v_strokeThickness / 2.0;\r
    // }\r
    // else if (fragCoord.y > max(v_radius, v_strokeThickness) && \r
    //          fragCoord.y < v_size.y - max(v_radius, v_strokeThickness))\r
    // {\r
    //     fHalfBorderDist      = v2CenteredPos.x - v2HalfShapeSizePx.x;\r
    //     fHalfBorderThickness = v_strokeThickness / 2.0;\r
    // }\r
    // else\r
    // {\r
    //     vec2 edgeVec = max(vec2(0.0), v_radius - vec2(\r
    //         uv.x > 0.5 ? v_size.x - fragCoord.x : fragCoord.x,\r
    //         uv.y > 0.5 ? v_size.y - fragCoord.y : fragCoord.y));\r
        \r
    //     float ellipse_ab    = v_radius-v_strokeThickness;\r
    //     vec2 ellipse_isect = (v_strokeThickness > v_radius || v_strokeThickness > v_radius) ? vec2(0.0) :\r
    //                             edgeVec.xy * ellipse_ab*ellipse_ab / length(ellipse_ab*edgeVec.yx); \r
            \r
    //     fHalfBorderThickness = (v_radius - length(ellipse_isect)) / 2.0;\r
    //     fHalfBorderDist      = length(edgeVec) - (v_radius - fHalfBorderThickness);\r
    // }\r
\r
    // vec4 v4FromColor = v_strokeColor;\r
    // v4FromColor.rgb *= v4FromColor.a;\r
    // vec4 v4ToColor   = vec4(0.0); // background color is transparent\r
    // if (fHalfBorderDist < 0.0) {\r
    //     v4ToColor = v_color;\r
    //     v4ToColor.rgb *= v4ToColor.a;\r
    // }\r
\r
    // float mixPct = abs(fHalfBorderDist) - fHalfBorderThickness;\r
\r
    // vec4 finalColor = mix(v4FromColor, v4ToColor, mixPct);\r
    // gl_FragColor = finalColor;\r
}`,mw=`#version 300 es\r
in vec2 a_position;\r
\r
// UV coordinate\r
in vec2 a_uv;\r
out vec2 v_uv;\r
\r
in vec2 a_size;\r
out vec2 v_size;\r
\r
// Opacity \r
in float a_opacity;\r
out float v_opacity;\r
\r
in vec4 a_color;\r
out vec4 v_color;\r
\r
in vec4 a_strokeColor;\r
out vec4 v_strokeColor;\r
\r
in float a_strokeThickness;\r
out float v_strokeThickness;\r
\r
uniform mat4 u_matrix;\r
\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Pass through UV coords\r
   v_uv = a_uv;\r
   // Pass through size\r
   v_size = a_size;\r
   // Pass through the Opacity to the fragment shader\r
   v_opacity = a_opacity;\r
   // Pass through the color to the fragment shader\r
   v_color = a_color;\r
   // Pass through the stroke color to the fragment shader\r
   v_strokeColor = a_strokeColor;\r
   // Pass through the stroke thickenss to the fragment shader\r
   v_strokeThickness = a_strokeThickness;\r
}`;class _w{constructor(){this.type="ex.rectangle",this.priority=0,this._maxRectangles=10922,this._rectangleCount=0,this._vertexIndex=0}initialize(e,s){this._gl=e,this._context=s,this._shader=new qe({fragmentSource:gw,vertexSource:mw}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",s.ortho),this._buffer=new rn({size:16*4*this._maxRectangles,type:"dynamic"}),this._layout=new on({shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_uv",2],["a_size",2],["a_opacity",1],["a_color",4],["a_strokeColor",4],["a_strokeThickness",1]]}),this._quads=new ia(this._maxRectangles,!0)}_isFull(){return this._rectangleCount>=this._maxRectangles}draw(...e){e[0]instanceof C&&e[1]instanceof C?this.drawLine.apply(this,e):this.drawRectangle.apply(this,e)}drawLine(e,s,o,u=1){this._isFull()&&this.flush(),this._rectangleCount++;const h=this._context.getTransform(),g=this._context.opacity,_=this._context.snapToPixel,y=s.sub(e),b=y.size,E=y.normalize().perpendicular(),D=u/2,F=h.multiply(E.scale(D).add(e)),z=h.multiply(E.scale(-D).add(e)),j=h.multiply(E.scale(D).add(s)),X=h.multiply(E.scale(-D).add(s));_&&(F.x=~~(F.x+vt),F.y=~~(F.y+vt),j.x=~~(j.x+vt),j.y=~~(j.y+vt),z.x=~~(z.x+vt),z.y=~~(z.y+vt),X.x=~~(X.x+vt),X.y=~~(X.y+vt));const Y=0,U=0,V=1,et=1,q=B.Transparent,ht=0,nt=1,W=this._layout.vertexBuffer.bufferData;W[this._vertexIndex++]=F.x,W[this._vertexIndex++]=F.y,W[this._vertexIndex++]=Y,W[this._vertexIndex++]=U,W[this._vertexIndex++]=b,W[this._vertexIndex++]=u,W[this._vertexIndex++]=g,W[this._vertexIndex++]=o.r/255,W[this._vertexIndex++]=o.g/255,W[this._vertexIndex++]=o.b/255,W[this._vertexIndex++]=o.a,W[this._vertexIndex++]=q.r/255,W[this._vertexIndex++]=q.g/255,W[this._vertexIndex++]=q.b/255,W[this._vertexIndex++]=q.a,W[this._vertexIndex++]=ht/nt,W[this._vertexIndex++]=z.x,W[this._vertexIndex++]=z.y,W[this._vertexIndex++]=Y,W[this._vertexIndex++]=et,W[this._vertexIndex++]=b,W[this._vertexIndex++]=u,W[this._vertexIndex++]=g,W[this._vertexIndex++]=o.r/255,W[this._vertexIndex++]=o.g/255,W[this._vertexIndex++]=o.b/255,W[this._vertexIndex++]=o.a,W[this._vertexIndex++]=q.r/255,W[this._vertexIndex++]=q.g/255,W[this._vertexIndex++]=q.b/255,W[this._vertexIndex++]=q.a,W[this._vertexIndex++]=ht/nt,W[this._vertexIndex++]=j.x,W[this._vertexIndex++]=j.y,W[this._vertexIndex++]=V,W[this._vertexIndex++]=U,W[this._vertexIndex++]=b,W[this._vertexIndex++]=u,W[this._vertexIndex++]=g,W[this._vertexIndex++]=o.r/255,W[this._vertexIndex++]=o.g/255,W[this._vertexIndex++]=o.b/255,W[this._vertexIndex++]=o.a,W[this._vertexIndex++]=q.r/255,W[this._vertexIndex++]=q.g/255,W[this._vertexIndex++]=q.b/255,W[this._vertexIndex++]=q.a,W[this._vertexIndex++]=ht/nt,W[this._vertexIndex++]=X.x,W[this._vertexIndex++]=X.y,W[this._vertexIndex++]=V,W[this._vertexIndex++]=et,W[this._vertexIndex++]=b,W[this._vertexIndex++]=u,W[this._vertexIndex++]=g,W[this._vertexIndex++]=o.r/255,W[this._vertexIndex++]=o.g/255,W[this._vertexIndex++]=o.b/255,W[this._vertexIndex++]=o.a,W[this._vertexIndex++]=q.r/255,W[this._vertexIndex++]=q.g/255,W[this._vertexIndex++]=q.b/255,W[this._vertexIndex++]=q.a,W[this._vertexIndex++]=ht/nt}drawRectangle(e,s,o,u,h=B.Transparent,g=0){this._isFull()&&this.flush(),this._rectangleCount++;const _=this._context.getTransform(),y=this._context.opacity,b=this._context.snapToPixel,E=_.multiply(e.add(R(0,0))),D=_.multiply(e.add(R(s,0))),F=_.multiply(e.add(R(s,o))),z=_.multiply(e.add(R(0,o)));b&&(E.x=~~(E.x+vt),E.y=~~(E.y+vt),D.x=~~(D.x+vt),D.y=~~(D.y+vt),z.x=~~(z.x+vt),z.y=~~(z.y+vt),F.x=~~(F.x+vt),F.y=~~(F.y+vt));const j=0,X=0,Y=1,U=1,V=this._layout.vertexBuffer.bufferData;V[this._vertexIndex++]=E.x,V[this._vertexIndex++]=E.y,V[this._vertexIndex++]=j,V[this._vertexIndex++]=X,V[this._vertexIndex++]=s,V[this._vertexIndex++]=o,V[this._vertexIndex++]=y,V[this._vertexIndex++]=u.r/255,V[this._vertexIndex++]=u.g/255,V[this._vertexIndex++]=u.b/255,V[this._vertexIndex++]=u.a,V[this._vertexIndex++]=h.r/255,V[this._vertexIndex++]=h.g/255,V[this._vertexIndex++]=h.b/255,V[this._vertexIndex++]=h.a,V[this._vertexIndex++]=g,V[this._vertexIndex++]=z.x,V[this._vertexIndex++]=z.y,V[this._vertexIndex++]=j,V[this._vertexIndex++]=U,V[this._vertexIndex++]=s,V[this._vertexIndex++]=o,V[this._vertexIndex++]=y,V[this._vertexIndex++]=u.r/255,V[this._vertexIndex++]=u.g/255,V[this._vertexIndex++]=u.b/255,V[this._vertexIndex++]=u.a,V[this._vertexIndex++]=h.r/255,V[this._vertexIndex++]=h.g/255,V[this._vertexIndex++]=h.b/255,V[this._vertexIndex++]=h.a,V[this._vertexIndex++]=g,V[this._vertexIndex++]=D.x,V[this._vertexIndex++]=D.y,V[this._vertexIndex++]=Y,V[this._vertexIndex++]=X,V[this._vertexIndex++]=s,V[this._vertexIndex++]=o,V[this._vertexIndex++]=y,V[this._vertexIndex++]=u.r/255,V[this._vertexIndex++]=u.g/255,V[this._vertexIndex++]=u.b/255,V[this._vertexIndex++]=u.a,V[this._vertexIndex++]=h.r/255,V[this._vertexIndex++]=h.g/255,V[this._vertexIndex++]=h.b/255,V[this._vertexIndex++]=h.a,V[this._vertexIndex++]=g,V[this._vertexIndex++]=F.x,V[this._vertexIndex++]=F.y,V[this._vertexIndex++]=Y,V[this._vertexIndex++]=U,V[this._vertexIndex++]=s,V[this._vertexIndex++]=o,V[this._vertexIndex++]=y,V[this._vertexIndex++]=u.r/255,V[this._vertexIndex++]=u.g/255,V[this._vertexIndex++]=u.b/255,V[this._vertexIndex++]=u.a,V[this._vertexIndex++]=h.r/255,V[this._vertexIndex++]=h.g/255,V[this._vertexIndex++]=h.b/255,V[this._vertexIndex++]=h.a,V[this._vertexIndex++]=g}hasPendingDraws(){return this._rectangleCount!==0}flush(){if(this._rectangleCount===0)return;const e=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._quads.bind(),e.drawElements(e.TRIANGLES,this._rectangleCount*6,this._quads.bufferGlType,0),Gt.DrawnImagesCount+=this._rectangleCount,Gt.DrawCallCount++,this._rectangleCount=0,this._vertexIndex=0}}const vw=`#version 300 es\r
precision highp float;\r
\r
// UV coord\r
in vec2 v_uv;\r
\r
// Color coord to blend with image\r
in lowp vec4 v_color;\r
\r
// Stroke color if used\r
in lowp vec4 v_strokeColor;\r
\r
// Stroke thickness if used\r
in lowp float v_strokeThickness;\r
\r
// Opacity\r
in float v_opacity;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  // make (0, 0) the center the uv \r
  vec2 uv = v_uv * 2.0 - 1.0;\r
\r
  vec4 color = v_color;\r
  vec4 strokeColor = v_strokeColor;\r
\r
  // circle border is at radius 1.0 \r
  // dist is > 0 when inside the circle \r
  float d = length(uv);\r
  float dist = 1.0 - length(uv);\r
\r
  // Fade based on fwidth\r
  float fade = fwidth(dot(uv, uv));\r
\r
  // if dist is greater than 0 step to 1;\r
  // when we cross this 0 threshold add a smooth fade\r
  float fill = smoothstep(-fade/2.0, fade/2.0, dist);\r
\r
  // if dist is greater than the stroke thickness step to 1\r
  float stroke = 1.0 - smoothstep(v_strokeThickness, v_strokeThickness + fade, dist);\r
\r
  strokeColor.a *= fill * stroke;\r
  strokeColor.rgb *= strokeColor.a;\r
\r
  color.a *= fill * (1.0 - stroke);\r
  color.rgb *= color.a;\r
\r
  vec4 finalColor = mix(vec4(0.0), (color + strokeColor), fill);\r
  finalColor.rgb = finalColor.rgb * v_opacity;\r
  finalColor.a = finalColor.a * v_opacity;\r
  fragColor = finalColor;\r
}`,yw=`#version 300 es\r
in vec2 a_position;\r
\r
// UV coordinate\r
in vec2 a_uv;\r
out vec2 v_uv;\r
\r
// Opacity \r
in float a_opacity;\r
out float v_opacity;\r
\r
in vec4 a_color;\r
out vec4 v_color;\r
\r
in vec4 a_strokeColor;\r
out vec4 v_strokeColor;\r
\r
in float a_strokeThickness;\r
out float v_strokeThickness;\r
\r
uniform mat4 u_matrix;\r
\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Pass through UV coords\r
   v_uv = a_uv;\r
   // Pass through the Opacity to the fragment shader\r
   v_opacity = a_opacity;\r
   // Pass through the color to the fragment shader\r
   v_color = a_color;\r
   // Pass through the stroke color to the fragment shader\r
   v_strokeColor = a_strokeColor;\r
   // Pass through the stroke thickenss to the fragment shader\r
   v_strokeThickness = a_strokeThickness;\r
}`;class xw{constructor(){this.type="ex.circle",this.priority=0,this._maxCircles=10922,this._circleCount=0,this._vertexIndex=0}initialize(e,s){this._gl=e,this._context=s,this._shader=new qe({fragmentSource:vw,vertexSource:yw}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",s.ortho),this._buffer=new rn({size:14*4*this._maxCircles,type:"dynamic"}),this._layout=new on({shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_uv",2],["a_opacity",1],["a_color",4],["a_strokeColor",4],["a_strokeThickness",1]]}),this._quads=new ia(this._maxCircles,!0)}_isFull(){return this._circleCount>=this._maxCircles}draw(e,s,o,u=B.Transparent,h=0){this._isFull()&&this.flush(),this._circleCount++;const g=this._context.getTransform(),_=this._context.opacity,y=this._context.snapToPixel,b=g.multiply(e.add(R(-s,-s))),E=g.multiply(e.add(R(s,-s))),D=g.multiply(e.add(R(s,s))),F=g.multiply(e.add(R(-s,s)));y&&(b.x=~~(b.x+vt),b.y=~~(b.y+vt),E.x=~~(E.x+vt),E.y=~~(E.y+vt),F.x=~~(F.x+vt),F.y=~~(F.y+vt),D.x=~~(D.x+vt),D.y=~~(D.y+vt));const z=0,j=0,X=1,Y=1,U=this._layout.vertexBuffer.bufferData;U[this._vertexIndex++]=b.x,U[this._vertexIndex++]=b.y,U[this._vertexIndex++]=z,U[this._vertexIndex++]=j,U[this._vertexIndex++]=_,U[this._vertexIndex++]=o.r/255,U[this._vertexIndex++]=o.g/255,U[this._vertexIndex++]=o.b/255,U[this._vertexIndex++]=o.a,U[this._vertexIndex++]=u.r/255,U[this._vertexIndex++]=u.g/255,U[this._vertexIndex++]=u.b/255,U[this._vertexIndex++]=u.a,U[this._vertexIndex++]=h/s,U[this._vertexIndex++]=F.x,U[this._vertexIndex++]=F.y,U[this._vertexIndex++]=z,U[this._vertexIndex++]=Y,U[this._vertexIndex++]=_,U[this._vertexIndex++]=o.r/255,U[this._vertexIndex++]=o.g/255,U[this._vertexIndex++]=o.b/255,U[this._vertexIndex++]=o.a,U[this._vertexIndex++]=u.r/255,U[this._vertexIndex++]=u.g/255,U[this._vertexIndex++]=u.b/255,U[this._vertexIndex++]=u.a,U[this._vertexIndex++]=h/s,U[this._vertexIndex++]=E.x,U[this._vertexIndex++]=E.y,U[this._vertexIndex++]=X,U[this._vertexIndex++]=j,U[this._vertexIndex++]=_,U[this._vertexIndex++]=o.r/255,U[this._vertexIndex++]=o.g/255,U[this._vertexIndex++]=o.b/255,U[this._vertexIndex++]=o.a,U[this._vertexIndex++]=u.r/255,U[this._vertexIndex++]=u.g/255,U[this._vertexIndex++]=u.b/255,U[this._vertexIndex++]=u.a,U[this._vertexIndex++]=h/s,U[this._vertexIndex++]=D.x,U[this._vertexIndex++]=D.y,U[this._vertexIndex++]=X,U[this._vertexIndex++]=Y,U[this._vertexIndex++]=_,U[this._vertexIndex++]=o.r/255,U[this._vertexIndex++]=o.g/255,U[this._vertexIndex++]=o.b/255,U[this._vertexIndex++]=o.a,U[this._vertexIndex++]=u.r/255,U[this._vertexIndex++]=u.g/255,U[this._vertexIndex++]=u.b/255,U[this._vertexIndex++]=u.a,U[this._vertexIndex++]=h/s}hasPendingDraws(){return this._circleCount!==0}flush(){if(this._circleCount===0)return;const e=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._quads.bind(),e.drawElements(e.TRIANGLES,this._circleCount*6,this._quads.bufferGlType,0),Gt.DrawnImagesCount+=this._circleCount,Gt.DrawCallCount++,this._circleCount=0,this._vertexIndex=0}}class Kf{constructor(e,s,o=100){this.builder=e,this.recycler=s,this.maxObjects=o,this.totalAllocations=0,this.index=0,this.objects=[],this.disableWarnings=!1,this._logger=N.getInstance()}preallocate(){for(let e=0;e<this.maxObjects;e++)this.objects[e]=this.builder()}using(e){const s=e(this);return s?this.done(...s):this.done()}borrow(e){const s=this.get();e(s),this.index--}get(...e){return this.index===this.maxObjects&&(this.disableWarnings||this._logger.warn("Max pooled objects reached, possible memory leak? Doubling"),this.maxObjects=this.maxObjects*2),this.objects[this.index]?this.recycler(this.objects[this.index++],...e):(this.totalAllocations++,this.objects[this.index++]=this.builder(...e))}done(...e){this.index=0;for(const s of e){const o=this.objects.indexOf(s);this.objects[o]=this.builder(),this.totalAllocations++}return e}}class ww{constructor(){this.z=0,this.priority=0,this.transform=Et.identity(),this.state={z:0,opacity:1,tint:B.White}}}const vt=1e-4;class Cw{constructor(e){this._webglCtx=e,this._debugText=new qu}drawRect(e,s,o,u,h={color:B.Black}){this.drawLine(R(e,s),R(e+o,s),{...h}),this.drawLine(R(e+o,s),R(e+o,s+u),{...h}),this.drawLine(R(e+o,s+u),R(e,s+u),{...h}),this.drawLine(R(e,s+u),R(e,s),{...h})}drawLine(e,s,o={color:B.Black}){this._webglCtx.draw("ex.line",e,s,o.color)}drawPoint(e,s={color:B.Black,size:5}){this._webglCtx.draw("ex.point",e,s.color,s.size)}drawText(e,s){this._debugText.write(this._webglCtx,e,s)}}class Ar{constructor(e){this._logger=N.getInstance(),this._renderers=new Map,this._isDrawLifecycle=!1,this.useDrawSorting=!0,this._drawCallPool=new Kf(()=>new ww,y=>(y.priority=0,y.z=0,y.renderer=void 0,y.args=void 0,y),4e3),this._drawCalls=[],this._postProcessTargets=[],this._postprocessors=[],this._transform=new Qe,this._state=new Ri,this.snapToPixel=!1,this.smoothing=!1,this.backgroundColor=B.ExcaliburBlue,this._alreadyWarnedDrawLifecycle=!1,this.debug=new Cw(this);const{canvasElement:s,enableTransparency:o,smoothing:u,snapToPixel:h,backgroundColor:g,useDrawSorting:_}=e;if(this.__gl=s.getContext("webgl2",{antialias:u??this.smoothing,premultipliedAlpha:!1,alpha:o??!0,depth:!0,powerPreference:"high-performance"}),!this.__gl)throw Error("Failed to retrieve webgl context from browser");li.register(this.__gl),wt.register(this.__gl),this.snapToPixel=h??this.snapToPixel,this.smoothing=u??this.smoothing,this.backgroundColor=g??this.backgroundColor,this.useDrawSorting=_??this.useDrawSorting,this._drawCallPool.disableWarnings=!0,this._drawCallPool.preallocate(),this._init()}get z(){return this._state.current.z}set z(e){this._state.current.z=e}get opacity(){return this._state.current.opacity}set opacity(e){this._state.current.opacity=e}get tint(){return this._state.current.tint}set tint(e){this._state.current.tint=e}get width(){return this.__gl.canvas.width}get height(){return this.__gl.canvas.height}get ortho(){return this._ortho}checkIfResolutionSupported(e){let s=!0;return(e.width>4096||e.height>4096)&&(s=!1),s}_init(){const e=this.__gl;this._ortho=gt.ortho(0,e.canvas.width,e.canvas.height,0,400,-400),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clearColor(this.backgroundColor.r/255,this.backgroundColor.g/255,this.backgroundColor.b/255,this.backgroundColor.a),e.clear(e.COLOR_BUFFER_BIT),e.enable(e.BLEND),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA),this.register(new pw),this.register(new _w),this.register(new xw),this.register(new lw),this.register(new rw),this._screenRenderer=new hw(e),this._renderTarget=new Ju({gl:e,width:e.canvas.width,height:e.canvas.height}),this._postProcessTargets=[new Ju({gl:e,width:e.canvas.width,height:e.canvas.height}),new Ju({gl:e,width:e.canvas.width,height:e.canvas.height})]}register(e){this._renderers.set(e.type,e),e.initialize(this.__gl,this)}get(e){return this._renderers.get(e)}_isCurrentRenderer(e){return!this._currentRenderer||this._currentRenderer===e}beginDrawLifecycle(){this._isDrawLifecycle=!0}endDrawLifecycle(){this._isDrawLifecycle=!1}draw(e,...s){!this._isDrawLifecycle&&!this._alreadyWarnedDrawLifecycle&&(this._logger.warn(`Attempting to draw outside the the drawing lifecycle (preDraw/postDraw) is not supported and is a source of bugs/errors.
If you want to do custom drawing, use Actor.graphics, or any onPreDraw or onPostDraw handler.`),this._alreadyWarnedDrawLifecycle=!0);const o=this._renderers.get(e);if(o)if(this.useDrawSorting){const u=this._drawCallPool.get();u.z=this._state.current.z,u.priority=o.priority,u.renderer=e,this.getTransform().clone(u.transform),u.state.z=this._state.current.z,u.state.opacity=this._state.current.opacity,u.state.tint=this._state.current.tint,u.args=s,this._drawCalls.push(u)}else this._currentRenderer||(this._currentRenderer=o),this._isCurrentRenderer(o)||this._currentRenderer.flush(),o.draw(...s),this._currentRenderer=o;else throw Error(`No renderer with name ${e} has been registered`)}resetTransform(){this._transform.current=Et.identity()}updateViewport(e){const s=this.__gl;this._ortho=this._ortho=gt.ortho(0,e.width,e.height,0,400,-400),this._renderTarget.setResolution(s.canvas.width,s.canvas.height),this._postProcessTargets[0].setResolution(s.canvas.width,s.canvas.height),this._postProcessTargets[1].setResolution(s.canvas.width,s.canvas.height)}drawImage(e,s,o,u,h,g,_,y,b){if(!(u===0||h===0)){{if(y===0||b===0)return;if(e.width===0||e.height===0)return}if(!e){N.getInstance().warn("Cannot draw a null or undefined image"),console.trace&&console.trace();return}this.draw("ex.image",e,s,o,u,h,g,_,y,b)}}drawLine(e,s,o,u=1){this.draw("ex.rectangle",e,s,o,u)}drawRectangle(e,s,o,u,h,g){this.draw("ex.rectangle",e,s,o,u,h,g)}drawCircle(e,s,o,u,h){this.draw("ex.circle",e,s,o,u,h)}save(){this._transform.save(),this._state.save()}restore(){this._transform.restore(),this._state.restore()}translate(e,s){this._transform.translate(this.snapToPixel?~~(e+vt):e,this.snapToPixel?~~(s+vt):s)}rotate(e){this._transform.rotate(e)}scale(e,s){this._transform.scale(e,s)}transform(e){this._transform.current=e}getTransform(){return this._transform.current}multiply(e){this._transform.current.multiply(e,this._transform.current)}addPostProcessor(e){this._postprocessors.push(e),e.initialize(this.__gl)}removePostProcessor(e){const s=this._postprocessors.indexOf(e);s!==-1&&this._postprocessors.splice(s,1)}clearPostProcessors(){this._postprocessors.length=0}clear(){const e=this.__gl;this._renderTarget.use(),e.clearColor(this.backgroundColor.r/255,this.backgroundColor.g/255,this.backgroundColor.b/255,this.backgroundColor.a),e.clear(e.COLOR_BUFFER_BIT)}flush(){const e=this.__gl;if(this._renderTarget.use(),this.useDrawSorting){const o=new Map;for(const[g]of this._renderers){const _=this._drawCalls.findIndex(y=>y.renderer===g);o.set(g,_)}this._drawCalls.sort((g,_)=>{const y=g.z-_.z,b=o.get(g.renderer)-o.get(_.renderer),E=g.priority-_.priority;return y===0?E===0?b:E:y});const u=this._transform.current,h=this._state.current;if(this._drawCalls.length){let g=this._drawCalls[0].renderer,_=this._renderers.get(g);for(let y=0;y<this._drawCalls.length;y++)this._transform.current=this._drawCalls[y].transform,this._state.current=this._drawCalls[y].state,this._drawCalls[y].renderer!==g&&(_.flush(),g=this._drawCalls[y].renderer,_=this._renderers.get(g)),_.draw(...this._drawCalls[y].args);_.hasPendingDraws()&&_.flush()}this._transform.current=u,this._state.current=h,this._drawCallPool.done(),this._drawCalls.length=0}else for(const o of this._renderers.values())o.hasPendingDraws()&&o.flush();this._renderTarget.disable(),this._renderTarget.toRenderSource().use();for(let o=0;o<this._postprocessors.length;o++)this._postProcessTargets[o%2].use(),this._screenRenderer.renderWithPostProcessor(this._postprocessors[o]),this._postProcessTargets[o%2].toRenderSource().use();e.bindFramebuffer(e.FRAMEBUFFER,null),this._screenRenderer.renderToScreen()}}const Ht=1e-4;class bw{constructor(e){this._ex=e,this._debugText=new qu}drawRect(e,s,o,u){this._ex.__ctx.save(),this._ex.__ctx.strokeStyle="red",this._ex.__ctx.strokeRect(this._ex.snapToPixel?~~(e+Ht):e,this._ex.snapToPixel?~~(s+Ht):s,this._ex.snapToPixel?~~(o+Ht):o,this._ex.snapToPixel?~~(u+Ht):u),this._ex.__ctx.restore()}drawLine(e,s,o={color:B.Black}){this._ex.__ctx.save(),this._ex.__ctx.beginPath(),this._ex.__ctx.strokeStyle=o.color.toString(),this._ex.__ctx.moveTo(this._ex.snapToPixel?~~(e.x+Ht):e.x,this._ex.snapToPixel?~~(e.y+Ht):e.y),this._ex.__ctx.lineTo(this._ex.snapToPixel?~~(s.x+Ht):s.x,this._ex.snapToPixel?~~(s.y+Ht):s.y),this._ex.__ctx.lineWidth=2,this._ex.__ctx.stroke(),this._ex.__ctx.closePath(),this._ex.__ctx.restore()}drawPoint(e,s={color:B.Black,size:5}){this._ex.__ctx.save(),this._ex.__ctx.beginPath(),this._ex.__ctx.fillStyle=s.color.toString(),this._ex.__ctx.arc(this._ex.snapToPixel?~~(e.x+Ht):e.x,this._ex.snapToPixel?~~(e.y+Ht):e.y,s.size,0,Math.PI*2),this._ex.__ctx.fill(),this._ex.__ctx.closePath(),this._ex.__ctx.restore()}drawText(e,s){this._debugText.write(this._ex,e,s)}}class na{constructor(e){this.useDrawSorting=!1,this.z=0,this.backgroundColor=B.ExcaliburBlue,this._state=new Ri,this.snapToPixel=!1,this.debug=new bw(this);const{canvasElement:s,enableTransparency:o,snapToPixel:u,smoothing:h,backgroundColor:g}=e;this.__ctx=s.getContext("2d",{alpha:o??!0}),this.backgroundColor=g??this.backgroundColor,this.snapToPixel=u??this.snapToPixel,this.smoothing=h??this.smoothing}get width(){return this.__ctx.canvas.width}get height(){return this.__ctx.canvas.height}get opacity(){return this._state.current.opacity}set opacity(e){this._state.current.opacity=e}get tint(){return this._state.current.tint}set tint(e){this._state.current.tint=e}get smoothing(){return this.__ctx.imageSmoothingEnabled}set smoothing(e){this.__ctx.imageSmoothingEnabled=e}resetTransform(){this.__ctx.resetTransform()}updateViewport(e){}drawImage(e,s,o,u,h,g,_,y,b){if(u===0||h===0)return;if(y===0||b===0)return;if(e.width===0||e.height===0)return;this.__ctx.globalAlpha=this.opacity;const E=[e,s,o,u,h,g,_,y,b].filter(D=>D!==void 0).map(D=>typeof D=="number"&&this.snapToPixel?~~D:D);this.__ctx.drawImage.apply(this.__ctx,E),Gt.DrawCallCount++,Gt.DrawnImagesCount=1}drawLine(e,s,o,u=1){this.__ctx.save(),this.__ctx.beginPath(),this.__ctx.strokeStyle=o.toString(),this.__ctx.moveTo(this.snapToPixel?~~(e.x+Ht):e.x,this.snapToPixel?~~(e.y+Ht):e.y),this.__ctx.lineTo(this.snapToPixel?~~(s.x+Ht):s.x,this.snapToPixel?~~(s.y+Ht):s.y),this.__ctx.lineWidth=u,this.__ctx.stroke(),this.__ctx.closePath(),this.__ctx.restore()}drawRectangle(e,s,o,u){this.__ctx.save(),this.__ctx.fillStyle=u.toString(),this.__ctx.fillRect(this.snapToPixel?~~(e.x+Ht):e.x,this.snapToPixel?~~(e.y+Ht):e.y,this.snapToPixel?~~(s+Ht):s,this.snapToPixel?~~(o+Ht):o),this.__ctx.restore()}drawCircle(e,s,o,u,h){this.__ctx.save(),this.__ctx.beginPath(),u&&(this.__ctx.strokeStyle=u.toString()),h&&(this.__ctx.lineWidth=h),this.__ctx.fillStyle=o.toString(),this.__ctx.arc(this.snapToPixel?~~(e.x+Ht):e.x,this.snapToPixel?~~(e.y+Ht):e.y,s,0,Math.PI*2),this.__ctx.fill(),u&&this.__ctx.stroke(),this.__ctx.closePath(),this.__ctx.restore()}save(){this.__ctx.save()}restore(){this.__ctx.restore()}translate(e,s){this.__ctx.translate(this.snapToPixel?~~(e+Ht):e,this.snapToPixel?~~(s+Ht):s)}rotate(e){this.__ctx.rotate(e)}scale(e,s){this.__ctx.scale(e,s)}getTransform(){throw new Error("Not implemented")}multiply(e){this.__ctx.setTransform(this.__ctx.getTransform().multiply(e.toDOMMatrix()))}addPostProcessor(e){}removePostProcessor(e){}clearPostProcessors(){}beginDrawLifecycle(){}endDrawLifecycle(){}clear(){this.__ctx.clearRect(0,0,this.width,this.height),this.__ctx.fillStyle=this.backgroundColor.toString(),this.__ctx.fillRect(0,0,this.width,this.height),Gt.clear()}flush(){}}var Qt;(function(d){d.Fixed="Fixed",d.FitContainerAndFill="FitContainerAndFill",d.FitScreenAndFill="FitScreenAndFill",d.FitContainerAndZoom="FitContainerAndZoom",d.FitScreenAndZoom="FitScreenAndZoom",d.FitScreen="FitScreen",d.FillScreen="FillScreen",d.FitContainer="FitContainer",d.FillContainer="FillContainer"})(Qt||(Qt={}));class ec{static get SVGA(){return{width:800,height:600}}static get Standard(){return{width:1920,height:1080}}static get Atari2600(){return{width:160,height:192}}static get GameBoy(){return{width:160,height:144}}static get GameBoyAdvance(){return{width:240,height:160}}static get NintendoDS(){return{width:256,height:192}}static get NES(){return{width:256,height:224}}static get SNES(){return{width:256,height:244}}}class ic{constructor(e){var s,o,u;this._antialiasing=!0,this._resolutionStack=[],this._viewportStack=[],this._pixelRatioOverride=null,this._isFullScreen=!1,this._isDisposed=!1,this._logger=N.getInstance(),this._fullscreenChangeHandler=()=>{this._isFullScreen=!this._isFullScreen,this._logger.debug("Fullscreen Change",this._isFullScreen)},this._pixelRatioChangeHandler=()=>{this._logger.debug("Pixel Ratio Change",window.devicePixelRatio),this._listenForPixelRatio(),this._devicePixelRatio=this._calculateDevicePixelRatio(),this.applyResolutionAndViewport()},this._resizeHandler=()=>{const h=this.parent;this._logger.debug("View port resized"),this._setResolutionAndViewportByDisplayMode(h),this.applyResolutionAndViewport()},this._devicePixelRatio=this._calculateDevicePixelRatio(),this._alreadyWarned=!1,this._contentArea=new Q,this.viewport=e.viewport,this.resolution=(s=e.resolution)!==null&&s!==void 0?s:{...this.viewport},this._contentResolution=this.resolution,this._displayMode=(o=e.displayMode)!==null&&o!==void 0?o:Qt.Fixed,this._canvas=e.canvas,this.graphicsContext=e.context,this._antialiasing=(u=e.antialiasing)!==null&&u!==void 0?u:this._antialiasing,this._browser=e.browser,this._pixelRatioOverride=e.pixelRatio,this._applyDisplayMode(),this._listenForPixelRatio(),this._canvas.addEventListener("fullscreenchange",this._fullscreenChangeHandler),this.applyResolutionAndViewport()}_listenForPixelRatio(){this._mediaQueryList&&!this._mediaQueryList.addEventListener&&this._mediaQueryList.removeListener(this._pixelRatioChangeHandler),this._mediaQueryList=this._browser.window.nativeComponent.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener?this._mediaQueryList.addEventListener("change",this._pixelRatioChangeHandler,{once:!0}):this._mediaQueryList.addListener(this._pixelRatioChangeHandler)}dispose(){this._isDisposed||(this._isDisposed=!0,this._browser.window.off("resize",this._resizeHandler),this._resizeObserver&&this._resizeObserver.disconnect(),this.parent.removeEventListener("resize",this._resizeHandler),this._mediaQueryList.removeEventListener?this._mediaQueryList.removeEventListener("change",this._pixelRatioChangeHandler):this._mediaQueryList.removeListener(this._pixelRatioChangeHandler),this._canvas.removeEventListener("fullscreenchange",this._fullscreenChangeHandler))}_calculateDevicePixelRatio(){return window.devicePixelRatio<1?1:window.devicePixelRatio||1}get pixelRatio(){return this._pixelRatioOverride?this._pixelRatioOverride:this._devicePixelRatio}get isHiDpi(){return this.pixelRatio!==1}get displayMode(){return this._displayMode}get canvas(){return this._canvas}get parent(){switch(this.displayMode){case Qt.FillContainer:case Qt.FitContainer:case Qt.FitContainerAndFill:case Qt.FitContainerAndZoom:return this.canvas.parentElement||document.body;default:return window}}get resolution(){return this._resolution}set resolution(e){this._resolution=e}get viewport(){return this._viewport?this._viewport:this._resolution}set viewport(e){this._viewport=e}get aspectRatio(){return this._resolution.width/this._resolution.height}get scaledWidth(){return this._resolution.width*this.pixelRatio}get scaledHeight(){return this._resolution.height*this.pixelRatio}setCurrentCamera(e){this._camera=e}pushResolutionAndViewport(){this._resolutionStack.push(this.resolution),this._viewportStack.push(this.viewport),this.resolution={...this.resolution},this.viewport={...this.viewport}}peekViewport(){return this._viewportStack[this._viewportStack.length-1]}peekResolution(){return this._resolutionStack[this._resolutionStack.length-1]}popResolutionAndViewport(){this.resolution=this._resolutionStack.pop(),this.viewport=this._viewportStack.pop()}applyResolutionAndViewport(){this._canvas.width=this.scaledWidth,this._canvas.height=this.scaledHeight,this.graphicsContext instanceof Ar&&!this.graphicsContext.checkIfResolutionSupported({width:this.scaledWidth,height:this.scaledHeight})&&!this._alreadyWarned&&(this._alreadyWarned=!0,this._logger.warn(`The currently configured resolution (${this.resolution.width}x${this.resolution.height}) and pixel ratio (${this.pixelRatio}) are too large for the platform WebGL implementation, this may work but cause WebGL rendering to behave oddly. Try reducing the resolution or disabling Hi DPI scaling to avoid this (read more here https://excaliburjs.com/docs/screens#understanding-viewport--resolution).`)),this._antialiasing?this._canvas.style.imageRendering="auto":(this._canvas.style.imageRendering="pixelated",this._canvas.style.imageRendering===""&&(this._canvas.style.imageRendering="crisp-edges")),this._canvas.style.width=this.viewport.width+"px",this._canvas.style.height=this.viewport.height+"px",this.graphicsContext.updateViewport(this.resolution),this.graphicsContext.resetTransform(),this.graphicsContext.smoothing=this._antialiasing,this.graphicsContext instanceof na&&this.graphicsContext.scale(this.pixelRatio,this.pixelRatio)}get antialiasing(){return this._antialiasing}set antialiasing(e){this._antialiasing=e,this.graphicsContext.smoothing=this._antialiasing}get isFullScreen(){return this._isFullScreen}goFullScreen(e){if(e){const s=document.getElementById(e);if(s)return s.requestFullscreen()}return this._canvas.requestFullscreen()}exitFullScreen(){return document.exitFullscreen()}pageToScreenCoordinates(e){let s=e.x,o=e.y;if(this._isFullScreen||(s-=_t(this._canvas).x,o-=_t(this._canvas).y),this._isFullScreen)if(window.innerWidth/this.aspectRatio<window.innerHeight){const u=window.innerWidth/this.aspectRatio,h=(window.innerHeight-u)/2;o=(o-h)/u*this.viewport.height,s=s/window.innerWidth*this.viewport.width}else{const u=window.innerHeight*this.aspectRatio,h=(window.innerWidth-u)/2;s=(s-h)/u*this.viewport.width,o=o/window.innerHeight*this.viewport.height}return s=s/this.viewport.width*this.resolution.width,o=o/this.viewport.height*this.resolution.height,new C(s,o)}screenToPageCoordinates(e){let s=e.x,o=e.y;if(s=s/this.resolution.width*this.viewport.width,o=o/this.resolution.height*this.viewport.height,this._isFullScreen)if(window.innerWidth/this.aspectRatio<window.innerHeight){const u=window.innerWidth/this.aspectRatio,h=(window.innerHeight-u)/2;o=o/this.viewport.height*u+h,s=s/this.viewport.width*window.innerWidth}else{const u=window.innerHeight*this.aspectRatio,h=(window.innerWidth-u)/2;s=s/this.viewport.width*u+h,o=o/this.viewport.height*window.innerHeight}return this._isFullScreen||(s+=_t(this._canvas).x,o+=_t(this._canvas).y),new C(s,o)}screenToWorldCoordinates(e){return this._camera?this._camera.inverse.multiply(e):e.sub(R(this.resolution.width/2,this.resolution.height/2))}worldToScreenCoordinates(e){return this._camera?this._camera.transform.multiply(e):e.add(R(this.resolution.width/2,this.resolution.height/2))}pageToWorldCoordinates(e){const s=this.pageToScreenCoordinates(e);return this.screenToWorldCoordinates(s)}worldToPageCoordinates(e){const s=this.worldToScreenCoordinates(e);return this.screenToPageCoordinates(s)}getWorldBounds(){const e=this.screenToWorldCoordinates(C.Zero),s=e.x+this.drawWidth,o=e.y+this.drawHeight;return new Q(e.x,e.y,s,o)}get canvasWidth(){return this.canvas.width}get halfCanvasWidth(){return this.canvas.width/2}get canvasHeight(){return this.canvas.height}get halfCanvasHeight(){return this.canvas.height/2}get drawWidth(){return this._camera?this.resolution.width/this._camera.zoom:this.resolution.width}get halfDrawWidth(){return this.drawWidth/2}get drawHeight(){return this._camera?this.resolution.height/this._camera.zoom:this.resolution.height}get halfDrawHeight(){return this.drawHeight/2}get center(){return R(this.halfDrawWidth,this.halfDrawHeight)}get contentArea(){return this._contentArea}_computeFit(){document.body.style.margin="0px",document.body.style.overflow="hidden";const e=this.aspectRatio;let s=0,o=0;window.innerWidth/e<window.innerHeight?(s=window.innerWidth,o=window.innerWidth/e):(s=window.innerHeight*e,o=window.innerHeight),this.viewport={width:s,height:o},this._contentArea=Q.fromDimension(this.resolution.width,this.resolution.height,C.Zero)}_computeFitScreenAndFill(){document.body.style.margin="0px",document.body.style.overflow="hidden";const e=window.innerWidth,s=window.innerHeight;this._computeFitAndFill(e,s)}_computeFitContainerAndFill(){document.body.style.margin="0px",document.body.style.overflow="hidden";const e=this.canvas.parentElement,s=e.clientWidth,o=e.clientHeight;this._computeFitAndFill(s,o)}_computeFitAndFill(e,s){if(this.viewport={width:e,height:s},e/s<=this._contentResolution.width/this._contentResolution.height){this.resolution={width:e*this._contentResolution.width/e,height:e*this._contentResolution.width/e*s/e};const o=(this.resolution.height-this._contentResolution.height)/2;this._contentArea=new Q({top:o,left:0,right:this._contentResolution.width,bottom:this.resolution.height-o})}else{this.resolution={width:s*this._contentResolution.height/s*e/s,height:s*this._contentResolution.height/s};const o=(this.resolution.width-this._contentResolution.width)/2;this._contentArea=new Q({top:0,left:o,right:this.resolution.width-o,bottom:this._contentResolution.height})}}_computeFitScreenAndZoom(){document.body.style.margin="0px",document.body.style.overflow="hidden",this.canvas.style.position="absolute";const e=window.innerWidth,s=window.innerHeight;this._computeFitAndZoom(e,s)}_computeFitContainerAndZoom(){document.body.style.margin="0px",document.body.style.overflow="hidden",this.canvas.style.position="absolute";const e=this.canvas.parentElement;e.style.position="relative",e.style.overflow="hidden";const s=e.clientWidth,o=e.clientHeight;this._computeFitAndZoom(s,o)}_computeFitAndZoom(e,s){const o=this.aspectRatio;let u=0,h=0;e/o<s?(u=e,h=e/o):(u=s*o,h=s);const g=e/u,_=s/h,y=Math.max(g,_),b=u*y,E=h*y;b>e?this.canvas.style.left=-(b-e)/2+"px":this.canvas.style.left="",E>s?this.canvas.style.top=-(E-s)/2+"px":this.canvas.style.top="",this.viewport={width:b,height:E};const D=Q.fromDimension(this.viewport.width,this.viewport.height,C.Zero);if(this.viewport.width>e){const F=(this.viewport.width-e)/this.viewport.width*this.resolution.width;D.top=0,D.left=F/2,D.right=this.resolution.width-F/2,D.bottom=this.resolution.height}if(this.viewport.height>s){const F=(this.viewport.height-s)/this.viewport.height*this.resolution.height;D.top=F/2,D.left=0,D.bottom=this.resolution.height-F/2,D.right=this.resolution.width}this._contentArea=D}_computeFitContainer(){const e=this.aspectRatio;let s=0,o=0;const u=this.canvas.parentElement;u.clientWidth/e<u.clientHeight?(s=u.clientWidth,o=u.clientWidth/e):(s=u.clientHeight*e,o=u.clientHeight),this.viewport={width:s,height:o},this._contentArea=Q.fromDimension(this.resolution.width,this.resolution.height,C.Zero)}_applyDisplayMode(){this._setResolutionAndViewportByDisplayMode(this.parent),this.parent instanceof Window?this._browser.window.on("resize",this._resizeHandler):(this._resizeObserver=new ResizeObserver(()=>{this._resizeHandler()}),this._resizeObserver.observe(this.parent)),this.parent.addEventListener("resize",this._resizeHandler)}_setResolutionAndViewportByDisplayMode(e){this.displayMode===Qt.FillContainer&&(this.resolution={width:e.clientWidth,height:e.clientHeight},this.viewport=this.resolution),this.displayMode===Qt.FillScreen&&(document.body.style.margin="0px",document.body.style.overflow="hidden",this.resolution={width:e.innerWidth,height:e.innerHeight},this.viewport=this.resolution),this.displayMode===Qt.FitScreen&&this._computeFit(),this.displayMode===Qt.FitContainer&&this._computeFitContainer(),this.displayMode===Qt.FitScreenAndFill&&this._computeFitScreenAndFill(),this.displayMode===Qt.FitContainerAndFill&&this._computeFitContainerAndFill(),this.displayMode===Qt.FitScreenAndZoom&&this._computeFitScreenAndZoom(),this.displayMode===Qt.FitContainerAndZoom&&this._computeFitContainerAndZoom()}}class As{static create(){return this._INSTANCE||(window.AudioContext||window.webkitAudioContext)&&(this._INSTANCE=new AudioContext),this._INSTANCE}}As._INSTANCE=null;function Sw(d){return!!d.playbackState}class Yn{static unlock(){return new Promise((s,o)=>{if(Yn._UNLOCKED||!As.create())return s(!0);const u=setTimeout(()=>{N.getInstance().warn("Excalibur was unable to unlock the audio context, audio probably will not play in this browser."),s(!1)},200),h=As.create();h.resume().then(()=>{const g=h.createBuffer(1,1,22050),_=h.createBufferSource();let y=!1;_.buffer=g,_.connect(h.destination),_.onended=()=>y=!0,_.start(0),setTimeout(()=>{Sw(_)?(_.playbackState===_.PLAYING_STATE||_.playbackState===_.FINISHED_STATE)&&(Yn._UNLOCKED=!0):(h.currentTime>0||y)&&(Yn._UNLOCKED=!0)},0),clearTimeout(u),s(!0)},()=>{o()})})}static isUnlocked(){return this._UNLOCKED}}Yn._UNLOCKED=!1;class Je{constructor(){this.eventDispatcher=new sn}on(e,s){this.eventDispatcher.on(e,s)}off(e,s){this.eventDispatcher.off(e,s)}emit(e,s){this.eventDispatcher.emit(e,s)}once(e,s){this.eventDispatcher.once(e,s)}}function nc(d,e=B.Red,s,o,u,h,g=1,_="butt"){d.save(),d.beginPath(),d.lineWidth=g,d.lineCap=_,d.strokeStyle=e.toString(),d.moveTo(s,o),d.lineTo(u,h),d.closePath(),d.stroke(),d.restore()}function Pw(d,e=B.Red,s){d.beginPath(),d.strokeStyle=e.toString(),d.arc(s.x,s.y,5,0,Math.PI*2),d.closePath(),d.stroke()}function Ew(d,e,s,o,u=1){const h=e?e.toString():"blue",g=o.scale(u);d.beginPath(),d.strokeStyle=h,d.moveTo(s.x,s.y),d.lineTo(s.x+g.x,s.y+g.y),d.closePath(),d.stroke()}function sc(d,e,s,o,u,h=5,g=B.White,_=null){let y;if(typeof h=="number")y={tl:h,tr:h,br:h,bl:h};else{const b={tl:0,tr:0,br:0,bl:0};for(const E in b)if(b.hasOwnProperty(E)){const D=E;y[D]=h[D]||b[D]}}d.beginPath(),d.moveTo(e+y.tl,s),d.lineTo(e+o-y.tr,s),d.quadraticCurveTo(e+o,s,e+o,s+y.tr),d.lineTo(e+o,s+u-y.br),d.quadraticCurveTo(e+o,s+u,e+o-y.br,s+u),d.lineTo(e+y.bl,s+u),d.quadraticCurveTo(e,s+u,e,s+u-y.bl),d.lineTo(e,s+y.tl),d.quadraticCurveTo(e,s,e+y.tl,s),d.closePath(),_&&(d.fillStyle=_.toString(),d.fill()),g&&(d.strokeStyle=g.toString(),d.stroke())}function Tw(d,e,s,o,u=B.White,h=null){d.beginPath(),d.arc(e,s,o,0,Math.PI*2),d.closePath(),h&&(d.fillStyle=h.toString(),d.fill()),u&&(d.strokeStyle=u.toString(),d.stroke())}const Aw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdQAAAB2CAYAAABxhGI9AAAACXBIWXMAAAsSAAALEgHS3X78AAAKnUlEQVR42u3dP2wjSx0H8N8hJIonIRmJjsq0SBR+BQ1dcqKhe0lD77SvSwpKkJKGPulpktfRIMUdEqKIqV57rpAokM4dbSiyq7ONPTP7x39ifz7SFbnEnp3xer47O7uzH15fXwMA6OYHmgAABCoACFQAEKgAgEAFAIEKAAIVAAQqACBQAUCgAoBABQCBCgAIVAAQqAAgUAFAoAIAAhUABCoACFQAEKgAgECFLbmOiNeFf2PbAyz68Pr6qhUgbRwR92v+/zwiJrYHMEKFMmcN///UtgcQqFBk1PD/97U9Qx8VCFSgu4EmAIEKAAIVAAQqACBQ4Z25jojP8eX+0WtNAgIVaOY+Im5j+eKh24h41jQgUIEyZ7F5NaPU7wCBCiwYd/w9cOB+qAlgJ3KLLow0EV198803RWvJfvfddx+0lhEqHKu5JgAjVCBvlhmFzjQRXUekHz9+TP79y8uLRjNChXfvoePvAYEKxNtj1e42/O5JoIJABcrdRMRVLM+X3kTEpaaB988cKuzWg9EobTWdMx0Oly8uN4dqhAoARqgnaN3arHfqu7OyH8ItKLVB/P+CEfMTHyGPY3npx1m8zWGDEeoBfUk/xdti57dr/r1Wv2+6EPow3tZ5rRdS72s1neuF97xvWd+XTH0/V+UMttDWqbI/r2nrxfp+jv2uSjSO7S+OXy/A/3lN+9xX5T5HxEUPZZ0tfB71+w57eJ/HFu+z+jkv1u92YX9fbI/HhX3JA9rp5MPr66tWaG9UfUGbrHIzi7cLUyYFf/tpTady03EEeL8mUJ6i7MKYNvWNqr4Pe2jradXO60LrvPAz2PQ5RPX684ah8dxD+2zantnCgVipSVV+m/tgB9W2DDq2Sx/vM95wcHhZhWVJm8yrv58cSgfTdc70+++/X/r522+/tUKSEepBqo+om4ZLPerMjUwuNnQCtx1GWJtee1FwdD5uWd86xLs8UaVt2aNEO1/saZ/Z5rYMW4zq6v34rGV9Bg3q2eZ9SkeNm9qwyUh30OPIHYFKx5FG03C7znSOqYBq+qW/zpQ3anH037TNHluG6f0WPsPhHvab4QFty7ogOeuxDYcNy2/zu2214WNYWxmBurNO8bGn97pNBOO8xy/9uCorZZ4I2r4C7aJgO7ZV9iE49Dm6NvOWx+pWE9CUq3zbdTp9doz38TbXtzqH9RT5CyWe422OaZoZGeZCabrhPQY9HjwsjpTvCg4YtlE2+Ta/j2bzn8fqrDqgm+6yUHOmAvWUjAtGhbNYvsBknDnqH1Qhc7VmxHgeb/NbudA5j/UXlYwif2p6luhAc9teu1npiHKnDs8if6tCm7JLX3NKpgttXe9ruc9mHMd7a83iwdxF5vt8tutARaCeklRnNK9C8WnNF7geJQ4T4XG3JhSnVdilQrG+yOnrlVHfsEGYzhNBn7Lu6tS7+HJafJQ4EMiNlNqWXZ9WPvVgnVYHG5M1ByDXkT6leX2EgTqJtyt45yv7S2qO3sEZjZhDLXeR+YKdJ0Zdk8QocvH9N732KrNtq+FZ/zzIHABcJrYpd+Xv14lOd5ap76SgrduW/VTQ1qcQpqnbgu4ifZvUMNpd9XuoZmvCtPaQ2Y/BCHVLgbrJTeRPDdVf6pfMKDU2fOkHmVFFfXr3MsouLsnNvV5kRoe5+s431PeuoKPqWnaurY/ZPBEeqwceN4l96iwO6H7Mjq4y7VGPVNe10VaZMzVCPVWpI/Z6FZbcv5fMqGCU+dLfFGzj58jP8+bCdJCo7yzKTwdOF0bu9Ug7V4c+yz7FJfYeGoysUss0HssIdVZwYLDujMqlESoCdTtGsZtbHnJBeNdDSJSs0jTKdMJN1HNX54Wv7bvsU9NkVJVa13dX+/wuArV0X/l5RHyo/lnfF4G6p6DrS0kHdtXhy35TGErDPYZUn2WfWqDOo/lVqdMD2O/hKJhD7S/odukymq9s02QN4EEPR/zbaOumZc+r15zK1Zqznl9jsfiemTM1QmV3HUuTkedlg9HIQzRbUD93dfC+2tpj2fIHEH2+RqCCQH13gZq7hWXTNpVu19OB1fc9nQ0AKOKUb5lU0P1kDyOneoWk0lOZ9cIP0x7qu8+2BhCoR2wYu1+e7DmaXzBSsu5vaX1ne2zrpmUPTmxf7PM1Dm4y/vC7ny7Nif7+z/9ZmtM0Z3panPLtPmra9f16bcK0Dpbnwk43Vd/RHtu6zfNQTy1QBy3aqG2g9nVmxml+BOoJyT3NpWmn9xhfFnu4bvDa+44BXhqqfdf3uUF9+yz77AT31Yue2mjecYQ62NLfgkA9ghHqLNEhNem4H1c6vdyDxhf/bpz5m4coW/c39wi6VH2bPtHlcaV9cvXts+zxCe6rTeqc2ndL7uGd93QwM9bFcAzMoZZ7SgTBbWx+asui61h/iq1+RmjqdbnQXQ3T1DNQ63V/U9ucqm/pMzPb1rePsk/1iTOjgvatR4W3Lc8ULB78pELyrnAfeTcj1NU509/86mfJ33/8+Mf00a05UyPUEw7UVCeWG/WNEiExyHRMt5ltW30izUPk18ytt7lNfc8i//DvtvXto+ySA5BjljsLUF8lPkqMPEtW1JomDsiGBZ9Byb4NAvUITSN9GuwsIj6t6UTOqk7jJREkmzqli8xIs96udSO20sX0H1vW92IL9e1a9rgqVyf91gbPsTy9UD9n9lOkT8k+RfkFR5PMNqxOcdSf32PBvg3vilO+zdxE+okx9Wm0ph36XYsRZCpMF993GOk5qvqB3Dct6jvssb67KvuUNJ3frw92bhr8/STSF0JdRPMLpUCgnsgo9S76PZ246ZFk1wWvK5m3vVoYvW1Sz7nN91jfXbQ1ZQc7TW6HeaoOalypG/8/p/rP1aNAc6ZHzSnfdqPUPhdy2PQw6Nz9gSVhuhiqueUHR3uu7y7K3rdDX4u46ZrPbUa0IFBZ0seKQ3XQTRt2vm3W/a2DbNKys++rvm3ep6+y1x2UdP3bWU9lzra47U1GmlctX/sQ23t+aOlByLTh/4NAPaCRxtcdO5HLSJ/6vNtCwGx67VPmPbvWd1q9frKHtp4kAqRJ2HR9j762JfX3bZ//elPtj13PPDx1+D5tqk/Xi6NO8SHz7MmH19dXrdBNfVFP6T2PT1UHNit87/t4m5+aRH+nQBdvqyhZDKJLfZs8h7XPsqdV2ZOV+tanKB8aln0dyxdAXbV4j4gvt4oMOrbP6vbU73NW7TMlbdTnPrWpfqXfh9HKZ9vke7KuTeZRNtXRSe6+1FV//ce/ln5eXfsXgcqXzr6+9261M3moOoa7E6nvTZTfy7iNsmfb7kjfgXGsvxe0vihsEts9HTquPpt1q1vtahu2TqAiUAEEKj0zhwoARqgAu/OnX/442WH+9xc/Wvr58re/Tr7f41/+ZsRqhAoACFQAEKgAcHjMoQJskJsz/eqrr5Z+vvr7v5fmQFevAl5lztQIFQAQqAAgUAHgIJlDBdhgdQ41N2eKESoAIFABQKACwFEwhwoARqgAIFABQKACAAIVAAQqAAhUABCoAIBABQCBCgACFQAEKgAgUAFAoAKAQAUAgQoACFQAEKgAIFABQKACAAIVAAQqAAhUABCoAIBABQCBCgACFQAQqAAgUAFAoAKAQAUAlvwPcFDns1DsH4sAAAAASUVORK5CYII=";var kw=Ft(1388);class ks extends Ae{constructor(e){var s,o,u,h,g,_,y,b,E,D;super(e),this.filtering=null,this.lineCap="butt",this.quality=1,this._dirty=!0,this._smoothing=!1,this._color=Gn(B.Black,()=>this.flagDirty()),this._lineWidth=1,this._lineDash=[],this._padding=0,e&&(this.quality=(s=e.quality)!==null&&s!==void 0?s:this.quality,this.color=(o=e.color)!==null&&o!==void 0?o:B.Black,this.strokeColor=e==null?void 0:e.strokeColor,this.smoothing=(u=e.smoothing)!==null&&u!==void 0?u:this.smoothing,this.lineWidth=(h=e.lineWidth)!==null&&h!==void 0?h:this.lineWidth,this.lineDash=(g=e.lineDash)!==null&&g!==void 0?g:this.lineDash,this.lineCap=(_=e.lineCap)!==null&&_!==void 0?_:this.lineCap,this.padding=(y=e.padding)!==null&&y!==void 0?y:this.padding,this.filtering=(b=e.filtering)!==null&&b!==void 0?b:this.filtering),this._bitmap=document.createElement("canvas");const F=(E=e==null?void 0:e.width)!==null&&E!==void 0?E:this._bitmap.width,z=(D=e==null?void 0:e.height)!==null&&D!==void 0?D:this._bitmap.height;this.width=F,this.height=z;const j=this._bitmap.getContext("2d");if(j)this._ctx=j;else throw new Error("Browser does not support 2d canvas drawing, cannot create Raster graphic")}cloneRasterOptions(){return{color:this.color?this.color.clone():null,strokeColor:this.strokeColor?this.strokeColor.clone():null,smoothing:this.smoothing,lineWidth:this.lineWidth,lineDash:this.lineDash,lineCap:this.lineCap,quality:this.quality,padding:this.padding}}get dirty(){return this._dirty}flagDirty(){this._dirty=!0}get width(){return Math.abs(this._getTotalWidth()*this.scale.x)}set width(e){e/=Math.abs(this.scale.x),this._bitmap.width=e,this._originalWidth=e,this.flagDirty()}get height(){return Math.abs(this._getTotalHeight()*this.scale.y)}set height(e){e/=Math.abs(this.scale.y),this._bitmap.height=e,this._originalHeight=e,this.flagDirty()}_getTotalWidth(){var e;return(((e=this._originalWidth)!==null&&e!==void 0?e:this._bitmap.width)+this.padding*2)*1}_getTotalHeight(){var e;return(((e=this._originalHeight)!==null&&e!==void 0?e:this._bitmap.height)+this.padding*2)*1}get localBounds(){return Q.fromDimension(this._getTotalWidth()*this.scale.x,this._getTotalHeight()*this.scale.y,C.Zero)}get smoothing(){return this._smoothing}set smoothing(e){this._smoothing=e,this.flagDirty()}get color(){return this._color}set color(e){this.flagDirty(),this._color=Gn(e,()=>this.flagDirty())}get strokeColor(){return this._strokeColor}set strokeColor(e){this.flagDirty(),this._strokeColor=Gn(e,()=>this.flagDirty())}get lineWidth(){return this._lineWidth}set lineWidth(e){this._lineWidth=e,this.flagDirty()}get lineDash(){return this._lineDash}set lineDash(e){this._lineDash=e,this.flagDirty()}get padding(){return this._padding}set padding(e){this._padding=e,this.flagDirty()}rasterize(){this._dirty=!1,this._ctx.clearRect(0,0,this._getTotalWidth(),this._getTotalHeight()),this._ctx.save(),this._applyRasterProperties(this._ctx),this.execute(this._ctx),this._ctx.restore(),wt.load(this._bitmap,this.filtering,!0)}_applyRasterProperties(e){var s,o,u;this._bitmap.width=this._getTotalWidth()*this.quality,this._bitmap.height=this._getTotalHeight()*this.quality,e.scale(this.quality,this.quality),e.translate(this.padding,this.padding),e.imageSmoothingEnabled=this.smoothing,e.lineWidth=this.lineWidth,e.setLineDash((s=this.lineDash)!==null&&s!==void 0?s:e.getLineDash()),e.lineCap=this.lineCap,e.strokeStyle=(o=this.strokeColor)===null||o===void 0?void 0:o.toString(),e.fillStyle=(u=this.color)===null||u===void 0?void 0:u.toString()}_drawImage(e,s,o){this._dirty&&this.rasterize(),e.scale(1/this.quality,1/this.quality),e.drawImage(this._bitmap,s,o)}}class sa extends ks{constructor(e){super(e),this._options=e}get ctx(){return this._ctx}clone(){return new sa({...this._options,...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(e){var s,o;!((s=this._options)===null||s===void 0)&&s.draw&&((o=this._options)===null||o===void 0||o.draw(e)),this._options.cache||this.flagDirty()}}class rc{}rc.type={any:"",blob:"blob",json:"json",text:"text",document:"document",arraybuffer:"arraybuffer"};class ra{constructor(){this.states=new Map}get currentState(){return this._currentState}set currentState(e){this._currentState=e}static create(e,s){const o=new ra;o.data=s;for(const u in e.states)o.states.set(u,{name:u,...e.states[u]});for(const u of o.states.values())for(const h of u.transitions)if(h!=="*"&&!o.states.has(h))throw Error(`Invalid state machine, state [${u.name}] has a transition to another state that doesn't exist [${h}]`);return o.currentState=o.startState=o.states.get(e.start),o}in(e){return this.currentState.name===e}go(e,s){var o,u;if(this.currentState.transitions.includes(e)||this.currentState.transitions.includes("*")){const h=this.states.get(e);return this.currentState.onExit&&((o=this.currentState)===null||o===void 0?void 0:o.onExit({to:h.name,data:this.data}))===!1||h!=null&&h.onEnter&&(h==null?void 0:h.onEnter({from:this.currentState.name,eventData:s,data:this.data}))===!1?!1:(this.currentState=h,!((u=this.currentState)===null||u===void 0)&&u.onState&&this.currentState.onState(),!0)}return!1}update(e){this.currentState.onUpdate&&this.currentState.onUpdate(this.data,e)}save(e){localStorage.setItem(e,JSON.stringify({currentState:this.currentState.name,data:this.data}))}restore(e){const s=JSON.parse(localStorage.getItem(e));this.currentState=this.states.get(s.currentState),this.data=s.data}}class qf{constructor(e){this._src=e,this._audioContext=As.create(),this._volumeNode=this._audioContext.createGain(),this._playingPromise=new Promise(s=>{this._playingResolve=s}),this._stateMachine=ra.create({start:"STOPPED",states:{PLAYING:{onEnter:({data:s})=>{this._createNewBufferSource(),this._handleEnd(),this._instance.start(0,s.pausedAt*this._playbackRate,this.duration),s.startedAt=this._audioContext.currentTime-s.pausedAt,s.pausedAt=0},onState:()=>this._playStarted(),onExit:({to:s})=>{s==="STOPPED"&&this._playingResolve(!0),this._instance.onended=null,this._instance.disconnect(),this._instance.stop(0),this._instance=null},transitions:["STOPPED","PAUSED","SEEK"]},SEEK:{onEnter:({eventData:s,data:o})=>{o.pausedAt=(s??0)/this._playbackRate,o.startedAt=0},transitions:["*"]},STOPPED:{onEnter:({data:s})=>{s.pausedAt=0,s.startedAt=0,this._playingResolve(!0)},transitions:["PLAYING","PAUSED","SEEK"]},PAUSED:{onEnter:({data:s})=>{s.pausedAt=this._audioContext.currentTime-s.startedAt},transitions:["PLAYING","STOPPED","SEEK"]}}},{startedAt:0,pausedAt:0}),this._volume=1,this._loop=!1,this._playStarted=()=>{},this._playbackRate=1,this._createNewBufferSource()}_createNewBufferSource(){this._instance=this._audioContext.createBufferSource(),this._instance.buffer=this._src,this._instance.loop=this.loop,this._instance.playbackRate.value=this._playbackRate,this._instance.connect(this._volumeNode),this._volumeNode.connect(this._audioContext.destination)}_handleEnd(){this.loop||(this._instance.onended=()=>{this._playingResolve(!0)})}set loop(e){this._loop=e,this._instance&&(this._instance.loop=e,this.loop||(this._instance.onended=()=>{this._playingResolve(!0)}))}get loop(){return this._loop}set volume(e){e=S(e,0,1),this._volume=e,this._stateMachine.in("PLAYING")&&this._volumeNode.gain.setTargetAtTime?this._volumeNode.gain.setTargetAtTime(e,this._audioContext.currentTime,.1):this._volumeNode.gain.value=e}get volume(){return this._volume}get duration(){var e;return(e=this._duration)!==null&&e!==void 0?e:this.getTotalPlaybackDuration()}set duration(e){this._duration=e}isPlaying(){return this._stateMachine.in("PLAYING")}isPaused(){return this._stateMachine.in("PAUSED")||this._stateMachine.in("SEEK")}play(e=()=>{}){return this._playStarted=e,this._stateMachine.go("PLAYING"),this._playingPromise}pause(){this._stateMachine.go("PAUSED")}stop(){this._stateMachine.go("STOPPED")}seek(e){this._stateMachine.go("PAUSED"),this._stateMachine.go("SEEK",e)}getTotalPlaybackDuration(){return this._src.duration}getPlaybackPosition(){const{pausedAt:e,startedAt:s}=this._stateMachine.data;return e?e*this._playbackRate:s?(this._audioContext.currentTime-s)*this._playbackRate:0}set playbackRate(e){this._instance.playbackRate.value=this._playbackRate=e}get playbackRate(){return this._instance.playbackRate.value}}class oc extends ft{constructor(e,s="MediaEvent"){super(),this.target=e,this._name=s}set bubbles(e){}get bubbles(){return!1}get _path(){return null}set _path(e){}stopPropagation(){}action(){}propagate(){}layPath(e){}}class an extends oc{constructor(e,s){super(e,"NativeSoundEvent"),this.track=s}}class Jf extends oc{constructor(e,s){super(e,"NativeSoundProcessedEvent"),this._processedData=s,this.data=this._processedData}}function Iw(d){try{const e=new Audio,s=/.*\.([A-Za-z0-9]+)$/,o=d.match(s)[1];return!!e.canPlayType("audio/"+o)}catch(e){return N.getInstance().warn("Cannot determine audio support, assuming no support for the Audio Tag",e),!1}}class tp extends Je{constructor(...e){super(),this.logger=N.getInstance(),this._loop=!1,this._volume=1,this._isStopped=!1,this._tracks=[],this._wasPlayingOnHidden=!1,this._playbackRate=1,this._audioContext=As.create(),this._resource=new ta("",rc.type.arraybuffer);for(const s of e)if(Iw(s)){this.path=s;break}this.path||(this.logger.warn("This browser does not support any of the audio files specified:",e.join(", ")),this.logger.warn("Attempting to use",e[0]),this.path=e[0])}set loop(e){this._loop=e;for(const s of this._tracks)s.loop=this._loop;this.logger.debug("Set loop for all instances of sound",this.path,"to",this._loop)}get loop(){return this._loop}set volume(e){this._volume=e;for(const s of this._tracks)s.volume=this._volume;this.emit("volumechange",new an(this)),this.logger.debug("Set loop for all instances of sound",this.path,"to",this._volume)}get volume(){return this._volume}get duration(){return this._duration}set duration(e){this._duration=e}get instances(){return this._tracks}get path(){return this._resource.path}set path(e){this._resource.path=e}isLoaded(){return!!this.data}async load(){var e,s;if(this.data)return this.data;const o=await this._resource.load(),u=await this.decodeAudio(o.slice(0));return this._duration=(s=(e=this._duration)!==null&&e!==void 0?e:u==null?void 0:u.duration)!==null&&s!==void 0?s:void 0,this.emit("processed",new Jf(this,u)),this.data=u}async decodeAudio(e){try{return await this._audioContext.decodeAudioData(e.slice(0))}catch{return this.logger.error("Unable to decode  this browser may not fully support this format, or the file may be corrupt, if this is an mp3 try removing id3 tags and album art from the file."),await Promise.reject()}}wireEngine(e){e&&(this._engine=e,this._engine.on("hidden",()=>{e.pauseAudioWhenHidden&&this.isPlaying()&&(this._wasPlayingOnHidden=!0,this.pause())}),this._engine.on("visible",()=>{e.pauseAudioWhenHidden&&this._wasPlayingOnHidden&&(this.play(),this._wasPlayingOnHidden=!1)}),this._engine.on("start",()=>{this._isStopped=!1}),this._engine.on("stop",()=>{this.stop(),this._isStopped=!0}))}instanceCount(){return this._tracks.length}isPlaying(){return this._tracks.some(e=>e.isPlaying())}isPaused(){return this._tracks.some(e=>e.isPaused())}play(e){return this.isLoaded()?this._isStopped?(this.logger.warn("Cannot start playing. Engine is in a stopped state."),Promise.resolve(!1)):(this.volume=e||this.volume,this.isPaused()?this._resumePlayback():this._startPlayback()):(this.logger.warn("Cannot start playing. Resource",this.path,"is not loaded yet"),Promise.resolve(!0))}pause(){if(this.isPlaying()){for(const e of this._tracks)e.pause();this.emit("pause",new an(this)),this.logger.debug("Paused all instances of sound",this.path)}}stop(){for(const e of this._tracks)e.stop();this.emit("stop",new an(this)),this._tracks.length=0,this.logger.debug("Stopped all instances of sound",this.path)}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._tracks.forEach(s=>{s.playbackRate=this._playbackRate})}seek(e,s=0){this._tracks.length===0&&this._getTrackInstance(this.data),this._tracks[s].seek(e)}getTotalPlaybackDuration(){return this.data.duration}getPlaybackPosition(e=0){return this._tracks.length?this._tracks[e].getPlaybackPosition():0}getTrackId(e){return this._tracks.indexOf(e)}async _resumePlayback(){if(this.isPaused){const e=[];for(const s of this._tracks)e.push(s.play().then(()=>(this.emit("playbackend",new an(this,s)),this._tracks.splice(this.getTrackId(s),1),!0)));this.emit("resume",new an(this)),this.logger.debug("Resuming paused instances for sound",this.path,this._tracks),await Promise.all(e)}return!0}async _startPlayback(){const e=await this._getTrackInstance(this.data),s=await e.play(()=>{this.emit("playbackstart",new an(this,e)),this.logger.debug("Playing new instance for sound",this.path)});return this.emit("playbackend",new an(this,e)),this._tracks.splice(this.getTrackId(e),1),s}_getTrackInstance(e){const s=new qf(e);return s.loop=this.loop,s.volume=this.volume,s.duration=this.duration,s.playbackRate=this._playbackRate,this._tracks.push(s),s}}class ep extends Je{constructor(e){super(),this.canvas=new sa({filtering:Ke.Blended,smoothing:!0,cache:!0,draw:this.draw.bind(this)}),this._resourceList=[],this._index=0,this._playButtonShown=!1,this._resourceCount=0,this._numLoaded=0,this._progressCounts={},this._totalCounts={},this.logo=Aw,this.logoWidth=468,this.logoHeight=118,this.loadingBarColor=B.White,this.backgroundColor="#176BAA",this.suppressPlayButton=!1,this._playButtonStyles=kw.Z.toString(),this.playButtonText="Play game",this.startButtonFactory=()=>{let s=document.getElementById("excalibur-play");return s||(s=document.createElement("button")),s.id="excalibur-play",s.textContent=this.playButtonText,s.style.display="none",s},this._loadingFuture=new ct,e&&this.addResources(e)}get _image(){return this._imageElement||(this._imageElement=new Image,this._imageElement.src=this.logo),this._imageElement}get playButtonRootElement(){return this._playButtonRootElement}get playButtonElement(){return this._playButtonElement}get _playButton(){const e=document.getElementById("excalibur-play-root");return e&&(this._playButtonRootElement=e),this._playButtonRootElement||(this._playButtonRootElement=document.createElement("div"),this._playButtonRootElement.id="excalibur-play-root",this._playButtonRootElement.style.position="absolute",document.body.appendChild(this._playButtonRootElement)),this._styleBlock||(this._styleBlock=document.createElement("style"),this._styleBlock.textContent=this._playButtonStyles,document.head.appendChild(this._styleBlock)),this._playButtonElement||(this._playButtonElement=this.startButtonFactory(),this._playButtonRootElement.appendChild(this._playButtonElement)),this._playButtonElement}wireEngine(e){this._engine=e,this.canvas.width=this._engine.canvas.width,this.canvas.height=this._engine.canvas.height}addResource(e){const s=this._index++;this._resourceList.push(e),this._progressCounts[s]=0,this._totalCounts[s]=1,this._resourceCount++}addResources(e){let s=0;const o=e.length;for(s;s<o;s++)this.addResource(e[s])}isLoaded(){return this._numLoaded===this._resourceCount}async showPlayButton(){var e,s;if(this.suppressPlayButton)this.hidePlayButton(),await ut(500,(e=this._engine)===null||e===void 0?void 0:e.clock);else{const o=()=>{this._positionPlayButton()};return!((s=this._engine)===null||s===void 0)&&s.browser&&this._engine.browser.window.on("resize",o),this._playButtonShown=!0,this._playButton.style.display="block",document.body.addEventListener("keyup",h=>{h.key==="Enter"&&this._playButton.click()}),this._positionPlayButton(),await new Promise(h=>{const g=_=>{var y;_.stopPropagation(),this.hidePlayButton(),!((y=this._engine)===null||y===void 0)&&y.browser&&this._engine.browser.window.off("resize",o),h()};this._playButton.addEventListener("click",g),this._playButton.addEventListener("touchend",g),this._playButton.addEventListener("pointerup",g)})}}hidePlayButton(){this._playButtonShown=!1,this._playButton.style.display="none"}dispose(){this._playButtonRootElement.parentElement&&(this._playButtonRootElement.removeChild(this._playButtonElement),document.body.removeChild(this._playButtonRootElement),document.head.removeChild(this._styleBlock),this._playButtonRootElement=null,this._playButtonElement=null,this._styleBlock=null)}update(e,s){}areResourcesLoaded(){return this._loadingFuture.promise}async load(){var e,s;await((e=this._image)===null||e===void 0?void 0:e.decode()),this.canvas.flagDirty(),await Promise.all(this._resourceList.map(async o=>{await o.load().finally(()=>{this._numLoaded++,this.canvas.flagDirty()})}));for(const o of this._resourceList)o instanceof tp&&o.wireEngine(this._engine);return this._loadingFuture.resolve(),await ut(200,(s=this._engine)===null||s===void 0?void 0:s.clock),this.canvas.flagDirty(),await this.showPlayButton(),await Yn.unlock(),this.data=this._resourceList}markResourceComplete(){this._numLoaded++}get progress(){return this._resourceCount>0?S(this._numLoaded,0,this._resourceCount)/this._resourceCount:1}_positionPlayButton(){if(this._engine){const e=this._engine.screen.viewport.height,s=this._engine.screen.viewport.width;if(this._playButtonRootElement){const o=this._engine.canvas.offsetLeft,u=this._engine.canvas.offsetTop,h=this._playButton.clientWidth,g=this._playButton.clientHeight;this.playButtonPosition?(this._playButtonRootElement.style.left=`${this.playButtonPosition.x}px`,this._playButtonRootElement.style.top=`${this.playButtonPosition.y}px`):(this._playButtonRootElement.style.left=`${o+s/2-h/2}px`,this._playButtonRootElement.style.top=`${u+e/2-g/2+100}px`)}}}draw(e){const s=this._engine.canvasHeight/this._engine.pixelRatio,o=this._engine.canvasWidth/this._engine.pixelRatio;this._positionPlayButton(),e.fillStyle=this.backgroundColor,e.fillRect(0,0,o,s);let u=s/2;const h=Math.min(this.logoWidth,o*.75);let g=o/2-h/2;this.logoPosition&&(g=this.logoPosition.x,u=this.logoPosition.y);const _=Math.floor(h*(this.logoHeight/this.logoWidth)),y=this._engine.getAntialiasing();if(this._engine.setAntialiasing(!0),this.logoPosition?e.drawImage(this._image,0,0,this.logoWidth,this.logoHeight,g,u,h,_):e.drawImage(this._image,0,0,this.logoWidth,this.logoHeight,g,u-_-20,h,_),!this.suppressPlayButton&&this._playButtonShown){this._engine.setAntialiasing(y);return}let b=g,E=u;this.loadingBarPosition&&(b=this.loadingBarPosition.x,E=this.loadingBarPosition.y),e.lineWidth=2,sc(e,b,E,h,20,10,this.loadingBarColor);const D=h*this.progress,F=5,z=D-F*2,j=20-F*2;sc(e,b+F,E+F,z>10?z:10,j,5,null,this.loadingBarColor),this._engine.setAntialiasing(y)}}const ip={webgl:"WebGL",webaudio:"WebAudio",gamepadapi:"Gamepad API"};class np{constructor(){this._features=null,this.failedTests=[],this._criticalTests={canvasSupport:function(){const e=document.createElement("canvas");return!!(e.getContext&&e.getContext("2d"))},arrayBufferSupport:function(){const e=new XMLHttpRequest;e.open("GET","/");try{e.responseType="arraybuffer"}catch{return!1}return e.responseType==="arraybuffer"},dataUrlSupport:function(){return document.createElement("canvas").toDataURL("image/png").indexOf("data:image/png")===0},objectUrlSupport:function(){return"URL"in window&&"revokeObjectURL"in URL&&"createObjectURL"in URL},rgbaSupport:function(){const e=document.createElement("a").style;return e.cssText="background-color:rgba(150,255,150,.5)",(""+e.backgroundColor).indexOf("rgba")>-1}},this._warningTest={webAudioSupport:function(){return!!(window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext||window.oAudioContext)},webglSupport:function(){const e=document.createElement("canvas");return!!(e.getContext&&e.getContext("webgl"))}},this._features=this._loadBrowserFeatures()}getBrowserFeatures(){return this._features===null&&(this._features=this._loadBrowserFeatures()),this._features}logBrowserFeatures(){let e=`%cSUPPORTED BROWSER FEATURES
==========================%c
`;const s=["font-weight: bold; color: navy","font-weight: normal; color: inherit"],o=this.getBrowserFeatures();for(const u of Object.keys(ip))o[u]?(e+="(%c%c)",s.push("font-weight: bold; color: green"),s.push("font-weight: normal; color: inherit")):(e+="(%c%c)",s.push("font-weight: bold; color: red"),s.push("font-weight: normal; color: inherit")),e+=" "+ip[u]+`
`;s.unshift(e),console.log.apply(console,s)}_loadBrowserFeatures(){return{canvas:(()=>this._criticalTests.canvasSupport())(),arraybuffer:(()=>this._criticalTests.arrayBufferSupport())(),dataurl:(()=>this._criticalTests.dataUrlSupport())(),objecturl:(()=>this._criticalTests.objectUrlSupport())(),rgba:(()=>this._criticalTests.rgbaSupport())(),webaudio:(()=>this._warningTest.webAudioSupport())(),webgl:(()=>this._warningTest.webglSupport())(),gamepadapi:(()=>!!navigator.getGamepads)()}}test(){let e=!1;for(const s in this._criticalTests)this._criticalTests[s].call(this)||(this.failedTests.push(s),N.getInstance().error("Critical browser feature missing, Excalibur requires:",s),e=!0);if(e)return!1;for(const s in this._warningTest)this._warningTest[s]()||N.getInstance().warn("Warning browser feature missing, Excalibur will have reduced performance:",s);return!0}}var pt;(function(d){d.PreventCollision="PreventCollision",d.Passive="Passive",d.Active="Active",d.Fixed="Fixed"})(pt||(pt={}));const sp=5,Is={},Rw=()=>{for(const d in Is)Is[d]=0},oa=(d,e)=>{const s=c.isEnabled("suppress-obsolete-message");Is[d]<sp&&!s&&(N.getInstance().warn(d),console.trace&&e.showStackTrace&&console.trace()),Is[d]++};function rp(d){return d={message:"This feature will be removed in future versions of Excalibur.",alternateMethod:null,showStackTrace:!1,...d},function(e,s,o){if(o&&!(typeof o.value=="function"||typeof o.get=="function"||typeof o.set=="function"))throw new SyntaxError("Only classes/functions/getters/setters can be marked as obsolete");const h=`${`${e.name||""}${e.name&&s?".":""}${s||""}`} is marked obsolete: ${d.message}`+(d.alternateMethod?` Use ${d.alternateMethod} instead`:"");Is[h]||(Is[h]=0);const g=o?{...o}:e;if(!o){class _ extends g{constructor(...b){oa(h,d),super(...b)}}return _}return o&&o.value?(g.value=function(){return oa(h,d),o.value.apply(this,arguments)},g):(o&&o.get&&(g.get=function(){return oa(h,d),o.get.apply(this,arguments)}),o&&o.set&&(g.set=function(){return oa(h,d),o.set.apply(this,arguments)}),g)}}var Dw=function(d,e,s,o){var u=arguments.length,h=u<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,s):o,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(d,e,s,o);else for(var _=d.length-1;_>=0;_--)(g=d[_])&&(h=(u<3?g(h):u>3?g(e,s,h):g(e,s))||h);return u>3&&h&&Object.defineProperty(e,s,h),h},Zn;(function(d){d.Arcade="arcade",d.Realistic="realistic"})(Zn||(Zn={}));var aa;(function(d){d[d.DynamicAABBTree=0]="DynamicAABBTree"})(aa||(aa={}));var la;(function(d){d[d.Euler=0]="Euler"})(la||(la={}));class it{static get gravity(){return it.acc}static set gravity(e){it.acc=e}static useArcadePhysics(){it.collisionResolutionStrategy=Zn.Arcade}static useRealisticPhysics(){it.collisionResolutionStrategy=Zn.Realistic}static get dynamicTreeVelocityMultiplyer(){return it.dynamicTreeVelocityMultiplier}static set dynamicTreeVelocityMultiplyer(e){it.dynamicTreeVelocityMultiplier=e}}it.acc=new C(0,0),it.enabled=!0,it.broadphaseStrategy=aa.DynamicAABBTree,it.collisionResolutionStrategy=Zn.Arcade,it.defaultMass=10,it.integrator=la.Euler,it.dynamicTreeVelocityMultiplier=2,it.boundsPadding=5,it.positionIterations=3,it.velocityIterations=8,it.slop=1,it.steeringFactor=.2,it.warmStart=!0,it.bodiesCanSleepByDefault=!1,it.surfaceEpsilon=.1,it.sleepEpsilon=.07,it.wakeThreshold=it.sleepEpsilon*3,it.sleepBias=.9,it.checkForFastBodies=!0,it.disableMinimumSpeedForFastBody=!1,Dw([rp({message:"Alias for incorrect spelling used in older versions, will be removed in v0.25.0",alternateMethod:"dynamicTreeVelocityMultiplier"})],it,"dynamicTreeVelocityMultiplyer",null);var Ne;(function(d){d.World="world",d.Screen="screen"})(Ne||(Ne={}));class ac extends C{constructor(e){super(0,0),this._getX=e.getX,this._getY=e.getY,this._setX=e.setX,this._setY=e.setY}get x(){return this._x=this._getX()}set x(e){this._setX(e),this._x=e}get y(){return this._y=this._getY()}set y(e){this._setY(e),this._y=e}}class op extends C{constructor(e,s){super(e.x,e.y),this.original=e,this.change=s}get x(){return this._x=this.original.x}set x(e){this.change(e,this._y),this._x=this.original.x=e}get y(){return this._y=this.original.y}set y(e){this.change(this._x,e),this._y=this.original.y=e}}class kr{constructor(){this._parent=null,this._children=[],this._pos=R(0,0),this._rotation=0,this._scale=R(1,1),this._isDirty=!1,this._isInverseDirty=!1,this._matrix=Et.identity(),this._inverse=Et.identity()}get parent(){return this._parent}set parent(e){if(this._parent){const s=this._parent._children.indexOf(this);s>-1&&this._parent._children.splice(s,1)}this._parent=e,this._parent&&this._parent._children.push(this),this.flagDirty()}get children(){return this._children}set pos(e){e.equals(this._pos)||(this._pos.x=e.x,this._pos.y=e.y,this.flagDirty())}get pos(){return new op(this._pos,(e,s)=>{(e!==this._pos.x||s!==this._pos.y)&&this.flagDirty()})}set globalPos(e){let s=e.clone();this.parent&&(s=this.parent.inverse.multiply(e)),s.equals(this._pos)||(this._pos=s,this.flagDirty())}get globalPos(){return new ac({getX:()=>this.matrix.data[4],getY:()=>this.matrix.data[5],setX:e=>{if(this.parent){const{x:s}=this.parent.inverse.multiply(R(e,this.pos.y));this.pos.x=s}else this.pos.x=e;e!==this.matrix.data[4]&&this.flagDirty()},setY:e=>{if(this.parent){const{y:s}=this.parent.inverse.multiply(R(this.pos.x,e));this.pos.y=s}else this.pos.y=e;e!==this.matrix.data[5]&&this.flagDirty()}})}set rotation(e){const s=A(e);s!==this._rotation&&this.flagDirty(),this._rotation=s}get rotation(){return this._rotation}set globalRotation(e){let s=0;this.parent&&(s=this.parent.globalRotation);const o=A(e+s);o!==this._rotation&&this.flagDirty(),this._rotation=o}get globalRotation(){return this.parent?this.matrix.getRotation():this.rotation}set scale(e){e.equals(this._scale)||(this._scale.x=e.x,this._scale.y=e.y,this.flagDirty())}get scale(){return new op(this._scale,(e,s)=>{(e!==this._scale.x||s!==this._scale.y)&&this.flagDirty()})}set globalScale(e){let s=R(1,1);this.parent&&(s=this.parent.globalScale),this.scale=e.scale(R(1/s.x,1/s.y))}get globalScale(){return new ac({getX:()=>this.parent?this.matrix.getScaleX():this.scale.x,getY:()=>this.parent?this.matrix.getScaleY():this.scale.y,setX:e=>{if(this.parent){const s=this.parent.globalScale.x;this.scale.x=e/s}else this.scale.x=e},setY:e=>{if(this.parent){const s=this.parent.globalScale.y;this.scale.y=e/s}else this.scale.y=e}})}get matrix(){return this._isDirty&&(this.parent===null?this._matrix=this._calculateMatrix():this._matrix=this.parent.matrix.multiply(this._calculateMatrix()),this._isDirty=!1),this._matrix}get inverse(){return this._isInverseDirty&&(this._inverse=this.matrix.inverse(),this._isInverseDirty=!1),this._inverse}_calculateMatrix(){return Et.identity().translate(this.pos.x,this.pos.y).rotate(this.rotation).scale(this.scale.x,this.scale.y)}flagDirty(){this._isDirty=!0,this._isInverseDirty=!0;for(let e=0;e<this._children.length;e++)this._children[e].flagDirty()}apply(e){return this.matrix.multiply(e)}applyInverse(e){return this.inverse.multiply(e)}setTransform(e,s,o){this._pos.x=e.x,this._pos.y=e.y,this._rotation=A(s),this._scale.x=o.x,this._scale.y=o.y,this.flagDirty()}clone(e){const s=e??new kr;this._pos.clone(s._pos),s._rotation=this._rotation,this._scale.clone(s._scale),s.flagDirty()}}function Mw(d){return!!(d!=null&&d.clone)}class ze{constructor(){this.owner=null}clone(){const e=new this.constructor;for(const s in this)if(this.hasOwnProperty(s)){const o=this[s];Mw(o)&&s!=="owner"&&s!=="clone"?e[s]=o.clone():e[s]=o}return e}}class lc extends ze{constructor(e,s){super(),this.type=e,this.value=s}}class wi{constructor(){this.observers=[],this.subscriptions=[]}register(e){this.observers.push(e)}subscribe(e){this.subscriptions.push(e)}unregister(e){const s=this.observers.indexOf(e);s!==-1&&this.observers.splice(s,1)}unsubscribe(e){const s=this.subscriptions.indexOf(e);s!==-1&&this.subscriptions.splice(s,1)}notifyAll(e){const s=this.observers.length;for(let u=0;u<s;u++)this.observers[u].notify(e);const o=this.subscriptions.length;for(let u=0;u<o;u++)this.subscriptions[u](e)}clear(){this.observers.length=0,this.subscriptions.length=0}}class tt extends ze{constructor(){super(...arguments),this.type="ex.transform",this._transform=new kr,this._addChildTransform=e=>{const s=e.get(tt);s&&(s._transform.parent=this._transform)},this.zIndexChanged$=new wi,this._z=0,this.coordPlane=Ne.World}get(){return this._transform}onAdd(e){for(const s of e.children)this._addChildTransform(s);e.childrenAdded$.subscribe(s=>this._addChildTransform(s)),e.childrenRemoved$.subscribe(s=>{const o=s.get(tt);o&&(o._transform.parent=null)})}onRemove(e){this._transform.parent=null}get z(){return this._z}set z(e){const s=this._z;this._z=e,s!==e&&this.zIndexChanged$.notifyAll(e)}get pos(){return this._transform.pos}set pos(e){this._transform.pos=e}get globalPos(){return this._transform.globalPos}set globalPos(e){this._transform.globalPos=e}get rotation(){return this._transform.rotation}set rotation(e){this._transform.rotation=e}get globalRotation(){return this._transform.globalRotation}set globalRotation(e){this._transform.globalRotation=e}get scale(){return this._transform.scale}set scale(e){this._transform.scale=e}get globalScale(){return this._transform.globalScale}set globalScale(e){this._transform.globalScale=e}applyInverse(e){return this._transform.applyInverse(e)}apply(e){return this._transform.apply(e)}}class $t extends ze{constructor(){super(...arguments),this.type="ex.motion",this.vel=C.Zero,this.acc=C.Zero,this.scaleFactor=C.Zero,this.angularVelocity=0,this.torque=0,this.inertia=1}}class Mi{constructor(e,s,o){this._name=e,this._category=s,this._mask=o}get name(){return this._name}get category(){return this._category}get mask(){return this._mask}canCollide(e){return(this.category&e.mask)!==0&&(e.category&this.mask)!==0}invert(){return new Mi("~("+this.name+")",~this.category,~this.mask)}static combine(e){const s=e.map(h=>h.name).join("+"),o=e.reduce((h,g)=>g.category|h,0),u=~o;return new Mi(s,o,u)}static collidesWith(e){return Mi.combine(e).invert()}}Mi.All=new Mi("Collide with all groups",-1,-1);class Ue{constructor(e,s){this.colliderA=e,this.colliderB=s,this.id=null,this.id=Ue.calculatePairHash(e.id,s.id)}static canCollide(e,s){var o,u;const h=(o=e==null?void 0:e.owner)===null||o===void 0?void 0:o.get(mt),g=(u=s==null?void 0:s.owner)===null||u===void 0?void 0:u.get(mt);return!(e.id===s.id||e.owner&&s.owner&&e.owner.id===s.owner.id||e.localBounds.hasZeroDimensions()||s.localBounds.hasZeroDimensions()||!h||!g||!h.group.canCollide(g.group)||h.collisionType===pt.Fixed&&g.collisionType===pt.Fixed||g.collisionType===pt.PreventCollision||h.collisionType===pt.PreventCollision||!h.active||!g.active)}get canCollide(){const e=this.colliderA,s=this.colliderB;return Ue.canCollide(e,s)}collide(){return this.colliderA.collide(this.colliderB)}hasCollider(e){return e===this.colliderA||e===this.colliderB}static calculatePairHash(e,s){return e.value<s.value?`#${e.value}+${s.value}`:`#${s.value}+${e.value}`}}class Ir{constructor(e,s){this.min=e,this.max=s}overlaps(e){return this.max>e.min&&e.max>this.min}getOverlap(e){return this.overlaps(e)?this.max>e.max?e.max-this.min:this.max-e.min:0}}class uc{constructor(e){this.parent=e,this.parent=e||null,this.data=null,this.bounds=new Q,this.left=null,this.right=null,this.height=0}isLeaf(){return!this.left&&!this.right}}class cc{constructor(e=new Q(-Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)){this.worldBounds=e,this.root=null,this.nodes={}}_insert(e){if(this.root===null){this.root=e,this.root.parent=null;return}const s=e.bounds;let o=this.root;for(;!o.isLeaf();){const _=o.left,y=o.right,b=o.bounds.getPerimeter(),D=o.bounds.combine(s).getPerimeter(),F=2*D,z=2*(D-b);let j=0;const X=s.combine(_.bounds);let Y,U;_.isLeaf()?j=X.getPerimeter()+z:(U=_.bounds.getPerimeter(),Y=X.getPerimeter(),j=Y-U+z);let V=0;const et=s.combine(y.bounds);if(y.isLeaf()?V=et.getPerimeter()+z:(U=y.bounds.getPerimeter(),Y=et.getPerimeter(),V=Y-U+z),F<j&&F<V)break;j<V?o=_:o=y}const u=o.parent,h=new uc(u);h.bounds=s.combine(o.bounds),h.height=o.height+1,u!==null?(u.left===o?u.left=h:u.right=h,h.left=o,h.right=e,o.parent=h,e.parent=h):(h.left=o,h.right=e,o.parent=h,e.parent=h,this.root=h);let g=e.parent;for(;g;){if(g=this._balance(g),!g.left)throw new Error("Parent of current leaf cannot have a null left child"+g);if(!g.right)throw new Error("Parent of current leaf cannot have a null right child"+g);g.height=1+Math.max(g.left.height,g.right.height),g.bounds=g.left.bounds.combine(g.right.bounds),g=g.parent}}_remove(e){if(e===this.root){this.root=null;return}const s=e.parent,o=s.parent;let u;if(s.left===e?u=s.right:u=s.left,o){o.left===s?o.left=u:o.right=u,u.parent=o;let h=o;for(;h;)h=this._balance(h),h.bounds=h.left.bounds.combine(h.right.bounds),h.height=1+Math.max(h.left.height,h.right.height),h=h.parent}else this.root=u,u.parent=null}trackCollider(e){const s=new uc;s.data=e,s.bounds=e.bounds,s.bounds.left-=2,s.bounds.top-=2,s.bounds.right+=2,s.bounds.bottom+=2,this.nodes[e.id.value]=s,this._insert(s)}updateCollider(e){var s;const o=this.nodes[e.id.value];if(!o)return!1;const u=e.bounds;if(!this.worldBounds.contains(u))return N.getInstance().warn("Collider with id "+e.id.value+" is outside the world bounds and will no longer be tracked for physics"),this.untrackCollider(e),!1;if(o.bounds.contains(u))return!1;if(this._remove(o),u.left-=it.boundsPadding,u.top-=it.boundsPadding,u.right+=it.boundsPadding,u.bottom+=it.boundsPadding,e.owner){const h=(s=e.owner)===null||s===void 0?void 0:s.get(mt);if(h){const g=h.vel.x*32/1e3*it.dynamicTreeVelocityMultiplier,_=h.vel.y*32/1e3*it.dynamicTreeVelocityMultiplier;g<0?u.left+=g:u.right+=g,_<0?u.top+=_:u.bottom+=_}}return o.bounds=u,this._insert(o),!0}untrackCollider(e){const s=this.nodes[e.id.value];s&&(this._remove(s),this.nodes[e.id.value]=null,delete this.nodes[e.id.value])}_balance(e){if(e===null)throw new Error("Cannot balance at null node");if(e.isLeaf()||e.height<2)return e;const s=e.left,o=e.right,u=e,h=s,g=o,_=s.left,y=s.right,b=o.left,E=o.right,D=g.height-h.height;if(D>1)return g.left=u,g.parent=u.parent,u.parent=g,g.parent?g.parent.left===u?g.parent.left=g:g.parent.right=g:this.root=g,b.height>E.height?(g.right=b,u.right=E,E.parent=u,u.bounds=h.bounds.combine(E.bounds),g.bounds=u.bounds.combine(b.bounds),u.height=1+Math.max(h.height,E.height),g.height=1+Math.max(u.height,b.height)):(g.right=E,u.right=b,b.parent=u,u.bounds=h.bounds.combine(b.bounds),g.bounds=u.bounds.combine(E.bounds),u.height=1+Math.max(h.height,b.height),g.height=1+Math.max(u.height,E.height)),g;if(D<-1){if(h.left=u,h.parent=u.parent,u.parent=h,h.parent)if(h.parent.left===u)h.parent.left=h;else{if(h.parent.right!==u)throw"Error rotating Dynamic Tree";h.parent.right=h}else this.root=h;return _.height>y.height?(h.right=_,u.left=y,y.parent=u,u.bounds=g.bounds.combine(y.bounds),h.bounds=u.bounds.combine(_.bounds),u.height=1+Math.max(g.height,y.height),h.height=1+Math.max(u.height,_.height)):(h.right=y,u.left=_,_.parent=u,u.bounds=g.bounds.combine(_.bounds),h.bounds=u.bounds.combine(y.bounds),u.height=1+Math.max(g.height,_.height),h.height=1+Math.max(u.height,y.height)),h}return e}getHeight(){return this.root===null?0:this.root.height}query(e,s){const o=e.bounds,u=h=>{if(h&&h.bounds.overlaps(o))if(h.isLeaf()&&h.data!==e){if(s.call(e,h.data))return!0}else return u(h.left)||u(h.right);return!1};u(this.root)}rayCastQuery(e,s=1/0,o){const u=h=>{if(h&&h.bounds.rayCast(e,s))if(h.isLeaf()){if(o.call(e,h.data))return!0}else return u(h.left)||u(h.right);return!1};u(this.root)}getNodes(){const e=s=>s?[s].concat(e(s.left),e(s.right)):[];return e(this.root)}debug(e){const s=o=>{o&&(o.isLeaf()?o.bounds.draw(e,B.Green):o.bounds.draw(e,B.White),o.left&&s(o.left),o.right&&s(o.right))};s(this.root)}}class Fi{constructor(e,s){this.pos=e,this.dir=s.normalize()}intersect(e){const s=e.begin.sub(this.pos);if(this.dir.cross(e.getSlope())===0&&s.cross(this.dir)!==0)return-1;const o=this.dir.cross(e.getSlope());if(o===0)return-1;const u=s.cross(e.getSlope())/o;if(u>=0){const h=s.cross(this.dir)/o/e.getLength();if(h>=0&&h<=1)return u}return-1}intersectPoint(e){const s=this.intersect(e);return s<0?null:this.getPoint(s)}getPoint(e){return this.pos.add(this.dir.scale(e))}}class hc{constructor(){this._dynamicCollisionTree=new cc,this._pairs=new Set,this._collisionPairCache=[],this._colliders=[]}getColliders(){return this._colliders}track(e){if(!e){N.getInstance().warn("Cannot track null collider");return}if(e instanceof de){const s=e.getColliders();for(const o of s)o.owner=e.owner,this._colliders.push(o),this._dynamicCollisionTree.trackCollider(o)}else this._colliders.push(e),this._dynamicCollisionTree.trackCollider(e)}untrack(e){if(!e){N.getInstance().warn("Cannot untrack a null collider");return}if(e instanceof de){const s=e.getColliders();for(const o of s){const u=this._colliders.indexOf(o);u!==-1&&this._colliders.splice(u,1),this._dynamicCollisionTree.untrackCollider(o)}}else{const s=this._colliders.indexOf(e);s!==-1&&this._colliders.splice(s,1),this._dynamicCollisionTree.untrackCollider(e)}}_pairExists(e,s){const o=Ue.calculatePairHash(e.id,s.id);return this._pairs.has(o)}broadphase(e,s,o){const u=s/1e3,h=e.filter(_=>{var y,b;const E=(y=_.owner)===null||y===void 0?void 0:y.get(mt);return((b=_.owner)===null||b===void 0?void 0:b.active)&&E.collisionType!==pt.PreventCollision});this._collisionPairCache=[],this._pairs.clear();let g;for(let _=0,y=h.length;_<y;_++)g=h[_],this._dynamicCollisionTree.query(g,b=>{if(!this._pairExists(g,b)&&Ue.canCollide(g,b)){const E=new Ue(g,b);this._pairs.add(E.id),this._collisionPairCache.push(E)}return!1});if(o&&(o.physics.pairs=this._collisionPairCache.length),it.checkForFastBodies)for(const _ of h){const y=_.owner.get(mt);if(y.collisionType!==pt.Active)continue;const b=y.vel.size*u+y.acc.size*.5*u*u,E=Math.min(_.bounds.height,_.bounds.width);if(it.disableMinimumSpeedForFastBody||b>E/2){o&&o.physics.fastBodies++;const D=y.globalPos.sub(y.oldPos),F=_.center,z=_.getFurthestPoint(y.vel),j=z.sub(D),X=new Fi(j,y.vel);X.pos=X.pos.add(X.dir.scale(-2*it.surfaceEpsilon));let Y,U=new C(1/0,1/0);if(this._dynamicCollisionTree.rayCastQuery(X,b+it.surfaceEpsilon*2,V=>{if(!this._pairExists(_,V)&&Ue.canCollide(_,V)){const et=V.rayCast(X,b+it.surfaceEpsilon*10);if(et){const q=et.sub(j);q.size<U.size&&(U=q,Y=V)}}return!1}),Y&&C.isValid(U)){const V=new Ue(_,Y);this._pairs.has(V.id)||(this._pairs.add(V.id),this._collisionPairCache.push(V));const et=F.sub(z);y.globalPos=j.add(et).add(U).add(X.dir.scale(10*it.surfaceEpsilon)),_.update(y.transform.get()),o&&o.physics.fastBodyCollisions++}}}return this._collisionPairCache}narrowphase(e,s){let o=[];for(let u=0;u<e.length;u++){const h=e[u].collide();if(o=o.concat(h),s&&h.length>0)for(const g of h)s.physics.contacts.set(g.id,g)}return s&&(s.physics.collisions+=o.length),o}update(e){let s=0;const o=e.length;for(let u=0;u<o;u++)this._dynamicCollisionTree.updateCollider(e[u])&&s++;return s}debug(e){this._dynamicCollisionTree.debug(e)}}class ln{constructor(){this.id=f("collider",ln._ID++),this.__compositeColliderId=null,this.events=new sn}touching(e){return!!this.collide(e)}}ln._ID=0;class de extends ln{constructor(e){super(),this._collisionProcessor=new hc,this._dynamicAABBTree=new cc,this._colliders=[];for(const s of e)this.addCollider(s)}clearColliders(){this._colliders=[]}addCollider(e){this.events.wire(e.events),e.__compositeColliderId=this.id,this._colliders.push(e),this._collisionProcessor.track(e),this._dynamicAABBTree.trackCollider(e)}removeCollider(e){this.events.unwire(e.events),e.__compositeColliderId=null,xt(e,this._colliders),this._collisionProcessor.untrack(e),this._dynamicAABBTree.untrackCollider(e)}getColliders(){return this._colliders}get worldPos(){var e,s;return(s=(e=this._transform)===null||e===void 0?void 0:e.pos)!==null&&s!==void 0?s:C.Zero}get center(){var e,s;return(s=(e=this._transform)===null||e===void 0?void 0:e.pos)!==null&&s!==void 0?s:C.Zero}get bounds(){var e,s;const o=this.getColliders();return o.reduce((h,g)=>h.combine(g.bounds),(s=(e=o[0])===null||e===void 0?void 0:e.bounds)!==null&&s!==void 0?s:new Q().translate(this.worldPos))}get localBounds(){var e,s;const o=this.getColliders();return o.reduce((h,g)=>h.combine(g.localBounds),(s=(e=o[0])===null||e===void 0?void 0:e.localBounds)!==null&&s!==void 0?s:new Q)}get axes(){const e=this.getColliders();let s=[];for(const o of e)s=s.concat(o.axes);return s}getFurthestPoint(e){const s=this.getColliders(),o=[];for(const g of s)o.push(g.getFurthestPoint(e));let u=o[0],h=-Number.MAX_VALUE;for(const g of o){const _=g.dot(e);_>h&&(u=g,h=_)}return u}getInertia(e){const s=this.getColliders();let o=0;for(const u of s)o+=u.getInertia(e);return o}collide(e){let s=[e];e instanceof de&&(s=e.getColliders());const o=[];for(const h of s)this._dynamicAABBTree.query(h,g=>(o.push(new Ue(h,g)),!1));let u=[];for(const h of o)u=u.concat(h.collide());return u}getClosestLineBetween(e){const s=this.getColliders(),o=[];if(e instanceof de){const u=e.getColliders();for(const h of s)for(const g of u){const _=h.getClosestLineBetween(g);_&&o.push(_)}}else for(const u of s){const h=e.getClosestLineBetween(u);h&&o.push(h)}if(o.length){let u=o[0].getLength(),h=o[0];for(const g of o){const _=g.getLength();_<u&&(u=_,h=g)}return h}return null}contains(e){const s=this.getColliders();for(const o of s)if(o.contains(e))return!0;return!1}rayCast(e,s){const o=this.getColliders(),u=[];for(const h of o){const g=h.rayCast(e,s);g&&u.push(g)}if(u.length){let h=u[0],g=h.dot(e.dir);for(const _ of u){const y=e.dir.dot(_);y<g&&(h=_,g=y)}return h}return null}project(e){const s=this.getColliders(),o=[];for(const u of s){const h=u.project(e);h&&o.push(h)}if(o.length){const u=new Ir(o[0].min,o[0].max);for(const h of o)u.min=Math.min(h.min,u.min),u.max=Math.max(h.max,u.max);return u}return null}update(e){if(e){const s=this.getColliders();for(const o of s)o.owner=this.owner,o.update(e)}}debug(e,s){const o=this.getColliders();for(const u of o)u.debug(e,s)}clone(){return new de(this._colliders.map(e=>e.clone()))}}class ve{constructor(e,s){this.begin=e,this.end=s}get slope(){return(this.end.y-this.begin.y)/(this.end.x-this.begin.x)}get intercept(){return this.begin.y-this.slope*this.begin.x}normal(){return this._normal?this._normal:this._normal=this.end.sub(this.begin).normal()}dir(){return this._dir?this._dir:this._dir=this.end.sub(this.begin)}getPoints(){return[this.begin,this.end]}getSlope(){if(this._slope)return this._slope;const e=this.begin,s=this.end,o=e.distance(s);return this._slope=s.sub(e).scale(1/o)}getEdge(){const e=this.begin;return this.end.sub(e)}getLength(){if(this._length)return this._length;const e=this.begin,s=this.end,o=e.distance(s);return this._length=o}get midpoint(){return this.begin.add(this.end).scale(.5)}flip(){return new ve(this.end,this.begin)}below(e){return(this.end.x-this.begin.x)*(e.y-this.begin.y)-(this.end.y-this.begin.y)*(e.x-this.begin.x)>=0}clip(e,s){let o=e;o=o.normalize();const u=o.dot(this.begin)-s,h=o.dot(this.end)-s,g=[];if(u<=0&&g.push(this.begin),h<=0&&g.push(this.end),u*h<0){const _=u/(u-h);g.push(this.begin.add(this.end.sub(this.begin).scale(_)))}return g.length!==2?null:new ve(g[0],g[1])}distanceToPoint(e,s=!1){const o=e.x,u=e.y,h=this.getLength(),g=this.end.y-this.begin.y,_=this.end.x-this.begin.x,y=(g*o-_*u+this.end.x*this.begin.y-this.end.y*this.begin.x)/h;return s?y:Math.abs(y)}findVectorToPoint(e){const s=this.begin.sub(e),o=this.getSlope();return s.sub(o.scale(s.dot(o)))}findPoint(e=null,s=null){const o=this.slope,u=this.intercept;if(e!==null)return new C(e,o*e+u);if(s!==null)return new C((s-u)/o,s);throw new Error("You must provide an X or a Y value")}hasPoint(){let e,s=0;if(typeof arguments[0]=="number"&&typeof arguments[1]=="number")e=new C(arguments[0],arguments[1]),s=arguments[2]||0;else if(arguments[0]instanceof C)e=arguments[0],s=arguments[1]||0;else throw"Could not determine the arguments for Vector.hasPoint";const o=e.x-this.begin.x,u=e.y-this.begin.y,h=this.end.x-this.begin.x,g=this.end.y-this.begin.y,_=o*g-u*h;return Math.abs(_)>s?!1:Math.abs(h)>=Math.abs(g)?h>0?this.begin.x<=e.x&&e.x<=this.end.x:this.end.x<=e.x&&e.x<=this.begin.x:g>0?this.begin.y<=e.y&&e.y<=this.end.y:this.end.y<=e.y&&e.y<=this.begin.y}}function ua(d,e,s,o){const u=d.sub(s),h=e.dot(e),g=e.dot(o),_=o.dot(o),y=e.dot(u),b=o.dot(u),E=h*_-g*g;let D=E,F=E;if(E===0||E<=.01){const X=y/g;return new ve(d,s.add(o.scale(X)))}let z=g*b-_*y,j=h*b-g*y;return z<0?(z=0,j=b,F=_):z>D&&(z=D,j=b+g,F=_),j<0?(j=0,-y<0?z=0:-y>h?z=D:(z=-y,D=h)):j>F&&(j=F,-y+g<0?z=0:-y+g>h?z=D:(z=-y+g,D=h)),z=Math.abs(z)<.001?0:z/D,j=Math.abs(j)<.001?0:j/F,new ve(d.add(e.scale(z)),s.add(o.scale(j)))}const Ci={PolygonPolygonClosestLine(d,e){const s=e.worldPos,o=s.sub(d.worldPos),u=o.negate(),h=new Fi(d.worldPos,o),g=new Fi(s,u),_=d.rayCast(h).add(h.dir.scale(.1)),y=e.rayCast(g).add(g.dir.scale(.1)),b=d.getClosestFace(_),E=e.getClosestFace(y),D=b.face.begin,F=b.face.getEdge(),z=E.face.begin,j=E.face.getEdge();return ua(D,F,z,j)},PolygonEdgeClosestLine(d,e){const o=e.worldPos.sub(d.worldPos),u=new Fi(d.worldPos,o),h=d.rayCast(u).add(u.dir.scale(.1)),g=d.getClosestFace(h),_=g.face.begin,y=g.face.getEdge(),b=e.asLine(),E=b.begin,D=b.getEdge();return ua(_,y,E,D)},PolygonCircleClosestLine(d,e){const s=e.worldPos,o=s.sub(d.worldPos),u=new Fi(d.worldPos,o.normalize()),h=d.rayCast(u).add(u.dir.scale(.1)),g=d.getClosestFace(h),_=g.face.begin,y=g.face.getEdge();let b=(y.x*(s.x-_.x)+y.y*(s.y-_.y))/(y.x*y.x+y.y*y.y);b>1?b=1:b<0&&(b=0);const E=Math.sqrt(Math.pow(_.x+y.x*b-s.x,2)+Math.pow(_.y+y.y*b-s.y,2))-e.radius,D=(_.x+y.x*b-s.x)*e.radius/(e.radius+E),F=(_.y+y.y*b-s.y)*e.radius/(e.radius+E);return new ve(y.scale(b).add(_),new C(s.x+D,s.y+F))},CircleCircleClosestLine(d,e){const o=e.worldPos.sub(d.worldPos),h=d.worldPos.sub(e.worldPos),g=new Fi(d.worldPos,o),_=new Fi(e.worldPos,h),y=d.rayCast(g),b=e.rayCast(_);return new ve(y,b)},CircleEdgeClosestLine(d,e){const s=d.worldPos,o=e.asLine(),u=o.begin,h=o.getEdge(),g=u,_=h;let y=(_.x*(s.x-g.x)+_.y*(s.y-g.y))/(_.x*_.x+_.y*_.y);y>1?y=1:y<0&&(y=0);const b=Math.sqrt(Math.pow(g.x+_.x*y-s.x,2)+Math.pow(g.y+_.y*y-s.y,2))-d.radius,E=(g.x+_.x*y-s.x)*d.radius/(d.radius+b),D=(g.y+_.y*y-s.y)*d.radius/(d.radius+b);return new ve(_.scale(y).add(g),new C(s.x+E,s.y+D))},EdgeEdgeClosestLine(d,e){const s=d.asLine(),o=s.begin,u=s.getEdge(),h=o,g=u,_=e.asLine(),y=_.begin,b=_.getEdge();return ua(h,g,y,b)}};class re extends ln{constructor(e){super(),this.offset=C.Zero,this._globalMatrix=Et.identity(),this.offset=e.offset||C.Zero,this.radius=e.radius||0,this._globalMatrix.translate(this.offset.x,this.offset.y)}get worldPos(){return this._globalMatrix.getPosition()}get radius(){var e;const s=this._transform,o=(e=s==null?void 0:s.globalScale)!==null&&e!==void 0?e:C.One;return this._naturalRadius*Math.min(o.x,o.y)}set radius(e){var s;const o=this._transform,u=(s=o==null?void 0:o.globalScale)!==null&&s!==void 0?s:C.One;this._naturalRadius=e/Math.min(u.x,u.y)}clone(){return new re({offset:this.offset.clone(),radius:this.radius})}get center(){return this._globalMatrix.getPosition()}contains(e){var s,o;return((o=(s=this._transform)===null||s===void 0?void 0:s.pos)!==null&&o!==void 0?o:this.offset).distance(e)<=this.radius}rayCast(e,s=1/0){const o=this.center,u=e.dir,h=e.pos,g=Math.sqrt(Math.pow(u.dot(h.sub(o)),2)-Math.pow(h.sub(o).distance(),2)+Math.pow(this.radius,2));if(g<0)return null;{let _=0;if(g===0)return _=-u.dot(h.sub(o)),_>0&&_<s?e.getPoint(_):null;{const y=-u.dot(h.sub(o))+g,b=-u.dot(h.sub(o))-g,E=[];y>=0&&E.push(y),b>=0&&E.push(b);const D=Math.min(...E);return D<=s?e.getPoint(D):null}}}getClosestLineBetween(e){if(e instanceof re)return Ci.CircleCircleClosestLine(this,e);if(e instanceof ie)return Ci.PolygonCircleClosestLine(e,this).flip();if(e instanceof ke)return Ci.CircleEdgeClosestLine(this,e).flip();throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof e}`)}collide(e){if(e instanceof re)return ui.CollideCircleCircle(this,e);if(e instanceof ie)return ui.CollideCirclePolygon(this,e);if(e instanceof ke)return ui.CollideCircleEdge(this,e);throw new Error(`Circle could not collide with unknown CollisionShape ${typeof e}`)}getFurthestPoint(e){return this.center.add(e.normalize().scale(this.radius))}getFurthestLocalPoint(e){return e.normalize().scale(this.radius)}get bounds(){var e,s,o;const u=this._transform,h=(e=u==null?void 0:u.globalScale)!==null&&e!==void 0?e:C.One,g=(s=u==null?void 0:u.globalRotation)!==null&&s!==void 0?s:0,_=(o=u==null?void 0:u.globalPos)!==null&&o!==void 0?o:C.Zero;return new Q(this.offset.x-this._naturalRadius,this.offset.y-this._naturalRadius,this.offset.x+this._naturalRadius,this.offset.y+this._naturalRadius).rotate(g).scale(h).translate(_)}get localBounds(){return new Q(this.offset.x-this._naturalRadius,this.offset.y-this._naturalRadius,this.offset.x+this._naturalRadius,this.offset.y+this._naturalRadius)}get axes(){return[]}getInertia(e){return e*this.radius*this.radius/2}update(e){var s;this._transform=e,((s=e.matrix)!==null&&s!==void 0?s:this._globalMatrix).clone(this._globalMatrix),this._globalMatrix.translate(this.offset.x,this.offset.y)}project(e){const s=[],u=this.center.dot(e);return s.push(u),s.push(u+this.radius),s.push(u-this.radius),new Ir(Math.min.apply(Math,s),Math.max.apply(Math,s))}debug(e,s){var o,u,h,g;const _=this._transform,y=(o=_==null?void 0:_.globalScale)!==null&&o!==void 0?o:C.One,b=(u=_==null?void 0:_.globalRotation)!==null&&u!==void 0?u:0,E=(h=_==null?void 0:_.globalPos)!==null&&h!==void 0?h:C.Zero;e.save(),e.translate(E.x,E.y),e.rotate(b),e.scale(y.x,y.y),e.drawCircle((g=this.offset)!==null&&g!==void 0?g:C.Zero,this._naturalRadius,B.Transparent,s,2),e.restore()}}class Qn{constructor(e,s,o,u,h,g,_,y){var b,E;this._canceled=!1,this.colliderA=e,this.colliderB=s,this.mtv=o,this.normal=u,this.tangent=h,this.points=g,this.localPoints=_,this.info=y,this.id=Ue.calculatePairHash(e.id,s.id),(e.__compositeColliderId||s.__compositeColliderId)&&(this.id+="|"+Ue.calculatePairHash((b=e.__compositeColliderId)!==null&&b!==void 0?b:e.id,(E=s.__compositeColliderId)!==null&&E!==void 0?E:s.id))}matchAwake(){const e=this.colliderA.owner.get(mt),s=this.colliderB.owner.get(mt);e&&s&&e.sleeping!==s.sleeping&&(e.sleeping&&e.collisionType!==pt.Fixed&&s.sleepMotion>=it.wakeThreshold&&e.setSleeping(!1),s.sleeping&&s.collisionType!==pt.Fixed&&e.sleepMotion>=it.wakeThreshold&&s.setSleeping(!1))}isCanceled(){return this._canceled}cancel(){this._canceled=!0}}class dc{static findPolygonPolygonSeparation(e,s){let o=-Number.MAX_VALUE,u=null,h=null,g=-1,_=null;const y=e.getSides(),b=e.getLocalSides();for(let E=0;E<y.length;E++){const D=y[E],F=D.normal(),z=s.getFurthestPoint(F.negate()),j=D.distanceToPoint(z,!0);j>o&&(o=j,u=D,h=F,g=E,_=z)}return{collider:e,separation:h?o:99,axis:h,side:u,localSide:b[g],sideId:g,point:_,localPoint:h?s.getFurthestLocalPoint(h.negate()):null}}static findCirclePolygonSeparation(e,s){const o=s.axes,h=s.center.sub(e.worldPos),g=s.getFurthestPoint(h.negate());o.push(g.sub(e.worldPos).normalize());let _=Number.MAX_VALUE,y=null,b=-1;for(let E=0;E<o.length;E++){const D=s.project(o[E]),F=e.project(o[E]),z=D.getOverlap(F);if(z<=0)return null;z<_&&(_=z,y=o[E],b=E)}return b<0?null:y.normalize().scale(_)}}const ui={CollideCircleCircle(d,e){const s=d.worldPos,o=e.worldPos,u=d.radius+e.radius,h=s.distance(o);if(h>u)return[];const g=u-h,_=o.sub(s).normalize(),y=_.perpendicular(),b=_.scale(g),E=d.getFurthestPoint(_),D=d.getFurthestLocalPoint(_),F={collider:d,separation:g,axis:_,point:E};return[new Qn(d,e,b,_,y,[E],[D],F)]},CollideCirclePolygon(d,e){var s,o;let u=dc.findCirclePolygonSeparation(d,e);if(!u)return[];u=u.dot(e.center.sub(d.center))<0?u.negate():u;const g=d.getFurthestPoint(u),y=((o=(s=d.owner)===null||s===void 0?void 0:s.get(tt))!==null&&o!==void 0?o:new tt).applyInverse(g),b=u.normalize(),E={collider:d,separation:-u.size,axis:b,point:g,localPoint:y,side:e.findSide(b.negate()),localSide:e.findLocalSide(b.negate())};return[new Qn(d,e,u,b,b.perpendicular(),[g],[y],E)]},CollideCircleEdge(d,e){const s=d.center,o=e.asLine(),u=o.end.sub(o.begin),h=u.dot(o.end.sub(s)),g=u.dot(s.sub(o.begin)),_=e.asLine(),y=e.asLocalLine();if(g<=0){const U=o.begin.sub(s),V=U.dot(U);if(V>d.radius*d.radius)return[];const et=U.normalize(),q=d.radius-Math.sqrt(V),ht={collider:d,separation:q,axis:et,point:_.begin,side:_,localSide:y};return[new Qn(d,e,et.scale(q),et,et.perpendicular(),[_.begin],[y.begin],ht)]}if(h<=0){const U=o.end.sub(s),V=U.dot(U);if(V>d.radius*d.radius)return[];const et=U.normalize(),q=d.radius-Math.sqrt(V),ht={collider:d,separation:q,axis:et,point:_.end,side:_,localSide:y};return[new Qn(d,e,et.scale(q),et,et.perpendicular(),[_.end],[y.end],ht)]}const b=u.dot(u),E=o.begin.scale(h).add(o.end.scale(g)).scale(1/b),D=s.sub(E),F=D.dot(D);if(F>d.radius*d.radius)return[];let z=u.perpendicular();z.dot(s.sub(o.begin))<0&&(z.x=-z.x,z.y=-z.y),z=z.normalize();const j=d.radius-Math.sqrt(F),X=z.scale(j),Y={collider:d,separation:j,axis:z,point:E,side:_,localSide:y};return[new Qn(d,e,X,z.negate(),z.negate().perpendicular(),[E],[E.sub(e.worldPos)],Y)]},CollideEdgeEdge(){return[]},CollidePolygonEdge(d,e){var s;const o=d.center,h=e.center.sub(o).normalize(),g=new ie({points:[e.begin,e.end,e.end.add(h.scale(100)),e.begin.add(h.scale(100))],offset:e.offset});g.owner=e.owner,((s=e.owner)===null||s===void 0?void 0:s.get(tt))&&g.update(e.owner.get(tt).get());const y=this.CollidePolygonPolygon(d,g);return y.length&&(y[0].colliderB=e,y[0].id=Ue.calculatePairHash(d.id,e.id)),y},CollidePolygonPolygon(d,e){var s,o,u,h;const g=dc.findPolygonPolygonSeparation(d,e);if(g.separation>0)return[];const _=dc.findPolygonPolygonSeparation(e,d);if(_.separation>0)return[];const y=g.separation>_.separation?g:_,E=(y.collider===d?e:d).findSide(y.axis.negate()),D=y.side,F=D.dir().normalize(),z=E.clip(F.negate(),-F.dot(D.begin));let j=null;if(z&&(j=z.clip(F,F.dot(D.end))),j){const X=j.getPoints().filter(et=>D.below(et));let Y=y.axis,U=Y.perpendicular();e.center.sub(d.center).dot(Y)<0&&(Y=Y.negate(),U=Y.perpendicular());let V=[];if(y.collider===d){const et=(o=(s=e.owner)===null||s===void 0?void 0:s.get(tt))!==null&&o!==void 0?o:new tt;V=X.map(q=>et.applyInverse(q))}else{const et=(h=(u=d.owner)===null||u===void 0?void 0:u.get(tt))!==null&&h!==void 0?h:new tt;V=X.map(q=>et.applyInverse(q))}return[new Qn(d,e,Y.scale(-y.separation),Y,U,X,V,y)]}return[]},FindContactSeparation(d,e){var s,o,u,h;const g=d.colliderA,_=(o=(s=d.colliderA.owner)===null||s===void 0?void 0:s.get(tt))!==null&&o!==void 0?o:new tt,y=d.colliderB,b=(h=(u=d.colliderB.owner)===null||u===void 0?void 0:u.get(tt))!==null&&h!==void 0?h:new tt;if(g instanceof re&&y instanceof re){const E=g.radius+y.radius,D=_.pos.distance(b.pos);return-(E-D)}if(g instanceof ie&&y instanceof ie&&d.info.localSide){let E,D;return d.info.collider===g?(E=new ve(_.apply(d.info.localSide.begin),_.apply(d.info.localSide.end)),D=b.apply(e)):(E=new ve(b.apply(d.info.localSide.begin),b.apply(d.info.localSide.end)),D=_.apply(e)),E.distanceToPoint(D,!0)}if(g instanceof ie&&y instanceof re||y instanceof ie&&g instanceof re){const E=_.apply(e);if(d.info.side)return d.info.side.distanceToPoint(E,!0)}if(g instanceof ke&&y instanceof ie||y instanceof ke&&g instanceof ie){let E;if(d.info.collider===g?E=b.apply(e):E=_.apply(e),d.info.side)return d.info.side.distanceToPoint(E,!0)}if(g instanceof re&&y instanceof ke||y instanceof re&&g instanceof ke){const E=b.apply(e);let D;g instanceof re&&(D=g.getFurthestPoint(d.normal));const F=E.distance(D);if(d.info.side)return F>0?-F:0}return 0}};class ke extends ln{constructor(e){var s;super(),this._globalMatrix=Et.identity(),this.begin=e.begin||C.Zero,this.end=e.end||C.Zero,this.offset=(s=e.offset)!==null&&s!==void 0?s:C.Zero}clone(){return new ke({begin:this.begin.clone(),end:this.end.clone()})}get worldPos(){var e;const s=this._transform;return(e=s==null?void 0:s.globalPos.add(this.offset))!==null&&e!==void 0?e:this.offset}get center(){const e=this._getTransformedBegin(),s=this._getTransformedEnd();return e.average(s)}_getTransformedBegin(){return this._globalMatrix.multiply(this.begin)}_getTransformedEnd(){return this._globalMatrix.multiply(this.end)}getSlope(){const e=this._getTransformedBegin(),s=this._getTransformedEnd(),o=e.distance(s);return s.sub(e).scale(1/o)}getLength(){const e=this._getTransformedBegin(),s=this._getTransformedEnd();return e.distance(s)}contains(){return!1}rayCast(e,s=1/0){const o=this._getTransformedBegin().sub(e.pos);if(e.dir.cross(this.getSlope())===0&&o.cross(e.dir)!==0)return null;const u=e.dir.cross(this.getSlope());if(u===0)return null;const h=o.cross(this.getSlope())/u;if(h>=0&&h<=s){const g=o.cross(e.dir)/u/this.getLength();if(g>=0&&g<=1)return e.getPoint(h)}return null}getClosestLineBetween(e){if(e instanceof re)return Ci.CircleEdgeClosestLine(e,this);if(e instanceof ie)return Ci.PolygonEdgeClosestLine(e,this).flip();if(e instanceof ke)return Ci.EdgeEdgeClosestLine(this,e);throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof e}`)}collide(e){if(e instanceof re)return ui.CollideCircleEdge(e,this);if(e instanceof ie)return ui.CollidePolygonEdge(e,this);if(e instanceof ke)return ui.CollideEdgeEdge();throw new Error(`Edge could not collide with unknown CollisionShape ${typeof e}`)}getFurthestPoint(e){const s=this._getTransformedBegin(),o=this._getTransformedEnd();return e.dot(s)>0?s:o}_boundsFromBeginEnd(e,s,o=10){return new Q(Math.min(e.x,s.x)-o,Math.min(e.y,s.y)-o,Math.max(e.x,s.x)+o,Math.max(e.y,s.y)+o)}get bounds(){const e=this._getTransformedBegin(),s=this._getTransformedEnd();return this._boundsFromBeginEnd(e,s)}get localBounds(){return this._boundsFromBeginEnd(this.begin,this.end)}asLine(){return new ve(this._getTransformedBegin(),this._getTransformedEnd())}asLocalLine(){return new ve(this.begin,this.end)}get axes(){const s=this._getTransformedEnd().sub(this._getTransformedBegin()).normal(),o=[];return o.push(s),o.push(s.negate()),o.push(s.normal()),o.push(s.normal().negate()),o}getInertia(e){const s=this.end.sub(this.begin).distance()/2;return e*s*s}update(e){var s;this._transform=e,((s=e.matrix)!==null&&s!==void 0?s:this._globalMatrix).clone(this._globalMatrix),this._globalMatrix.translate(this.offset.x,this.offset.y)}project(e){const s=[],o=[this._getTransformedBegin(),this._getTransformedEnd()],u=o.length;for(let h=0;h<u;h++)s.push(o[h].dot(e));return new Ir(Math.min.apply(Math,s),Math.max.apply(Math,s))}debug(e,s){const o=this._getTransformedBegin(),u=this._getTransformedEnd();e.drawLine(o,u,s,2),e.drawCircle(o,2,s),e.drawCircle(u,2,s)}}class ie extends ln{constructor(e){var s,o;super(),this._logger=N.getInstance(),this._transformedPoints=[],this._sides=[],this._localSides=[],this._globalMatrix=Et.identity(),this._transformedPointsDirty=!0,this._sidesDirty=!0,this._localSidesDirty=!0,this._localBoundsDirty=!0,this.offset=(s=e.offset)!==null&&s!==void 0?s:C.Zero,this._globalMatrix.translate(this.offset.x,this.offset.y),this.points=(o=e.points)!==null&&o!==void 0?o:[],this._isCounterClockwiseWinding(this.points)||this.points.reverse(),this.isConvex()||this._logger.warn("Excalibur only supports convex polygon colliders and will not behave properly.Call PolygonCollider.triangulate() to build a new collider composed of smaller convex triangles"),this._calculateTransformation()}set points(e){this._localBoundsDirty=!0,this._localSidesDirty=!0,this._sidesDirty=!0,this._points=e}get points(){return this._points}_isCounterClockwiseWinding(e){let s=0;for(let o=0;o<e.length;o++)s+=(e[(o+1)%e.length].x-e[o].x)*(e[(o+1)%e.length].y+e[o].y);return s<0}isConvex(){if(this.points.length<3)return!1;let e=this.points[this.points.length-2],s=this.points[this.points.length-1],o=Math.atan2(s.y-e.y,s.x-e.x),u=0,h=0,g=0;for(const[_,y]of this.points.entries()){if(e=s,u=o,s=y,o=Math.atan2(s.y-e.y,s.x-e.x),e.equals(s))return!1;let b=o-u;if(b<=-Math.PI?b+=Math.PI*2:b>Math.PI&&(b-=Math.PI*2),_===0){if(b===0)return!1;h=b>0?1:-1}else if(h*b<=0)return!1;g+=b}return Math.abs(Math.round(g/(Math.PI*2)))===1}tessellate(){const e=[];for(let s=1;s<this.points.length-2;s++)e.push([this.points[0],this.points[s+1],this.points[s+2]]);return e.push([this.points[0],this.points[1],this.points[2]]),new de(e.map(s=>oe.Polygon(s)))}triangulate(){if(this.points.length<3)throw Error("Invalid polygon");function e(g,_){return g>=_.length?_[g%_.length]:g<0?_[g%_.length+_.length]:_[g]}function s(g,_,y,b){const E=y.sub(_),D=b.sub(y),F=_.sub(b),z=g.sub(_),j=g.sub(y),X=g.sub(b),Y=E.cross(z),U=D.cross(j),V=F.cross(X);return!(Y>0||U>0||V>0)}const o=[],u=[...this.points],h=T(0,this.points.length-1);for(;h.length>3;)for(let g=0;g<h.length;g++){const _=h[g],y=e(g-1,h),b=e(g+1,h),E=u[_],D=u[y],F=u[b],z=D.sub(E);if(!(F.sub(E).cross(z)>0))continue;let Y=!0;for(let U=0;U<h.length;U++){const V=h[U];if(V===_||V===y||V===b)continue;const et=u[V];if(s(et,D,E,F)){Y=!1;break}}if(Y){o.push([D,E,F]),h.splice(g,1);break}}return o.push([u[h[0]],u[h[1]],u[h[2]]]),new de(o.map(g=>oe.Polygon(g)))}clone(){return new ie({offset:this.offset.clone(),points:this.points.map(e=>e.clone())})}get worldPos(){return this._transform?this._transform.pos.add(this.offset):this.offset}get center(){return this.bounds.center}_calculateTransformation(){const e=this.points,s=e.length;this._transformedPoints.length=0;for(let o=0;o<s;o++)this._transformedPoints[o]=this._globalMatrix.multiply(e[o].clone())}getTransformedPoints(){return this._transformedPointsDirty&&(this._calculateTransformation(),this._transformedPointsDirty=!1),this._transformedPoints}getSides(){if(this._sidesDirty){const e=[],s=this.getTransformedPoints(),o=s.length;for(let u=0;u<o;u++)e.push(new ve(s[u],s[(u+1)%o]));this._sides=e,this._sidesDirty=!1}return this._sides}getLocalSides(){if(this._localSidesDirty){const e=[],s=this.points,o=s.length;for(let u=0;u<o;u++)e.push(new ve(s[u],s[(u+1)%o]));this._localSides=e,this._localSidesDirty=!1}return this._localSides}findSide(e){const s=this.getSides();let o=s[0],u=-Number.MAX_VALUE;for(let h=0;h<s.length;h++){const g=s[h],y=g.normal().dot(e);y>u&&(o=g,u=y)}return o}findLocalSide(e){const s=this.getLocalSides();let o=s[0],u=-Number.MAX_VALUE;for(let h=0;h<s.length;h++){const g=s[h],y=g.normal().dot(e);y>u&&(o=g,u=y)}return o}get axes(){const e=[],s=this.getSides();for(let o=0;o<s.length;o++)e.push(s[o].normal());return e}update(e){var s;this._transform=e,this._transformedPointsDirty=!0,this._sidesDirty=!0,((s=e.matrix)!==null&&s!==void 0?s:this._globalMatrix).clone(this._globalMatrix),this._globalMatrix.translate(this.offset.x,this.offset.y)}contains(e){const s=new Fi(e,new C(1,0));return this.getSides().reduce(function(u,h){return s.intersect(h)>=0?u+1:u},0)%2!==0}getClosestLineBetween(e){if(e instanceof re)return Ci.PolygonCircleClosestLine(this,e);if(e instanceof ie)return Ci.PolygonPolygonClosestLine(this,e);if(e instanceof ke)return Ci.PolygonEdgeClosestLine(this,e);throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof e}`)}collide(e){if(e instanceof re)return ui.CollideCirclePolygon(e,this);if(e instanceof ie)return ui.CollidePolygonPolygon(this,e);if(e instanceof ke)return ui.CollidePolygonEdge(this,e);throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof e}`)}getFurthestPoint(e){const s=this.getTransformedPoints();let o=null,u=-Number.MAX_VALUE;for(let h=0;h<s.length;h++){const g=e.dot(s[h]);g>u&&(u=g,o=s[h])}return o}getFurthestLocalPoint(e){const s=this.points;let o=s[0],u=-Number.MAX_VALUE;for(let h=0;h<s.length;h++){const g=e.dot(s[h]);g>u&&(u=g,o=s[h])}return o}getClosestFace(e){const s=this.getSides();let o=Number.POSITIVE_INFINITY,u=-1,h=-1;for(let g=0;g<s.length;g++){const _=s[g].distanceToPoint(e);_<o&&(o=_,u=g,h=_)}return u!==-1?{distance:s[u].normal().scale(h),face:s[u]}:null}get bounds(){return this.localBounds.transform(this._globalMatrix)}get localBounds(){return this._localBoundsDirty&&(this._localBounds=Q.fromPoints(this.points),this._localBoundsDirty=!1),this._localBounds}getInertia(e){if(this._cachedMass===e&&this._cachedInertia)return this._cachedInertia;let s=0,o=0;const u=this.points;for(let h=0;h<u.length;h++){const g=(h+1)%u.length,_=u[g].cross(u[h]);s+=_*(u[h].dot(u[h])+u[h].dot(u[g])+u[g].dot(u[g])),o+=_}return this._cachedMass=e,this._cachedInertia=e/6*(s/o)}rayCast(e,s=1/0){const o=this.getSides(),u=o.length;let h=Number.MAX_VALUE,g=-1;for(let _=0;_<u;_++){const y=e.intersect(o[_]);y>=0&&y<h&&y<=s&&(h=y,g=_)}return g>=0?e.getPoint(h):null}project(e){const s=this.getTransformedPoints(),o=s.length;let u=Number.MAX_VALUE,h=-Number.MAX_VALUE;for(let g=0;g<o;g++){const _=s[g].dot(e);u=Math.min(u,_),h=Math.max(h,_)}return new Ir(u,h)}debug(e,s){const o=this.getTransformedPoints()[0],u=[o,...this.getTransformedPoints(),o];for(let h=0;h<u.length-1;h++)e.drawLine(u[h],u[h+1],s,2),e.drawCircle(u[h],2,s),e.drawCircle(u[h+1],2,s)}}class oe{static Box(e,s,o=C.Half,u=C.Zero){return new ie({points:new Q(-e*o.x,-s*o.y,e-e*o.x,s-s*o.y).getPoints(),offset:u})}static Polygon(e,s=C.Zero){return new ie({points:e,offset:s})}static Circle(e,s=C.Zero){return new re({radius:e,offset:s})}static Edge(e,s){return new ke({begin:e,end:s})}static Capsule(e,s,o=C.Zero){const u=N.getInstance();return e===s&&u.warn("A capsule collider with equal width and height is a circle, consider using a ex.Shape.Circle or ex.CircleCollider"),s>=e?new de([oe.Circle(e/2,R(0,-s/2+e/2).add(o)),oe.Box(e,s-e,C.Half,o),oe.Circle(e/2,R(0,s/2-e/2).add(o))]):new de([oe.Circle(s/2,R(-e/2+s/2,0).add(o)),oe.Box(e-s,s,C.Half,o),oe.Circle(s/2,R(e/2-s/2,0).add(o))])}}class Kt extends ze{constructor(e){super(),this.type="ex.collider",this.events=new sn,this.$colliderAdded=new wi,this.$colliderRemoved=new wi,this.set(e)}get(){return this._collider}set(e){return this.clear(),e&&(this._collider=e,this._collider.owner=this.owner,this.events.wire(e.events),this.$colliderAdded.notifyAll(e),this.update()),e}clear(){this._collider&&(this.events.unwire(this._collider.events),this.$colliderRemoved.notifyAll(this._collider),this._collider.owner=null,this._collider=null)}get bounds(){var e,s;return(s=(e=this._collider)===null||e===void 0?void 0:e.bounds)!==null&&s!==void 0?s:new Q}get localBounds(){var e,s;return(s=(e=this._collider)===null||e===void 0?void 0:e.localBounds)!==null&&s!==void 0?s:new Q}update(){var e;const s=(e=this.owner)===null||e===void 0?void 0:e.get(tt);this._collider&&(this._collider.owner=this.owner,s&&this._collider.update(s.get()))}collide(e){let s=this._collider,o=e._collider;if(!s||!o)return[];let u=!1;if(o instanceof de&&(s=o,o=this._collider,u=!0),this._collider){const h=s.collide(o);return h?(u&&h.forEach(g=>{g.mtv=g.mtv.negate(),g.normal=g.normal.negate(),g.tangent=g.normal.perpendicular(),g.colliderA=this._collider,g.colliderB=e._collider}),h):[]}return[]}onAdd(e){this._collider&&this.update(),this.events.on("precollision",s=>{const o=s;e.events.emit("precollision",new $n(o.target.owner,o.other.owner,o.side,o.intersection))}),this.events.on("postcollision",s=>{const o=s;e.events.emit("postcollision",new Wn(o.target.owner,o.other.owner,o.side,o.intersection))}),this.events.on("collisionstart",s=>{const o=s;e.events.emit("collisionstart",new Er(o.target.owner,o.other.owner,o.contact))}),this.events.on("collisionend",s=>{const o=s;e.events.emit("collisionend",new Tr(o.target.owner,o.other.owner))})}onRemove(){this.events.clear(),this.$colliderRemoved.notifyAll(this._collider)}useBoxCollider(e,s,o=C.Half,u=C.Zero){const h=oe.Box(e,s,o,u);return this.set(h)}usePolygonCollider(e,s=C.Zero){const o=oe.Polygon(e,s);return this.set(o)}useCircleCollider(e,s=C.Zero){const o=oe.Circle(e,s);return this.set(o)}useEdgeCollider(e,s){const o=oe.Edge(e,s);return this.set(o)}useCompositeCollider(e){return this.set(new de(e))}}var ye;(function(d){d.Rotation="rotation",d.X="x",d.Y="y"})(ye||(ye={}));class mt extends ze{constructor(e){var s,o,u;super(),this.type="ex.body",this.dependencies=[tt,$t],this.id=f("body",mt._ID++),this.events=new sn,this._oldTransform=new kr,this.__oldTransformCaptured=!1,this.enableFixedUpdateInterpolate=!0,this.collisionType=pt.PreventCollision,this.group=Mi.All,this._mass=it.defaultMass,this.sleepMotion=it.sleepEpsilon*5,this.canSleep=it.bodiesCanSleepByDefault,this._sleeping=!1,this.bounciness=.2,this.friction=.99,this.useGravity=!0,this.limitDegreeOfFreedom=[],this.oldVel=new C(0,0),this.oldAcc=C.Zero,e&&(this.collisionType=(s=e.type)!==null&&s!==void 0?s:this.collisionType,this.group=(o=e.group)!==null&&o!==void 0?o:this.group,this.useGravity=(u=e.useGravity)!==null&&u!==void 0?u:this.useGravity)}get matrix(){return this.transform.get().matrix}get mass(){return this._mass}set mass(e){this._mass=e,this._cachedInertia=void 0,this._cachedInverseInertia=void 0}get inverseMass(){return this.collisionType===pt.Fixed?0:1/this.mass}get sleeping(){return this._sleeping}setSleeping(e){this._sleeping=e,e?(this.vel=C.Zero,this.acc=C.Zero,this.angularVelocity=0,this.sleepMotion=0):this.sleepMotion=it.sleepEpsilon*5}updateMotion(){this._sleeping&&this.setSleeping(!0);const e=this.vel.size*this.vel.size+Math.abs(this.angularVelocity*this.angularVelocity),s=it.sleepBias;this.sleepMotion=s*this.sleepMotion+(1-s)*e,this.sleepMotion=S(this.sleepMotion,0,10*it.sleepEpsilon),this.canSleep&&this.sleepMotion<it.sleepEpsilon&&this.setSleeping(!0)}get inertia(){if(this._cachedInertia)return this._cachedInertia;const e=this.owner.get(Kt);if(e){e.$colliderAdded.subscribe(()=>{this._cachedInertia=null}),e.$colliderRemoved.subscribe(()=>{this._cachedInertia=null});const s=e.get();if(s)return this._cachedInertia=s.getInertia(this.mass)}return 0}get inverseInertia(){return this._cachedInverseInertia?this._cachedInverseInertia:this._cachedInverseInertia=this.collisionType===pt.Fixed?0:1/this.inertia}get active(){var e;return!!(!((e=this.owner)===null||e===void 0)&&e.active)}get center(){return this.globalPos}get transform(){var e;return(e=this.owner)===null||e===void 0?void 0:e.get(tt)}get motion(){var e;return(e=this.owner)===null||e===void 0?void 0:e.get($t)}get pos(){return this.transform.pos}set pos(e){this.transform.pos=e}get globalPos(){return this.transform.globalPos}set globalPos(e){this.transform.globalPos=e}get oldPos(){return this._oldTransform.pos}get vel(){return this.motion.vel}set vel(e){this.motion.vel=e}get acc(){return this.motion.acc}set acc(e){this.motion.acc=e}get torque(){return this.motion.torque}set torque(e){this.motion.torque=e}get oldRotation(){return this._oldTransform.rotation}get rotation(){return this.transform.globalRotation}set rotation(e){this.transform.globalRotation=e}get scale(){return this.transform.globalScale}set scale(e){this.transform.globalScale=e}get oldScale(){return this._oldTransform.scale}get scaleFactor(){return this.motion.scaleFactor}set scaleFactor(e){this.motion.scaleFactor=e}get angularVelocity(){return this.motion.angularVelocity}set angularVelocity(e){this.motion.angularVelocity=e}applyImpulse(e,s){if(this.collisionType!==pt.Active)return;const o=s.scale(this.inverseMass);if(this.limitDegreeOfFreedom.includes(ye.X)&&(o.x=0),this.limitDegreeOfFreedom.includes(ye.Y)&&(o.y=0),this.vel.addEqual(o),!this.limitDegreeOfFreedom.includes(ye.Rotation)){const u=e.sub(this.globalPos);this.angularVelocity+=this.inverseInertia*u.cross(s)}}applyLinearImpulse(e){if(this.collisionType!==pt.Active)return;const s=e.scale(this.inverseMass);this.limitDegreeOfFreedom.includes(ye.X)&&(s.x=0),this.limitDegreeOfFreedom.includes(ye.Y)&&(s.y=0),this.vel=this.vel.add(s)}applyAngularImpulse(e,s){if(this.collisionType===pt.Active&&!this.limitDegreeOfFreedom.includes(ye.Rotation)){const o=e.sub(this.globalPos);this.angularVelocity+=this.inverseInertia*o.cross(s)}}captureOldTransform(){this.__oldTransformCaptured=!0,this.transform.get().clone(this._oldTransform),this.oldVel.setTo(this.vel.x,this.vel.y),this.oldAcc.setTo(this.acc.x,this.acc.y)}}mt._ID=0;class ap{constructor(e){this.data=e,this.type="Component Added"}}function lp(d){return!!d&&d.type==="Component Added"}class up{constructor(e){this.data=e,this.type="Component Removed"}}function cp(d){return!!d&&d.type==="Component Removed"}class ae extends Je{constructor(e,s){if(super(),this.id=ae._ID++,this._name="anonymous",this.active=!0,this._componentsToRemove=[],this._componentTypeToInstance=new Map,this._componentStringToInstance=new Map,this._tagsMemo=[],this._typesMemo=[],this.componentAdded$=new wi,this.componentRemoved$=new wi,this._parent=null,this.childrenAdded$=new wi,this.childrenRemoved$=new wi,this._children=[],this._isInitialized=!1,this._setName(s),e)for(const o of e)this.addComponent(o)}_setName(e){e&&(this._name=e)}get name(){return this._name}get events(){return this.eventDispatcher}kill(){this.active=!1}isKilled(){return!this.active}get tags(){return this._tagsMemo}hasTag(e){return this.tags.includes(e)}addTag(e){return this.addComponent(new lc(e))}removeTag(e,s=!1){return this.removeComponent(e,s)}get types(){return this._typesMemo}_rebuildMemos(){this._tagsMemo=Array.from(this._componentStringToInstance.values()).filter(e=>e instanceof lc).map(e=>e.type),this._typesMemo=Array.from(this._componentStringToInstance.keys())}getComponents(){return Array.from(this._componentStringToInstance.values())}_notifyAddComponent(e){this._rebuildMemos();const s=new ap({component:e,entity:this});this.componentAdded$.notifyAll(s)}_notifyRemoveComponent(e){const s=new up({component:e,entity:this});this.componentRemoved$.notifyAll(s),this._rebuildMemos()}get parent(){return this._parent}get children(){return this._children}unparent(){this._parent&&(this._parent.removeChild(this),this._parent=null)}addChild(e){if(e.parent===null){if(this.getAncestors().includes(e))throw new Error("Cycle detected, cannot add entity");this._children.push(e),e._parent=this,this.childrenAdded$.notifyAll(e)}else throw new Error("Entity already has a parent, cannot add without unparenting");return this}removeChild(e){return e.parent===this&&(xt(e,this._children),e._parent=null,this.childrenRemoved$.notifyAll(e)),this}removeAllChildren(){return this.children.forEach(e=>{this.removeChild(e)}),this}getAncestors(){const e=[this];let s=this.parent;for(;s;)e.push(s),s=s.parent;return e.reverse()}getDescendants(){let e=[this],s=[this];for(;s.length>0;){const o=s.pop();s=s.concat(o.children),e=e.concat(o.children)}return e}clone(){const e=new ae;for(const s of this.types)e.addComponent(this.get(s).clone());for(const s of this.children)e.addChild(s.clone());return e}addTemplate(e,s=!1){for(const o of e.getComponents())this.addComponent(o.clone(),s);for(const o of e.children)this.addChild(o.clone().addTemplate(o));return this}addComponent(e,s=!1){if(this.has(e.type))if(s)this.removeComponent(e);else return this;if(e.dependencies&&e.dependencies.length)for(const u of e.dependencies)this.addComponent(new u);e.owner=this;const o=e.constructor;return this._componentTypeToInstance.set(o,e),this._componentStringToInstance.set(e.type,e),e.onAdd&&e.onAdd(this),this._notifyAddComponent(e),this}removeComponent(e,s=!1){return s?typeof e=="string"?this._removeComponentByType(e):e instanceof ze&&this._removeComponentByType(e.type):this._componentsToRemove.push(e),this}_removeComponentByType(e){if(this.has(e)){const s=this.get(e);s.owner=null,s.onRemove&&s.onRemove(this);const o=s.constructor;this._componentTypeToInstance.delete(o),this._componentStringToInstance.delete(s.type),this._notifyRemoveComponent(s)}}processComponentRemoval(){for(const e of this._componentsToRemove){const s=typeof e=="string"?e:e.type;this._removeComponentByType(s)}this._componentsToRemove.length=0}has(e){return typeof e=="string"?this._componentStringToInstance.has(e):this._componentTypeToInstance.has(e)}get(e){return typeof e=="string"?this._componentStringToInstance.get(e):this._componentTypeToInstance.get(e)}get isInitialized(){return this._isInitialized}_initialize(e){this.isInitialized||(this.onInitialize(e),super.emit("initialize",new Es(e,this)),this._isInitialized=!0)}_preupdate(e,s){this.emit("preupdate",new Di(e,s,this)),this.onPreUpdate(e,s)}_postupdate(e,s){this.emit("postupdate",new Hn(e,s,this)),this.onPostUpdate(e,s)}onInitialize(e){}onPreUpdate(e,s){}onPostUpdate(e,s){}update(e,s){this._initialize(e),this._preupdate(e,s);for(const o of this.children)o.update(e,s);this._postupdate(e,s)}}ae._ID=0;function fc(d){return!!d.tick}class pc{constructor(e,s){this._options=e,this._graphics=s,this.graphics=[]}get name(){return this._options.name}hide(e){if(!e)this.graphics.length=0;else{let s=null;e instanceof Ae?s=e:s=this._graphics.getGraphic(e),this.graphics=this.graphics.filter(o=>o.graphic!==s),this._graphics.recalculateBounds()}}show(e,s){s={...s};let o;return e instanceof Ae?o=this._graphics.copyGraphics?e.clone():e:(o=this._graphics.getGraphic(e),o||N.getInstance().error(`No such graphic added to component named ${e}. These named graphics are available: `,this._graphics.getNames())),o?(this.graphics.push({graphic:o,options:s}),this._graphics.recalculateBounds(),o):null}use(e,s){return s={...s},this.hide(),this.show(e,s)}get order(){return this._options.order}set order(e){this._options.order=e}get offset(){var e;return(e=this._options.offset)!==null&&e!==void 0?e:C.Zero}set offset(e){this._options.offset=e}get currentKeys(){var e;return(e=this.name)!==null&&e!==void 0?e:"anonymous"}}class hp{constructor(e){this._component=e,this._layers=[],this._layerMap={},this.default=new pc({name:"default",order:0},e),this._maybeAddLayer(this.default)}create(e){const s=new pc(e,this._component);return this._maybeAddLayer(s)}get(e){return e?this._getLayer(e):this._layers}currentKeys(){const e=[];for(const s of this._layers)e.push(s.currentKeys);return e}has(e){return e in this._layerMap}_maybeAddLayer(e){return this._layerMap[e.name]?this._layerMap[e.name]:(this._layerMap[e.name]=e,this._layers.push(e),this._layers.sort((s,o)=>s.order-o.order),e)}_getLayer(e){return this._layerMap[e]}}class xe extends ze{constructor(e){super(),this.type="ex.graphics",this._graphics={},this.visible=!0,this.opacity=1,this.offset=C.Zero,this.anchor=C.Half,this.copyGraphics=!1,this._localBounds=null,e={visible:this.visible,...e};const{current:s,anchor:o,opacity:u,visible:h,graphics:g,offset:_,copyGraphics:y,onPreDraw:b,onPostDraw:E}=e;this._graphics=g||{},this.offset=_??this.offset,this.opacity=u??this.opacity,this.anchor=o??this.anchor,this.copyGraphics=y??this.copyGraphics,this.onPreDraw=b??this.onPreDraw,this.onPostDraw=E??this.onPostDraw,this.visible=!!h,this.layers=new hp(this),s&&this._graphics[s]&&this.show(this._graphics[s])}getGraphic(e){return this._graphics[e]}getNames(){return Object.keys(this._graphics)}get current(){return this.layers.default.graphics}get graphics(){return this._graphics}add(e,s){let o="default",u=null;return typeof e=="string"?(o=e,u=s):u=e,this._graphics[o]=this.copyGraphics?u.clone():u,o==="default"&&this.show("default"),u}show(e,s){const o=this.layers.default.show(e,s);return this.recalculateBounds(),o}use(e,s){const o=this.layers.default.use(e,s);return this.recalculateBounds(),o}hide(e){this.layers.default.hide(e)}set localBounds(e){this._localBounds=e}recalculateBounds(){let e=new Q;for(const s of this.layers.get())for(const{graphic:o,options:u}of s.graphics){let h=this.anchor,g=this.offset;u!=null&&u.anchor&&(h=u.anchor),u!=null&&u.offset&&(g=u.offset);const _=o.localBounds,y=-_.width*h.x+g.x,b=-_.height*h.y+g.y;e=o==null?void 0:o.localBounds.translate(R(y+s.offset.x,b+s.offset.y)).combine(e)}this._localBounds=e}get localBounds(){return(!this._localBounds||this._localBounds.hasZeroDimensions())&&this.recalculateBounds(),this._localBounds}update(e,s=0){for(const o of this.layers.get())for(const{graphic:u}of o.graphics)fc(u)&&(u==null||u.tick(e,s))}}class ca extends ks{constructor(e){super(e),this.width=e.width,this.height=e.height,this.rasterize()}clone(){return new ca({width:this.width,height:this.height,...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(e){this.color&&e.fillRect(0,0,this.width,this.height),this.strokeColor&&e.strokeRect(0,0,this.width,this.height)}}class ha extends ks{constructor(e){var s,o;super(e),this._radius=0,this.padding=(s=e.padding)!==null&&s!==void 0?s:2,this.radius=e.radius,this.filtering=(o=e.filtering)!==null&&o!==void 0?o:Ke.Blended,this.rasterize()}get radius(){return this._radius}set radius(e){this._radius=e,this.width=this._radius*2,this.height=this._radius*2,this.flagDirty()}clone(){return new ha({radius:this.radius,...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(e){this.radius>0&&(e.beginPath(),e.arc(this.radius,this.radius,this.radius,0,Math.PI*2),this.color&&e.fill(),this.strokeColor&&e.stroke())}}class Rs extends ze{constructor(){super(...arguments),this.type="ex.pointer",this.useColliderShape=!0,this.useGraphicsBounds=!1}}class Ot{static CreateReversibleEasingFunction(e){return(s,o,u,h)=>u<o?o-(e(s,u,o,h)-u):e(s,o,u,h)}static CreateVectorEasingFunction(e){return(s,o,u,h)=>new C(e(s,o.x,u.x,h),e(s,o.y,u.y,h))}}Ot.Linear=Ot.CreateReversibleEasingFunction((d,e,s,o)=>(s=s-e,s*d/o+e)),Ot.EaseInQuad=Ot.CreateReversibleEasingFunction((d,e,s,o)=>(s=s-e,d/=o,s*d*d+e)),Ot.EaseOutQuad=Ot.CreateReversibleEasingFunction((d,e,s,o)=>(s=s-e,d/=o,-s*d*(d-2)+e)),Ot.EaseInOutQuad=Ot.CreateReversibleEasingFunction((d,e,s,o)=>(s=s-e,d/=o/2,d<1?s/2*d*d+e:(d--,-s/2*(d*(d-2)-1)+e))),Ot.EaseInCubic=Ot.CreateReversibleEasingFunction((d,e,s,o)=>(s=s-e,d/=o,s*d*d*d+e)),Ot.EaseOutCubic=Ot.CreateReversibleEasingFunction((d,e,s,o)=>(s=s-e,d/=o,d--,s*(d*d*d+1)+e)),Ot.EaseInOutCubic=Ot.CreateReversibleEasingFunction((d,e,s,o)=>(s=s-e,d/=o/2,d<1?s/2*d*d*d+e:(d-=2,s/2*(d*d*d+2)+e)));class dp{constructor(e){this._actions=[],this._completedActions=[],this._entity=e}add(e){this._actions.push(e)}remove(e){const s=this._actions.indexOf(e);this._actions.splice(s,1)}clearActions(){this._actions.length=0,this._completedActions.length=0,this._currentAction&&this._currentAction.stop()}getActions(){return this._actions.concat(this._completedActions)}hasNext(){return this._actions.length>0}isComplete(){return this._actions.length===0}reset(){this._actions=this.getActions();const e=this._actions.length;for(let s=0;s<e;s++)this._actions[s].reset();this._completedActions=[]}update(e){this._actions.length>0&&(this._currentAction=this._actions[0],this._currentAction.update(e),this._currentAction.isComplete(this._entity)&&this._completedActions.push(this._actions.shift()))}}class fp{constructor(e,s,o){this._stopped=!1,this._repeatBuilder=s,this._repeatContext=new Rr(e),this._actionQueue=this._repeatContext.getQueue(),this._repeat=o,this._originalRepeat=o,this._repeatBuilder(this._repeatContext),this._repeat--}update(e){this._actionQueue.isComplete()&&(this._actionQueue.clearActions(),this._repeatBuilder(this._repeatContext),this._repeat--),this._actionQueue.update(e)}isComplete(){return this._stopped||this._repeat<=0&&this._actionQueue.isComplete()}stop(){this._stopped=!0}reset(){this._repeat=this._originalRepeat}}class pp{constructor(e,s){this._stopped=!1,this._repeatBuilder=s,this._repeatContext=new Rr(e),this._actionQueue=this._repeatContext.getQueue(),this._repeatBuilder(this._repeatContext)}update(e){this._stopped||(this._actionQueue.isComplete()&&(this._actionQueue.clearActions(),this._repeatBuilder(this._repeatContext)),this._actionQueue.update(e))}isComplete(){return this._stopped}stop(){this._stopped=!0,this._actionQueue.clearActions()}reset(){}}class gp{constructor(e,s,o,u){if(this._started=!1,this._stopped=!1,this._entity=e,this._tx=e.get(tt),this._motion=e.get($t),this._speed=u,this._offset=new C(s,o),u<=0)throw N.getInstance().error("Attempted to moveBy with speed less than or equal to zero : "+u),new Error("Speed must be greater than 0 pixels per second")}update(e){this._started||(this._started=!0,this._start=new C(this._tx.pos.x,this._tx.pos.y),this._end=this._start.add(this._offset),this._distance=this._offset.size,this._dir=this._end.sub(this._start).normalize()),this.isComplete(this._entity)?(this._tx.pos=R(this._end.x,this._end.y),this._motion.vel=R(0,0)):this._motion.vel=this._dir.scale(this._speed)}isComplete(e){const s=e.get(tt);return this._stopped||s.pos.distance(this._start)>=this._distance}stop(){this._motion.vel=R(0,0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class mp{constructor(e,s,o,u){this.entity=e,this._started=!1,this._stopped=!1,this._tx=e.get(tt),this._motion=e.get($t),this._end=new C(s,o),this._speed=u}update(e){this._started||(this._started=!0,this._start=new C(this._tx.pos.x,this._tx.pos.y),this._distance=this._start.distance(this._end),this._dir=this._end.sub(this._start).normalize());const s=this._dir.scale(this._speed);this._motion.vel=R(s.x,s.y),this.isComplete(this.entity)&&(this._tx.pos=R(this._end.x,this._end.y),this._motion.vel=R(0,0))}isComplete(e){const s=e.get(tt);return this._stopped||new C(s.pos.x,s.pos.y).distance(this._start)>=this._distance}stop(){this._motion.vel=R(0,0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}var Ve;(function(d){d[d.ShortestPath=0]="ShortestPath",d[d.LongestPath=1]="LongestPath",d[d.Clockwise=2]="Clockwise",d[d.CounterClockwise=3]="CounterClockwise"})(Ve||(Ve={}));class _p{constructor(e,s,o,u){this._started=!1,this._stopped=!1,this._tx=e.get(tt),this._motion=e.get($t),this._end=s,this._speed=o,this._rotationType=u||Ve.ShortestPath}update(e){if(!this._started){this._started=!0,this._start=this._tx.rotation,this._currentNonCannonAngle=this._tx.rotation;const s=Math.abs(this._end-this._start),o=v-s;switch(s>o?(this._shortDistance=o,this._longDistance=s):(this._shortDistance=s,this._longDistance=o),this._shortestPathIsPositive=(this._start-this._end+v)%v>=Math.PI,this._rotationType){case Ve.ShortestPath:this._distance=this._shortDistance,this._shortestPathIsPositive?this._direction=1:this._direction=-1;break;case Ve.LongestPath:this._distance=this._longDistance,this._shortestPathIsPositive?this._direction=-1:this._direction=1;break;case Ve.Clockwise:this._direction=1,this._shortestPathIsPositive?this._distance=this._shortDistance:this._distance=this._longDistance;break;case Ve.CounterClockwise:this._direction=-1,this._shortestPathIsPositive?this._distance=this._longDistance:this._distance=this._shortDistance;break}}this._motion.angularVelocity=this._direction*this._speed,this._currentNonCannonAngle+=this._direction*this._speed*(e/1e3),this.isComplete()&&(this._tx.rotation=this._end,this._motion.angularVelocity=0,this._stopped=!0)}isComplete(){const e=Math.abs(this._currentNonCannonAngle-this._start);return this._stopped||e>=Math.abs(this._distance)}stop(){this._motion.angularVelocity=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class vp{constructor(e,s,o,u){this._started=!1,this._stopped=!1,this._tx=e.get(tt),this._motion=e.get($t),this._speed=o,this._offset=s,this._rotationType=u||Ve.ShortestPath}update(e){if(!this._started){this._started=!0,this._start=this._tx.rotation,this._currentNonCannonAngle=this._tx.rotation,this._end=this._start+this._offset;const s=Math.abs(this._end-this._start),o=v-s;switch(s>o?(this._shortDistance=o,this._longDistance=s):(this._shortDistance=s,this._longDistance=o),this._shortestPathIsPositive=(this._start-this._end+v)%v>=Math.PI,this._rotationType){case Ve.ShortestPath:this._distance=this._shortDistance,this._shortestPathIsPositive?this._direction=1:this._direction=-1;break;case Ve.LongestPath:this._distance=this._longDistance,this._shortestPathIsPositive?this._direction=-1:this._direction=1;break;case Ve.Clockwise:this._direction=1,this._shortDistance>=0?this._distance=this._shortDistance:this._distance=this._longDistance;break;case Ve.CounterClockwise:this._direction=-1,this._shortDistance<=0?this._distance=this._shortDistance:this._distance=this._longDistance;break}}this._motion.angularVelocity=this._direction*this._speed,this._currentNonCannonAngle+=this._direction*this._speed*(e/1e3),this.isComplete()&&(this._tx.rotation=this._end,this._motion.angularVelocity=0,this._stopped=!0)}isComplete(){const e=Math.abs(this._currentNonCannonAngle-this._start);return this._stopped||e>=Math.abs(this._distance)}stop(){this._motion.angularVelocity=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1,this._start=void 0,this._currentNonCannonAngle=void 0,this._distance=void 0}}class yp{constructor(e,s,o,u,h){this._started=!1,this._stopped=!1,this._tx=e.get(tt),this._motion=e.get($t),this._endX=s,this._endY=o,this._speedX=u,this._speedY=h}update(e){if(this._started||(this._started=!0,this._startX=this._tx.scale.x,this._startY=this._tx.scale.y,this._distanceX=Math.abs(this._endX-this._startX),this._distanceY=Math.abs(this._endY-this._startY)),Math.abs(this._tx.scale.x-this._startX)>=this._distanceX)this._motion.scaleFactor.x=0;else{const s=this._endY<this._startY?-1:1;this._motion.scaleFactor.x=this._speedX*s}if(Math.abs(this._tx.scale.y-this._startY)>=this._distanceY)this._motion.scaleFactor.y=0;else{const s=this._endY<this._startY?-1:1;this._motion.scaleFactor.y=this._speedY*s}this.isComplete()&&(this._tx.scale=R(this._endX,this._endY),this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0)}isComplete(){return this._stopped||Math.abs(this._tx.scale.y-this._startX)>=this._distanceX-.01&&Math.abs(this._tx.scale.y-this._startY)>=this._distanceY-.01}stop(){this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class xp{constructor(e,s,o,u){this._started=!1,this._stopped=!1,this._tx=e.get(tt),this._motion=e.get($t),this._offset=new C(s,o),this._speedX=this._speedY=u}update(e){this._started||(this._started=!0,this._startScale=this._tx.scale.clone(),this._endScale=this._startScale.add(this._offset),this._distanceX=Math.abs(this._endScale.x-this._startScale.x),this._distanceY=Math.abs(this._endScale.y-this._startScale.y),this._directionX=this._endScale.x<this._startScale.x?-1:1,this._directionY=this._endScale.y<this._startScale.y?-1:1),this._motion.scaleFactor.x=this._speedX*this._directionX,this._motion.scaleFactor.y=this._speedY*this._directionY,this.isComplete()&&(this._tx.scale=this._endScale,this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0)}isComplete(){return this._stopped||Math.abs(this._tx.scale.x-this._startScale.x)>=this._distanceX-.01&&Math.abs(this._tx.scale.y-this._startScale.y)>=this._distanceY-.01}stop(){this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class wp{constructor(e){this._method=null,this._hasBeenCalled=!1,this._method=e}update(e){this._method(),this._hasBeenCalled=!0}isComplete(){return this._hasBeenCalled}reset(){this._hasBeenCalled=!1}stop(){this._hasBeenCalled=!0}}class Cp{constructor(e,s,o,u,h){this.easingFcn=h,this._currentLerpTime=0,this._lerpDuration=1*1e3,this._lerpStart=new C(0,0),this._lerpEnd=new C(0,0),this._initialized=!1,this._stopped=!1,this._tx=e.get(tt),this._motion=e.get($t),this._lerpDuration=u,this._lerpEnd=new C(s,o)}_initialize(){this._lerpStart=new C(this._tx.pos.x,this._tx.pos.y),this._currentLerpTime=0}update(e){this._initialized||(this._initialize(),this._initialized=!0),this._currentLerpTime+=e;let s=this._tx.pos.x,o=this._tx.pos.y;this._currentLerpTime<this._lerpDuration?(this._lerpEnd.x<this._lerpStart.x?s=this._lerpStart.x-(this.easingFcn(this._currentLerpTime,this._lerpEnd.x,this._lerpStart.x,this._lerpDuration)-this._lerpEnd.x):s=this.easingFcn(this._currentLerpTime,this._lerpStart.x,this._lerpEnd.x,this._lerpDuration),this._lerpEnd.y<this._lerpStart.y?o=this._lerpStart.y-(this.easingFcn(this._currentLerpTime,this._lerpEnd.y,this._lerpStart.y,this._lerpDuration)-this._lerpEnd.y):o=this.easingFcn(this._currentLerpTime,this._lerpStart.y,this._lerpEnd.y,this._lerpDuration),this._motion.vel=R((s-this._tx.pos.x)/(e/1e3),(o-this._tx.pos.y)/(e/1e3))):(this._tx.pos=R(this._lerpEnd.x,this._lerpEnd.y),this._motion.vel=C.Zero)}isComplete(){return this._stopped||this._currentLerpTime>=this._lerpDuration}reset(){this._initialized=!1,this._stopped=!1,this._currentLerpTime=0}stop(){this._motion.vel=R(0,0),this._stopped=!0}}class bp{constructor(e,s,o,u,h){this.easingFcn=h,this._currentLerpTime=0,this._lerpDuration=1*1e3,this._lerpStart=new C(0,0),this._lerpEnd=new C(0,0),this._initialized=!1,this._stopped=!1,this._tx=e.get(tt),this._motion=e.get($t),this._lerpDuration=u,this._offset=new C(s,o)}_initialize(){this._lerpStart=new C(this._tx.pos.x,this._tx.pos.y),this._currentLerpTime=0,this._lerpEnd=this._lerpStart.add(this._offset)}update(e){this._initialized||(this._initialize(),this._initialized=!0),this._currentLerpTime+=e;let s=this._tx.pos.x,o=this._tx.pos.y;this._currentLerpTime<this._lerpDuration?(this._lerpEnd.x<this._lerpStart.x?s=this._lerpStart.x-(this.easingFcn(this._currentLerpTime,this._lerpEnd.x,this._lerpStart.x,this._lerpDuration)-this._lerpEnd.x):s=this.easingFcn(this._currentLerpTime,this._lerpStart.x,this._lerpEnd.x,this._lerpDuration),this._lerpEnd.y<this._lerpStart.y?o=this._lerpStart.y-(this.easingFcn(this._currentLerpTime,this._lerpEnd.y,this._lerpStart.y,this._lerpDuration)-this._lerpEnd.y):o=this.easingFcn(this._currentLerpTime,this._lerpStart.y,this._lerpEnd.y,this._lerpDuration),this._motion.vel=R((s-this._tx.pos.x)/(e/1e3),(o-this._tx.pos.y)/(e/1e3))):(this._tx.pos=R(this._lerpEnd.x,this._lerpEnd.y),this._motion.vel=C.Zero)}isComplete(){return this._stopped||this._currentLerpTime>=this._lerpDuration}reset(){this._initialized=!1,this._stopped=!1,this._currentLerpTime=0}stop(){this._motion.vel=R(0,0),this._stopped=!0}}class Sp{constructor(e,s,o,u=1){this._timeVisible=0,this._timeNotVisible=0,this._elapsedTime=0,this._totalTime=0,this._stopped=!1,this._started=!1,this._graphics=e.get(xe),this._timeVisible=s,this._timeNotVisible=o,this._duration=(s+o)*u}update(e){this._started||(this._started=!0,this._elapsedTime=0,this._totalTime=0),this._graphics&&(this._elapsedTime+=e,this._totalTime+=e,this._graphics.visible&&this._elapsedTime>=this._timeVisible&&(this._graphics.visible=!1,this._elapsedTime=0),!this._graphics.visible&&this._elapsedTime>=this._timeNotVisible&&(this._graphics.visible=!0,this._elapsedTime=0),this.isComplete()&&(this._graphics.visible=!0))}isComplete(){return this._stopped||this._totalTime>=this._duration}stop(){this._graphics&&(this._graphics.visible=!0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1,this._elapsedTime=0,this._totalTime=0}}class Pp{constructor(e,s,o){this._multiplier=1,this._started=!1,this._stopped=!1,this._graphics=e.get(xe),this._endOpacity=s,this._speed=this._ogspeed=o}update(e){this._graphics&&(this._started||(this._started=!0,this._speed=this._ogspeed,this._endOpacity<this._graphics.opacity?this._multiplier=-1:this._multiplier=1),this._speed>0&&(this._graphics.opacity+=this._multiplier*(Math.abs(this._graphics.opacity-this._endOpacity)*e)/this._speed),this._speed-=e,this.isComplete()&&(this._graphics.opacity=this._endOpacity),N.getInstance().debug("[Action fade] Actor opacity:",this._graphics.opacity))}isComplete(){return this._stopped||Math.abs(this._graphics.opacity-this._endOpacity)<.05}stop(){this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class Ep{constructor(e){this._elapsedTime=0,this._started=!1,this._stopped=!1,this._delay=e}update(e){this._started||(this._started=!0),this._elapsedTime+=e}isComplete(){return this._stopped||this._elapsedTime>=this._delay}stop(){this._stopped=!0}reset(){this._elapsedTime=0,this._started=!1,this._stopped=!1}}class Tp{constructor(e){this._stopped=!1,this._entity=e}update(e){this._entity.get(Ds).clearActions(),this._entity.kill(),this._stopped=!0}isComplete(){return this._stopped}stop(){}reset(){}}class gc{constructor(e,s,o){this._started=!1,this._stopped=!1,this._tx=e.get(tt),this._motion=e.get($t),this._followTx=s.get(tt),this._followMotion=s.get($t),this._current=new C(this._tx.pos.x,this._tx.pos.y),this._end=new C(this._followTx.pos.x,this._followTx.pos.y),this._maximumDistance=o!==void 0?o:this._current.distance(this._end),this._speed=0}update(e){this._started||(this._started=!0,this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize());const s=Math.sqrt(Math.pow(this._followMotion.vel.x,2)+Math.pow(this._followMotion.vel.y,2));if(s!==0&&(this._speed=s),this._current=R(this._tx.pos.x,this._tx.pos.y),this._end=R(this._followTx.pos.x,this._followTx.pos.y),this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize(),this._distanceBetween>=this._maximumDistance){const o=this._dir.scale(this._speed);this._motion.vel=R(o.x,o.y)}else this._motion.vel=R(0,0);this.isComplete()&&(this._tx.pos=R(this._end.x,this._end.y),this._motion.vel=R(0,0))}stop(){this._motion.vel=R(0,0),this._stopped=!0}isComplete(){return this._stopped}reset(){this._started=!1,this._stopped=!1}}class mc{constructor(e,s,o){this._started=!1,this._stopped=!1,this._speedWasSpecified=!1,this._tx=e.get(tt),this._motion=e.get($t),this._meetTx=s.get(tt),this._meetMotion=s.get($t),this._current=new C(this._tx.pos.x,this._tx.pos.y),this._end=new C(this._meetTx.pos.x,this._meetTx.pos.y),this._speed=o||0,o!==void 0&&(this._speedWasSpecified=!0)}update(e){this._started||(this._started=!0,this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize());const s=Math.sqrt(Math.pow(this._meetMotion.vel.x,2)+Math.pow(this._meetMotion.vel.y,2));s!==0&&!this._speedWasSpecified&&(this._speed=s),this._current=R(this._tx.pos.x,this._tx.pos.y),this._end=R(this._meetTx.pos.x,this._meetTx.pos.y),this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize();const o=this._dir.scale(this._speed);this._motion.vel=R(o.x,o.y),this.isComplete()&&(this._tx.pos=R(this._end.x,this._end.y),this._motion.vel=R(0,0))}isComplete(){return this._stopped||this._distanceBetween<=1}stop(){this._motion.vel=R(0,0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1,this._distanceBetween=void 0}}class Rr{constructor(e){this._entity=e,this._queue=new dp(e)}getQueue(){return this._queue}update(e){this._queue.update(e)}clearActions(){this._queue.clearActions()}runAction(e){return e.reset(),this._queue.add(e),this}easeTo(...e){var s,o;let u=0,h=0,g=0,_=Ot.Linear;return e[0]instanceof C?(u=e[0].x,h=e[0].y,g=e[1],_=(s=e[2])!==null&&s!==void 0?s:_):(u=e[0],h=e[1],g=e[2],_=(o=e[3])!==null&&o!==void 0?o:_),this._queue.add(new Cp(this._entity,u,h,g,_)),this}easeBy(...e){var s,o;let u=0,h=0,g=0,_=Ot.Linear;return e[0]instanceof C?(u=e[0].x,h=e[0].y,g=e[1],_=(s=e[2])!==null&&s!==void 0?s:_):(u=e[0],h=e[1],g=e[2],_=(o=e[3])!==null&&o!==void 0?o:_),this._queue.add(new bp(this._entity,u,h,g,_)),this}moveTo(e,s,o){let u=0,h=0,g=0;return e instanceof C?(u=e.x,h=e.y,g=s):(u=e,h=s,g=o),this._queue.add(new mp(this._entity,u,h,g)),this}moveBy(e,s,o){let u=0,h=0,g=0;return e instanceof C?(u=e.x,h=e.y,g=s):(u=e,h=s,g=o),this._queue.add(new gp(this._entity,u,h,g)),this}rotateTo(e,s,o){return this._queue.add(new _p(this._entity,e,s,o)),this}rotateBy(e,s,o){return this._queue.add(new vp(this._entity,e,s,o)),this}scaleTo(e,s,o,u){let h=1,g=1,_=0,y=0;return e instanceof C&&s instanceof C&&(h=e.x,g=e.y,_=s.x,y=s.y),typeof e=="number"&&typeof s=="number"&&(h=e,g=s,_=o,y=u),this._queue.add(new yp(this._entity,h,g,_,y)),this}scaleBy(e,s,o){let u=1,h=1;return e instanceof C&&(u=e.x,h=e.y,o=s),typeof e=="number"&&typeof s=="number"&&(u=e,h=s),this._queue.add(new xp(this._entity,u,h,o)),this}blink(e,s,o=1){return this._queue.add(new Sp(this._entity,e,s,o)),this}fade(e,s){return this._queue.add(new Pp(this._entity,e,s)),this}delay(e){return this._queue.add(new Ep(e)),this}die(){return this._queue.add(new Tp(this._entity)),this}callMethod(e){return this._queue.add(new wp(e)),this}repeat(e,s){return s?(this._queue.add(new fp(this._entity,e,s)),this):(this.repeatForever(e),this)}repeatForever(e){return this._queue.add(new pp(this._entity,e)),this}follow(e,s){return s===void 0?this._queue.add(new gc(this._entity,e)):this._queue.add(new gc(this._entity,e,s)),this}meet(e,s){return s===void 0?this._queue.add(new mc(this._entity,e)):this._queue.add(new mc(this._entity,e,s)),this}toPromise(){return new Promise(s=>{this._queue.add(new wp(()=>{s()}))})}}class Ds extends ze{constructor(){super(...arguments),this.type="ex.actions",this.dependencies=[tt,$t]}onAdd(e){this._ctx=new Rr(e)}onRemove(){this._ctx=null}getQueue(){var e;return(e=this._ctx)===null||e===void 0?void 0:e.getQueue()}runAction(e){var s;return(s=this._ctx)===null||s===void 0?void 0:s.runAction(e)}update(e){var s;return(s=this._ctx)===null||s===void 0?void 0:s.update(e)}clearActions(){var e;(e=this._ctx)===null||e===void 0||e.clearActions()}easeTo(...e){return this._ctx.easeTo.apply(this._ctx,e)}easeBy(...e){return this._ctx.easeBy.apply(this._ctx,e)}moveTo(e,s,o){return this._ctx.moveTo.apply(this._ctx,[e,s,o])}moveBy(e,s,o){return this._ctx.moveBy.apply(this._ctx,[e,s,o])}rotateTo(e,s,o){return this._ctx.rotateTo(e,s,o)}rotateBy(e,s,o){return this._ctx.rotateBy(e,s,o)}scaleTo(e,s,o,u){return this._ctx.scaleTo.apply(this._ctx,[e,s,o,u])}scaleBy(e,s,o){return this._ctx.scaleBy.apply(this._ctx,[e,s,o])}blink(e,s,o){return this._ctx.blink(e,s,o)}fade(e,s){return this._ctx.fade(e,s)}delay(e){return this._ctx.delay(e)}die(){return this._ctx.die()}callMethod(e){return this._ctx.callMethod(e)}repeat(e,s){return this._ctx.repeat(e,s)}repeatForever(e){return this._ctx.repeatForever(e)}follow(e,s){return this._ctx.follow(e,s)}meet(e,s){return this._ctx.meet(e,s)}toPromise(){return this._ctx.toPromise()}}var da;(function(d){d.Em="em",d.Rem="rem",d.Px="px",d.Pt="pt",d.Percent="%"})(da||(da={}));var fa;(function(d){d.Left="left",d.Right="right",d.Center="center",d.Start="start",d.End="end"})(fa||(fa={}));var pa;(function(d){d.Top="top",d.Hanging="hanging",d.Middle="middle",d.Alphabetic="alphabetic",d.Ideographic="ideographic",d.Bottom="bottom"})(pa||(pa={}));var ga;(function(d){d.Normal="normal",d.Italic="italic",d.Oblique="oblique"})(ga||(ga={}));var ma;(function(d){d.LeftToRight="ltr",d.RightToLeft="rtl"})(ma||(ma={}));class Ms extends Ae{constructor(e={}){var s,o,u,h,g,_,y,b,E,D,F,z,j,X,Y,U,V,et,q;super(e),this.filtering=Ke.Blended,this.quality=2,this.padding=2,this.smoothing=!1,this.lineWidth=1,this.lineDash=[],this.color=B.Black,this.family="sans-serif",this.style=ga.Normal,this.bold=!1,this.unit=da.Px,this.textAlign=fa.Left,this.baseAlign=pa.Alphabetic,this.direction=ma.LeftToRight,this.size=10,this.shadow=null,this._textBounds=new Q,this._cachedTextMeasurement=new Map,this._bitmapToTextMeasurement=new Map,this._textToBitmap=new Map,this._bitmapUsage=new Map,this._textFragments=[],this.smoothing=(s=e==null?void 0:e.smoothing)!==null&&s!==void 0?s:this.smoothing,this.padding=(o=e==null?void 0:e.padding)!==null&&o!==void 0?o:this.padding,this.color=(u=e==null?void 0:e.color)!==null&&u!==void 0?u:this.color,this.strokeColor=(h=e==null?void 0:e.strokeColor)!==null&&h!==void 0?h:this.strokeColor,this.lineDash=(g=e==null?void 0:e.lineDash)!==null&&g!==void 0?g:this.lineDash,this.lineWidth=(_=e==null?void 0:e.lineWidth)!==null&&_!==void 0?_:this.lineWidth,this.filtering=(y=e==null?void 0:e.filtering)!==null&&y!==void 0?y:this.filtering,this.family=(b=e==null?void 0:e.family)!==null&&b!==void 0?b:this.family,this.style=(E=e==null?void 0:e.style)!==null&&E!==void 0?E:this.style,this.bold=(D=e==null?void 0:e.bold)!==null&&D!==void 0?D:this.bold,this.size=(F=e==null?void 0:e.size)!==null&&F!==void 0?F:this.size,this.unit=(z=e==null?void 0:e.unit)!==null&&z!==void 0?z:this.unit,this.textAlign=(j=e==null?void 0:e.textAlign)!==null&&j!==void 0?j:this.textAlign,this.baseAlign=(X=e==null?void 0:e.baseAlign)!==null&&X!==void 0?X:this.baseAlign,this.direction=(Y=e==null?void 0:e.direction)!==null&&Y!==void 0?Y:this.direction,this.quality=(U=e==null?void 0:e.quality)!==null&&U!==void 0?U:this.quality,e!=null&&e.shadow&&(this.shadow={},this.shadow.blur=(V=e.shadow.blur)!==null&&V!==void 0?V:this.shadow.blur,this.shadow.offset=(et=e.shadow.offset)!==null&&et!==void 0?et:this.shadow.offset,this.shadow.color=(q=e.shadow.color)!==null&&q!==void 0?q:this.shadow.color)}clone(){return new Ms({...this.cloneGraphicOptions(),size:this.size,unit:this.unit,family:this.family,style:this.style,bold:this.bold,textAlign:this.textAlign,baseAlign:this.baseAlign,direction:this.direction,shadow:this.shadow?{blur:this.shadow.blur,offset:this.shadow.offset,color:this.shadow.color}:null})}get fontString(){return`${this.style} ${this.bold?"bold":""} ${this.size}${this.unit} ${this.family}`}get localBounds(){return this._textBounds}_drawImage(e,s,o){}_rotate(e){var s;const o=(s=this.origin)!==null&&s!==void 0?s:this._textBounds.center;e.translate(o.x,o.y),e.rotate(this.rotation),e.translate(-o.x,-o.y)}_flip(e){this.flipHorizontal&&(e.translate(this._textBounds.width/this.scale.x,0),e.scale(-1,1)),this.flipVertical&&(e.translate(0,-this._textBounds.height/2/this.scale.y),e.scale(1,-1))}measureText(e){let s=!1,o=this._cachedTextMeasurement.get(e);o||(s=!0);const u=this._getRasterPropertiesHash();if((!o||u!==o.rasterProps)&&(s=!0),s){const h=e.split(`
`),g=h.reduce((X,Y)=>X.length>Y.length?X:Y),_=this._getTextBitmap(e);this._applyFont(_);const y=_.measureText(g);let b=Math.abs(y.actualBoundingBoxAscent)+Math.abs(y.actualBoundingBoxDescent);const E=b*h.length;b=E;const D=E-Math.abs(y.actualBoundingBoxAscent),F=0,z=0,j=new Q({left:F-Math.abs(y.actualBoundingBoxLeft)-this.padding,top:z-Math.abs(y.actualBoundingBoxAscent)-this.padding,bottom:z+D+this.padding,right:F+Math.abs(y.actualBoundingBoxRight)+this.padding});return o={text:e,rasterProps:u,measurement:j},this._cachedTextMeasurement.set(e,o),this._bitmapToTextMeasurement.set(_,o),o.measurement}else return o.measurement}_setDimension(e,s){s.canvas.width=(e.width+this.padding*2)*2*this.quality,s.canvas.height=(e.height+this.padding*2)*2*this.quality}_postDraw(e){e.restore()}_getRasterPropertiesHash(e){var s,o;return"__hashcode__"+this.fontString+this.showDebug+this.textAlign+this.baseAlign+this.direction+JSON.stringify(this.shadow)+(this.padding.toString()+this.smoothing.toString()+this.lineWidth.toString()+this.lineDash.toString()+((s=this.strokeColor)===null||s===void 0?void 0:s.toString())+(e?e.toString():(o=this.color)===null||o===void 0?void 0:o.toString()).toString())}_applyRasterProperties(e,s){var o,u,h;e.translate(this.padding,this.padding),e.imageSmoothingEnabled=this.smoothing,e.lineWidth=this.lineWidth,e.setLineDash((o=this.lineDash)!==null&&o!==void 0?o:e.getLineDash()),e.strokeStyle=(u=this.strokeColor)===null||u===void 0?void 0:u.toString(),e.fillStyle=s?s.toString():(h=this.color)===null||h===void 0?void 0:h.toString()}_applyFont(e){e.translate(this.padding+e.canvas.width/2,this.padding+e.canvas.height/2),e.scale(this.quality,this.quality),e.textAlign=this.textAlign,e.textBaseline=this.baseAlign,e.font=this.fontString,e.direction=this.direction,this.shadow&&(e.shadowColor=this.shadow.color.toString(),e.shadowBlur=this.shadow.blur,e.shadowOffsetX=this.shadow.offset.x,e.shadowOffsetY=this.shadow.offset.y)}_drawText(e,s,o,u){const h=s.split(`
`);this._applyRasterProperties(e,o),this._applyFont(e);for(let g=0;g<h.length;g++){const _=h[g];this.color&&e.fillText(_,0,g*u),this.strokeColor&&e.strokeText(_,0,g*u)}this.showDebug&&(nc(e,B.Red,-e.canvas.width/2,0,e.canvas.width/2,0,2),nc(e,B.Red,0,-e.canvas.height/2,0,e.canvas.height/2,2))}_getTextBitmap(e,s){const o=e+this._getRasterPropertiesHash(s),u=this._textToBitmap.get(o);if(u)return u;const g=document.createElement("canvas").getContext("2d");return this._textToBitmap.set(o,g),g}_splitTextBitmap(e){const s=[];let o=0,u=0;const h=Math.min(4096,e.canvas.width),g=Math.min(4096,e.canvas.height);for(;o<e.canvas.width;){for(;u<e.canvas.height;){const _=document.createElement("canvas");_.width=h,_.height=g,_.getContext("2d").drawImage(e.canvas,o,u,h,g,0,0,h,g),s.push({x:o,y:u,canvas:_}),u+=g}o+=h,u=0}return s}render(e,s,o,u,h){this.showDebug&&this.clearCache(),this.checkAndClearCache();const g=this._getTextBitmap(s,o),_=!this._bitmapUsage.get(g);this._textBounds=this.measureText(s),_&&this._setDimension(this._textBounds,g),this._preDraw(e,u,h);const y=s.split(`
`),b=this._textBounds.height/y.length;if(_){this._drawText(g,s,o,b);for(const E of this._textFragments)wt.delete(E.canvas);this._textFragments=this._splitTextBitmap(g);for(const E of this._textFragments)wt.load(E.canvas,this.filtering,!0)}for(const E of this._textFragments)e.drawImage(E.canvas,0,0,E.canvas.width,E.canvas.height,E.x/this.quality+u-g.canvas.width/this.quality/2,E.y/this.quality+h-g.canvas.height/this.quality/2,E.canvas.width/this.quality,E.canvas.height/this.quality);this._postDraw(e),this._bitmapUsage.set(g,performance.now())}get cacheSize(){return this._bitmapUsage.size}clearCache(){this._bitmapUsage.clear()}checkAndClearCache(){for(const[e,s]of this._bitmapUsage.entries())if(s+1e3<performance.now()){this._bitmapUsage.delete(e);const o=this._bitmapToTextMeasurement.get(e);o&&(this._cachedTextMeasurement.delete(o.text),this._bitmapToTextMeasurement.delete(e)),wt.delete(e.canvas)}}}class Dr extends Ae{constructor(e){var s,o;super(e),this._text="",this._textWidth=0,this._textHeight=0,this.font=(s=e.font)!==null&&s!==void 0?s:new Ms,this.color=(o=e.color)!==null&&o!==void 0?o:this.color,this.text=e.text}clone(){var e,s;return new Dr({text:this.text.slice(),color:(s=(e=this.color)===null||e===void 0?void 0:e.clone())!==null&&s!==void 0?s:B.Black,font:this.font.clone()})}get text(){return this._text}set text(e){this._text=e;const s=this.font.measureText(this._text);this._textWidth=s.width,this._textHeight=s.height}get font(){return this._font}set font(e){this._font=e}get width(){return this._textWidth===0&&this._calculateDimension(),this._textWidth*this.scale.x}get height(){return this._textHeight===0&&this._calculateDimension(),this._textHeight*this.scale.y}_calculateDimension(){const{width:e,height:s}=this.font.measureText(this._text);this._textWidth=e,this._textHeight=s}get localBounds(){return this.font.measureText(this._text).scale(this.scale)}_rotate(e){}_flip(e){}_drawImage(e,s,o){var u;let h=B.Black;this.font instanceof Ms&&(h=(u=this.color)!==null&&u!==void 0?u:this.font.color),(this.isStale()||this.font.isStale())&&(this.font.flipHorizontal=this.flipHorizontal,this.font.flipVertical=this.flipVertical,this.font.rotation=this.rotation,this.font.origin=this.origin,this.font.opacity=this.opacity),this.font.tint=this.tint;const{width:g,height:_}=this.font.measureText(this._text);this._textWidth=g,this._textHeight=_,this.font.render(e,this._text,h,s,o),this.font.showDebug&&e.debug.drawRect(s-g,o-_,g*2,_*2)}}class Li extends ae{constructor(e){super(),this._anchor=Gn(C.Half,W=>this._handleAnchorChange(W)),this.logger=N.getInstance(),this.scene=null,this._draggable=!1,this._dragging=!1,this._pointerDragStartHandler=()=>{this._dragging=!0},this._pointerDragEndHandler=()=>{this._dragging=!1},this._pointerDragMoveHandler=W=>{this._dragging&&(this.pos=W.worldPos)},this._pointerDragLeaveHandler=W=>{this._dragging&&(this.pos=W.worldPos)};const{name:s,x:o,y:u,pos:h,coordPlane:g,scale:_,width:y,height:b,radius:E,collider:D,vel:F,acc:z,rotation:j,angularVelocity:X,z:Y,color:U,visible:V,anchor:et,collisionType:q,collisionGroup:ht}={...e};this._setName(s),this.anchor=et??Li.defaults.anchor.clone();const nt=new tt;this.addComponent(nt),this.pos=h??R(o??0,u??0),this.rotation=j??0,this.scale=_??R(1,1),this.z=Y??0,nt.coordPlane=g??Ne.World,this.addComponent(new Rs),this.addComponent(new xe({anchor:this.anchor})),this.addComponent(new $t),this.vel=F??C.Zero,this.acc=z??C.Zero,this.angularVelocity=X??0,this.addComponent(new Ds),this.addComponent(new mt),this.body.collisionType=q??pt.Passive,ht&&(this.body.group=ht),D?this.addComponent(new Kt(D)):E?this.addComponent(new Kt(oe.Circle(E))):y>0&&b>0?this.addComponent(new Kt(oe.Box(y,b,this.anchor))):this.addComponent(new Kt),this.graphics.visible=V??!0,U&&(this.color=U,y&&b?this.graphics.add(new ca({color:U,width:y,height:b})):E&&this.graphics.add(new ha({color:U,radius:E})))}get body(){return this.get(mt)}get transform(){return this.get(tt)}get motion(){return this.get($t)}get graphics(){return this.get(xe)}get collider(){return this.get(Kt)}get pointer(){return this.get(Rs)}get actions(){return this.get(Ds)}get pos(){return this.transform.pos}set pos(e){this.transform.pos=e.clone()}get oldPos(){return this.body.oldPos}set oldPos(e){this.body.oldPos.setTo(e.x,e.y)}get vel(){return this.motion.vel}set vel(e){this.motion.vel=e.clone()}get oldVel(){return this.body.oldVel}set oldVel(e){this.body.oldVel.setTo(e.x,e.y)}get acc(){return this.motion.acc}set acc(e){this.motion.acc=e.clone()}set oldAcc(e){this.body.oldAcc.setTo(e.x,e.y)}get oldAcc(){return this.body.oldAcc}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angularVelocity(){return this.motion.angularVelocity}set angularVelocity(e){this.motion.angularVelocity=e}get scale(){return this.get(tt).scale}set scale(e){this.get(tt).scale=e}get anchor(){return this._anchor}set anchor(e){this._anchor=Gn(e,s=>this._handleAnchorChange(s)),this._handleAnchorChange(e)}_handleAnchorChange(e){this.graphics&&(this.graphics.anchor=e)}get isOffScreen(){return this.hasTag("ex.offscreen")}get draggable(){return this._draggable}set draggable(e){e&&(e&&!this._draggable?(this.on("pointerdragstart",this._pointerDragStartHandler),this.on("pointerdragend",this._pointerDragEndHandler),this.on("pointerdragmove",this._pointerDragMoveHandler),this.on("pointerdragleave",this._pointerDragLeaveHandler)):!e&&this._draggable&&(this.off("pointerdragstart",this._pointerDragStartHandler),this.off("pointerdragend",this._pointerDragEndHandler),this.off("pointerdragmove",this._pointerDragMoveHandler),this.off("pointerdragleave",this._pointerDragLeaveHandler)),this._draggable=e)}get color(){return this._color}set color(e){var s;this._color=e.clone();const u=(s=this.graphics.layers.default.graphics[0])===null||s===void 0?void 0:s.graphic;(u instanceof ks||u instanceof Dr)&&(u.color=this._color)}onInitialize(e){}_initialize(e){super._initialize(e);for(const s of this.children)s._initialize(e)}on(e,s){super.on(e,s)}once(e,s){super.once(e,s)}off(e,s){super.off(e,s)}_prekill(e){super.emit("prekill",new jn(this)),this.onPreKill(e)}onPreKill(e){}_postkill(e){super.emit("postkill",new en(this)),this.onPostKill(e)}onPostKill(e){}kill(){this.scene?(this._prekill(this.scene),this.emit("kill",new Sr(this)),super.kill(),this._postkill(this.scene)):this.logger.warn("Cannot kill actor, it was never added to the Scene")}unkill(){this.active=!0}isKilled(){return!this.active}get z(){return this.get(tt).z}set z(e){this.get(tt).z=e}get center(){const e=this.getGlobalPos();return new C(e.x+this.width/2-this.anchor.x*this.width,e.y+this.height/2-this.anchor.y*this.height)}get localCenter(){return new C(this.pos.x+this.width/2-this.anchor.x*this.width,this.pos.y+this.height/2-this.anchor.y*this.height)}get width(){return this.collider.localBounds.width*this.getGlobalScale().x}get height(){return this.collider.localBounds.height*this.getGlobalScale().y}getGlobalRotation(){return this.get(tt).globalRotation}getGlobalPos(){return this.get(tt).globalPos}getGlobalScale(){return this.get(tt).globalScale}contains(e,s,o=!1){const u=R(e,s),h=this.get(Kt);h.update();const g=h.get();if(!g)return!1;const _=g.contains(u);return o?_||this.children.some(y=>y.contains(e,s,!0)):_}within(e,s){const o=this.get(Kt),u=e.get(Kt),h=o.get(),g=u.get();return h&&g?h.getClosestLineBetween(g).getLength()<=s:!1}update(e,s){this._initialize(e),this._preupdate(e,s),this._postupdate(e,s)}onPreUpdate(e,s){}onPostUpdate(e,s){}_preupdate(e,s){this.emit("preupdate",new Di(e,s,this)),this.onPreUpdate(e,s)}_postupdate(e,s){this.emit("postupdate",new Di(e,s,this)),this.onPostUpdate(e,s)}}Li.defaults={anchor:C.Half};function Ap(d){return d instanceof _c}class _c extends Li{constructor(e){super({...e}),this.get(tt).coordPlane=Ne.Screen,this.anchor=R(0,0),this.body.collisionType=pt.PreventCollision,this.collider.useBoxCollider(this.width,this.height,this.anchor)}_initialize(e){this._engine=e,super._initialize(e)}contains(e,s,o=!0){if(o)return super.contains(e,s);const u=this._engine.worldToScreenCoordinates(new C(e,s));return super.contains(u.x,u.y)}}class Fs{constructor(e,s,o,u,h,g){if(this._logger=N.getInstance(),this.id=0,this._elapsedTime=0,this._totalTimeAlive=0,this._running=!1,this._numberOfTicks=0,this.interval=10,this.repeats=!1,this.maxNumberOfRepeats=-1,this.randomRange=[0,0],this._baseInterval=10,this._generateRandomInterval=()=>this._baseInterval+this.random.integer(this.randomRange[0],this.randomRange[1]),this._complete=!1,this.scene=null,typeof e!="function"){const _=e;e=_.fcn,s=_.interval,o=_.repeats,u=_.numberOfRepeats,h=_.randomRange,g=_.random}if(u&&u>=0&&(this.maxNumberOfRepeats=u,!o))throw new Error("repeats must be set to true if numberOfRepeats is set");if(this.id=Fs._MAX_ID++,this._callbacks=[],this._baseInterval=this.interval=s,h){if(h[0]>h[1])throw new Error("min value must be lower than max value for range");this.random=g??new m,this.randomRange=h,this.interval=this._generateRandomInterval(),this.on(()=>{this.interval=this._generateRandomInterval()})}this.repeats=o||this.repeats,e&&this.on(e)}get complete(){return this._complete}on(e){this._callbacks.push(e)}off(e){const s=this._callbacks.indexOf(e);this._callbacks.splice(s,1)}update(e){this._running&&(this._totalTimeAlive+=e,this._elapsedTime+=e,this.maxNumberOfRepeats>-1&&this._numberOfTicks>=this.maxNumberOfRepeats&&(this._complete=!0,this._running=!1,this._elapsedTime=0),!this.complete&&this._elapsedTime>=this.interval&&(this._callbacks.forEach(s=>{s.call(this)}),this._numberOfTicks++,this.repeats?this._elapsedTime=0:(this._complete=!0,this._running=!1,this._elapsedTime=0)))}reset(e,s){if(e&&e>=0&&(this._baseInterval=this.interval=e),this.maxNumberOfRepeats&&this.maxNumberOfRepeats>=0&&(this.maxNumberOfRepeats=s,!this.repeats))throw new Error("repeats must be set to true if numberOfRepeats is set");this._complete=!1,this._elapsedTime=0,this._numberOfTicks=0}get timesRepeated(){return this._numberOfTicks}getTimeRunning(){return this._totalTimeAlive}get timeToNextAction(){return this.complete?0:this.interval-this._elapsedTime}get timeElapsedTowardNextAction(){return this._elapsedTime}get isRunning(){return this._running}pause(){return this._running=!1,this}resume(){return this._running=!0,this}start(){return this.scene||this._logger.warn("Cannot start a timer not part of a scene, timer wont start until added"),this._running=!0,this.complete&&(this._complete=!1,this._elapsedTime=0,this._numberOfTicks=0),this}stop(){return this._running=!1,this._elapsedTime=0,this._numberOfTicks=0,this}cancel(){this.pause(),this.scene&&this.scene.cancelTimer(this)}}Fs._MAX_ID=0;class _a extends ze{constructor(e){super(),this.type="ex.parallax",this.parallaxFactor=R(1,1),this.parallaxFactor=e??this.parallaxFactor}}class va extends ze{constructor(e,s=!0){super(),this.draw=e,this.useTransform=s,this.type="ex.debuggraphics"}}class kp extends ae{constructor(e){var s,o;super(null,e.name),this._token=0,this._onScreenXStart=0,this._onScreenXEnd=Number.MAX_VALUE,this._onScreenYStart=0,this._onScreenYEnd=Number.MAX_VALUE,this.logger=N.getInstance(),this.tiles=[],this._rows=[],this._cols=[],this.renderFromTopOfGraphic=!1,this._collidersDirty=!0,this._originalOffsets=new WeakMap,this.addComponent(new tt),this.addComponent(new $t),this.addComponent(new mt({type:pt.Fixed})),this.addComponent(new xe({onPostDraw:(h,g)=>this.draw(h,g)})),this.addComponent(new va(h=>this.debug(h))),this.addComponent(new Kt),this._graphics=this.get(xe),this._transform=this.get(tt),this._motion=this.get($t),this._collider=this.get(Kt),this._composite=this._collider.useCompositeCollider([]),this._transform.pos=(s=e.pos)!==null&&s!==void 0?s:C.Zero,this._oldPos=this._transform.pos,this.renderFromTopOfGraphic=(o=e.renderFromTopOfGraphic)!==null&&o!==void 0?o:this.renderFromTopOfGraphic,this.tileWidth=e.tileWidth,this.tileHeight=e.tileHeight,this.rows=e.rows,this.columns=e.columns,this.tiles=new Array(this.rows*this.columns),this._rows=new Array(this.rows),this._cols=new Array(this.columns);let u=[];for(let h=0;h<this.columns;h++){for(let g=0;g<this.rows;g++){const _=new Ip({x:h,y:g,map:this});_.map=this,this.tiles[h+g*this.columns]=_,u.push(_),this._rows[g]||(this._rows[g]=[]),this._rows[g].push(_)}this._cols[h]=u,u=[]}this._graphics.localBounds=new Q({left:0,top:0,right:this.columns*this.tileWidth,bottom:this.rows*this.tileHeight})}flagCollidersDirty(){this._collidersDirty=!0}get x(){var e;return(e=this._transform.pos.x)!==null&&e!==void 0?e:0}set x(e){var s;!((s=this._transform)===null||s===void 0)&&s.pos&&(this.get(tt).pos=R(e,this.y))}get y(){var e,s;return(s=(e=this._transform)===null||e===void 0?void 0:e.pos.y)!==null&&s!==void 0?s:0}set y(e){var s;!((s=this._transform)===null||s===void 0)&&s.pos&&(this._transform.pos=R(this.x,e))}get z(){var e;return(e=this._transform.z)!==null&&e!==void 0?e:0}set z(e){this._transform&&(this._transform.z=e)}get rotation(){var e,s;return(s=(e=this._transform)===null||e===void 0?void 0:e.rotation)!==null&&s!==void 0?s:0}set rotation(e){var s;!((s=this._transform)===null||s===void 0)&&s.rotation&&(this._transform.rotation=e)}get scale(){var e,s;return(s=(e=this._transform)===null||e===void 0?void 0:e.scale)!==null&&s!==void 0?s:C.One}set scale(e){var s;!((s=this._transform)===null||s===void 0)&&s.scale&&(this._transform.scale=e)}get pos(){return this._transform.pos}set pos(e){this._transform.pos=e}get vel(){return this._motion.vel}set vel(e){this._motion.vel=e}on(e,s){super.on(e,s)}_initialize(e){super._initialize(e)}_getOrSetColliderOriginalOffset(e){if(this._originalOffsets.has(e))return this._originalOffsets.get(e);{const s=e.offset;return this._originalOffsets.set(e,s),s}}_updateColliders(){this._composite.clearColliders();const e=[];this._composite=this._collider.useCompositeCollider([]);let s;for(let o=0;o<this.columns;o++){for(let u=0;u<this.rows;u++){u===0&&(s=null);const h=this.tiles[o+u*this.columns];if(h.solid)if(h.getColliders().length>0){for(const g of h.getColliders()){const _=this._getOrSetColliderOriginalOffset(g);g.offset=R(h.x*this.tileWidth,h.y*this.tileHeight).add(_),g.owner=this,this._composite.addCollider(g)}s=null}else s?s=s.combine(h.bounds):s=h.bounds;else s&&e.push(s),s=null}if(s){const u=e[e.length-1];u&&u.top===s.top&&u.bottom===s.bottom?e[e.length-1]=u.combine(s):e.push(s)}}for(const o of e){const u=oe.Box(o.width,o.height,C.Zero,R(o.left-this.pos.x,o.top-this.pos.y));u.owner=this,this._composite.addCollider(u)}this._collider.update()}getTileByIndex(e){return this.tiles[e]}getTile(e,s){return e<0||s<0||e>=this.columns||s>=this.rows?null:this.tiles[e+s*this.columns]}getTileByPoint(e){const s=Math.floor((e.x-this.pos.x)/this.tileWidth),o=Math.floor((e.y-this.pos.y)/this.tileHeight),u=this.getTile(s,o);return s>=0&&o>=0&&s<this.columns&&o<this.rows&&u?u:null}getRows(){return this._rows}getColumns(){return this._cols}update(e,s){if(this.onPreUpdate(e,s),this.emit("preupdate",new Di(e,s,this)),!this._oldPos.equals(this.pos)){this.flagCollidersDirty();for(let b=0;b<this.tiles.length;b++)this.tiles[b]&&this.tiles[b].flagDirty()}this._collidersDirty&&(this._collidersDirty=!1,this._updateColliders()),this._token++;const o=e.getWorldBounds(),u=R(o.left,o.top),h=R(o.right,o.bottom);let g=this.pos;const _=this.get(_a);let y=C.One;if(_){const b=C.One.sub(_.parallaxFactor);y=e.currentScene.camera.pos.scale(b),g=g.add(y)}this._onScreenXStart=Math.max(Math.floor((u.x-g.x)/this.tileWidth)-2,0),this._onScreenYStart=Math.max(Math.floor((u.y-g.y)/this.tileHeight)-2,0),this._onScreenXEnd=Math.max(Math.floor((h.x-g.x)/this.tileWidth)+2,0),this._onScreenYEnd=Math.max(Math.floor((h.y-g.y)/this.tileHeight)+2,0),this._transform.pos=R(this.x,this.y),this.onPostUpdate(e,s),this.emit("postupdate",new Hn(e,s,this))}draw(e,s){this.emit("predraw",new nn(e,s,this));let o=this._onScreenXStart;const u=Math.min(this._onScreenXEnd,this.columns);let h=this._onScreenYStart;const g=Math.min(this._onScreenYEnd,this.rows);let _,y,b;for(o;o<u;o++){for(h;h<g;h++)for(_=this.getTile(o,h).getGraphics(),y=0,b=_.length;y<b;y++){const E=_[y];if(E){fc(E)&&(E==null||E.tick(s,this._token));const D=this.renderFromTopOfGraphic?0:E.height-this.tileHeight;E.draw(e,o*this.tileWidth,h*this.tileHeight-D)}}h=this._onScreenYStart}this.emit("postdraw",new Pr(e,s,this))}debug(e){const s=this.tileWidth*this.columns,o=this.tileHeight*this.rows,u=C.Zero;for(let g=0;g<this.rows+1;g++){const _=R(0,g*this.tileHeight);e.drawLine(u.add(_),u.add(R(s,_.y)),B.Red,2)}for(let g=0;g<this.columns+1;g++){const _=R(g*this.tileWidth,0);e.drawLine(u.add(_),u.add(R(_.x,o)),B.Red,2)}const h=this._composite.getColliders();for(const g of h){const _=B.Gray;_.a=.5;const y=g.localBounds,b=g.worldPos.sub(this.pos);e.drawRectangle(b,y.width,y.height,_)}}}class Ip extends ae{constructor(e){var s,o;super(),this._posDirty=!1,this._solid=!1,this._graphics=[],this._colliders=[],this.data=new Map,this.x=e.x,this.y=e.y,this.map=e.map,this.width=e.map.tileWidth,this.height=e.map.tileHeight,this.solid=(s=e.solid)!==null&&s!==void 0?s:this.solid,this._graphics=(o=e.graphics)!==null&&o!==void 0?o:[],this._recalculate()}get pos(){return this._posDirty&&(this._recalculate(),this._posDirty=!1),this._pos}get solid(){return this._solid}set solid(e){var s;(s=this.map)===null||s===void 0||s.flagCollidersDirty(),this._solid=e}getGraphics(){return this._graphics}addGraphic(e){this._graphics.push(e)}removeGraphic(e){xt(e,this._graphics)}clearGraphics(){this._graphics.length=0}getColliders(){return this._colliders}addCollider(e){this._colliders.push(e),this.map.flagCollidersDirty()}removeCollider(e){const s=this._colliders.indexOf(e);s>-1&&this._colliders.splice(s,1),this.map.flagCollidersDirty()}clearColliders(){this._colliders.length=0,this.map.flagCollidersDirty()}flagDirty(){return this._posDirty=!0}_recalculate(){this._pos=this.map.pos.add(R(this.x*this.map.tileWidth,this.y*this.map.tileHeight)),this._bounds=new Q(this._pos.x,this._pos.y,this._pos.x+this.width,this._pos.y+this.height),this._posDirty=!1}get bounds(){return this._posDirty&&this._recalculate(),this._bounds}get center(){return this._posDirty&&this._recalculate(),new C(this._pos.x+this.width/2,this._pos.y+this.height/2)}}class Rp{constructor(e){this.camera=e}lockToActor(e){this.camera.addStrategy(new Dp(e))}lockToActorAxis(e,s){this.camera.addStrategy(new Mp(e,s))}elasticToActor(e,s,o){this.camera.addStrategy(new Fp(e,s,o))}radiusAroundActor(e,s){this.camera.addStrategy(new Lp(e,s))}limitCameraBounds(e){this.camera.addStrategy(new Bp(e))}}var ya;(function(d){d[d.X=0]="X",d[d.Y=1]="Y"})(ya||(ya={}));class Dp{constructor(e){this.target=e,this.action=(s,o,u,h)=>s.center}}class Mp{constructor(e,s){this.target=e,this.axis=s,this.action=(o,u,h,g)=>{const _=o.center,y=u.getFocus();return this.axis===ya.X?new C(_.x,y.y):new C(y.x,_.y)}}}class Fp{constructor(e,s,o){this.target=e,this.cameraElasticity=s,this.cameraFriction=o,this.action=(u,h,g,_)=>{const y=u.center;let b=h.getFocus(),E=h.vel.clone();const D=y.sub(b).scale(this.cameraElasticity);E=E.add(D);const F=E.scale(-1).scale(this.cameraFriction);return E=E.add(F),b=b.add(E),b}}}class Lp{constructor(e,s){this.target=e,this.radius=s,this.action=(o,u,h,g)=>{const _=o.center,y=u.getFocus(),b=_.sub(y),E=b.size;if(E>=this.radius){const D=E-this.radius;return y.add(b.normalize().scale(D))}return y}}}class Bp{constructor(e){this.target=e,this.boundSizeChecked=!1,this.action=(s,o,u,h)=>{const g=o.getFocus();this.boundSizeChecked||((s.bottom-s.top<u.drawHeight||s.right-s.left<u.drawWidth)&&N.getInstance().warn("Camera bounds should not be smaller than the engine viewport"),this.boundSizeChecked=!0);let _=g.x,y=g.y;return g.x<s.left+u.halfDrawWidth?_=s.left+u.halfDrawWidth:g.x>s.right-u.halfDrawWidth&&(_=s.right-u.halfDrawWidth),g.y<s.top+u.halfDrawHeight?y=s.top+u.halfDrawHeight:g.y>s.bottom-u.halfDrawHeight&&(y=s.bottom-u.halfDrawHeight),R(_,y)}}}class Op extends Je{constructor(){super(...arguments),this.transform=Et.identity(),this.inverse=Et.identity(),this._cameraStrategies=[],this.strategy=new Rp(this),this._z=1,this.dz=0,this.az=0,this.rotation=0,this._angularVelocity=0,this._posChanged=!1,this._pos=Yf(C.Zero,()=>this._posChanged=!0),this.vel=C.Zero,this.acc=C.Zero,this._cameraMoving=!1,this._currentLerpTime=0,this._lerpDuration=1e3,this._lerpStart=null,this._lerpEnd=null,this._isShaking=!1,this._shakeMagnitudeX=0,this._shakeMagnitudeY=0,this._shakeDuration=0,this._elapsedShakeTime=0,this._xShake=0,this._yShake=0,this._isZooming=!1,this._zoomStart=1,this._zoomEnd=1,this._currentZoomTime=0,this._zoomDuration=0,this._zoomEasing=Ot.EaseInOutCubic,this._easing=Ot.EaseInOutCubic,this._halfWidth=0,this._halfHeight=0,this._viewport=null,this._isInitialized=!1}get zoom(){return this._z}set zoom(e){this._z=e,this._engine&&(this._halfWidth=this._engine.halfDrawWidth,this._halfHeight=this._engine.halfDrawHeight)}get angularVelocity(){return this._angularVelocity}set angularVelocity(e){this._angularVelocity=e}get pos(){return this._pos}set pos(e){this._pos=Yf(e,()=>this._posChanged=!0),this._posChanged=!0}get x(){return this.pos.x}set x(e){!this._follow&&!this._cameraMoving&&(this.pos=R(e,this.pos.y))}get y(){return this.pos.y}set y(e){!this._follow&&!this._cameraMoving&&(this.pos=R(this.pos.x,e))}get dx(){return this.vel.x}set dx(e){this.vel=R(e,this.vel.y)}get dy(){return this.vel.y}set dy(e){this.vel=R(this.vel.x,e)}get ax(){return this.acc.x}set ax(e){this.acc=R(e,this.acc.y)}get ay(){return this.acc.y}set ay(e){this.acc=R(this.acc.x,e)}getFocus(){return this.pos}move(e,s,o=Ot.EaseInOutCubic){if(typeof o!="function")throw"Please specify an EasingFunction";return this._follow?Promise.reject(e):(this._lerpPromise&&this._lerpResolve&&this._lerpResolve(e),this._lerpPromise=new Promise(u=>{this._lerpResolve=u}),this._lerpStart=this.getFocus().clone(),this._lerpDuration=s,this._lerpEnd=e,this._currentLerpTime=0,this._cameraMoving=!0,this._easing=o,this._lerpPromise)}shake(e,s,o){this._isShaking=!0,this._shakeMagnitudeX=e,this._shakeMagnitudeY=s,this._shakeDuration=o}zoomOverTime(e,s=0,o=Ot.EaseInOutCubic){if(this._zoomPromise=new Promise(u=>{this._zoomResolve=u}),s)this._isZooming=!0,this._zoomEasing=o,this._currentZoomTime=0,this._zoomDuration=s,this._zoomStart=this.zoom,this._zoomEnd=e;else return this._isZooming=!1,this.zoom=e,Promise.resolve(!0);return this._zoomPromise}get viewport(){return this._viewport?this._viewport:new Q(0,0,0,0)}addStrategy(e){this._cameraStrategies.push(e)}removeStrategy(e){xt(e,this._cameraStrategies)}clearAllStrategies(){this._cameraStrategies.length=0}_preupdate(e,s){this.emit("preupdate",new Di(e,s,this)),this.onPreUpdate(e,s)}onPreUpdate(e,s){}_postupdate(e,s){this.emit("postupdate",new Hn(e,s,this)),this.onPostUpdate(e,s)}onPostUpdate(e,s){}get isInitialized(){return this._isInitialized}_initialize(e){if(!this.isInitialized){this._engine=e,this._screen=e.screen;const s=this._screen.resolution;let o=R(s.width/2,s.height/2);if(!this._engine.loadingComplete){const u=this._screen.peekResolution();u&&(o=R(u.width/2,u.height/2))}this._halfWidth=o.x,this._halfHeight=o.y,this._posChanged||(this.pos=o),this.updateTransform(),this.runStrategies(e,e.clock.elapsed()),this.updateViewport(),this.updateTransform(),this.onInitialize(e),super.emit("initialize",new Es(e,this)),this._isInitialized=!0}}onInitialize(e){}on(e,s){super.on(e,s)}off(e,s){super.off(e,s)}once(e,s){super.once(e,s)}runStrategies(e,s){for(const o of this._cameraStrategies)this.pos=o.action.call(o,o.target,this,e,s)}updateViewport(){this._viewport=new Q(this.x-this._halfWidth,this.y-this._halfHeight,this.x+this._halfWidth,this.y+this._halfHeight)}update(e,s){if(this._initialize(e),this._preupdate(e,s),this.pos=this.pos.add(this.vel.scale(s/1e3)),this.zoom+=this.dz*s/1e3,this.vel=this.vel.add(this.acc.scale(s/1e3)),this.dz+=this.az*s/1e3,this.rotation+=this.angularVelocity*s/1e3,this._isZooming)if(this._currentZoomTime<this._zoomDuration){const o=this._zoomEasing,u=o(this._currentZoomTime,this._zoomStart,this._zoomEnd,this._zoomDuration);this.zoom=u,this._currentZoomTime+=s}else this._isZooming=!1,this.zoom=this._zoomEnd,this._currentZoomTime=0,this._zoomResolve(!0);if(this._cameraMoving)if(this._currentLerpTime<this._lerpDuration){const u=Ot.CreateVectorEasingFunction(this._easing)(this._currentLerpTime,this._lerpStart,this._lerpEnd,this._lerpDuration);this.pos=u,this._currentLerpTime+=s}else{this.pos=this._lerpEnd;const o=this._lerpEnd.clone();this._lerpStart=null,this._lerpEnd=null,this._currentLerpTime=0,this._cameraMoving=!1,this._lerpResolve(o)}this._isDoneShaking()?(this._isShaking=!1,this._elapsedShakeTime=0,this._shakeMagnitudeX=0,this._shakeMagnitudeY=0,this._shakeDuration=0,this._xShake=0,this._yShake=0):(this._elapsedShakeTime+=s,this._xShake=(Math.random()*this._shakeMagnitudeX|0)+1,this._yShake=(Math.random()*this._shakeMagnitudeY|0)+1),this.runStrategies(e,s),this.updateViewport(),this.updateTransform(),this._postupdate(e,s)}draw(e){e.multiply(this.transform)}updateTransform(){const e=this._screen.resolution.width/this.zoom,s=this._screen.resolution.height/this.zoom,o=R(-this.x+e/2+this._xShake,-this.y+s/2+this._yShake);this.transform.reset(),this.transform.scale(this.zoom,this.zoom),this.transform.translate(o.x,o.y),this.transform.inverse(this.inverse)}_isDoneShaking(){return!this._isShaking||this._elapsedShakeTime>=this._shakeDuration}}const Fw={pos:C.Zero,width:10,height:10,visible:!1,action:()=>{},filter:()=>!0,repeat:-1};class Np extends Li{constructor(e){super({x:e.pos.x,y:e.pos.y,width:e.width,height:e.height}),this.action=()=>{},this.filter=()=>!0,this.repeat=-1,e={...Fw,...e},this.filter=e.filter||this.filter,this.repeat=e.repeat||this.repeat,this.action=e.action||this.action,e.target&&(this.target=e.target),this.graphics.visible=e.visible,this.body.collisionType=pt.Passive,this.eventDispatcher=new sn,this.events.on("collisionstart",s=>{this.filter(s.other)&&(this.emit("enter",new Zu(this,s.other)),this._dispatchAction(),this.repeat===0&&this.kill())}),this.events.on("collisionend",s=>{this.filter(s.other)&&this.emit("exit",new Qu(this,s.other))})}set target(e){this._target=e,this.filter=s=>s===e}get target(){return this._target}_initialize(e){super._initialize(e)}_dispatchAction(){this.repeat!==0&&(this.action.call(this),this.repeat--)}}var Ie;(function(d){d.Update="update",d.Draw="draw"})(Ie||(Ie={}));class ci{constructor(){this.priority=0}notify(e){}}class zp{constructor(e){this.data=e,this.type="Entity Added"}}function Mr(d){return!!d&&d.type==="Entity Added"}class Up{constructor(e){this.data=e,this.type="Entity Removed"}}function Lw(d){return!!d&&d.type==="Entity Removed"}class Vp{constructor(e){this._world=e,this.entities=[],this._entityIndex={},this._entitiesToRemove=[]}updateEntities(e,s){for(const o of this.entities)o.update(e.engine,s),o.active||this.removeEntity(o)}findEntitiesForRemoval(){for(const e of this.entities)e.active||this.removeEntity(e)}notify(e){lp(e)&&this._world.queryManager.addEntity(e.data.entity),cp(e)&&this._world.queryManager.removeComponent(e.data.entity,e.data.component)}addEntity(e){e.active=!0,e&&!this._entityIndex[e.id]&&(this._entityIndex[e.id]=e,this.entities.push(e),this._world.queryManager.addEntity(e),e.componentAdded$.register(this),e.componentRemoved$.register(this),e.children.forEach(s=>this.addEntity(s)),e.childrenAdded$.register({notify:s=>{this.addEntity(s)}}),e.childrenRemoved$.register({notify:s=>{this.removeEntity(s,!1)}}))}removeEntity(e,s=!0){var o;let u=0;e instanceof ae?u=e.id:u=e;const h=this._entityIndex[u];if(h&&h.active&&h.kill(),h&&s){this._entitiesToRemove.push(h);return}delete this._entityIndex[u],h&&(xt(h,this.entities),this._world.queryManager.removeEntity(h),h.componentAdded$.unregister(this),h.componentRemoved$.unregister(this),h.children.forEach(g=>this.removeEntity(g,s)),h.childrenAdded$.clear(),h.childrenRemoved$.clear(),!((o=this._world.context)===null||o===void 0)&&o.engine&&this._world.context.engine.stats.currFrame.actors.killed++)}processEntityRemovals(){for(const e of this._entitiesToRemove)e.active||this.removeEntity(e,!1)}processComponentRemovals(){for(const e of this.entities)e.processComponentRemoval()}getById(e){return this._entityIndex[e]}getByName(e){return this.entities.filter(s=>s.name===e)}clear(){for(const e of this.entities)this.removeEntity(e)}}const xa=d=>[...d].sort((s,o)=>s.localeCompare(o)).join("+");class jp extends wi{constructor(e){super(),this._entities=[],e[0]instanceof Function?this.types=e.map(s=>new s().type):this.types=e}get key(){return this._key?this._key:this._key=xa(this.types)}getEntities(e){return e&&this._entities.sort(e),this._entities}addEntity(e){!K(this._entities,e)&&this.matches(e)&&(this._entities.push(e),this.notifyAll(new zp(e)))}removeEntity(e){xt(e,this._entities)&&this.notifyAll(new Up(e))}clear(){this._entities.length=0;for(const e of this.observers)this.unregister(e)}matches(e){let s=[];e instanceof ae?s=e.types:s=e;let o=!0;for(const u of this.types)if(o=o&&s.indexOf(u)>-1,!o)return!1;return o}contain(e){return this.types.indexOf(e)>-1}}class Hp{constructor(e){this._world=e,this._queries={}}_addQuery(e){this._queries[xa(e.types)]=e;for(const s of this._world.entityManager.entities)e.addEntity(s)}maybeRemoveQuery(e){e.observers.length===0&&(e.clear(),delete this._queries[xa(e.types)])}addEntity(e){for(const s in this._queries)this._queries[s]&&this._queries[s].addEntity(e)}removeComponent(e,s){for(const o in this._queries)this._queries[o].contain(s.type)&&this._queries[o].removeEntity(e)}removeEntity(e){for(const s in this._queries)this._queries[s].removeEntity(e)}createQuery(e){const s=this.getQuery(e);if(s)return s;const o=new jp(e);return this._addQuery(o),o}getQuery(e){const s=xa(e);return this._queries[s]?this._queries[s]:null}}class $p{constructor(e){this._world=e,this.systems=[],this.initialized=!1}get(e){return this.systems.find(s=>s instanceof e)}addSystem(e){if(!e.types||e.types.length===0)throw new Error("Attempted to add a System without any types");const s=this._world.queryManager.createQuery(e.types);this.systems.push(e),this.systems.sort((o,u)=>o.priority-u.priority),s.register(e),this.initialized&&e.initialize&&e.initialize(this._world.context)}removeSystem(e){xt(e,this.systems);const s=this._world.queryManager.getQuery(e.types);s&&(s.unregister(e),this._world.queryManager.maybeRemoveQuery(s))}initialize(){if(!this.initialized){this.initialized=!0;for(const e of this.systems)e.initialize&&e.initialize(this._world.context)}}updateSystems(e,s,o){const u=this.systems.filter(h=>h.systemType===e);for(const h of u)h.preupdate&&h.preupdate(s,o);for(const h of u){const g=this._world.queryManager.getQuery(h.types).getEntities(h.sort);if(s instanceof Br)for(const _ of g)_._initialize(s==null?void 0:s.engine);h.update(g,o)}for(const h of u)h.postupdate&&h.postupdate(s,o)}clear(){for(const e of this.systems)this.removeSystem(e)}}class Wp{constructor(e){this.context=e,this.queryManager=new Hp(this),this.entityManager=new Vp(this),this.systemManager=new $p(this)}update(e,s){e===Ie.Update&&this.entityManager.updateEntities(this.context,s),this.systemManager.updateSystems(e,this.context,s),this.entityManager.findEntitiesForRemoval(),this.entityManager.processComponentRemovals(),this.entityManager.processEntityRemovals()}add(e){e instanceof ae&&this.entityManager.addEntity(e),e instanceof ci&&this.systemManager.addSystem(e)}remove(e,s=!0){e instanceof ae&&this.entityManager.removeEntity(e,s),e instanceof ci&&this.systemManager.removeSystem(e)}clearEntities(){this.entityManager.clear()}clearSystems(){this.systemManager.clear()}}class we{static integrate(e,s,o,u){const h=u/1e3;s.vel.addEqual(o.scale(h,we._ACC)),e.pos.add(s.vel.scale(h,we._VEL),we._POS).addEqual(o.scale(.5*h*h,we._VEL_ACC)),s.angularVelocity+=s.torque*(1/s.inertia)*h;const g=e.rotation+s.angularVelocity*h;e.scale.add(s.scaleFactor.scale(h,this._SCALE_FACTOR),we._SCALE),e.get().setTransform(we._POS,g,we._SCALE)}}we._POS=new C(0,0),we._SCALE=new C(1,1),we._ACC=new C(0,0),we._VEL=new C(0,0),we._VEL_ACC=new C(0,0),we._SCALE_FACTOR=new C(0,0);class Gp extends ci{constructor(){super(...arguments),this.types=["ex.transform","ex.motion"],this.systemType=Ie.Update,this.priority=-1}update(e,s){let o,u;for(let h=0;h<e.length;h++){o=e[h].get(tt),u=e[h].get($t);const g=e[h].get(mt);if(g!=null&&g.sleeping)continue;const _=u.acc.clone();(g==null?void 0:g.collisionType)===pt.Active&&(g!=null&&g.useGravity)&&_.addEqual(it.gravity),g==null||g.captureOldTransform(),we.integrate(o,u,_,s)}}}class Xp{constructor(){this.directionMap=new Map,this.distanceMap=new Map}solve(e){this.preSolve(e),e=e.filter(s=>!s.isCanceled()),e.sort((s,o)=>{const u=this.distanceMap.get(s.id),h=this.distanceMap.get(o.id);return u-h});for(const s of e)this.solvePosition(s),this.solveVelocity(s);return this.postSolve(e),e}preSolve(e){for(const s of e){const o=st.fromDirection(s.mtv),u=s.mtv.negate(),h=s.colliderA.worldPos.squareDistance(s.colliderB.worldPos);this.distanceMap.set(s.id,h),s.colliderA.events.emit("precollision",new $n(s.colliderA,s.colliderB,o,u)),s.colliderB.events.emit("precollision",new $n(s.colliderB,s.colliderA,st.getOpposite(o),u.negate()))}}postSolve(e){var s,o;for(const u of e){if(u.isCanceled())continue;const h=u.colliderA,g=u.colliderB,_=(s=h.owner)===null||s===void 0?void 0:s.get(mt),y=(o=g.owner)===null||o===void 0?void 0:o.get(mt);if(_&&y&&(_.collisionType===pt.Passive||y.collisionType===pt.Passive))continue;const b=st.fromDirection(u.mtv),E=u.mtv.negate();u.colliderA.events.emit("postcollision",new Wn(u.colliderA,u.colliderB,b,E)),u.colliderB.events.emit("postcollision",new Wn(u.colliderB,u.colliderA,st.getOpposite(b),E.negate()))}}solvePosition(e){var s,o;if(!e.colliderA.bounds.overlaps(e.colliderB.bounds,1e-4)){e.cancel();return}if(Math.abs(e.mtv.x)<1e-4&&Math.abs(e.mtv.y)<1e-4){e.cancel();return}let h=e.mtv;const g=e.colliderA,_=e.colliderB,y=(s=g.owner)===null||s===void 0?void 0:s.get(mt),b=(o=_.owner)===null||o===void 0?void 0:o.get(mt);if(y&&b){if(y.collisionType===pt.Passive||b.collisionType===pt.Passive)return;y.collisionType===pt.Active&&b.collisionType===pt.Active&&(h=h.scale(.5)),y.collisionType===pt.Active&&(y.globalPos.x-=h.x,y.globalPos.y-=h.y,g.update(y.transform.get())),b.collisionType===pt.Active&&(b.globalPos.x+=h.x,b.globalPos.y+=h.y,_.update(b.transform.get()))}}solveVelocity(e){var s,o;if(e.isCanceled())return;const u=e.colliderA,h=e.colliderB,g=(s=u.owner)===null||s===void 0?void 0:s.get(mt),_=(o=h.owner)===null||o===void 0?void 0:o.get(mt);if(g&&_){if(g.collisionType===pt.Passive||_.collisionType===pt.Passive)return;const y=e.normal,b=y.negate();if(g.collisionType===pt.Active&&g.vel.normalize().dot(b)<0){const E=y.scale(y.dot(g.vel.negate()));g.vel=g.vel.add(E)}if(_.collisionType===pt.Active&&_.vel.normalize().dot(y)<0){const E=b.scale(b.dot(_.vel.negate()));_.vel=_.vel.add(E)}}}}class Yp{constructor(e,s,o){this.point=e,this.local=s,this.contact=o,this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.aToContact=new C(0,0),this.bToContact=new C(0,0),this.originalVelocityAndRestitution=0,this.update()}update(){var e,s;const o=(e=this.contact.colliderA.owner)===null||e===void 0?void 0:e.get(mt),u=(s=this.contact.colliderB.owner)===null||s===void 0?void 0:s.get(mt);if(o&&u){const h=this.contact.normal,g=this.contact.tangent;this.aToContact=this.point.sub(o.globalPos),this.bToContact=this.point.sub(u.globalPos);const _=this.aToContact.cross(h),y=this.bToContact.cross(h);this.normalMass=o.inverseMass+u.inverseMass+o.inverseInertia*_*_+u.inverseInertia*y*y;const b=this.aToContact.cross(g),E=this.bToContact.cross(g);this.tangentMass=o.inverseMass+u.inverseMass+o.inverseInertia*b*b+u.inverseInertia*E*E}return this}getRelativeVelocity(){var e,s;const o=(e=this.contact.colliderA.owner)===null||e===void 0?void 0:e.get(mt),u=(s=this.contact.colliderB.owner)===null||s===void 0?void 0:s.get(mt);if(o&&u){const h=o.vel.add(C.cross(o.angularVelocity,this.aToContact));return u.vel.add(C.cross(u.angularVelocity,this.bToContact)).sub(h)}return C.Zero}}class Zp{constructor(){this.lastFrameContacts=new Map,this.idToContactConstraint=new Map}getContactConstraints(e){var s;return(s=this.idToContactConstraint.get(e))!==null&&s!==void 0?s:[]}solve(e){return this.preSolve(e),e=e.filter(s=>!s.isCanceled()),this.solveVelocity(e),this.solvePosition(e),this.postSolve(e),e}preSolve(e){var s,o,u;for(const g of e){const _=st.fromDirection(g.mtv);g.colliderA.events.emit("precollision",new $n(g.colliderA,g.colliderB,_,g.mtv)),g.colliderA.events.emit("beforecollisionresolve",new qo(g.colliderA,g.colliderB,_,g.mtv,g)),g.colliderB.events.emit("precollision",new $n(g.colliderB,g.colliderA,st.getOpposite(_),g.mtv.negate())),g.colliderB.events.emit("beforecollisionresolve",new qo(g.colliderB,g.colliderA,st.getOpposite(_),g.mtv.negate(),g)),g.matchAwake()}const h=Array.from(this.idToContactConstraint.keys());for(const g of e){const _=h.indexOf(g.id);_>-1&&h.splice(_,1);const y=(s=this.idToContactConstraint.get(g.id))!==null&&s!==void 0?s:[];let b=0;const E=g.colliderA.owner.get(mt),D=g.colliderB.owner.get(mt);if(E&&D)for(const F of g.points){const z=g.normal,j=g.tangent,X=F.sub(E.globalPos),Y=F.sub(D.globalPos),U=X.cross(z),V=Y.cross(z),et=E.inverseMass+D.inverseMass+E.inverseInertia*U*U+D.inverseInertia*V*V,q=X.cross(j),ht=Y.cross(j),nt=E.inverseMass+D.inverseMass+E.inverseInertia*q*q+D.inverseInertia*ht*ht;y[b]&&((u=(o=y[b])===null||o===void 0?void 0:o.point)===null||u===void 0?void 0:u.squareDistance(F))<4?(y[b].point=F,y[b].local=g.localPoints[b]):y[b]=new Yp(F,g.localPoints[b],g),y[b].aToContact=X,y[b].bToContact=Y,y[b].normalMass=1/et,y[b].tangentMass=1/nt;const W=E.bounciness>D.bounciness?E.bounciness:D.bounciness,At=g.normal.dot(y[b].getRelativeVelocity());y[b].originalVelocityAndRestitution=0,At<-.1&&(y[b].originalVelocityAndRestitution=-W*At),b++}this.idToContactConstraint.set(g.id,y)}for(const g of h)this.idToContactConstraint.delete(g);if(it.warmStart)this.warmStart(e);else for(const g of e){const _=this.getContactConstraints(g.id);for(const y of _)y.normalImpulse=0,y.tangentImpulse=0}}postSolve(e){for(const s of e){const o=s.colliderA.owner.get(mt),u=s.colliderB.owner.get(mt);if(o&&u){if(o.collisionType===pt.Passive||u.collisionType===pt.Passive)continue;o.updateMotion(),u.updateMotion()}const h=st.fromDirection(s.mtv);s.colliderA.events.emit("postcollision",new Wn(s.colliderA,s.colliderB,h,s.mtv)),s.colliderA.events.emit("aftercollisionresolve",new Jo(s.colliderA,s.colliderB,h,s.mtv,s)),s.colliderB.events.emit("postcollision",new Wn(s.colliderB,s.colliderA,st.getOpposite(h),s.mtv.negate())),s.colliderB.events.emit("aftercollisionresolve",new Jo(s.colliderB,s.colliderA,st.getOpposite(h),s.mtv.negate(),s))}this.lastFrameContacts.clear();for(const s of e)this.lastFrameContacts.set(s.id,s)}warmStart(e){var s,o,u;for(const h of e){const g=(s=h.colliderA.owner)===null||s===void 0?void 0:s.get(mt),_=(o=h.colliderB.owner)===null||o===void 0?void 0:o.get(mt);if(g&&_){const y=(u=this.idToContactConstraint.get(h.id))!==null&&u!==void 0?u:[];for(const b of y)if(it.warmStart){const E=h.normal.scale(b.normalImpulse),D=h.tangent.scale(b.tangentImpulse),F=E.add(D);g.applyImpulse(b.point,F.negate()),_.applyImpulse(b.point,F)}else b.normalImpulse=0,b.tangentImpulse=0}}}solvePosition(e){var s,o,u;for(let h=0;h<it.positionIterations;h++)for(const g of e){const _=(s=g.colliderA.owner)===null||s===void 0?void 0:s.get(mt),y=(o=g.colliderB.owner)===null||o===void 0?void 0:o.get(mt);if(_&&y){if(_.collisionType===pt.Passive||y.collisionType===pt.Passive)continue;const b=(u=this.idToContactConstraint.get(g.id))!==null&&u!==void 0?u:[];for(const E of b){const D=g.normal,F=ui.FindContactSeparation(g,E.local),z=it.steeringFactor,j=-5,X=it.slop,Y=S(z*(F+X),j,0),U=D.scale(-Y*E.normalMass);if(_.collisionType===pt.Active){const V=U.negate().scale(_.inverseMass);_.limitDegreeOfFreedom.includes(ye.X)&&(V.x=0),_.limitDegreeOfFreedom.includes(ye.Y)&&(V.y=0),_.globalPos=_.globalPos.add(V),_.limitDegreeOfFreedom.includes(ye.Rotation)||(_.rotation-=E.aToContact.cross(U)*_.inverseInertia)}if(y.collisionType===pt.Active){const V=U.scale(y.inverseMass);y.limitDegreeOfFreedom.includes(ye.X)&&(V.x=0),y.limitDegreeOfFreedom.includes(ye.Y)&&(V.y=0),y.globalPos=y.globalPos.add(V),y.limitDegreeOfFreedom.includes(ye.Rotation)||(y.rotation+=E.bToContact.cross(U)*y.inverseInertia)}}}}}solveVelocity(e){var s,o,u;for(let h=0;h<it.velocityIterations;h++)for(const g of e){const _=(s=g.colliderA.owner)===null||s===void 0?void 0:s.get(mt),y=(o=g.colliderB.owner)===null||o===void 0?void 0:o.get(mt);if(_&&y){if(_.collisionType===pt.Passive||y.collisionType===pt.Passive)continue;const b=Math.min(_.friction,y.friction),E=(u=this.idToContactConstraint.get(g.id))!==null&&u!==void 0?u:[];for(const D of E){let j=-D.getRelativeVelocity().dot(g.tangent)*D.tangentMass;const X=b*D.normalImpulse,Y=S(D.tangentImpulse+j,-X,X);j=Y-D.tangentImpulse,D.tangentImpulse=Y;const U=g.tangent.scale(j);_.applyImpulse(D.point,U.negate()),y.applyImpulse(D.point,U)}for(const D of E){const z=D.getRelativeVelocity().dot(g.normal);let j=-D.normalMass*(z-D.originalVelocityAndRestitution);const X=Math.max(D.normalImpulse+j,0);j=X-D.normalImpulse,D.normalImpulse=X;const Y=g.normal.scale(j);_.applyImpulse(D.point,Y.negate()),y.applyImpulse(D.point,Y)}}}}}class vc extends ci{constructor(){super(...arguments),this.types=["ex.transform","ex.motion","ex.collider"],this.systemType=Ie.Update,this.priority=-1,this._realisticSolver=new Zp,this._arcadeSolver=new Xp,this._processor=new hc,this._lastFrameContacts=new Map,this._currentFrameContacts=new Map,this._trackCollider=e=>this._processor.track(e),this._untrackCollider=e=>this._processor.untrack(e)}notify(e){if(Mr(e)){const s=e.data.get(Kt);s.$colliderAdded.subscribe(this._trackCollider),s.$colliderRemoved.subscribe(this._untrackCollider);const o=s.get();o&&this._processor.track(o)}else{const s=e.data.get(Kt),o=s.get();s&&o&&this._processor.untrack(o)}}initialize(e){this._engine=e.engine}update(e,s){var o,u,h,g;if(!it.enabled)return;let _=[];for(const D of e){const F=D.get(Kt),z=F==null?void 0:F.get();if(F&&(!((o=F.owner)===null||o===void 0)&&o.active)&&z)if(F.update(),z instanceof de){const j=z.getColliders();_=_.concat(j)}else _.push(z)}this._processor.update(_);const y=this._processor.broadphase(_,s);this._currentFrameContacts.clear();let b=this._processor.narrowphase(y,(g=(h=(u=this._engine)===null||u===void 0?void 0:u.debug)===null||h===void 0?void 0:h.stats)===null||g===void 0?void 0:g.currFrame);b=this.getSolver().solve(b);for(const D of b){const F=D.id.indexOf("|");if(F>0){const z=D.id.substring(F+1);this._currentFrameContacts.set(z,D)}else this._currentFrameContacts.set(D.id,D)}this.runContactStartEnd(),this._lastFrameContacts.clear(),this._lastFrameContacts=new Map(this._currentFrameContacts)}getSolver(){return it.collisionResolutionStrategy===Zn.Realistic?this._realisticSolver:this._arcadeSolver}debug(e){this._processor.debug(e)}runContactStartEnd(){for(const[e,s]of this._currentFrameContacts)if(!this._lastFrameContacts.has(e)){const o=s.colliderA,u=s.colliderB;o.events.emit("collisionstart",new Er(o,u,s)),o.events.emit("contactstart",new Qo(o,u,s)),u.events.emit("collisionstart",new Er(u,o,s)),u.events.emit("contactstart",new Qo(u,o,s))}for(const[e,s]of this._lastFrameContacts)if(!this._currentFrameContacts.has(e)){const o=s.colliderA,u=s.colliderB;o.events.emit("collisionend",new Tr(o,u)),o.events.emit("contactend",new Ko(o,u)),u.events.emit("collisionend",new Tr(u,o)),u.events.emit("contactend",new Ko(u,o))}}}var Fr;(function(d){d.Forward="forward",d.Backward="backward"})(Fr||(Fr={}));var hi;(function(d){d.End="end",d.Loop="loop",d.PingPong="pingpong",d.Freeze="freeze"})(hi||(hi={}));class un extends Ae{constructor(e){var s,o;super(e),this.events=new sn,this.frames=[],this.strategy=hi.Loop,this.frameDuration=100,this.timeScale=1,this._idempotencyToken=-1,this._firstTick=!0,this._currentFrame=0,this._timeLeftInFrame=0,this._direction=1,this._done=!1,this._playing=!0,this._reversed=!1,this.frames=e.frames,this.strategy=(s=e.strategy)!==null&&s!==void 0?s:this.strategy,this.frameDuration=e.totalDuration?e.totalDuration/this.frames.length:(o=e.frameDuration)!==null&&o!==void 0?o:this.frameDuration,e.reverse&&this.reverse(),this.goToFrame(0)}clone(){return new un({frames:this.frames.map(e=>({...e})),frameDuration:this.frameDuration,reverse:this._reversed,strategy:this.strategy,...this.cloneGraphicOptions()})}get width(){const e=this.currentFrame;return e?Math.abs(e.graphic.width*this.scale.x):0}get height(){const e=this.currentFrame;return e?Math.abs(e.graphic.height*this.scale.y):0}static fromSpriteSheet(e,s,o,u=hi.Loop){const h=e.sprites.length-1,g=s.filter(_=>_<0||_>h);return g.length&&un._LOGGER.warn(`Indices into SpriteSheet were provided that don't exist: ${g.join(",")} no frame will be shown`),new un({frames:e.sprites.filter((_,y)=>s.indexOf(y)>-1).map(_=>({graphic:_,duration:o})),strategy:u})}get currentFrame(){return this._currentFrame>=0&&this._currentFrame<this.frames.length?this.frames[this._currentFrame]:null}get currentFrameIndex(){return this._currentFrame}get isPlaying(){return this._playing}reverse(){this.frames=this.frames.slice().reverse(),this._reversed=!this._reversed}get direction(){return!!(this._reversed&&this._direction===1)?Fr.Backward:Fr.Forward}play(){this._playing=!0}pause(){this._playing=!1,this._firstTick=!0}reset(){this._done=!1,this._firstTick=!0,this._currentFrame=0}get canFinish(){switch(this.strategy){case hi.End:case hi.Freeze:return!0;default:return!1}}get done(){return this._done}goToFrame(e){this._currentFrame=e,this._timeLeftInFrame=this.frameDuration;const s=this.frames[this._currentFrame];s&&!this._done&&(this._timeLeftInFrame=(s==null?void 0:s.duration)||this.frameDuration,this.events.emit("frame",s))}_nextFrame(){const e=this._currentFrame;if(this._done)return e;let s=-1;switch(this.strategy){case hi.Loop:{s=(e+1)%this.frames.length,s===0&&this.events.emit("loop",this);break}case hi.End:{s=e+1,s>=this.frames.length&&(this._done=!0,this._currentFrame=this.frames.length,this.events.emit("end",this));break}case hi.Freeze:{s=S(e+1,0,this.frames.length-1),s>=this.frames.length-1&&(this._done=!0,this.events.emit("end",this));break}case hi.PingPong:{e+this._direction>=this.frames.length&&(this._direction=-1,this.events.emit("loop",this)),e+this._direction<0&&(this._direction=1,this.events.emit("loop",this)),s=e+this._direction%this.frames.length;break}}return s}tick(e,s=0){this._idempotencyToken!==s&&(this._idempotencyToken=s,this._playing&&(this._firstTick&&(this._firstTick=!1,this.events.emit("frame",this.currentFrame)),this._timeLeftInFrame-=e*this.timeScale,this._timeLeftInFrame<=0&&this.goToFrame(this._nextFrame())))}_drawImage(e,s,o){this.currentFrame&&this.currentFrame.graphic.draw(e,s,o)}}un._LOGGER=N.getInstance();class Lr extends Ae{constructor(e){super(e),this.members=[],this.members=e.members,this._updateDimensions()}clone(){return new Lr({members:[...this.members],...this.cloneGraphicOptions()})}_updateDimensions(){let e=new Q;for(const{graphic:s,pos:o}of this.members)e=s.localBounds.translate(o).combine(e);return this.width=e.width,this.height=e.height,e}get localBounds(){let e=new Q;for(const{graphic:s,pos:o}of this.members)e=s.localBounds.translate(o).combine(e);return e}_isAnimationOrGroup(e){return e instanceof un||e instanceof Lr}tick(e,s){for(const o of this.members){const u=o.graphic;this._isAnimationOrGroup(u)&&u.tick(e,s)}}reset(){for(const e of this.members){const s=e.graphic;this._isAnimationOrGroup(s)&&s.reset()}}_preDraw(e,s,o){this._updateDimensions(),super._preDraw(e,s,o)}_drawImage(e,s,o){for(const u of this.members)e.save(),e.translate(s,o),u.graphic.draw(e,u.pos.x,u.pos.y),this.showDebug&&e.debug.drawRect(0,0,this.width,this.height),e.restore()}}function Qp(d){return class extends d{assign(e){for(const s in e)typeof this[s]!="function"&&(this[s]=e[s])}constructor(...e){super(...e),e.filter(function(o){return o!==void 0}).length===1&&e[0]&&typeof e[0]=="object"&&!(e[0]instanceof Array)&&this.assign(e[0])}}}var Ls;(function(d){d[d.Circle=0]="Circle",d[d.Rectangle=1]="Rectangle"})(Ls||(Ls={}));class Bw extends ae{constructor(e,s,o,u,h,g,_,y,b,E){super(),this.position=new C(0,0),this.velocity=new C(0,0),this.acceleration=new C(0,0),this.particleRotationalVelocity=0,this.currentRotation=0,this.focus=null,this.focusAccel=0,this.opacity=1,this.beginColor=B.White,this.endColor=B.White,this.life=300,this.fadeFlag=!1,this._rRate=1,this._gRate=1,this._bRate=1,this._aRate=0,this._currentColor=B.White,this.emitter=null,this.particleSize=5,this.particleSprite=null,this.sizeRate=0,this.elapsedMultiplier=0,this.visible=!0,this.isOffscreen=!1;let D=e;if(D&&!(e instanceof Kp)){const F=e;D=F.emitter,s=F.life,o=F.opacity,h=F.endColor,u=F.beginColor,g=F.position,_=F.velocity,y=F.acceleration,b=F.startSize,E=F.endSize}this.emitter=D,this.life=s||this.life,this.opacity=o||this.opacity,this.endColor=h||this.endColor.clone(),this.beginColor=u||this.beginColor.clone(),this._currentColor=this.beginColor.clone(),this.position=(g||this.position).add(this.emitter.pos),this.velocity=_||this.velocity,this.acceleration=y||this.acceleration,this._rRate=(this.endColor.r-this.beginColor.r)/this.life,this._gRate=(this.endColor.g-this.beginColor.g)/this.life,this._bRate=(this.endColor.b-this.beginColor.b)/this.life,this._aRate=this.opacity/this.life,this.startSize=b||0,this.endSize=E||0,this.endSize>0&&this.startSize>0&&(this.sizeRate=(this.endSize-this.startSize)/this.life,this.particleSize=this.startSize),this.addComponent(this.transform=new tt),this.addComponent(this.graphics=new xe),this.transform.pos=this.position,this.transform.rotation=this.currentRotation,this.transform.scale=R(1,1),this.particleSprite?(this.graphics.opacity=this.opacity,this.graphics.use(this.particleSprite)):(this.graphics.localBounds=Q.fromDimension(this.particleSize,this.particleSize,C.Half),this.graphics.onPostDraw=F=>{F.save(),this.graphics.opacity=this.opacity;const z=this._currentColor.clone();z.a=1,F.debug.drawPoint(R(0,0),{color:z,size:this.particleSize}),F.restore()})}kill(){this.emitter.removeParticle(this)}update(e,s){if(this.life=this.life-s,this.elapsedMultiplier=this.elapsedMultiplier+s,this.life<0&&this.kill(),this.fadeFlag&&(this.opacity=S(this._aRate*this.life,1e-4,1)),this.startSize>0&&this.endSize>0&&(this.particleSize=S(this.sizeRate*s+this.particleSize,Math.min(this.startSize,this.endSize),Math.max(this.startSize,this.endSize))),this._currentColor.r=S(this._currentColor.r+this._rRate*s,0,255),this._currentColor.g=S(this._currentColor.g+this._gRate*s,0,255),this._currentColor.b=S(this._currentColor.b+this._bRate*s,0,255),this._currentColor.a=S(this.opacity,1e-4,1),this.focus){const o=this.focus.sub(this.position).normalize().scale(this.focusAccel).scale(s/1e3);this.velocity=this.velocity.add(o)}else this.velocity=this.velocity.add(this.acceleration.scale(s/1e3));this.position=this.position.add(this.velocity.scale(s/1e3)),this.particleRotationalVelocity&&(this.currentRotation=(this.currentRotation+this.particleRotationalVelocity*s/1e3)%(2*Math.PI)),this.transform.pos=this.position,this.transform.rotation=this.currentRotation,this.transform.scale=R(1,1),this.graphics.opacity=this.opacity}}class wa extends Qp(Bw){constructor(e,s,o,u,h,g,_,y,b,E){super(e,s,o,u,h,g,_,y,b,E)}}class Kp extends Li{constructor(e){var s,o;super({width:(s=e.width)!==null&&s!==void 0?s:0,height:(o=e.height)!==null&&o!==void 0?o:0}),this._particlesToEmit=0,this.numParticles=0,this.isEmitting=!0,this.particles=[],this.deadParticles=[],this.minVel=0,this.maxVel=0,this.acceleration=new C(0,0),this.minAngle=0,this.maxAngle=0,this.emitRate=1,this.particleLife=2e3,this.fadeFlag=!1,this.focus=null,this.focusAccel=null,this.startSize=null,this.endSize=null,this.minSize=5,this.maxSize=5,this.beginColor=B.White,this.endColor=B.White,this._sprite=null,this.emitterType=Ls.Rectangle,this.radius=0,this.particleRotationalVelocity=0,this.randomRotation=!1;const{x:u,y:h,pos:g,isEmitting:_,minVel:y,maxVel:b,acceleration:E,minAngle:D,maxAngle:F,emitRate:z,particleLife:j,opacity:X,fadeFlag:Y,focus:U,focusAccel:V,startSize:et,endSize:q,minSize:ht,maxSize:nt,beginColor:W,endColor:At,particleSprite:It,emitterType:Rt,radius:Pt,particleRotationalVelocity:le,randomRotation:di,random:fi}={...e};this.pos=g??R(u??0,h??0),this.isEmitting=_??this.isEmitting,this.minVel=y??this.minVel,this.maxVel=b??this.maxVel,this.acceleration=E??this.acceleration,this.minAngle=D??this.minAngle,this.maxAngle=F??this.maxAngle,this.emitRate=z??this.emitRate,this.particleLife=j??this.particleLife,this.opacity=X??this.opacity,this.fadeFlag=Y??this.fadeFlag,this.focus=U??this.focus,this.focusAccel=V??this.focusAccel,this.startSize=et??this.startSize,this.endSize=q??this.endSize,this.minSize=ht??this.minSize,this.maxSize=nt??this.maxSize,this.beginColor=W??this.beginColor,this.endColor=At??this.endColor,this.particleSprite=It??this.particleSprite,this.emitterType=Rt??this.emitterType,this.radius=Pt??this.radius,this.particleRotationalVelocity=le??this.particleRotationalVelocity,this.randomRotation=di??this.randomRotation,this.body.collisionType=pt.PreventCollision,this.random=fi??new m}get opacity(){return super.graphics.opacity}set opacity(e){super.graphics.opacity=e}get particleSprite(){return this._sprite}set particleSprite(e){e&&(this._sprite=e)}removeParticle(e){this.deadParticles.push(e)}emitParticles(e){var s;for(let o=0;o<e;o++){const u=this._createParticle();this.particles.push(u),!((s=this===null||this===void 0?void 0:this.scene)===null||s===void 0)&&s.world&&this.scene.world.add(u)}}clearParticles(){this.particles.length=0}_createParticle(){let e=0,s=0;const o=P(this.minAngle,this.maxAngle,this.random),u=P(this.minVel,this.maxVel,this.random),h=this.startSize||P(this.minSize,this.maxSize,this.random),g=u*Math.cos(o),_=u*Math.sin(o);if(this.emitterType===Ls.Rectangle)e=P(0,this.width,this.random),s=P(0,this.height,this.random);else if(this.emitterType===Ls.Circle){const b=P(0,this.radius,this.random);e=b*Math.cos(o),s=b*Math.sin(o)}const y=new wa(this,this.particleLife,this.opacity,this.beginColor,this.endColor,new C(e,s),new C(g,_),this.acceleration,this.startSize,this.endSize);return y.fadeFlag=this.fadeFlag,y.particleSize=h,this.particleSprite&&(y.particleSprite=this.particleSprite,y.graphics.opacity=this.opacity,y.graphics.use(this._sprite)),y.particleRotationalVelocity=this.particleRotationalVelocity,this.randomRotation&&(y.currentRotation=P(0,Math.PI*2,this.random)),this.focus&&(y.focus=this.focus.add(new C(this.pos.x,this.pos.y)),y.focusAccel=this.focusAccel),y}update(e,s){var o;super.update(e,s),this.isEmitting&&(this._particlesToEmit+=this.emitRate*(s/1e3),this._particlesToEmit>1&&(this.emitParticles(Math.floor(this._particlesToEmit)),this._particlesToEmit=this._particlesToEmit-Math.floor(this._particlesToEmit)));for(let u=0;u<this.deadParticles.length;u++)xt(this.deadParticles[u],this.particles),!((o=this===null||this===void 0?void 0:this.scene)===null||o===void 0)&&o.world&&this.scene.world.remove(this.deadParticles[u],!1);this.deadParticles.length=0}}class qp extends ci{constructor(){super(...arguments),this.types=["ex.transform","ex.graphics"],this.systemType=Ie.Draw,this.priority=0,this._token=0,this._sortedTransforms=[],this._zHasChanged=!1,this._zIndexUpdate=()=>{this._zHasChanged=!0}}get sortedTransforms(){return this._sortedTransforms}initialize(e){this._camera=e.camera,this._engine=e.engine}preupdate(){this._graphicsContext=this._engine.graphicsContext,this._zHasChanged&&(this._sortedTransforms.sort((e,s)=>e.z-s.z),this._zHasChanged=!1)}notify(e){if(Mr(e)){const s=e.data.get(tt);this._sortedTransforms.push(s),s.zIndexChanged$.subscribe(this._zIndexUpdate),this._zHasChanged=!0}else{const s=e.data.get(tt);s.zIndexChanged$.unsubscribe(this._zIndexUpdate);const o=this._sortedTransforms.indexOf(s);o>-1&&this._sortedTransforms.splice(o,1)}}update(e,s){this._token++;let o;this._graphicsContext.save(),this._camera&&this._camera.draw(this._graphicsContext);for(const u of this._sortedTransforms){const h=u.owner;if(h.hasTag("ex.offscreen")||(o=h.get(xe),!o.visible))continue;u.coordPlane===Ne.Screen&&this._graphicsContext.restore(),this._graphicsContext.save(),o.update(s,this._token);const g=h.get(_a);if(g){const y=C.One.sub(g.parallaxFactor),b=this._camera.pos.scale(y);this._graphicsContext.translate(b.x,b.y)}this._applyTransform(h),o.onPreDraw&&o.onPreDraw(this._graphicsContext,s);const _=h instanceof wa?h.opacity:1;this._graphicsContext.opacity=o.opacity*_,this._drawGraphicsComponent(o),o.onPostDraw&&o.onPostDraw(this._graphicsContext,s),this._graphicsContext.restore(),u.coordPlane===Ne.Screen&&(this._graphicsContext.save(),this._camera&&this._camera.draw(this._graphicsContext))}this._graphicsContext.restore()}_drawGraphicsComponent(e){var s,o;if(e.visible)for(const u of e.layers.get())for(const{graphic:h,options:g}of u.graphics){let _=e.anchor,y=e.offset;g!=null&&g.anchor&&(_=g.anchor),g!=null&&g.offset&&(y=g.offset);const b=-h.width*_.x+y.x,E=-h.height*_.y+y.y;if(h==null||h.draw(this._graphicsContext,b+u.offset.x,E+u.offset.y),!((s=this._engine)===null||s===void 0)&&s.isDebug&&this._engine.debug.graphics.showBounds){const D=R(b+u.offset.x,E+u.offset.y);if(h instanceof Lr)for(const F of h.members)(o=F.graphic)===null||o===void 0||o.localBounds.translate(D.add(F.pos)).draw(this._graphicsContext,this._engine.debug.graphics.boundsColor);else h==null||h.localBounds.translate(D).draw(this._graphicsContext,this._engine.debug.graphics.boundsColor)}}}_applyTransform(e){const s=e.getAncestors();for(const o of s){const u=o==null?void 0:o.get(tt),h=o==null?void 0:o.get(mt);let g=u.pos,_=u.scale,y=u.rotation;if(h&&this._engine.fixedUpdateFps&&h.__oldTransformCaptured&&h.enableFixedUpdateInterpolate){const b=this._engine.currentFrameLagMs/(1e3/this._engine.fixedUpdateFps);g=u.pos.scale(b).add(h.oldPos.scale(1-b)),_=u.scale.scale(b).add(h.oldScale.scale(1-b));const E=(1-b)*Math.cos(h.oldRotation)+b*Math.cos(u.rotation),D=(1-b)*Math.sin(h.oldRotation)+b*Math.sin(u.rotation);y=Math.atan2(D,E)}u&&(this._graphicsContext.z=u.z,this._graphicsContext.translate(g.x,g.y),this._graphicsContext.scale(_.x,_.y),this._graphicsContext.rotate(y))}}}class Jp extends ci{constructor(){super(...arguments),this.types=["ex.transform"],this.systemType=Ie.Draw,this.priority=999}initialize(e){this._graphicsContext=e.engine.graphicsContext,this._camera=e.camera,this._engine=e.engine,this._collisionSystem=e.world.systemManager.get(vc)}update(e,s){var o;if(!this._engine.isDebug)return;const u=this._engine.debug.filter;let h,g;const _=this._engine.debug.entity;let y;const b=this._engine.debug.transform;let E;const D=this._engine.debug.motion;let F;const z=this._engine.debug.collider,j=this._engine.debug.physics;let X;const Y=this._engine.debug.graphics;let U,V;const et=this._engine.debug.body,q=this._engine.debug.camera;for(const ht of e){if(ht.hasTag("offscreen")||ht instanceof wa||u.useFilter&&(!(u.ids.length===0||u.ids.includes(ht.id))||!(u.nameQuery===""||ht.name.includes(u.nameQuery))))continue;let nt=C.Zero;const W=R(0,16);if(h=ht.id,g=ht.name,y=ht.get(tt),this._pushCameraTransform(y),this._graphicsContext.save(),this._applyTransform(ht),y&&((b.showAll||b.showPosition)&&this._graphicsContext.debug.drawPoint(C.Zero,{size:4,color:b.positionColor}),(b.showAll||b.showPositionLabel)&&(this._graphicsContext.debug.drawText(`pos${y.pos.toString(2)}`,nt),nt=nt.add(W)),(b.showAll||b.showZIndex)&&(this._graphicsContext.debug.drawText(`z(${y.z.toFixed(1)})`,nt),nt=nt.add(W)),(_.showAll||_.showId)&&(this._graphicsContext.debug.drawText(`id(${h}) ${ht.parent?"child of id("+((o=ht.parent)===null||o===void 0?void 0:o.id)+")":""}`,nt),nt=nt.add(W)),(_.showAll||_.showName)&&(this._graphicsContext.debug.drawText(`name(${g})`,nt),nt=nt.add(W)),(b.showAll||b.showRotation)&&(this._graphicsContext.drawLine(C.Zero,C.fromAngle(y.rotation).scale(50).add(C.Zero),b.rotationColor,2),this._graphicsContext.debug.drawText(`rot deg(${M(y.rotation).toFixed(2)})`,nt),nt=nt.add(W)),(b.showAll||b.showScale)&&this._graphicsContext.drawLine(C.Zero,y.scale.add(C.Zero),b.scaleColor,2)),X=ht.get(xe),X&&(Y.showAll||Y.showBounds)&&X.localBounds.draw(this._graphicsContext,Y.boundsColor),U=ht.get(va),U&&(U.useTransform||this._graphicsContext.restore(),U.draw(this._graphicsContext),U.useTransform||(this._graphicsContext.save(),this._applyTransform(ht))),V=ht.get(mt),V&&((et.showAll||et.showCollisionGroup)&&(this._graphicsContext.debug.drawText(`collision group(${V.group.name})`,nt),nt=nt.add(W)),(et.showAll||et.showCollisionType)&&(this._graphicsContext.debug.drawText(`collision type(${V.collisionType})`,nt),nt=nt.add(W)),(et.showAll||et.showMass)&&(this._graphicsContext.debug.drawText(`mass(${V.mass})`,nt),nt=nt.add(W)),(et.showAll||et.showMotion)&&(this._graphicsContext.debug.drawText(`motion(${V.sleepMotion})`,nt),nt=nt.add(W)),(et.showAll||et.showSleeping)&&(this._graphicsContext.debug.drawText(`sleeping(${V.canSleep?V.sleeping:"cant sleep"})`,nt),nt=nt.add(W))),this._graphicsContext.restore(),E=ht.get($t),E&&((D.showAll||D.showVelocity)&&(this._graphicsContext.debug.drawText(`vel${E.vel.toString(2)}`,nt.add(y.globalPos)),this._graphicsContext.drawLine(y.globalPos,y.globalPos.add(E.vel),D.velocityColor,2),nt=nt.add(W)),(D.showAll||D.showAcceleration)&&this._graphicsContext.drawLine(y.globalPos,y.globalPos.add(E.acc),D.accelerationColor,2)),F=ht.get(Kt),F){const At=F.get();if((z.showAll||z.showGeometry)&&At&&At.debug(this._graphicsContext,z.geometryColor),z.showAll||z.showBounds){if(At instanceof de){const It=At.getColliders();for(const Rt of It){const Pt=Rt.bounds,le=R(Pt.left,Pt.top);this._graphicsContext.debug.drawRect(le.x,le.y,Pt.width,Pt.height,{color:z.boundsColor}),(z.showAll||z.showOwner)&&this._graphicsContext.debug.drawText(`owner id(${Rt.owner.id})`,le)}F.bounds.draw(this._graphicsContext,z.boundsColor)}else if(At){const It=F.bounds,Rt=R(It.left,It.top);this._graphicsContext.debug.drawRect(Rt.x,Rt.y,It.width,It.height,{color:z.boundsColor}),(z.showAll||z.showOwner)&&this._graphicsContext.debug.drawText(`owner id(${F.owner.id})`,Rt)}}}this._popCameraTransform(y)}if(this._graphicsContext.save(),this._camera.draw(this._graphicsContext),(j.showAll||j.showBroadphaseSpacePartitionDebug)&&this._collisionSystem.debug(this._graphicsContext),j.showAll||j.showCollisionContacts||j.showCollisionNormals)for(const[ht,nt]of this._engine.debug.stats.currFrame.physics.contacts){if(j.showAll||j.showCollisionContacts)for(const W of nt.points)this._graphicsContext.debug.drawPoint(W,{size:5,color:j.collisionContactColor});if(j.showAll||j.showCollisionNormals)for(const W of nt.points)this._graphicsContext.debug.drawLine(W,nt.normal.scale(30).add(W),{color:j.collisionNormalColor})}this._graphicsContext.restore(),q&&(this._graphicsContext.save(),this._camera.draw(this._graphicsContext),(q.showAll||q.showFocus)&&this._graphicsContext.drawCircle(this._camera.pos,4,q.focusColor),(q.showAll||q.showZoom)&&this._graphicsContext.debug.drawText(`zoom(${this._camera.zoom})`,this._camera.pos),this._graphicsContext.restore()),this._graphicsContext.flush()}_applyTransform(e){const s=e.getAncestors();for(const o of s){const u=o==null?void 0:o.get(tt);u&&(this._graphicsContext.translate(u.pos.x,u.pos.y),this._graphicsContext.scale(u.scale.x,u.scale.y),this._graphicsContext.rotate(u.rotation))}}_pushCameraTransform(e){e.coordPlane===Ne.World&&(this._graphicsContext.save(),this._camera&&this._camera.draw(this._graphicsContext))}_popCameraTransform(e){e.coordPlane===Ne.World&&this._graphicsContext.restore()}}class Ca extends ci{constructor(){super(...arguments),this.types=["ex.transform","ex.pointer"],this.systemType=Ie.Update,this.priority=-1,this.overrideUseColliderShape=!1,this.overrideUseGraphicsBounds=!1,this.lastFrameEntityToPointers=new Map,this.currentFrameEntityToPointers=new Map,this._sortedTransforms=[],this._sortedEntities=[],this._zHasChanged=!1,this._zIndexUpdate=()=>{this._zHasChanged=!0}}initialize(e){this._engine=e.engine}preupdate(){this._receiver=this._engine.input.pointers,this._zHasChanged&&(this._sortedTransforms.sort((e,s)=>s.z-e.z),this._sortedEntities=this._sortedTransforms.map(e=>e.owner),this._zHasChanged=!1)}notify(e){if(Mr(e)){const s=e.data.get(tt);this._sortedTransforms.push(s),this._sortedEntities.push(s.owner),s.zIndexChanged$.subscribe(this._zIndexUpdate),this._zHasChanged=!0}else{const s=e.data.get(tt);s.zIndexChanged$.unsubscribe(this._zIndexUpdate);const o=this._sortedTransforms.indexOf(s);o>-1&&(this._sortedTransforms.splice(o,1),this._sortedEntities.splice(o,1))}}entityCurrentlyUnderPointer(e,s){return this.currentFrameEntityToPointers.has(e.id)&&this.currentFrameEntityToPointers.get(e.id).includes(s)}entityWasUnderPointer(e,s){return this.lastFrameEntityToPointers.has(e.id)&&this.lastFrameEntityToPointers.get(e.id).includes(s)}entered(e,s){return this.entityCurrentlyUnderPointer(e,s)&&!this.lastFrameEntityToPointers.has(e.id)}left(e,s){return!this.currentFrameEntityToPointers.has(e.id)&&this.entityWasUnderPointer(e,s)}addPointerToEntity(e,s){if(!this.currentFrameEntityToPointers.has(e.id)){this.currentFrameEntityToPointers.set(e.id,[s]);return}const o=this.currentFrameEntityToPointers.get(e.id);this.currentFrameEntityToPointers.set(e.id,o.concat(s))}update(e){this._processPointerToEntity(this._sortedEntities),this._dispatchEvents(this._sortedEntities),this._receiver.update(),this.lastFrameEntityToPointers.clear(),this.lastFrameEntityToPointers=new Map(this.currentFrameEntityToPointers),this.currentFrameEntityToPointers.clear(),this._receiver.clear()}_processPointerToEntity(e){var s;let o,u,h,g;for(const _ of e){if(o=_.get(tt),g=(s=_.get(Rs))!==null&&s!==void 0?s:new Rs,u=_.get(Kt),u&&(g.useColliderShape||this.overrideUseColliderShape)){u.update();const y=u.get();if(y)for(const[b,E]of this._receiver.currentFramePointerCoords.entries())y.contains(o.coordPlane===Ne.World?E.worldPos:E.screenPos)&&this.addPointerToEntity(_,b)}if(h=_.get(xe),h&&(g.useGraphicsBounds||this.overrideUseGraphicsBounds)){const y=h.localBounds.transform(o.get().matrix);for(const[b,E]of this._receiver.currentFramePointerCoords.entries())y.contains(o.coordPlane===Ne.World?E.worldPos:E.screenPos)&&this.addPointerToEntity(_,b)}}}_processDownAndEmit(e){const s=new Map;for(const o of this._receiver.currentFrameDown)o.active&&e.active&&this.entityCurrentlyUnderPointer(e,o.pointerId)&&(e.events.emit("pointerdown",o),this._receiver.isDragStart(o.pointerId)&&e.events.emit("pointerdragstart",o)),s.set(o.pointerId,o);return s}_processUpAndEmit(e){const s=new Map;for(const o of this._receiver.currentFrameUp)o.active&&e.active&&this.entityCurrentlyUnderPointer(e,o.pointerId)&&(e.events.emit("pointerup",o),this._receiver.isDragEnd(o.pointerId)&&e.events.emit("pointerdragend",o)),s.set(o.pointerId,o);return s}_processMoveAndEmit(e){const s=new Map;for(const o of this._receiver.currentFrameMove)o.active&&e.active&&this.entityCurrentlyUnderPointer(e,o.pointerId)&&(e.events.emit("pointermove",o),this._receiver.isDragging(o.pointerId)&&e.events.emit("pointerdragmove",o)),s.set(o.pointerId,o);return s}_processEnterLeaveAndEmit(e,s){for(const o of s){if(o.active&&e.active&&this.entered(e,o.pointerId)){e.events.emit("pointerenter",o),this._receiver.isDragging(o.pointerId)&&e.events.emit("pointerdragenter",o);break}if(o.active&&e.active&&(this.left(e,o.pointerId)||this.entityCurrentlyUnderPointer(e,o.pointerId)&&o.type==="up")){e.events.emit("pointerleave",o),this._receiver.isDragging(o.pointerId)&&e.events.emit("pointerdragleave",o);break}}}_processCancelAndEmit(e){for(const s of this._receiver.currentFrameCancel)s.active&&e.active&&this.entityCurrentlyUnderPointer(e,s.pointerId)&&e.events.emit("pointercancel",s)}_processWheelAndEmit(e){for(const s of this._receiver.currentFrameWheel)s.active&&e.active&&this.entityCurrentlyUnderPointer(e,0)&&e.events.emit("pointerwheel",s)}_dispatchEvents(e){const s=new Set(this.lastFrameEntityToPointers.keys()),o=new Set(this.currentFrameEntityToPointers.keys()),u=e.filter(y=>s.has(y.id)||o.has(y.id));let h,g,_;for(const y of u){_=this._processDownAndEmit(y),g=this._processUpAndEmit(y),h=this._processMoveAndEmit(y);const b=[...h.values(),..._.values(),...g.values()];this._processEnterLeaveAndEmit(y,b),this._processCancelAndEmit(y),this._processWheelAndEmit(y)}}}class tg extends ci{constructor(){super(...arguments),this.types=["ex.actions"],this.systemType=Ie.Update,this.priority=-1,this._actions=[]}notify(e){if(Mr(e)){const s=e.data.get(Ds);this._actions.push(s)}else{const s=e.data.get(Ds),o=this._actions.indexOf(s);o>-1&&this._actions.splice(o,1)}}update(e,s){for(const o of this._actions)o.update(s)}}class ba extends ze{constructor(e){super(),this.type="ex.isometricentity",this.elevation=0,this.map=e}}class eg extends ci{constructor(){super(...arguments),this.types=["ex.transform","ex.isometricentity"],this.systemType=Ie.Update,this.priority=99}update(e,s){let o,u;for(const h of e){o=h.get(tt),u=h.get(ba);const _=Math.max(u.map.columns*u.map.tileWidth,u.map.rows*u.map.tileHeight)*u.elevation+o.pos.y;o.z=_}}}class ig extends ci{constructor(){super(...arguments),this.types=["ex.transform","ex.graphics"],this.systemType=Ie.Draw,this.priority=-1}initialize(e){this._camera=e.camera}update(e){let s,o,u;for(const h of e){o=h.get(xe),s=h.get(tt),u=h.get(_a);let g;if(u){const y=C.One.sub(u.parallaxFactor);g=this._camera.pos.scale(y)}const _=this._isOffscreen(s,o,g);_&&!h.hasTag("ex.offscreen")&&(h.eventDispatcher.emit("exitviewport",new Xu(h)),h.addTag("ex.offscreen")),!_&&h.hasTag("ex.offscreen")&&(h.eventDispatcher.emit("enterviewport",new Yu(h)),h.removeTag("ex.offscreen"))}}_isOffscreen(e,s,o){if(e.coordPlane===Ne.World){let u=s.localBounds;o&&(u=u.translate(o));const h=u.transform(e.get().matrix);return!this._camera.viewport.overlaps(h)}else return!1}}class Br extends Je{constructor(){super(),this._logger=N.getInstance(),this.camera=new Op,this.world=new Wp(this),this._isInitialized=!1,this._timers=[],this._cancelQueue=[],this.world.add(new tg),this.world.add(new Gp),this.world.add(new vc),this.world.add(new Ca),this.world.add(new eg),this.world.add(new ig),this.world.add(new qp),this.world.add(new Jp)}get actors(){return this.world.entityManager.entities.filter(e=>e instanceof Li)}get entities(){return this.world.entityManager.entities}get triggers(){return this.world.entityManager.entities.filter(e=>e instanceof Np)}get tileMaps(){return this.world.entityManager.entities.filter(e=>e instanceof kp)}get timers(){return this._timers}on(e,s){super.on(e,s)}once(e,s){super.once(e,s)}off(e,s){super.off(e,s)}onInitialize(e){}onActivate(e){}onDeactivate(e){}onPreUpdate(e,s){}onPostUpdate(e,s){}onPreDraw(e,s){}onPostDraw(e,s){}_initializeChildren(){for(const e of this.entities)e._initialize(this.engine)}get isInitialized(){return this._isInitialized}_initialize(e){this.isInitialized||(this.engine=e,this.camera._initialize(e),this.world.systemManager.initialize(),this.onInitialize.call(this,e),this._initializeChildren(),this._logger.debug("Scene.onInitialize",this,e),this.eventDispatcher.emit("initialize",new Es(e,this)),this._isInitialized=!0)}_activate(e){this._logger.debug("Scene.onActivate",this),this.onActivate(e)}_deactivate(e){this._logger.debug("Scene.onDeactivate",this),this.onDeactivate(e)}_preupdate(e,s){this.emit("preupdate",new Di(e,s,this)),this.onPreUpdate(e,s)}_postupdate(e,s){this.emit("postupdate",new Hn(e,s,this)),this.onPostUpdate(e,s)}_predraw(e,s){this.emit("predraw",new nn(e,s,this)),this.onPreDraw(e,s)}_postdraw(e,s){this.emit("postdraw",new Pr(e,s,this)),this.onPostDraw(e,s)}update(e,s){this._preupdate(e,s);let o,u;for(o=0,u=this._cancelQueue.length;o<u;o++)this.removeTimer(this._cancelQueue[o]);this._cancelQueue.length=0;for(const h of this._timers)h.update(s);this.world.update(Ie.Update,s),this.camera&&this.camera.update(e,s),this._collectActorStats(e),this._postupdate(e,s)}draw(e,s){var o;this._predraw(e,s),this.world.update(Ie.Draw,s),!((o=this.engine)===null||o===void 0)&&o.isDebug&&this.debugDraw(e),this._postdraw(e,s)}debugDraw(e){this.emit("predebugdraw",new Lu(e,this)),this.emit("postdebugdraw",new Bu(e,this))}contains(e){return this.actors.indexOf(e)>-1}add(e){if(this.emit("entityadded",{target:e}),this.world.add(e),e.scene=this,e instanceof Fs){K(this._timers,e)||this.addTimer(e);return}}remove(e){e instanceof ae&&(this.emit("entityremoved",{target:e}),this.world.remove(e)),e instanceof Fs&&this.removeTimer(e)}clear(e=!0){for(const s of this.entities)this.world.remove(s,e);for(const s of this.timers)this.removeTimer(s)}addTimer(e){return this._timers.push(e),e.scene=this,e}removeTimer(e){const s=this._timers.indexOf(e);return s!==-1&&this._timers.splice(s,1),e}cancelTimer(e){return this._cancelQueue.push(e),e}isTimerActive(e){return this._timers.indexOf(e)>-1&&!e.complete}isCurrentScene(){return this.engine?this.engine.currentScene===this:!1}_collectActorStats(e){const s=this.actors.filter(o=>o instanceof _c);for(const o of s)e.stats.currFrame.actors.ui++;for(const o of this.actors){e.stats.currFrame.actors.alive++;for(const u of o.children)Ap(u)?e.stats.currFrame.actors.ui++:e.stats.currFrame.actors.alive++}}}var Kn;(function(d){d.Protanope="Protanope",d.Deuteranope="Deuteranope",d.Tritanope="Tritanope"})(Kn||(Kn={}));const Ow=`#version 300 es\r
precision mediump float;\r
// our texture\r
uniform sampler2D u_image;\r
// the texCoords passed in from the vertex shader.\r
in vec2 v_texcoord;\r
\r
// color blind type\r
uniform int u_type;\r
\r
// simulation?\r
uniform bool u_simulate;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  vec4 o =  texture(u_image, v_texcoord);\r
  // RGB to LMS matrix conversion\r
  float L = (17.8824 * o.r) + (43.5161 * o.g) + (4.11935 * o.b);\r
  float M = (3.45565 * o.r) + (27.1554 * o.g) + (3.86714 * o.b);\r
  float S = (0.0299566 * o.r) + (0.184309 * o.g) + (1.46709 * o.b);\r
  // Simulate color blindness\r
  float l;\r
  float m;\r
  float s;\r
  //MODE CODE//\r
  if (u_type == 0) {\r
    // Protanope\r
    l = 0.0 * L + 2.02344 * M + -2.52581 * S;\r
    m = 0.0 * L + 1.0 * M + 0.0 * S;\r
    s = 0.0 * L + 0.0 * M + 1.0 * S;;\r
  } else if (u_type == 1) {\r
    // Deuteranope\r
    l = 1.0 * L + 0.0 * M + 0.0 * S;\r
    m = 0.494207 * L + 0.0 * M + 1.24827 * S;\r
    s = 0.0 * L + 0.0 * M + 1.0 * S;\r
  } else if (u_type == 2) {\r
    // Tritanope\r
    l = 1.0 * L + 0.0 * M + 0.0 * S;\r
    m = 0.0 * L + 1.0 * M + 0.0 * S;\r
    s = -0.395913 * L + 0.801109 * M + 0.0 * S;\r
  }\r
\r
  // LMS to RGB matrix conversion\r
  vec4 error; // simulate the colors\r
  error.r = (0.0809444479 * l) + (-0.130504409 * m) + (0.116721066 * s);\r
  error.g = (-0.0102485335 * l) + (0.0540193266 * m) + (-0.113614708 * s);\r
  error.b = (-0.000365296938 * l) + (-0.00412161469 * m) + (0.693511405 * s);\r
  error.a = 1.0;\r
  vec4 diff = o - error;\r
  vec4 correction; // correct the colors\r
  correction.r = 0.0;\r
  correction.g =  (diff.r * 0.7) + (diff.g * 1.0);\r
  correction.b =  (diff.r * 0.7) + (diff.b * 1.0);\r
  correction = o + correction;\r
  correction.a = o.a;\r
  //SIMULATE//\r
\r
  // sim \r
  if (u_simulate) {\r
    fragColor = error.rgba;\r
  } else {\r
    fragColor = correction.rgba;\r
  }\r
}`;class ng{constructor(e){this._shader=new qe({vertexSource:`#version 300 es
      in vec2 a_position;
      in vec2 a_texcoord;
      out vec2 v_texcoord;

      void main() {
        gl_Position = vec4(a_position, 0.0, 1.0);
        // Pass the texcoord to the fragment shader.
        v_texcoord = a_texcoord;
      }`,fragmentSource:e}),this._shader.compile(),this._buffer=new rn({type:"static",data:new Float32Array([-1,-1,0,0,-1,1,0,1,1,-1,1,0,1,-1,1,0,-1,1,0,1,1,1,1,1])}),this._layout=new on({shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_texcoord",2]]}),this._buffer.upload()}getShader(){return this._shader}getLayout(){return this._layout}}class sg{constructor(e,s=!1){this._colorBlindnessMode=e,this._simulate=!1,this._simulate=s}initialize(e){this._shader=new ng(Ow),this.simulate=this._simulate,this.colorBlindnessMode=this._colorBlindnessMode}getShader(){return this._shader.getShader()}getLayout(){return this._shader.getLayout()}set colorBlindnessMode(e){if(this._colorBlindnessMode=e,this._shader){const s=this._shader.getShader();s.use(),this._colorBlindnessMode===Kn.Protanope?s.setUniformInt("u_type",0):this._colorBlindnessMode===Kn.Deuteranope?s.setUniformInt("u_type",1):this._colorBlindnessMode===Kn.Tritanope&&s.setUniformInt("u_type",2)}}get colorBlindnessMode(){return this._colorBlindnessMode}set simulate(e){if(this._simulate=e,this._shader){const s=this._shader.getShader();s.use(),s.setUniformBoolean("u_simulate",e)}}get simulate(){return this._simulate}}class rg{constructor(e){this._engine=e,this._colorBlindPostProcessor=new sg(Kn.Protanope)}correct(e){this._engine.graphicsContext instanceof Ar&&(this.clear(),this._colorBlindPostProcessor.colorBlindnessMode=e,this._colorBlindPostProcessor.simulate=!1,this._engine.graphicsContext.addPostProcessor(this._colorBlindPostProcessor))}simulate(e){this._engine.graphicsContext instanceof Ar&&(this.clear(),this._colorBlindPostProcessor.colorBlindnessMode=e,this._colorBlindPostProcessor.simulate=!0,this._engine.graphicsContext.addPostProcessor(this._colorBlindPostProcessor))}clear(){this._engine.graphicsContext.removePostProcessor(this._colorBlindPostProcessor)}}class og{constructor(e){this.stats={currFrame:new Or,prevFrame:new Or},this.filter={useFilter:!1,nameQuery:"",ids:[]},this.entity={showAll:!1,showId:!0,showName:!1},this.transform={showAll:!1,showPosition:!1,showPositionLabel:!1,positionColor:B.Yellow,showZIndex:!1,showScale:!1,scaleColor:B.Green,showRotation:!1,rotationColor:B.Blue},this.graphics={showAll:!1,showBounds:!0,boundsColor:B.Yellow},this.collider={showAll:!1,showBounds:!0,boundsColor:B.Blue,showOwner:!1,showGeometry:!0,geometryColor:B.Green},this.physics={showAll:!1,showBroadphaseSpacePartitionDebug:!1,showCollisionNormals:!1,collisionNormalColor:B.Cyan,showCollisionContacts:!0,collisionContactColor:B.Red},this.motion={showAll:!1,showVelocity:!1,velocityColor:B.Yellow,showAcceleration:!1,accelerationColor:B.Red},this.body={showAll:!1,showCollisionGroup:!1,showCollisionType:!1,showSleeping:!1,showMotion:!1,showMass:!1},this.camera={showAll:!1,showFocus:!1,focusColor:B.Red,showZoom:!1},this._engine=e,this.colorBlindMode=new rg(this._engine)}useTestClock(){const e=this._engine.clock,s=e.isRunning();e.stop();const o=e.toTestClock();return s&&o.start(),this._engine.clock=o,o}useStandardClock(){const e=this._engine.clock,s=e.isRunning();e.stop();const o=e.toStandardClock();return s&&o.start(),this._engine.clock=o,o}}class Or{constructor(){this._id=0,this._delta=0,this._fps=0,this._actorStats={alive:0,killed:0,ui:0,get remaining(){return this.alive-this.killed},get total(){return this.remaining+this.ui}},this._durationStats={update:0,draw:0,get total(){return this.update+this.draw}},this._physicsStats=new Sa,this._graphicsStats={drawCalls:0,drawnImages:0}}reset(e){e?(this.id=e.id,this.delta=e.delta,this.fps=e.fps,this.actors.alive=e.actors.alive,this.actors.killed=e.actors.killed,this.actors.ui=e.actors.ui,this.duration.update=e.duration.update,this.duration.draw=e.duration.draw,this._physicsStats.reset(e.physics),this.graphics.drawCalls=e.graphics.drawCalls,this.graphics.drawnImages=e.graphics.drawnImages):(this.id=this.delta=this.fps=0,this.actors.alive=this.actors.killed=this.actors.ui=0,this.duration.update=this.duration.draw=0,this._physicsStats.reset(),this.graphics.drawnImages=this.graphics.drawCalls=0)}clone(){const e=new Or;return e.reset(this),e}get id(){return this._id}set id(e){this._id=e}get delta(){return this._delta}set delta(e){this._delta=e}get fps(){return this._fps}set fps(e){this._fps=e}get actors(){return this._actorStats}get duration(){return this._durationStats}get physics(){return this._physicsStats}get graphics(){return this._graphicsStats}}class Sa{constructor(){this._pairs=0,this._collisions=0,this._contacts=new Map,this._fastBodies=0,this._fastBodyCollisions=0,this._broadphase=0,this._narrowphase=0}reset(e){e?(this.pairs=e.pairs,this.collisions=e.collisions,this.contacts=e.contacts,this.fastBodies=e.fastBodies,this.fastBodyCollisions=e.fastBodyCollisions,this.broadphase=e.broadphase,this.narrowphase=e.narrowphase):(this.pairs=this.collisions=this.fastBodies=0,this.fastBodyCollisions=this.broadphase=this.narrowphase=0,this.contacts.clear())}clone(){const e=new Sa;return e.reset(this),e}get pairs(){return this._pairs}set pairs(e){this._pairs=e}get collisions(){return this._collisions}set collisions(e){this._collisions=e}get contacts(){return this._contacts}set contacts(e){this._contacts=e}get fastBodies(){return this._fastBodies}set fastBodies(e){this._fastBodies=e}get fastBodyCollisions(){return this._fastBodyCollisions}set fastBodyCollisions(e){this._fastBodyCollisions=e}get broadphase(){return this._broadphase}set broadphase(e){this._broadphase=e}get narrowphase(){return this._narrowphase}set narrowphase(e){this._narrowphase=e}}var Bs;(function(d){d.Canvas="Canvas",d.Document="Document"})(Bs||(Bs={}));var yc;(function(d){d.Num0="Numpad0",d.Num1="Numpad1",d.Num2="Numpad2",d.Num3="Numpad3",d.Num4="Numpad4",d.Num5="Numpad5",d.Num6="Numpad6",d.Num7="Numpad7",d.Num8="Numpad8",d.Num9="Numpad9",d.NumAdd="NumpadAdd",d.NumSubtract="NumpadSubtract",d.NumMultiply="NumpadMultiply",d.NumDivide="NumpadDivide",d.NumDecimal="NumpadDecimal",d.Numpad0="Numpad0",d.Numpad1="Numpad1",d.Numpad2="Numpad2",d.Numpad3="Numpad3",d.Numpad4="Numpad4",d.Numpad5="Numpad5",d.Numpad6="Numpad6",d.Numpad7="Numpad7",d.Numpad8="Numpad8",d.Numpad9="Numpad9",d.NumpadAdd="NumpadAdd",d.NumpadSubtract="NumpadSubtract",d.NumpadMultiply="NumpadMultiply",d.NumpadDivide="NumpadDivide",d.NumpadDecimal="NumpadDecimal",d.NumLock="NumLock",d.ShiftLeft="ShiftLeft",d.ShiftRight="ShiftRight",d.AltLeft="AltLeft",d.AltRight="AltRight",d.ControlLeft="ControlLeft",d.ControlRight="ControlRight",d.MetaLeft="MetaLeft",d.MetaRight="MetaRight",d.Key0="Digit0",d.Key1="Digit1",d.Key2="Digit2",d.Key3="Digit3",d.Key4="Digit4",d.Key5="Digit5",d.Key6="Digit6",d.Key7="Digit7",d.Key8="Digit8",d.Key9="Digit9",d.Digit0="Digit0",d.Digit1="Digit1",d.Digit2="Digit2",d.Digit3="Digit3",d.Digit4="Digit4",d.Digit5="Digit5",d.Digit6="Digit6",d.Digit7="Digit7",d.Digit8="Digit8",d.Digit9="Digit9",d.F1="F1",d.F2="F2",d.F3="F3",d.F4="F4",d.F5="F5",d.F6="F6",d.F7="F7",d.F8="F8",d.F9="F9",d.F10="F10",d.F11="F11",d.F12="F12",d.A="KeyA",d.B="KeyB",d.C="KeyC",d.D="KeyD",d.E="KeyE",d.F="KeyF",d.G="KeyG",d.H="KeyH",d.I="KeyI",d.J="KeyJ",d.K="KeyK",d.L="KeyL",d.M="KeyM",d.N="KeyN",d.O="KeyO",d.P="KeyP",d.Q="KeyQ",d.R="KeyR",d.S="KeyS",d.T="KeyT",d.U="KeyU",d.V="KeyV",d.W="KeyW",d.X="KeyX",d.Y="KeyY",d.Z="KeyZ",d.KeyA="KeyA",d.KeyB="KeyB",d.KeyC="KeyC",d.KeyD="KeyD",d.KeyE="KeyE",d.KeyF="KeyF",d.KeyG="KeyG",d.KeyH="KeyH",d.KeyI="KeyI",d.KeyJ="KeyJ",d.KeyK="KeyK",d.KeyL="KeyL",d.KeyM="KeyM",d.KeyN="KeyN",d.KeyO="KeyO",d.KeyP="KeyP",d.KeyQ="KeyQ",d.KeyR="KeyR",d.KeyS="KeyS",d.KeyT="KeyT",d.KeyU="KeyU",d.KeyV="KeyV",d.KeyW="KeyW",d.KeyX="KeyX",d.KeyY="KeyY",d.KeyZ="KeyZ",d.Semicolon="Semicolon",d.Quote="Quote",d.Comma="Comma",d.Minus="Minus",d.Period="Period",d.Slash="Slash",d.Equal="Equal",d.BracketLeft="BracketLeft",d.Backslash="Backslash",d.BracketRight="BracketRight",d.Backquote="Backquote",d.Up="ArrowUp",d.Down="ArrowDown",d.Left="ArrowLeft",d.Right="ArrowRight",d.ArrowUp="ArrowUp",d.ArrowDown="ArrowDown",d.ArrowLeft="ArrowLeft",d.ArrowRight="ArrowRight",d.Space="Space",d.Backspace="Backspace",d.Delete="Delete",d.Esc="Escape",d.Escape="Escape",d.Enter="Enter",d.NumpadEnter="NumpadEnter",d.ContextMenu="ContextMenu"})(yc||(yc={}));class Pa extends ft{constructor(e,s,o){super(),this.key=e,this.value=s,this.originalEvent=o}}class ag extends Je{constructor(){super(),this._keys=[],this._keysUp=[],this._keysDown=[],this._handleKeyDown=e=>{const s=e.code;if(this._keys.indexOf(s)===-1){this._keys.push(s),this._keysDown.push(s);const o=new Pa(s,e.key,e);this.eventDispatcher.emit("down",o),this.eventDispatcher.emit("press",o)}},this._handleKeyUp=e=>{const s=e.code,o=this._keys.indexOf(s);this._keys.splice(o,1),this._keysUp.push(s);const u=new Pa(s,e.key,e);this.eventDispatcher.emit("up",u),this.eventDispatcher.emit("release",u)}}on(e,s){super.on(e,s)}init(e){if(!e)try{const s=()=>{};window.top.addEventListener("blur",s),window.top.removeEventListener("blur",s),e=window.top}catch{e=window,N.getInstance().warn("Failed to bind to keyboard events to top frame. If you are trying to embed Excalibur in a cross-origin iframe, keyboard events will not fire.")}e.addEventListener("blur",()=>{this._keys.length=0}),e.addEventListener("keyup",this._handleKeyUp),e.addEventListener("keydown",this._handleKeyDown)}update(){this._keysDown.length=0,this._keysUp.length=0;for(let e=0;e<this._keys.length;e++)this.eventDispatcher.emit("hold",new Pa(this._keys[e]))}getKeys(){return this._keys}wasPressed(e){return this._keysDown.indexOf(e)>-1}isHeld(e){return this._keys.indexOf(e)>-1}wasReleased(e){return this._keysUp.indexOf(e)>-1}triggerEvent(e,s,o){e==="down"&&this._handleKeyDown(new KeyboardEvent("keydown",{code:s,key:o??null})),e==="up"&&this._handleKeyUp(new KeyboardEvent("keyup",{code:s,key:o??null}))}}class Ea extends Je{constructor(){super(),this.enabled=!1,this.supported=!!navigator.getGamepads,this._gamePadTimeStamps=[0,0,0,0],this._oldPads=[],this._pads=[],this._initSuccess=!1,this._navigator=navigator,this._minimumConfiguration=null}init(){this.supported&&(this._initSuccess||(this._oldPads=this._clonePads(this._navigator.getGamepads()),this._oldPads.length&&this._oldPads[0]&&(this._initSuccess=!0)))}setMinimumGamepadConfiguration(e){this._enableAndUpdate(),this._minimumConfiguration=e}_enableAndUpdate(){this.enabled||(this.enabled=!0,this.update())}_isGamepadValid(e){if(!this._minimumConfiguration)return!0;if(!e)return!1;const s=e.axes.filter(u=>typeof u!==void 0).length,o=e.buttons.filter(u=>typeof u!==void 0).length;return s>=this._minimumConfiguration.axis&&o>=this._minimumConfiguration.buttons&&e.connected}on(e,s){this._enableAndUpdate(),super.on(e,s)}off(e,s){this._enableAndUpdate(),super.off(e,s)}update(){if(!this.enabled||!this.supported)return;this.init();const e=this._navigator.getGamepads();for(let s=0;s<e.length;s++){if(e[s])!this.at(s).connected&&this._isGamepadValid(e[s])&&this.eventDispatcher.emit("connect",new zu(s,this.at(s))),this.at(s).connected=!0;else{const y=this.at(s);y.connected&&this.eventDispatcher.emit("disconnect",new Uu(s,y)),y.connected=!1;continue}if(e[s].timestamp&&e[s].timestamp===this._gamePadTimeStamps[s])continue;this._gamePadTimeStamps[s]=e[s].timestamp,this.at(s).navigatorGamepad=e[s];let o,u,h,g,_;for(o in Nr)u=Nr[o],typeof u=="number"&&e[s].buttons[u]&&(_=e[s].buttons[u].value,_!==this._oldPads[s].getButton(u)&&(e[s].buttons[u].pressed?(this.at(s).updateButton(u,_),this.at(s).eventDispatcher.emit("button",new Vu(u,_,this.at(s)))):this.at(s).updateButton(u,0)));for(h in zr)g=zr[h],typeof g=="number"&&(_=e[s].axes[g],_!==this._oldPads[s].getAxes(g)&&(this.at(s).updateAxes(g,_),this.at(s).eventDispatcher.emit("axis",new ju(g,_,this.at(s)))));this._oldPads[s]=this._clonePad(e[s])}}at(e){if(this._enableAndUpdate(),e>=this._pads.length)for(let s=this._pads.length-1,o=e;s<o;s++)this._pads.push(new Ta),this._oldPads.push(new Ta);return this._pads[e]}getValidGamepads(){this._enableAndUpdate();const e=[];for(let s=0;s<this._pads.length;s++)this._isGamepadValid(this.at(s).navigatorGamepad)&&this.at(s).connected&&e.push(this.at(s));return e}count(){return this._pads.filter(e=>e.connected).length}_clonePads(e){const s=[];for(let o=0,u=e.length;o<u;o++)s.push(this._clonePad(e[o]));return s}_clonePad(e){let s,o;const u=new Ta;if(!e)return u;for(s=0,o=e.buttons.length;s<o;s++)e.buttons[s]&&u.updateButton(s,e.buttons[s].value);for(s=0,o=e.axes.length;s<o;s++)u.updateAxes(s,e.axes[s]);return u}}Ea.MinAxisMoveThreshold=.05;class Ta extends Je{constructor(){super(),this.connected=!1,this._buttons=new Array(16),this._axes=new Array(4);for(let e=0;e<this._buttons.length;e++)this._buttons[e]=0;for(let e=0;e<this._axes.length;e++)this._axes[e]=0}isButtonPressed(e,s=1){return this._buttons[e]>=s}getButton(e){return this._buttons[e]}getAxes(e){const s=this._axes[e];return Math.abs(s)<Ea.MinAxisMoveThreshold?0:s}updateButton(e,s){this._buttons[e]=s}updateAxes(e,s){this._axes[e]=s}}var Nr;(function(d){d[d.Face1=0]="Face1",d[d.Face2=1]="Face2",d[d.Face3=2]="Face3",d[d.Face4=3]="Face4",d[d.LeftBumper=4]="LeftBumper",d[d.RightBumper=5]="RightBumper",d[d.LeftTrigger=6]="LeftTrigger",d[d.RightTrigger=7]="RightTrigger",d[d.Select=8]="Select",d[d.Start=9]="Start",d[d.LeftStick=10]="LeftStick",d[d.RightStick=11]="RightStick",d[d.DpadUp=12]="DpadUp",d[d.DpadDown=13]="DpadDown",d[d.DpadLeft=14]="DpadLeft",d[d.DpadRight=15]="DpadRight"})(Nr||(Nr={}));var zr;(function(d){d[d.LeftStickX=0]="LeftStickX",d[d.LeftStickY=1]="LeftStickY",d[d.RightStickX=2]="RightStickX",d[d.RightStickY=3]="RightStickY"})(zr||(zr={}));class xc{constructor(e){this.nativeComponent=e,this._paused=!1,this._nativeHandlers={}}on(e,s){this._nativeHandlers[e]&&this.off(e,this._nativeHandlers[e]),this._nativeHandlers[e]=this._decorate(s),this.nativeComponent.addEventListener(e,this._nativeHandlers[e])}off(e,s){s||(s=this._nativeHandlers[e]),this.nativeComponent.removeEventListener(e,s),this._nativeHandlers[e]=null}_decorate(e){return s=>{this._paused||e(s)}}pause(){this._paused=!0}resume(){this._paused=!1}clear(){for(const e in this._nativeHandlers)this.off(e)}}class lg{constructor(e,s){this._windowGlobal=e,this._documentGlobal=s,this._windowComponent=new xc(this._windowGlobal),this._documentComponent=new xc(this._documentGlobal)}get window(){return this._windowComponent}get document(){return this._documentComponent}pause(){this.window.pause(),this.document.pause()}resume(){this.window.resume(),this.document.resume()}clear(){this.window.clear(),this.document.clear()}}class Ur{constructor(e,s,o){this.worldPos=e,this.pagePos=s,this.screenPos=o}static fromPagePosition(e,s,o){let u,h,g,_;arguments.length===3?(u=e,h=s,g=new C(u,h),_=o):(g=e,u=g.x,h=g.y,_=s);const y=_.screen.pageToScreenCoordinates(g),b=_.screen.screenToWorldCoordinates(y);return new Ur(b,g,y)}}class Vr{constructor(e,s,o,u,h,g){this.type=e,this.pointerId=s,this.button=o,this.pointerType=u,this.coordinates=h,this.nativeEvent=g,this.active=!0}cancel(){this.active=!1}get pagePos(){return this.coordinates.pagePos}get screenPos(){return this.coordinates.screenPos}get worldPos(){return this.coordinates.worldPos}}class ug{constructor(e,s,o,u,h,g,_,y,b,E,D,F){this.x=e,this.y=s,this.pageX=o,this.pageY=u,this.screenX=h,this.screenY=g,this.index=_,this.deltaX=y,this.deltaY=b,this.deltaZ=E,this.deltaMode=D,this.ev=F,this.active=!0}cancel(){this.active=!1}}class cg extends Je{constructor(){super(),this.lastPagePos=C.Zero,this.lastScreenPos=C.Zero,this.lastWorldPos=C.Zero,this._onPointerMove=e=>{this.lastPagePos=new C(e.pagePos.x,e.pagePos.y),this.lastScreenPos=new C(e.screenPos.x,e.screenPos.y),this.lastWorldPos=new C(e.worldPos.x,e.worldPos.y)},this._onPointerDown=e=>{this.lastPagePos=new C(e.pagePos.x,e.pagePos.y),this.lastScreenPos=new C(e.screenPos.x,e.screenPos.y),this.lastWorldPos=new C(e.worldPos.x,e.worldPos.y)},this.on("move",this._onPointerMove),this.on("down",this._onPointerDown)}on(e,s){super.on(e,s)}once(e,s){super.once(e,s)}off(e,s){super.off(e,s)}}var Os;(function(d){d.Pixel="Pixel",d.Line="Line",d.Page="Page"})(Os||(Os={}));var cn;(function(d){d[d.NoButton=-1]="NoButton",d[d.Left=0]="Left",d[d.Middle=1]="Middle",d[d.Right=2]="Right",d[d.Unknown=3]="Unknown"})(cn||(cn={}));var Bi;(function(d){d.Left="Left",d.Middle="Middle",d.Right="Right",d.Unknown="Unknown",d.NoButton="NoButton"})(Bi||(Bi={}));var Oi;(function(d){d.Touch="Touch",d.Mouse="Mouse",d.Pen="Pen",d.Unknown="Unknown"})(Oi||(Oi={}));function Nw(d){return globalThis.TouchEvent&&d instanceof globalThis.TouchEvent}function zw(d){return globalThis.PointerEvent&&d instanceof globalThis.PointerEvent}class Aa extends Je{constructor(e,s){super(),this.target=e,this.engine=s,this.primary=new cg,this._activeNativePointerIdsToNormalized=new Map,this.lastFramePointerCoords=new Map,this.currentFramePointerCoords=new Map,this.currentFramePointerDown=new Map,this.lastFramePointerDown=new Map,this.currentFrameDown=[],this.currentFrameUp=[],this.currentFrameMove=[],this.currentFrameCancel=[],this.currentFrameWheel=[],this._pointers=[this.primary],this._boundHandle=this._handle.bind(this),this._boundWheel=this._handleWheel.bind(this)}recreate(e,s){const o=new Aa(e,s);return o.primary=this.primary,o._pointers=this._pointers,o}at(e){if(e>=this._pointers.length)for(let s=this._pointers.length-1,o=e;s<o;s++)this._pointers.push(new cg);return this._pointers[e]}count(){return this._pointers.length}isDown(e){var s;return(s=this.currentFramePointerDown.get(e))!==null&&s!==void 0?s:!1}wasDown(e){var s;return(s=this.lastFramePointerDown.get(e))!==null&&s!==void 0?s:!1}isDragging(e){return this.isDown(e)}isDragStart(e){return this.isDown(e)&&!this.wasDown(e)}isDragEnd(e){return!this.isDown(e)&&this.wasDown(e)}on(e,s){super.on(e,s)}once(e,s){super.once(e,s)}off(e,s){super.off(e,s)}update(){this.lastFramePointerDown=new Map(this.currentFramePointerDown),this.lastFramePointerCoords=new Map(this.currentFramePointerCoords);for(const e of this.currentFrameDown)this.emit("down",e),this.at(e.pointerId).emit("down",e),this.primary.emit("pointerdown",e);for(const e of this.currentFrameUp)this.emit("up",e),this.at(e.pointerId).emit("up",e);for(const e of this.currentFrameMove)this.emit("move",e),this.at(e.pointerId).emit("move",e);for(const e of this.currentFrameCancel)this.emit("cancel",e),this.at(e.pointerId).emit("cancel",e);for(const e of this.currentFrameWheel)this.emit("wheel",e),this.primary.emit("pointerwheel",e)}clear(){for(const e of this.currentFrameUp){this.currentFramePointerCoords.delete(e.pointerId);const s=this._activeNativePointerIdsToNormalized.entries();for(const[o,u]of s)u===e.pointerId&&this._activeNativePointerIdsToNormalized.delete(o)}this.currentFrameDown.length=0,this.currentFrameUp.length=0,this.currentFrameMove.length=0,this.currentFrameCancel.length=0,this.currentFrameWheel.length=0}init(){this.target===this.engine.canvas?this.engine.canvas.style.touchAction="none":document.body.style.touchAction="none",window.PointerEvent?(this.target.addEventListener("pointerdown",this._boundHandle),this.target.addEventListener("pointerup",this._boundHandle),this.target.addEventListener("pointermove",this._boundHandle),this.target.addEventListener("pointercancel",this._boundHandle)):(this.target.addEventListener("touchstart",this._boundHandle),this.target.addEventListener("touchend",this._boundHandle),this.target.addEventListener("touchmove",this._boundHandle),this.target.addEventListener("touchcancel",this._boundHandle),this.target.addEventListener("mousedown",this._boundHandle),this.target.addEventListener("mouseup",this._boundHandle),this.target.addEventListener("mousemove",this._boundHandle));const e={passive:!(this.engine.pageScrollPreventionMode===hn.All||this.engine.pageScrollPreventionMode===hn.Canvas)};"onwheel"in document.createElement("div")?this.target.addEventListener("wheel",this._boundWheel,e):document.onmousewheel!==void 0?this.target.addEventListener("mousewheel",this._boundWheel,e):this.target.addEventListener("MozMousePixelScroll",this._boundWheel,e)}detach(){window.PointerEvent?(this.target.removeEventListener("pointerdown",this._boundHandle),this.target.removeEventListener("pointerup",this._boundHandle),this.target.removeEventListener("pointermove",this._boundHandle),this.target.removeEventListener("pointercancel",this._boundHandle)):(this.target.removeEventListener("touchstart",this._boundHandle),this.target.removeEventListener("touchend",this._boundHandle),this.target.removeEventListener("touchmove",this._boundHandle),this.target.removeEventListener("touchcancel",this._boundHandle),this.target.removeEventListener("mousedown",this._boundHandle),this.target.removeEventListener("mouseup",this._boundHandle),this.target.removeEventListener("mousemove",this._boundHandle)),"onwheel"in document.createElement("div")?this.target.removeEventListener("wheel",this._boundWheel):document.onmousewheel!==void 0?this.target.addEventListener("mousewheel",this._boundWheel):this.target.addEventListener("MozMousePixelScroll",this._boundWheel)}_normalizePointerId(e){this._activeNativePointerIdsToNormalized.set(e,-1);const o=Array.from(this._activeNativePointerIdsToNormalized.keys()).sort((u,h)=>u-h).findIndex(u=>u===e);return this._activeNativePointerIdsToNormalized.set(e,o),o}_handle(e){e.preventDefault();const s=new Map;let o,u;if(Nw(e)){o=Bi.Unknown,u=Oi.Touch;for(let h=0;h<e.changedTouches.length;h++){const g=e.changedTouches[h],_=Ur.fromPagePosition(g.pageX,g.pageY,this.engine),y=h+1,b=this._normalizePointerId(y);this.currentFramePointerCoords.set(b,_),s.set(b,_)}}else{o=this._nativeButtonToPointerButton(e.button),u=Oi.Mouse;const h=Ur.fromPagePosition(e.pageX,e.pageY,this.engine);let g=1;zw(e)&&(g=e.pointerId,u=this._stringToPointerType(e.pointerType));const _=this._normalizePointerId(g);this.currentFramePointerCoords.set(_,h),s.set(_,h)}for(const[h,g]of s.entries())switch(e.type){case"mousedown":case"pointerdown":case"touchstart":this.currentFrameDown.push(new Vr("down",h,o,u,g,e)),this.currentFramePointerDown.set(h,!0);break;case"mouseup":case"pointerup":case"touchend":this.currentFrameUp.push(new Vr("up",h,o,u,g,e)),this.currentFramePointerDown.set(h,!1);break;case"mousemove":case"pointermove":case"touchmove":this.currentFrameMove.push(new Vr("move",h,o,u,g,e));break;case"touchcancel":case"pointercancel":this.currentFrameCancel.push(new Vr("cancel",h,o,u,g,e));break}}_handleWheel(e){(this.engine.pageScrollPreventionMode===hn.All||this.engine.pageScrollPreventionMode===hn.Canvas&&e.target===this.engine.canvas)&&e.preventDefault();const s=this.engine.screen.pageToScreenCoordinates(R(e.pageX,e.pageY)),o=this.engine.screen.screenToWorldCoordinates(s),u=-1/40,h=e.deltaX||e.wheelDeltaX*u||0,g=e.deltaY||e.wheelDeltaY*u||e.wheelDelta*u||e.detail||0,_=e.deltaZ||0;let y=Os.Pixel;e.deltaMode&&(e.deltaMode===1?y=Os.Line:e.deltaMode===2&&(y=Os.Page));const b=new ug(o.x,o.y,e.pageX,e.pageY,s.x,s.y,0,h,g,_,y,e);this.currentFrameWheel.push(b)}triggerEvent(e,s){const o=this.engine.screen.worldToPageCoordinates(s);window.PointerEvent?this._handle(new window.PointerEvent("pointer"+e,{pointerId:0,clientX:o.x,clientY:o.y})):this._handle(new window.MouseEvent("mouse"+e,{clientX:o.x,clientY:o.y}));const u=this.engine.currentScene.world.systemManager.get(Ca),h=this.engine.currentScene.world.queryManager.createQuery(u.types);u.preupdate(),u.update(h.getEntities())}_nativeButtonToPointerButton(e){switch(e){case cn.NoButton:return Bi.NoButton;case cn.Left:return Bi.Left;case cn.Middle:return Bi.Middle;case cn.Right:return Bi.Right;case cn.Unknown:return Bi.Unknown;default:return ot(e)}}_stringToPointerType(e){switch(e){case"touch":return Oi.Touch;case"mouse":return Oi.Mouse;case"pen":return Oi.Pen;default:return Oi.Unknown}}}class hg{constructor(e){var s;this._samplePeriod=100,this._currentFrameTime=0,this._frames=0,this._previousSampleTime=0,this._beginFrameTime=0,this._fps=e.initialFps,this._samplePeriod=(s=e.samplePeriod)!==null&&s!==void 0?s:this._samplePeriod,this._currentFrameTime=1e3/e.initialFps,this._nowFn=e.nowFn,this._previousSampleTime=this._nowFn()}start(){this._beginFrameTime=this._nowFn()}end(){this._frames++;const e=this._nowFn();this._currentFrameTime=e-this._beginFrameTime,e>=this._previousSampleTime+this._samplePeriod&&(this._fps=this._frames*1e3/(e-this._previousSampleTime),this._previousSampleTime=e,this._frames=0)}get fps(){return this._fps}get instant(){return 1e3/this._currentFrameTime}}class wc{constructor(e){var s,o,u;this._onFatalException=()=>{},this._maxFps=1/0,this._lastTime=0,this._elapsed=1,this._scheduledCbs=[],this._totalElapsed=0,this._options=e,this.tick=e.tick,this._lastTime=(s=this.now())!==null&&s!==void 0?s:0,this._maxFps=(o=e.maxFps)!==null&&o!==void 0?o:this._maxFps,this._onFatalException=(u=e.onFatalException)!==null&&u!==void 0?u:this._onFatalException,this.fpsSampler=new hg({initialFps:60,nowFn:()=>this.now()})}elapsed(){return this._elapsed}now(){return performance.now()}toTestClock(){return new dg({...this._options,defaultUpdateMs:16.6})}toStandardClock(){return new Cc({...this._options})}setFatalExceptionHandler(e){this._onFatalException=e}schedule(e,s=0){const o=this._totalElapsed+s;this._scheduledCbs.push([e,o])}_runScheduledCbs(){for(let e=this._scheduledCbs.length-1;e>-1;e--)this._scheduledCbs[e][1]<=this._totalElapsed&&(this._scheduledCbs[e][0](),this._scheduledCbs.splice(e,1))}update(e){try{this.fpsSampler.start();const s=this.now();let o=s-this._lastTime||1;const u=1e3/this._maxFps;if(o>=u){let h=0;u!==0&&(h=o%u,o=o-h),o>200&&(o=1),this._elapsed=e||o,this._totalElapsed+=this._elapsed,this._runScheduledCbs(),this.tick(e||o),u!==0?this._lastTime=s-h:this._lastTime=s,this.fpsSampler.end()}}catch(s){this._onFatalException(s),this.stop()}}}class Cc extends wc{constructor(e){super(e),this._running=!1}isRunning(){return this._running}start(){if(this._running)return;this._running=!0;const e=()=>{if(this._running)try{this._requestId=window.requestAnimationFrame(e),this.update()}catch(s){throw window.cancelAnimationFrame(this._requestId),s}};e()}stop(){this._running=!1}}class dg extends wc{constructor(e){super({...e}),this._logger=N.getInstance(),this._running=!1,this._currentTime=0,this._updateMs=e.defaultUpdateMs}now(){var e;return(e=this._currentTime)!==null&&e!==void 0?e:0}isRunning(){return this._running}start(){this._running=!0}stop(){this._running=!1}step(e){const s=e??this._updateMs;this._running?(this.update(s),this._currentTime+=s):this._logger.warn("The clock is not running, no step will be performed")}run(e,s){for(let o=0;o<e;o++)this.step(s??this._updateMs)}}var Uw=Ft(7379);class fg{constructor(){this._toasterCss=Uw.Z.toString(),this._isInitialized=!1}_initialize(){this._isInitialized||(this._container=document.createElement("div"),this._container.id="ex-toast-container",document.body.appendChild(this._container),this._isInitialized=!0,this._styleBlock=document.createElement("style"),this._styleBlock.textContent=this._toasterCss,document.head.appendChild(this._styleBlock))}dispose(){this._container.parentElement.removeChild(this._container),this._styleBlock.parentElement.removeChild(this._styleBlock),this._isInitialized=!1}_createFragment(e){const s=document.createElement("span");return s.innerText=e,s}toast(e,s,o){this._initialize();const u=document.createElement("div");u.className="ex-toast-message";const h=e.split("[LINK]").map(E=>this._createFragment(E));if(s){const E=document.createElement("a");E.href=s,o?E.innerText=o:E.innerText=s,h.splice(1,0,E)}const g=document.createElement("div");h.forEach(E=>{g.appendChild(E)}),u.appendChild(g);const _=document.createElement("button");_.innerText="x",_.addEventListener("click",()=>{this._container.removeChild(u)}),u.appendChild(_);const y=E=>{if(E.key==="Escape")try{this._container.removeChild(u)}catch{}document.removeEventListener("keydown",y)};document.addEventListener("keydown",y);const b=this._container.firstChild;this._container.insertBefore(u,b)}}l();var hn;(function(d){d[d.None=0]="None",d[d.Canvas=1]="Canvas",d[d.All=2]="All"})(hn||(hn={}));class Ns extends Je{constructor(e){var s,o,u,h,g,_;super(),this.maxFps=Number.POSITIVE_INFINITY,this.scenes={},this._suppressPlayButton=!1,this.pauseAudioWhenHidden=!0,this._isDebug=!1,this.enableCanvasTransparency=!0,this.onFatalException=D=>{N.getInstance().fatal(D)},this._toaster=new fg,this._timescale=1,this._isInitialized=!1,this._deferredGoTo=null,this._originalOptions={},this._performanceThresholdTriggered=!1,this._fpsSamples=[],this._loadingComplete=!1,this._isReady=!1,this._isReadyPromise=new Promise(D=>{this._isReadyResolve=D}),this.currentFrameElapsedMs=0,this.currentFrameLagMs=0,this._lagMs=0,this._screenShotRequests=[],e={...Ns._DEFAULT_ENGINE_OPTIONS,...e},this._originalOptions=e,c.freeze(),this.browser=new lg(window,document);const y=new np;if(!e.suppressMinimumBrowserFeatureDetection&&!(this._compatible=y.test())){const D=document.createElement("div");if(D.innerText="Sorry, your browser does not support all the features needed for Excalibur",document.body.appendChild(D),y.failedTests.forEach(function(F){const z=document.createElement("div");z.innerText="Browser feature missing "+F,document.body.appendChild(z)}),e.canvasElementId){const F=document.getElementById(e.canvasElementId);F&&F.parentElement.removeChild(F)}return}else this._compatible=!0;console.log&&!e.suppressConsoleBootMessage&&(console.log(`%cPowered by Excalibur.js (v${_g})`,"background: #176BAA; color: white; border-radius: 5px; padding: 15px; font-size: 1.5em; line-height: 80px;"),console.log(`
      /| ________________
O|===|* >________________>
      \\|`),console.log("Visit","http://excaliburjs.com","for more information")),e.suppressPlayButton&&(this._suppressPlayButton=!0),this._logger=N.getInstance(),this._logger.defaultLevel===H.Debug&&y.logBrowserFeatures(),this._logger.debug("Building engine..."),this.canvasElementId=e.canvasElementId,e.canvasElementId?(this._logger.debug("Using Canvas element specified: "+e.canvasElementId),this.canvas=document.getElementById(e.canvasElementId)):e.canvasElement?(this._logger.debug("Using Canvas element specified:",e.canvasElement),this.canvas=e.canvasElement):(this._logger.debug("Using generated canvas element"),this.canvas=document.createElement("canvas"));let b=(s=e.displayMode)!==null&&s!==void 0?s:Qt.Fixed;e.width&&e.height||e.viewport?(e.displayMode===void 0&&(b=Qt.Fixed),this._logger.debug("Engine viewport is size "+e.width+" x "+e.height)):e.displayMode||(this._logger.debug("Engine viewport is fit"),b=Qt.FitScreen),this._originalDisplayMode=b;let E=c.isEnabled("use-canvas-context");if(!E)try{this.graphicsContext=new Ar({canvasElement:this.canvas,enableTransparency:this.enableCanvasTransparency,smoothing:e.antialiasing,backgroundColor:e.backgroundColor,snapToPixel:e.snapToPixel,useDrawSorting:e.useDrawSorting})}catch(D){this._logger.warn(`Excalibur could not load webgl for some reason (${D.message}) and loaded a Canvas 2D fallback. Some features of Excalibur will not work in this mode. 

Read more about this issue at https://excaliburjs.com/docs/webgl`),E=!0}E&&(this.graphicsContext=new na({canvasElement:this.canvas,enableTransparency:this.enableCanvasTransparency,smoothing:e.antialiasing,backgroundColor:e.backgroundColor,snapToPixel:e.snapToPixel,useDrawSorting:e.useDrawSorting})),this.screen=new ic({canvas:this.canvas,context:this.graphicsContext,antialiasing:(o=e.antialiasing)!==null&&o!==void 0?o:!0,browser:this.browser,viewport:(u=e.viewport)!==null&&u!==void 0?u:e.width&&e.height?{width:e.width,height:e.height}:ec.SVGA,resolution:e.resolution,displayMode:b,pixelRatio:e.suppressHiDPIScaling?1:(h=e.pixelRatio)!==null&&h!==void 0?h:null}),wt.filtering=e.antialiasing?Ke.Blended:Ke.Pixel,e.backgroundColor&&(this.backgroundColor=e.backgroundColor.clone()),this.maxFps=(g=e.maxFps)!==null&&g!==void 0?g:this.maxFps,this.fixedUpdateFps=(_=e.fixedUpdateFps)!==null&&_!==void 0?_:this.fixedUpdateFps,this.clock=new Cc({maxFps:this.maxFps,tick:this._mainloop.bind(this),onFatalException:D=>this.onFatalException(D)}),this.enableCanvasTransparency=e.enableCanvasTransparency,this._loader=new ep,this._loader.wireEngine(this),this.debug=new og(this),this._initialize(e),this.rootScene=this.currentScene=new Br,this.addScene("root",this.rootScene),window.___EXCALIBUR_DEVTOOL=this}get canvasWidth(){return this.screen.canvasWidth}get halfCanvasWidth(){return this.screen.halfCanvasWidth}get canvasHeight(){return this.screen.canvasHeight}get halfCanvasHeight(){return this.screen.halfCanvasHeight}get drawWidth(){return this.screen.drawWidth}get halfDrawWidth(){return this.screen.halfDrawWidth}get drawHeight(){return this.screen.drawHeight}get halfDrawHeight(){return this.screen.halfDrawHeight}get isHiDpi(){return this.screen.isHiDpi}get stats(){return this.debug.stats}get isFullscreen(){return this.screen.isFullScreen}get displayMode(){return this.screen.displayMode}get pixelRatio(){return this.screen.pixelRatio}get isDebug(){return this._isDebug}get snapToPixel(){return this.graphicsContext.snapToPixel}set snapToPixel(e){this.graphicsContext.snapToPixel=e}on(e,s){super.on(e,s)}once(e,s){super.once(e,s)}off(e,s){super.off(e,s)}_monitorPerformanceThresholdAndTriggerFallback(){const{allow:e}=this._originalOptions.configurePerformanceCanvas2DFallback;let{threshold:s,showPlayerMessage:o}=this._originalOptions.configurePerformanceCanvas2DFallback;if(s===void 0&&(s=Ns._DEFAULT_ENGINE_OPTIONS.configurePerformanceCanvas2DFallback.threshold),o===void 0&&(o=Ns._DEFAULT_ENGINE_OPTIONS.configurePerformanceCanvas2DFallback.showPlayerMessage),!c.isEnabled("use-canvas-context")&&e&&this.ready&&!this._performanceThresholdTriggered){this._fpsSamples.length===s.numberOfFrames&&this._fpsSamples.splice(0,1),this._fpsSamples.push(this.clock.fpsSampler.fps);let u=0;for(let g=0;g<this._fpsSamples.length;g++)u+=this._fpsSamples[g];const h=u/this._fpsSamples.length;this._fpsSamples.length===s.numberOfFrames&&h<=s.fps&&(this._performanceThresholdTriggered=!0,this._logger.warn(`Switching to browser 2D Canvas fallback due to performance. Some features of Excalibur will not work in this mode.
this might mean your browser doesn't have webgl enabled or hardware acceleration is unavailable.

If in Chrome:
  * Visit Settings > Advanced > System, and ensure "Use Hardware Acceleration" is checked.
  * Visit chrome://flags/#ignore-gpu-blocklist and ensure "Override software rendering list" is "enabled"
If in Firefox, visit about:config
  * Ensure webgl.disabled = false
  * Ensure webgl.force-enabled = true
  * Ensure layers.acceleration.force-enabled = true

Read more about this issue at https://excaliburjs.com/docs/performance`),o&&this._toaster.toast("Excalibur is encountering performance issues. It's possible that your browser doesn't have hardware acceleration enabled. Visit [LINK] for more information and potential solutions.","https://excaliburjs.com/docs/performance"),this.useCanvas2DFallback(),this.emit("fallbackgraphicscontext",this.graphicsContext))}}useCanvas2DFallback(){var e,s,o;const u=this.canvas.cloneNode(!1);this.canvas.parentNode.replaceChild(u,this.canvas),this.canvas=u;const h=this._originalOptions,g=this._originalDisplayMode;this.graphicsContext=new na({canvasElement:this.canvas,enableTransparency:this.enableCanvasTransparency,smoothing:h.antialiasing,backgroundColor:h.backgroundColor,snapToPixel:h.snapToPixel,useDrawSorting:h.useDrawSorting}),this.screen&&this.screen.dispose(),this.screen=new ic({canvas:this.canvas,context:this.graphicsContext,antialiasing:(e=h.antialiasing)!==null&&e!==void 0?e:!0,browser:this.browser,viewport:(s=h.viewport)!==null&&s!==void 0?s:h.width&&h.height?{width:h.width,height:h.height}:ec.SVGA,resolution:h.resolution,displayMode:g,pixelRatio:h.suppressHiDPIScaling?1:(o=h.pixelRatio)!==null&&o!==void 0?o:null}),this.screen.setCurrentCamera(this.currentScene.camera),this.input.pointers.detach();const _=h&&h.pointerScope===Bs.Document?document:this.canvas;this.input.pointers=this.input.pointers.recreate(_,this),this.input.pointers.init()}getWorldBounds(){return this.screen.getWorldBounds()}get timescale(){return this._timescale}set timescale(e){if(e<=0){N.getInstance().error("Cannot set engine.timescale to a value of 0 or less than 0.");return}this._timescale=e}addTimer(e){return this.currentScene.addTimer(e)}removeTimer(e){return this.currentScene.removeTimer(e)}addScene(e,s){this.scenes[e]&&this._logger.warn("Scene",e,"already exists overwriting"),this.scenes[e]=s}removeScene(e){if(e instanceof Br)for(const s in this.scenes)this.scenes.hasOwnProperty(s)&&this.scenes[s]===e&&delete this.scenes[s];typeof e=="string"&&delete this.scenes[e]}add(e){if(arguments.length===2){this.addScene(arguments[0],arguments[1]);return}this._deferredGoTo&&this.scenes[this._deferredGoTo]?this.scenes[this._deferredGoTo].add(e):this.currentScene.add(e)}remove(e){e instanceof ae&&this.currentScene.remove(e),e instanceof Br&&this.removeScene(e),typeof e=="string"&&this.removeScene(e)}goToScene(e,s){if(!this.isInitialized){this._deferredGoTo=e;return}if(this.scenes[e]){const o=this.currentScene,u=this.scenes[e];if(this._logger.debug("Going to scene:",e),this.currentScene.isInitialized){const g={engine:this,previousScene:o,nextScene:u};this.currentScene._deactivate.apply(this.currentScene,[g,u]),this.currentScene.eventDispatcher.emit("deactivate",new Gu(g,this.currentScene))}this.currentScene=u,this.screen.setCurrentCamera(u.camera),this.currentScene._initialize(this);const h={engine:this,previousScene:o,nextScene:u,data:s};this.currentScene._activate.apply(this.currentScene,[h,u]),this.currentScene.eventDispatcher.emit("activate",new Wu(h,this.currentScene))}else this._logger.error("Scene",e,"does not exist!")}screenToWorldCoordinates(e){return this.screen.screenToWorldCoordinates(e)}worldToScreenCoordinates(e){return this.screen.worldToScreenCoordinates(e)}_initialize(e){this.pageScrollPreventionMode=e.scrollPreventionMode;const s=e&&e.pointerScope===Bs.Document?document:this.canvas;this.input={keyboard:new ag,pointers:new Aa(s,this),gamepads:new Ea},this.input.keyboard.init(),this.input.pointers.init(),this.input.gamepads.init();let o,u;typeof document.hidden<"u"?(o="hidden",u="visibilitychange"):"msHidden"in document?(o="msHidden",u="msvisibilitychange"):"webkitHidden"in document&&(o="webkitHidden",u="webkitvisibilitychange"),this.browser.document.on(u,()=>{document[o]?(this.eventDispatcher.emit("hidden",new $u(this)),this._logger.debug("Window hidden")):(this.eventDispatcher.emit("visible",new Hu(this)),this._logger.debug("Window visible"))}),!this.canvasElementId&&!e.canvasElement&&document.body.appendChild(this.canvas)}onInitialize(e){}setAntialiasing(e){this.screen.antialiasing=e}getAntialiasing(){return this.screen.antialiasing}get isInitialized(){return this._isInitialized}_overrideInitialize(e){if(!this.isInitialized)if(this.onInitialize(e),super.emit("initialize",new Es(e,this)),this._isInitialized=!0,this._deferredGoTo){const s=this._deferredGoTo;this._deferredGoTo=null,this.goToScene(s)}else this.goToScene("root")}_update(e){if(!this.ready){this._loader.update(this,e),this.input.keyboard.update(),this.input.gamepads.update();return}this._preupdate(e),this.currentScene.update(this,e),this._postupdate(e),this.input.keyboard.update(),this.input.gamepads.update()}_preupdate(e){this.emit("preupdate",new Di(this,e,this)),this.onPreUpdate(this,e)}onPreUpdate(e,s){}_postupdate(e){this.emit("postupdate",new Hn(this,e,this)),this.onPostUpdate(this,e)}onPostUpdate(e,s){}_draw(e){if(this.graphicsContext.beginDrawLifecycle(),this.graphicsContext.clear(),this._predraw(this.graphicsContext,e),!this._isReady){this._loader.canvas.draw(this.graphicsContext,0,0),this.graphicsContext.flush();return}this.graphicsContext.backgroundColor=this.backgroundColor,this.currentScene.draw(this.graphicsContext,e),this._postdraw(this.graphicsContext,e),this.graphicsContext.flush(),this.graphicsContext.endDrawLifecycle(),this._checkForScreenShots()}_predraw(e,s){this.emit("predraw",new nn(e,s,this)),this.onPreDraw(e,s)}onPreDraw(e,s){}_postdraw(e,s){this.emit("postdraw",new Pr(e,s,this)),this.onPostDraw(e,s)}onPostDraw(e,s){}showDebug(e){this._isDebug=e}toggleDebug(){return this._isDebug=!this._isDebug,this._isDebug}get loadingComplete(){return this._loadingComplete}get ready(){return this._isReady}isReady(){return this._isReadyPromise}async start(e){if(!this._compatible)throw new Error("Excalibur is incompatible with your browser");return e&&(this.screen.pushResolutionAndViewport(),this.screen.resolution=this.screen.viewport,this.screen.applyResolutionAndViewport(),this._loader=e,this._loader.suppressPlayButton=this._suppressPlayButton||this._loader.suppressPlayButton,this._loader.wireEngine(this)),this._logger.debug("Starting game clock..."),this.browser.resume(),this.clock.start(),this._logger.debug("Game clock started"),e&&(await this.load(this._loader),this._loadingComplete=!0,this.screen.popResolutionAndViewport(),this.screen.applyResolutionAndViewport()),this._loadingComplete=!0,this._overrideInitialize(this),this._isReady=!0,this._isReadyResolve(),this.emit("start",new ai(this)),this._isReadyPromise}_mainloop(e){this.emit("preframe",new Ou(this,this.stats.prevFrame));const s=e*this.timescale;this.currentFrameElapsedMs=s;const o=this.stats.prevFrame.id+1;this.stats.currFrame.reset(),this.stats.currFrame.id=o,this.stats.currFrame.delta=s,this.stats.currFrame.fps=this.clock.fpsSampler.fps,Gt.clear();const u=this.clock.now(),h=1e3/this.fixedUpdateFps;if(this.fixedUpdateFps)for(this._lagMs+=s;this._lagMs>=h;)this._update(h),this._lagMs-=h;else this._update(s);const g=this.clock.now();this.currentFrameLagMs=this._lagMs,this._draw(s);const _=this.clock.now();this.stats.currFrame.duration.update=g-u,this.stats.currFrame.duration.draw=_-g,this.stats.currFrame.graphics.drawnImages=Gt.DrawnImagesCount,this.stats.currFrame.graphics.drawCalls=Gt.DrawCallCount,this.emit("postframe",new Nu(this,this.stats.currFrame)),this.stats.prevFrame.reset(this.stats.currFrame),this._monitorPerformanceThresholdAndTriggerFallback()}stop(){this.clock.isRunning()&&(this.emit("stop",new Ps(this)),this.browser.pause(),this.clock.stop(),this._logger.debug("Game stopped"))}isRunning(){return this.clock.isRunning()}screenshot(e=!1){return new Promise(o=>{this._screenShotRequests.push({preserveHiDPIResolution:e,resolve:o})})}_checkForScreenShots(){for(const e of this._screenShotRequests){const s=e.preserveHiDPIResolution?this.canvas.width:this.screen.resolution.width,o=e.preserveHiDPIResolution?this.canvas.height:this.screen.resolution.height,u=document.createElement("canvas");u.width=s,u.height=o,u.getContext("2d").drawImage(this.canvas,0,0,s,o);const g=new Image,_=u.toDataURL("image/png");g.src=_,e.resolve(g)}this._screenShotRequests.length=0}async load(e){try{await e.load()}catch(s){this._logger.error("Error loading resources, things may not behave properly",s),await Promise.resolve()}}}Ns._DEFAULT_ENGINE_OPTIONS={width:0,height:0,enableCanvasTransparency:!0,useDrawSorting:!0,configurePerformanceCanvas2DFallback:{allow:!0,showPlayerMessage:!1,threshold:{fps:20,numberOfFrames:100}},canvasElementId:"",canvasElement:void 0,snapToPixel:!1,pointerScope:Bs.Canvas,suppressConsoleBootMessage:null,suppressMinimumBrowserFeatureDetection:null,suppressHiDPIScaling:null,suppressPlayButton:null,scrollPreventionMode:hn.Canvas,backgroundColor:B.fromHex("#2185d0")};class Vw extends Li{constructor(e){super(e),this._font=new Ms,this._text=new Dr({text:"",font:this._font});const{text:s,pos:o,x:u,y:h,spriteFont:g,font:_,color:y}=e;this.pos=o??(u&&h?R(u,h):this.pos),this.text=s??this.text,this.font=_??this.font,this.spriteFont=g??this.spriteFont,this._text.color=y??this.color;const b=this.get(xe);b.anchor=C.Zero,b.use(this._text)}get font(){return this._font}set font(e){this._font=e,this._text.font=e}get text(){return this._text.text}set text(e){this._text.text=e}get color(){return this._text.color}set color(e){this._text&&(this._text.color=e)}get opacity(){return this._text.opacity}set opacity(e){this._text.opacity=e}get spriteFont(){return this._spriteFont}set spriteFont(e){e&&(this._spriteFont=e,this._text.font=this._spriteFont)}_initialize(e){super._initialize(e)}getTextWidth(){return this._text.width}}class pg extends ae{constructor(e,s,o,u){super([new tt,new xe({offset:o??C.Zero,onPostDraw:(F,z)=>this.draw(F,z)}),new ba(u)]),this.solid=!1,this._tileBounds=new Q,this._graphics=[],this._colliders=[],this.x=e,this.y=s,this.map=u,this._transform=this.get(tt),this._isometricEntityComponent=this.get(ba);const h=this.map.tileWidth/2,g=this.map.tileHeight/2,_=(this.x-this.y)*h,y=(this.x+this.y)*g;this._transform.pos=R(_,y),this._isometricEntityComponent.elevation=0,this._gfx=this.get(xe),this._gfx.visible=!1;const b=this.map.tileWidth,E=this.map.tileHeight,D=R(0,this.map.renderFromTopOfGraphic?E:0);this._gfx.localBounds=this._tileBounds=new Q({left:-b/2,top:-E,right:b/2,bottom:E}).translate(D)}getGraphics(){return this._graphics}addGraphic(e){this._graphics.push(e),this._gfx.visible=!0,this._gfx.localBounds=this._recalculateBounds()}_recalculateBounds(){let e=this._tileBounds.clone();for(const s of this._graphics){const o=R(this.map.graphicsOffset.x-this.map.tileWidth/2,this.map.graphicsOffset.y-(this.map.renderFromTopOfGraphic?0:s.height-this.map.tileHeight));e=e.combine(s.localBounds.translate(o))}return e}removeGraphic(e){const s=this._graphics.indexOf(e);s>-1&&this._graphics.splice(s,1),this._gfx.localBounds=this._recalculateBounds()}clearGraphics(){this._graphics.length=0,this._gfx.visible=!1,this._gfx.localBounds=this._recalculateBounds()}getColliders(){return this._colliders}addCollider(e){this._colliders.push(e),this.map.flagCollidersDirty()}removeCollider(e){const s=this._colliders.indexOf(e);s>-1&&this._colliders.splice(s,1),this.map.flagCollidersDirty()}clearColliders(){this._colliders.length=0,this.map.flagCollidersDirty()}get pos(){return this.map.tileToWorld(R(this.x,this.y))}get center(){return this.pos.add(R(0,this.map.tileHeight/2))}draw(e,s){const o=this.map.tileWidth/2;e.save(),e.translate(-o,0);for(const u of this._graphics)u.draw(e,this.map.graphicsOffset.x,this.map.graphicsOffset.y-(this.map.renderFromTopOfGraphic?0:u.height-this.map.tileHeight));e.restore()}}class jw extends ae{constructor(e){super([new tt,new mt({type:pt.Fixed}),new Kt,new va(b=>this.debug(b),!1)],e.name),this.renderFromTopOfGraphic=!1,this.graphicsOffset=R(0,0),this._collidersDirty=!1,this._originalOffsets=new WeakMap;const{pos:s,tileWidth:o,tileHeight:u,columns:h,rows:g,renderFromTopOfGraphic:_,graphicsOffset:y}=e;this.transform=this.get(tt),s&&(this.transform.pos=s),this.collider=this.get(Kt),this.collider&&this.collider.set(this._composite=new de([])),this.renderFromTopOfGraphic=_??this.renderFromTopOfGraphic,this.graphicsOffset=y??this.graphicsOffset,this.tileWidth=o,this.tileHeight=u,this.columns=h,this.rows=g,this.tiles=new Array(h*g);for(let b=0;b<g;b++)for(let E=0;E<h;E++){const D=new pg(E,b,this.graphicsOffset,this);this.tiles[E+b*h]=D,this.addChild(D)}}update(){this._collidersDirty&&(this.updateColliders(),this._collidersDirty=!1)}flagCollidersDirty(){this._collidersDirty=!0}_getOrSetColliderOriginalOffset(e){if(this._originalOffsets.has(e))return this._originalOffsets.get(e);{const s=e.offset;return this._originalOffsets.set(e,s),s}}updateColliders(){this._composite.clearColliders();const e=this.get(tt).pos;for(const s of this.tiles)if(s.solid)for(const o of s.getColliders()){const u=this._getOrSetColliderOriginalOffset(o);o.offset=this.tileToWorld(R(s.x,s.y)).sub(e).add(u).sub(R(this.tileWidth/2,this.tileHeight)),o.owner=this,this._composite.addCollider(o)}this.collider.update()}worldToTile(e){e=e.sub(this.transform.globalPos);const s=this.tileWidth/2,o=this.tileHeight/2;return R(~~((e.x/s+e.y/o)/2),~~((e.y/o-e.x/s)/2))}tileToWorld(e){const s=this.tileWidth/2,o=this.tileHeight/2,u=(e.x-e.y)*s,h=(e.x+e.y)*o;return R(u,h).add(this.transform.pos)}getTile(e,s){return e<0||s<0||e>=this.columns||s>=this.rows?null:this.tiles[e+s*this.columns]}getTileByPoint(e){const s=this.worldToTile(e);return this.getTile(s.x,s.y)}_getMaxZIndex(){let e=Number.NEGATIVE_INFINITY;for(const s of this.tiles){const o=s.get(tt).z;o>e&&(e=o)}return e}debug(e){e.save(),e.z=this._getMaxZIndex()+.5;for(let s=0;s<this.rows+1;s++){const o=this.tileToWorld(R(0,s)),u=this.tileToWorld(R(this.columns,s));e.drawLine(o,u,B.Red,2)}for(let s=0;s<this.columns+1;s++){const o=this.tileToWorld(R(s,0)),u=this.tileToWorld(R(s,this.rows));e.drawLine(o,u,B.Red,2)}for(const s of this.tiles)e.drawCircle(this.tileToWorld(R(s.x,s.y)),3,B.Yellow);e.restore()}}class bc{constructor(e,s){this._stopped=!1,this._sequenceBuilder=s,this._sequenceContext=new Rr(e),this._actionQueue=this._sequenceContext.getQueue(),this._sequenceBuilder(this._sequenceContext)}update(e){this._actionQueue.update(e)}isComplete(){return this._stopped||this._actionQueue.isComplete()}stop(){this._stopped=!0}reset(){this._stopped=!1,this._actionQueue.reset()}clone(e){return new bc(e,this._sequenceBuilder)}}class Hw{constructor(e){this._actions=e}update(e){for(let s=0;s<this._actions.length;s++)this._actions[s].update(e)}isComplete(e){return this._actions.every(s=>s.isComplete(e))}reset(){this._actions.forEach(e=>e.reset())}stop(){this._actions.forEach(e=>e.stop())}}class qn{static create(e,s){if(this._CURRENT_GROUP>this._MAX_GROUPS)throw new Error(`Cannot have more than ${this._MAX_GROUPS} collision groups`);if(this._GROUPS.get(e))throw new Error(`Collision group ${e} already exists`);const o=new Mi(e,this._CURRENT_BIT,s!==void 0?s:~this._CURRENT_BIT);return this._CURRENT_BIT=this._CURRENT_BIT<<1|0,this._CURRENT_GROUP++,this._GROUPS.set(e,o),o}static get groups(){return Array.from(this._GROUPS.values())}static groupByName(e){return this._GROUPS.get(e)}static reset(){this._GROUPS=new Map,this._CURRENT_BIT=this._STARTING_BIT,this._CURRENT_GROUP=1}}qn._STARTING_BIT=1,qn._MAX_GROUPS=32,qn._CURRENT_GROUP=1,qn._CURRENT_BIT=qn._STARTING_BIT,qn._GROUPS=new Map;function $w(d){return!!d._initialize}function Ww(d){return!!d.onInitialize}function Gw(d){return!!d._preupdate}function Xw(d){return!!d.onPreUpdate}function Yw(d){return!!d.onPostUpdate}function Zw(d){return!!d.onPostUpdate}function Qw(d){return!!d.onPreDraw}function Kw(d){return!!d.onPostDraw}class qw{constructor(e,s=B.Magenta,o=!0){this.path=e,this.color=s,this.bustCache=o,this._stream=null,this._gif=null,this._textures=[],this._animation=null,this._transparentColor=null,this._resource=new ta(e,"arraybuffer",o),this._transparentColor=s}async load(){const e=await this._resource.load();this._stream=new gg(e),this._gif=new mg(this._stream,this._transparentColor);const s=this._gif.images.map(o=>new Ku(o.src,!1));return await Promise.all(s.map(o=>o.load())),this.data=this._textures=s}isLoaded(){return!!this.data}toSprite(e=0){return this._textures[e].toSprite()}toSpriteSheet(){const e=this._textures.map(s=>s.toSprite());return new Ts({sprites:e})}toAnimation(e){const s=this.toSpriteSheet(),o=s.sprites.length;return this._animation=un.fromSpriteSheet(s,T(0,o),e),this._animation}get readCheckBytes(){return this._gif.checkBytes}}const ka=d=>d.reduce(function(e,s){return e*2+s},0),Sc=d=>{const e=[];for(let s=7;s>=0;s--)e.push(!!(d&1<<s));return e};class gg{constructor(e){if(this.data=null,this.len=0,this.position=0,this.readByte=()=>{if(this.position>=this.data.byteLength)throw new Error("Attempted to read past end of stream.");return this.data[this.position++]},this.readBytes=s=>{const o=[];for(let u=0;u<s;u++)o.push(this.readByte());return o},this.read=s=>{let o="";for(let u=0;u<s;u++)o+=String.fromCharCode(this.readByte());return o},this.readUnsigned=()=>{const s=this.readBytes(2);return(s[1]<<8)+s[0]},this.data=new Uint8Array(e),this.len=this.data.byteLength,this.len===0)throw new Error("No data loaded from file")}}const Jw=function(d,e){let s=0;const o=function(F){let z=0;for(let j=0;j<F;j++)e.charCodeAt(s>>3)&1<<(s&7)&&(z|=1<<j),s++;return z},u=[],h=1<<d,g=h+1;let _=d+1,y=[];const b=function(){y=[],_=d+1;for(let F=0;F<h;F++)y[F]=[F];y[h]=[],y[g]=null};let E,D;for(;;){if(D=E,E=o(_),E===h){b();continue}if(E===g)break;if(E<y.length)D!==h&&y.push(y[D].concat(y[E][0]));else{if(E!==y.length)throw new Error("Invalid LZW code.");y.push(y[D].concat(y[D][0]))}u.push.apply(u,y[E]),y.length===1<<_&&_<12&&_++}return u};class mg{constructor(e,s=B.Magenta){this._st=null,this._handler={},this._transparentColor=null,this.frames=[],this.images=[],this.globalColorTable=[],this.checkBytes=[],this.parseColorTable=o=>{const u=[];for(let h=0;h<o;h++){const _="#"+this._st.readBytes(3).map(y=>{const b=y.toString(16);return b.length===1?"0"+b:b}).join("");u.push(_)}return u},this.readSubBlocks=()=>{let o,u;u="";do o=this._st.readByte(),u+=this._st.read(o);while(o!==0);return u},this.parseHeader=()=>{const o={sig:null,ver:null,width:null,height:null,colorRes:null,globalColorTableSize:null,gctFlag:null,sorted:null,globalColorTable:[],bgColor:null,pixelAspectRatio:null};if(o.sig=this._st.read(3),o.ver=this._st.read(3),o.sig!=="GIF")throw new Error("Not a GIF file.");o.width=this._st.readUnsigned(),o.height=this._st.readUnsigned();const u=Sc(this._st.readByte());o.gctFlag=u.shift(),o.colorRes=ka(u.splice(0,3)),o.sorted=u.shift(),o.globalColorTableSize=ka(u.splice(0,3)),o.bgColor=this._st.readByte(),o.pixelAspectRatio=this._st.readByte(),o.gctFlag&&(o.globalColorTable=this.parseColorTable(1<<o.globalColorTableSize+1),this.globalColorTable=o.globalColorTable),this._handler.hdr&&this._handler.hdr(o)&&this.checkBytes.push(this._handler.hdr)},this.parseExt=o=>{const u=b=>{this.checkBytes.push(this._st.readByte());const E=Sc(this._st.readByte());b.reserved=E.splice(0,3),b.disposalMethod=ka(E.splice(0,3)),b.userInput=E.shift(),b.transparencyGiven=E.shift(),b.delayTime=this._st.readUnsigned(),b.transparencyIndex=this._st.readByte(),b.terminator=this._st.readByte(),this._handler.gce&&this._handler.gce(b)&&this.checkBytes.push(this._handler.gce)},h=b=>{b.comment=this.readSubBlocks(),this._handler.com&&this._handler.com(b)&&this.checkBytes.push(this._handler.com)},g=b=>{this.checkBytes.push(this._st.readByte()),b.ptHeader=this._st.readBytes(12),b.ptData=this.readSubBlocks(),this._handler.pte&&this._handler.pte(b)&&this.checkBytes.push(this._handler.pte)},_=b=>{const E=F=>{this.checkBytes.push(this._st.readByte()),F.unknown=this._st.readByte(),F.iterations=this._st.readUnsigned(),F.terminator=this._st.readByte(),this._handler.app&&this._handler.app.NETSCAPE&&this._handler.app.NETSCAPE(F)&&this.checkBytes.push(this._handler.app)},D=F=>{F.appData=this.readSubBlocks(),this._handler.app&&this._handler.app[F.identifier]&&this._handler.app[F.identifier](F)&&this.checkBytes.push(this._handler.app[F.identifier])};switch(this.checkBytes.push(this._st.readByte()),b.identifier=this._st.read(8),b.authCode=this._st.read(3),b.identifier){case"NETSCAPE":E(b);break;default:D(b);break}},y=b=>{b.data=this.readSubBlocks(),this._handler.unknown&&this._handler.unknown(b)&&this.checkBytes.push(this._handler.unknown)};switch(o.label=this._st.readByte(),o.label){case 249:o.extType="gce",u(o);break;case 254:o.extType="com",h(o);break;case 1:o.extType="pte",g(o);break;case 255:o.extType="app",_(o);break;default:o.extType="unknown",y(o);break}},this.parseImg=o=>{const u=(_,y)=>{const b=new Array(_.length),E=_.length/y,D=(X,Y)=>{const U=_.slice(Y*y,(Y+1)*y);b.splice.apply(b,[X*y,y].concat(U))},F=[0,4,2,1],z=[8,8,4,2];let j=0;for(let X=0;X<4;X++)for(let Y=F[X];Y<E;Y+=z[X])D(Y,j),j++;return b};o.leftPos=this._st.readUnsigned(),o.topPos=this._st.readUnsigned(),o.width=this._st.readUnsigned(),o.height=this._st.readUnsigned();const h=Sc(this._st.readByte());o.lctFlag=h.shift(),o.interlaced=h.shift(),o.sorted=h.shift(),o.reserved=h.splice(0,2),o.lctSize=ka(h.splice(0,3)),o.lctFlag&&(o.lct=this.parseColorTable(1<<o.lctSize+1)),o.lzwMinCodeSize=this._st.readByte();const g=this.readSubBlocks();o.pixels=Jw(o.lzwMinCodeSize,g),o.interlaced&&(o.pixels=u(o.pixels,o.width)),this.frames.push(o),this.arrayToImage(o),this._handler.img&&this._handler.img(o)&&this.checkBytes.push(this._handler)},this.parseBlock=()=>{const o={sentinel:this._st.readByte(),type:""};switch(String.fromCharCode(o.sentinel)){case"!":o.type="ext",this.parseExt(o);break;case",":o.type="img",this.parseImg(o);break;case";":o.type="eof",this._handler.eof&&this._handler.eof(o)&&this.checkBytes.push(this._handler.eof);break;default:throw new Error("Unknown block: 0x"+o.sentinel.toString(16))}o.type!=="eof"&&this.parseBlock()},this.arrayToImage=o=>{let u=0;const h=document.createElement("canvas");h.id=u.toString(),h.width=o.width,h.height=o.height,u++;const g=h.getContext("2d"),_=1;let y=0,b=0;for(let D=0;D<o.pixels.length;D++)b%o.width===0&&(y++,b=0),this.globalColorTable[o.pixels[D]]===this._transparentColor.toHex()?g.fillStyle="rgba(0, 0, 0, 0)":g.fillStyle=this.globalColorTable[o.pixels[D]],g.fillRect(b,y,_,_),b++;const E=new Image;E.src=h.toDataURL(),this.images.push(E)},this._st=e,this._handler={},this._transparentColor=s,this.parseHeader(),this.parseBlock()}}class Pc extends Ae{constructor(e){super(),this.color=B.Black,this.thickness=1;const{start:s,end:o,color:u,thickness:h}=e;this.start=s,this.end=o,this.color=u??this.color,this.thickness=h??this.thickness;const{width:g,height:_}=Q.fromPoints([s,o]);this.width=g,this.height=_}_drawImage(e,s,o){e.drawLine(this.start,this.end,this.color,this.thickness)}clone(){return new Pc({start:this.start,end:this.end,color:this.color,thickness:this.thickness})}}class Ec extends ks{constructor(e){super(e),this.points=e.points,this.filtering=Ke.Blended,this.rasterize()}get points(){return this._points}set points(e){this._points=e;const s=this.minPoint;this.width=this._points.reduce((o,u)=>Math.max(u.x,o),0)-s.x,this.height=this._points.reduce((o,u)=>Math.max(u.y,o),0)-s.y,this.flagDirty()}get minPoint(){const e=this._points.reduce((o,u)=>Math.min(u.x,o),1/0),s=this._points.reduce((o,u)=>Math.min(u.y,o),1/0);return R(e,s)}clone(){return new Ec({points:this.points.map(e=>e.clone()),...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(e){if(this.points&&this.points.length){e.beginPath();const s=this.minPoint.negate(),o=this.points[0].add(s);e.moveTo(o.x,o.y),this.points.forEach(u=>{e.lineTo(u.x+s.x,u.y+s.y)}),e.lineTo(o.x,o.y),e.closePath(),this.color&&e.fill(),this.strokeColor&&e.stroke()}}}class t1{constructor(){this._queue=[]}get length(){return this._queue.length}enqueue(){const e=new ct;return this._queue.push(e),e.promise}dequeue(e){this._queue.shift().resolve(e)}}class e1{constructor(e){this._count=e,this._waitQueue=new t1}get count(){return this._count}get waiting(){return this._waitQueue.length}async enter(){return this._count!==0?(this._count--,Promise.resolve()):this._waitQueue.enqueue()}exit(e=1){if(e!==0){for(;e!==0&&this._waitQueue.length!==0;)this._waitQueue.dequeue(null),e--;this._count+=e}}}const _g="0.27.0";l()})();I.fWn;I.Ia8;I.rqv;I.hLI;I.yyv;I.tX5;var kk=I.vtX;I.r7K;I.lCh;I.cE4;var Y_=I.fwF;I.sce;I._c7;I.KUs;I.Ajp;var Ik=I.RDh;I._H9;I.mxs;I.OmD;var Rk=I.kBf;I.C4F;I.NQt;I.JjN;I.V1s;I.Xz7;I.Cdc;I.FKn;I.wTW;I.SUY;I.ab2;I.GfZ;I.YMS;I.oyv;I.aUb;I.SdD;I.JUv;I.jEj;I.TFq;I.HDU;I.R_y;I.ydN;I.t50;I.s$$;var Dk=I.v2G,Mk=I.Ilk;I.s9i;I.dxL;I.LLX;I.wA2;I.R_p;I.IQ$;I.I5F;I.X8$;I.FR6;I.U8o;I.kbG;I.iS_;I.cGG;I.RPN;I.skb;I.SLU;I.RdJ;I.cNu;I.gU7;I.LSk;I.Nmp;var Fk=I.d1Y;I.xrL;I.sRW;I.cmV;I.qWz;I.N0Q;var Lk=I.q8b;I.ynB;I.jT9;I.wAz;var Bk=I.D4V;I.N6H;I.W1A;I.JHW;I.v2K;I.pBf;I.GMl;I.zW2;I.B0K;I.Nv7;I.C_p;I.iqw;I.MUA;I.xqU;I.pTp;I.vUK;I.j9l;I.Zxw;I.Hdx;I.Z$d;I.iqV;I.o$7;I.olM;I.Zm$;I.$QH;I.i78;I.h6u;I.hts;I.j88;I.VME;I.nt;I.Ukr;I.zsu;I.oA6;I.TVh;I.TwZ;I.GTT;I.xxj;I.XdK;I.Jmb;var qa=I.cXo;I.Dm5;var Ok=I.IIB;I.zI0;I.LYD;I.cEG;I.SEl;I.t9V;I.SKZ;I.__J;I.RI$;I.x12;I.ccz;var U2=I.aNw;I.xwn;I.dNK;I.ini;I.YdH;I.y3G;I.l57;I.xn0;I.t2V;I.uxB;I.cpd;I.fiy;I.$XZ;I.uqK;I.STE;I.y$z;I.mAD;I.sOq;I.hUw;I._0G;I.Sqs;I.hpZ;I.Vol;var Nk=I.wIZ;I.cBi;I.RFv;I.kfC;I.mgq;I.YVA;I.Kgp;I.HH$;I.M_d;I.rgh;I.Ra6;I.KhR;I.BS5;I.xhz;I.xOq;I.a9j;I.bHk;I.CgK;I.cuY;I.kvE;I.SBu;I.AE_;I.ctO;I.OLH;I.kky;I.nSF;I.zHn;I.zwx;I.AeJ;I.hLz;I.D9g;I.wA;I.jhr;I.GVs;I._zO;I.w6$;I.mhV;I.MOD;I.kwd;I.Lmr;I.xsS;I.lLr;I.Z$r;I.IXb;I.SGH;I.SMj;I.L34;I.exe;var zk=I.bnF,Uk=I.MFA;I.$uU;var Z_=I.jyi;I.E03;I.V6q;I.rg2;I.DVW;I.nVo;I.F6N;I.xP7;I.Odq;I.Zif;I.ZGJ;I.MJk;I.xvT;I.PHM;I.dpR;I.n9L;I.KwO;I.B7y;I.x7r;I.wx7;I.Uvn;I.OFT;I.xzN;I.M5Z;I.ZrN;var V2=I.OWs;I.dF9;I.oZy;I.rD2;I.VHo;I.ohE;I.R$E;I.q3I;I.Pab;I.uZ5;I.McK;I.F9c;I.k0b;I.hnT;I.RSJ;I.Mku;I.h90;I.rms;I.ErP;I.aVg;I.lPc;I.Z8E;I._N2;I.yFn;I.lNv;I.cu9;I.MZQ;I.FUM;I.BxR;I.vdf;I.iaL;I.w6H;I.Q4c;I.Xxe;I.Uxb;I.Yr5;var Vk=I.Bhw;I.yOA;const j2="/2023/nene/assets/nene_idle-e442b347.png",H2="/2023/nene/assets/nene_jump-adeb89e1.png",$2="/2023/nene/assets/nene_running_1-941ed1a3.png",W2="/2023/nene/assets/nene_running_2-3639975d.png",zi={neneIdle:new qa(j2),neneRun1:new qa($2),neneRun2:new qa(W2),neneJump:new qa(H2)},G2={idleLeft:zi.neneIdle.toSprite(),idleRight:new Z_({image:zi.neneIdle,flipHorizontal:!0}),runLeft:new Y_({frames:[{graphic:zi.neneRun1.toSprite(),duration:150},{graphic:zi.neneRun2.toSprite(),duration:150}]}),runRight:new Y_({frames:[{graphic:zi.neneRun1.toSprite(),duration:200},{graphic:zi.neneRun2.toSprite(),duration:200}],flipHorizontal:!0}),jumpLeft:zi.neneJump.toSprite(),jumpRight:new Z_({image:zi.neneJump,flipHorizontal:!0})};for(const t of Object.values(G2))t.scale=new V2(.3,.3);const Mu=new U2;Mu.backgroundColor="transparent";Mu.suppressPlayButton=!0;for(const t of Object.values(zi))Mu.addResource(t);const X2=Ss(null),jk=Ss(null),Hk=Ss(null),$k=Ss(0),Y2=Ss([]),Wk=Ss("intro"),Gk=Ss(()=>{});function Z2(){const t=["intro","messages","art","cake"];Y2.set(t.map(i=>{const n=document.getElementById(i);return{section:i,left:n.offsetLeft}}))}const Q2=(t,i)=>Math.floor(Math.random()*(i-t+1)+t),Xk=t=>t[Q2(0,t.length-1)];function K2(){const[t,i]=O.useState(0),[n,r]=O.useState(999),a=N2(X2),l=t>=n,c=()=>i(f=>f+1);return O.useEffect(()=>{const f=setTimeout(()=>{const p=document.querySelectorAll("img");r(p.length),p.forEach(m=>{m.onload=c,m.complete&&c()})},1e3);return()=>{clearTimeout(f),document.querySelectorAll("img").forEach(m=>{m.removeEventListener("load",c)})}},[]),O.useEffect(()=>{l&&a&&(a==null||a.start(Mu),Z2())},[t,a,l,n]),l?bt.jsx(bt.Fragment,{}):bt.jsxs("div",{className:"fixed inset-0 z-50 bg-other flex flex-col justify-center items-center",children:[bt.jsx("img",{src:"/logo.png",alt:"",className:"w-full max-w-[40%] mb-20"}),bt.jsxs("h2",{className:"text-5xl text-white",children:[t,"/",n," resources loaded"]})]})}const q2=O.lazy(()=>mS(()=>import("./index-9dab102c.js"),["assets/index-9dab102c.js","assets/index-6cee73fd.css"]));function J2(){const{i18n:t}=B2(),i=P0();return O.useEffect(()=>{const n=localStorage.getItem("opt_lang");n&&t.changeLanguage(n.toLowerCase())},[]),bt.jsxs("div",{className:"h-full",children:[bt.jsx(IA,{mode:"wait",children:bt.jsx(hS,{location:i,children:bt.jsx(E0,{path:"/",element:bt.jsx(tk,{Element:q2})})},i.pathname)}),bt.jsx(K2,{}),bt.jsx(x2,{})]})}function tk({Element:t}){return bt.jsx(V_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut",duration:.5},className:"h-full",children:bt.jsx(O.Suspense,{fallback:bt.jsxs(bt.Fragment,{children:[bt.jsxs(V_.div,{className:"fixed inset-0 bg-paper flex justify-center items-center",children:[bt.jsxs("svg",{"aria-hidden":"true",className:"w-24 h-24 text-white animate-spin fill-sky-400",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[bt.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),bt.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),bt.jsx("span",{className:"sr-only",children:"Loading..."})]}),bt.jsx("div",{className:"h-screen"})]}),children:bt.jsx(t,{})})})}function ek(){return bt.jsx("div",{className:"-translate-x-full -translate-y-full translate-x-full sr-only"})}const ik={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,i){console&&console[t]&&console[t].apply(console,i)}};class Jl{constructor(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(i,n)}init(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=i||ik,this.options=n,this.debug=n.debug}log(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(i,n,r,a){return a&&!this.debug?null:(typeof i[0]=="string"&&(i[0]=`${r}${this.prefix} ${i[0]}`),this.logger[n](i))}create(i){return new Jl(this.logger,{prefix:`${this.prefix}:${i}:`,...this.options})}clone(i){return i=i||this.options,i.prefix=i.prefix||this.prefix,new Jl(this.logger,i)}}var Ti=new Jl;class Fu{constructor(){this.observers={}}on(i,n){return i.split(" ").forEach(r=>{this.observers[r]=this.observers[r]||[],this.observers[r].push(n)}),this}off(i,n){if(this.observers[i]){if(!n){delete this.observers[i];return}this.observers[i]=this.observers[i].filter(r=>r!==n)}}emit(i){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];this.observers[i]&&[].concat(this.observers[i]).forEach(c=>{c(...r)}),this.observers["*"]&&[].concat(this.observers["*"]).forEach(c=>{c.apply(c,[i,...r])})}}function qr(){let t,i;const n=new Promise((r,a)=>{t=r,i=a});return n.resolve=t,n.reject=i,n}function Q_(t){return t==null?"":""+t}function nk(t,i,n){t.forEach(r=>{i[r]&&(n[r]=i[r])})}function Xf(t,i,n){function r(c){return c&&c.indexOf("###")>-1?c.replace(/###/g,"."):c}function a(){return!t||typeof t=="string"}const l=typeof i!="string"?[].concat(i):i.split(".");for(;l.length>1;){if(a())return{};const c=r(l.shift());!t[c]&&n&&(t[c]=new n),Object.prototype.hasOwnProperty.call(t,c)?t=t[c]:t={}}return a()?{}:{obj:t,k:r(l.shift())}}function K_(t,i,n){const{obj:r,k:a}=Xf(t,i,Object);r[a]=n}function sk(t,i,n,r){const{obj:a,k:l}=Xf(t,i,Object);a[l]=a[l]||[],r&&(a[l]=a[l].concat(n)),r||a[l].push(n)}function tu(t,i){const{obj:n,k:r}=Xf(t,i);if(n)return n[r]}function rk(t,i,n){const r=tu(t,n);return r!==void 0?r:tu(i,n)}function Jx(t,i,n){for(const r in i)r!=="__proto__"&&r!=="constructor"&&(r in t?typeof t[r]=="string"||t[r]instanceof String||typeof i[r]=="string"||i[r]instanceof String?n&&(t[r]=i[r]):Jx(t[r],i[r],n):t[r]=i[r]);return t}function Us(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var ok={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function ak(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,i=>ok[i]):t}const lk=[" ",",","?","!",";"];function uk(t,i,n){i=i||"",n=n||"";const r=lk.filter(c=>i.indexOf(c)<0&&n.indexOf(c)<0);if(r.length===0)return!0;const a=new RegExp(`(${r.map(c=>c==="?"?"\\?":c).join("|")})`);let l=!a.test(t);if(!l){const c=t.indexOf(n);c>0&&!a.test(t.substring(0,c))&&(l=!0)}return l}function eu(t,i){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[i])return t[i];const r=i.split(n);let a=t;for(let l=0;l<r.length;++l){if(!a||typeof a[r[l]]=="string"&&l+1<r.length)return;if(a[r[l]]===void 0){let c=2,f=r.slice(l,l+c).join(n),p=a[f];for(;p===void 0&&r.length>l+c;)c++,f=r.slice(l,l+c).join(n),p=a[f];if(p===void 0)return;if(p===null)return null;if(i.endsWith(f)){if(typeof p=="string")return p;if(f&&typeof p[f]=="string")return p[f]}const m=r.slice(l+c).join(n);return m?eu(p,m,n):void 0}a=a[r[l]]}return a}function kd(t){return t&&t.indexOf("_")>0?t.replace("_","-"):t}class q_ extends Fu{constructor(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=i||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}removeNamespaces(i){const n=this.options.ns.indexOf(i);n>-1&&this.options.ns.splice(n,1)}getResource(i,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,c=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let f=[i,n];r&&typeof r!="string"&&(f=f.concat(r)),r&&typeof r=="string"&&(f=f.concat(l?r.split(l):r)),i.indexOf(".")>-1&&(f=i.split("."));const p=tu(this.data,f);return p||!c||typeof r!="string"?p:eu(this.data&&this.data[i]&&this.data[i][n],r,l)}addResource(i,n,r,a){let l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const c=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator;let f=[i,n];r&&(f=f.concat(c?r.split(c):r)),i.indexOf(".")>-1&&(f=i.split("."),a=n,n=f[1]),this.addNamespaces(n),K_(this.data,f,a),l.silent||this.emit("added",i,n,r,a)}addResources(i,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const l in r)(typeof r[l]=="string"||Object.prototype.toString.apply(r[l])==="[object Array]")&&this.addResource(i,n,l,r[l],{silent:!0});a.silent||this.emit("added",i,n,r)}addResourceBundle(i,n,r,a,l){let c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},f=[i,n];i.indexOf(".")>-1&&(f=i.split("."),a=r,r=n,n=f[1]),this.addNamespaces(n);let p=tu(this.data,f)||{};a?Jx(p,r,l):p={...p,...r},K_(this.data,f,p),c.silent||this.emit("added",i,n,r)}removeResourceBundle(i,n){this.hasResourceBundle(i,n)&&delete this.data[i][n],this.removeNamespaces(n),this.emit("removed",i,n)}hasResourceBundle(i,n){return this.getResource(i,n)!==void 0}getResourceBundle(i,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(i,n)}:this.getResource(i,n)}getDataByLanguage(i){return this.data[i]}hasLanguageSomeTranslations(i){const n=this.getDataByLanguage(i);return!!(n&&Object.keys(n)||[]).find(a=>n[a]&&Object.keys(n[a]).length>0)}toJSON(){return this.data}}var tw={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,i,n,r,a){return t.forEach(l=>{this.processors[l]&&(i=this.processors[l].process(i,n,r,a))}),i}};const J_={};class iu extends Fu{constructor(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),nk(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],i,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ti.create("translator")}changeLanguage(i){i&&(this.language=i)}exists(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(i==null)return!1;const r=this.resolve(i,n);return r&&r.res!==void 0}extractFromKey(i,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let l=n.ns||this.options.defaultNS||[];const c=r&&i.indexOf(r)>-1,f=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!uk(i,r,a);if(c&&!f){const p=i.match(this.interpolator.nestingRegexp);if(p&&p.length>0)return{key:i,namespaces:l};const m=i.split(r);(r!==a||r===a&&this.options.ns.indexOf(m[0])>-1)&&(l=m.shift()),i=m.join(a)}return typeof l=="string"&&(l=[l]),{key:i,namespaces:l}}translate(i,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),i==null)return"";Array.isArray(i)||(i=[String(i)]);const a=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,l=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:c,namespaces:f}=this.extractFromKey(i[i.length-1],n),p=f[f.length-1],m=n.lng||this.language,v=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(m&&m.toLowerCase()==="cimode"){if(v){const C=n.nsSeparator||this.options.nsSeparator;return a?{res:`${p}${C}${c}`,usedKey:c,exactUsedKey:c,usedLng:m,usedNS:p}:`${p}${C}${c}`}return a?{res:c,usedKey:c,exactUsedKey:c,usedLng:m,usedNS:p}:c}const w=this.resolve(i,n);let x=w&&w.res;const S=w&&w.usedKey||c,A=w&&w.exactUsedKey||c,M=Object.prototype.toString.apply(x),L=["[object Number]","[object Function]","[object RegExp]"],T=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,P=!this.i18nFormat||this.i18nFormat.handleAsObject;if(P&&x&&(typeof x!="string"&&typeof x!="boolean"&&typeof x!="number")&&L.indexOf(M)<0&&!(typeof T=="string"&&M==="[object Array]")){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const C=this.options.returnedObjectHandler?this.options.returnedObjectHandler(S,x,{...n,ns:f}):`key '${c} (${this.language})' returned an object instead of string.`;return a?(w.res=C,w):C}if(l){const C=M==="[object Array]",R=C?[]:{},H=C?A:S;for(const N in x)if(Object.prototype.hasOwnProperty.call(x,N)){const $=`${H}${l}${N}`;R[N]=this.translate($,{...n,joinArrays:!1,ns:f}),R[N]===$&&(R[N]=x[N])}x=R}}else if(P&&typeof T=="string"&&M==="[object Array]")x=x.join(T),x&&(x=this.extendTranslation(x,i,n,r));else{let C=!1,R=!1;const H=n.count!==void 0&&typeof n.count!="string",N=iu.hasDefaultValue(n),$=H?this.pluralResolver.getSuffix(m,n.count,n):"",Z=n.ordinal&&H?this.pluralResolver.getSuffix(m,n.count,{ordinal:!1}):"",B=n[`defaultValue${$}`]||n[`defaultValue${Z}`]||n.defaultValue;!this.isValidLookup(x)&&N&&(C=!0,x=B),this.isValidLookup(x)||(R=!0,x=c);const st=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&R?void 0:x,Q=N&&B!==x&&this.options.updateMissing;if(R||C||Q){if(this.logger.log(Q?"updateKey":"missingKey",m,p,c,Q?B:x),l){const xt=this.resolve(c,{...n,keySeparator:!1});xt&&xt.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ct=[];const _t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&_t&&_t[0])for(let xt=0;xt<_t.length;xt++)ct.push(_t[xt]);else this.options.saveMissingTo==="all"?ct=this.languageUtils.toResolveHierarchy(n.lng||this.language):ct.push(n.lng||this.language);const St=(xt,K,ot)=>{const ut=N&&ot!==x?ot:st;this.options.missingKeyHandler?this.options.missingKeyHandler(xt,p,K,ut,Q,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(xt,p,K,ut,Q,n),this.emit("missingKey",xt,p,K,x)};this.options.saveMissing&&(this.options.saveMissingPlurals&&H?ct.forEach(xt=>{this.pluralResolver.getSuffixes(xt,n).forEach(K=>{St([xt],c+K,n[`defaultValue${K}`]||B)})}):St(ct,c,B))}x=this.extendTranslation(x,i,n,w,r),R&&x===c&&this.options.appendNamespaceToMissingKey&&(x=`${p}:${c}`),(R||C)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?x=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${p}:${c}`:c,C?x:void 0):x=this.options.parseMissingKeyHandler(x))}return a?(w.res=x,w):x}extendTranslation(i,n,r,a,l){var c=this;if(this.i18nFormat&&this.i18nFormat.parse)i=this.i18nFormat.parse(i,{...this.options.interpolation.defaultVariables,...r},a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const m=typeof i=="string"&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let v;if(m){const x=i.match(this.interpolator.nestingRegexp);v=x&&x.length}let w=r.replace&&typeof r.replace!="string"?r.replace:r;if(this.options.interpolation.defaultVariables&&(w={...this.options.interpolation.defaultVariables,...w}),i=this.interpolator.interpolate(i,w,r.lng||this.language,r),m){const x=i.match(this.interpolator.nestingRegexp),S=x&&x.length;v<S&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&a&&a.res&&(r.lng=a.usedLng),r.nest!==!1&&(i=this.interpolator.nest(i,function(){for(var x=arguments.length,S=new Array(x),A=0;A<x;A++)S[A]=arguments[A];return l&&l[0]===S[0]&&!r.context?(c.logger.warn(`It seems you are nesting recursively key: ${S[0]} in key: ${n[0]}`),null):c.translate(...S,n)},r)),r.interpolation&&this.interpolator.reset()}const f=r.postProcess||this.options.postProcess,p=typeof f=="string"?[f]:f;return i!=null&&p&&p.length&&r.applyPostProcessor!==!1&&(i=tw.handle(p,i,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:a,...r}:r,this)),i}resolve(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,a,l,c,f;return typeof i=="string"&&(i=[i]),i.forEach(p=>{if(this.isValidLookup(r))return;const m=this.extractFromKey(p,n),v=m.key;a=v;let w=m.namespaces;this.options.fallbackNS&&(w=w.concat(this.options.fallbackNS));const x=n.count!==void 0&&typeof n.count!="string",S=x&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),A=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",M=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);w.forEach(L=>{this.isValidLookup(r)||(f=L,!J_[`${M[0]}-${L}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(f)&&(J_[`${M[0]}-${L}`]=!0,this.logger.warn(`key "${a}" for languages "${M.join(", ")}" won't get resolved as namespace "${f}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),M.forEach(T=>{if(this.isValidLookup(r))return;c=T;const P=[v];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(P,v,T,L,n);else{let C;x&&(C=this.pluralResolver.getSuffix(T,n.count,n));const R=`${this.options.pluralSeparator}zero`,H=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(x&&(P.push(v+C),n.ordinal&&C.indexOf(H)===0&&P.push(v+C.replace(H,this.options.pluralSeparator)),S&&P.push(v+R)),A){const N=`${v}${this.options.contextSeparator}${n.context}`;P.push(N),x&&(P.push(N+C),n.ordinal&&C.indexOf(H)===0&&P.push(N+C.replace(H,this.options.pluralSeparator)),S&&P.push(N+R))}}let k;for(;k=P.pop();)this.isValidLookup(r)||(l=k,r=this.getResource(T,L,k,n))}))})}),{res:r,usedKey:a,exactUsedKey:l,usedLng:c,usedNS:f}}isValidLookup(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}getResource(i,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(i,n,r,a):this.resourceStore.getResource(i,n,r,a)}static hasDefaultValue(i){const n="defaultValue";for(const r in i)if(Object.prototype.hasOwnProperty.call(i,r)&&n===r.substring(0,n.length)&&i[r]!==void 0)return!0;return!1}}function dh(t){return t.charAt(0).toUpperCase()+t.slice(1)}class tv{constructor(i){this.options=i,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ti.create("languageUtils")}getScriptPartFromCode(i){if(i=kd(i),!i||i.indexOf("-")<0)return null;const n=i.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(i){if(i=kd(i),!i||i.indexOf("-")<0)return i;const n=i.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(i){if(typeof i=="string"&&i.indexOf("-")>-1){const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=i.split("-");return this.options.lowerCaseLng?r=r.map(a=>a.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=dh(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=dh(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=dh(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?i.toLowerCase():i}isSupportedCode(i){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(i=this.getLanguagePartFromCode(i)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(i)>-1}getBestMatchFromCodes(i){if(!i)return null;let n;return i.forEach(r=>{if(n)return;const a=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(a))&&(n=a)}),!n&&this.options.supportedLngs&&i.forEach(r=>{if(n)return;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return n=a;n=this.options.supportedLngs.find(l=>{if(l===a)return l;if(!(l.indexOf("-")<0&&a.indexOf("-")<0)&&l.indexOf(a)===0)return l})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(i,n){if(!i)return[];if(typeof i=="function"&&(i=i(n)),typeof i=="string"&&(i=[i]),Object.prototype.toString.apply(i)==="[object Array]")return i;if(!n)return i.default||[];let r=i[n];return r||(r=i[this.getScriptPartFromCode(n)]),r||(r=i[this.formatLanguageCode(n)]),r||(r=i[this.getLanguagePartFromCode(n)]),r||(r=i.default),r||[]}toResolveHierarchy(i,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],i),a=[],l=c=>{c&&(this.isSupportedCode(c)?a.push(c):this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`))};return typeof i=="string"&&(i.indexOf("-")>-1||i.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&l(this.formatLanguageCode(i)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&l(this.getScriptPartFromCode(i)),this.options.load!=="currentOnly"&&l(this.getLanguagePartFromCode(i))):typeof i=="string"&&l(this.formatLanguageCode(i)),r.forEach(c=>{a.indexOf(c)<0&&l(this.formatLanguageCode(c))}),a}}let ck=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],hk={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}};const dk=["v1","v2","v3"],fk=["v4"],ev={zero:0,one:1,two:2,few:3,many:4,other:5};function pk(){const t={};return ck.forEach(i=>{i.lngs.forEach(n=>{t[n]={numbers:i.nr,plurals:hk[i.fc]}})}),t}class gk{constructor(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=i,this.options=n,this.logger=Ti.create("pluralResolver"),(!this.options.compatibilityJSON||fk.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=pk()}addRule(i,n){this.rules[i]=n}getRule(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(kd(i),{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[i]||this.rules[this.languageUtils.getLanguagePartFromCode(i)]}needsPlural(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(i,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(i,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(i,r).map(a=>`${n}${a}`)}getSuffixes(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(i,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((a,l)=>ev[a]-ev[l]).map(a=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${a}`):r.numbers.map(a=>this.getSuffix(i,a,n)):[]}getSuffix(i,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=this.getRule(i,r);return a?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a.select(n)}`:this.getSuffixRetroCompatible(a,n):(this.logger.warn(`no plural rule found for: ${i}`),"")}getSuffixRetroCompatible(i,n){const r=i.noAbs?i.plurals(n):i.plurals(Math.abs(n));let a=i.numbers[r];this.options.simplifyPluralSuffix&&i.numbers.length===2&&i.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));const l=()=>this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString();return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?`_plural_${a.toString()}`:l():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&i.numbers.length===2&&i.numbers[0]===1?l():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!dk.includes(this.options.compatibilityJSON)}}function iv(t,i,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,l=rk(t,i,n);return!l&&a&&typeof n=="string"&&(l=eu(t,n,r),l===void 0&&(l=eu(i,n,r))),l}class mk{constructor(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Ti.create("interpolator"),this.options=i,this.format=i.interpolation&&i.interpolation.format||(n=>n),this.init(i)}init(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};i.interpolation||(i.interpolation={escapeValue:!0});const n=i.interpolation;this.escape=n.escape!==void 0?n.escape:ak,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?Us(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?Us(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?Us(n.nestingPrefix):n.nestingPrefixEscaped||Us("$t("),this.nestingSuffix=n.nestingSuffix?Us(n.nestingSuffix):n.nestingSuffixEscaped||Us(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const i=`${this.prefix}(.+?)${this.suffix}`;this.regexp=new RegExp(i,"g");const n=`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`;this.regexpUnescape=new RegExp(n,"g");const r=`${this.nestingPrefix}(.+?)${this.nestingSuffix}`;this.nestingRegexp=new RegExp(r,"g")}interpolate(i,n,r,a){let l,c,f;const p=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function m(A){return A.replace(/\$/g,"$$$$")}const v=A=>{if(A.indexOf(this.formatSeparator)<0){const P=iv(n,p,A,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(P,void 0,r,{...a,...n,interpolationkey:A}):P}const M=A.split(this.formatSeparator),L=M.shift().trim(),T=M.join(this.formatSeparator).trim();return this.format(iv(n,p,L,this.options.keySeparator,this.options.ignoreJSONStructure),T,r,{...a,...n,interpolationkey:L})};this.resetRegExp();const w=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,x=a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:A=>m(A)},{regex:this.regexp,safeValue:A=>this.escapeValue?m(this.escape(A)):m(A)}].forEach(A=>{for(f=0;l=A.regex.exec(i);){const M=l[1].trim();if(c=v(M),c===void 0)if(typeof w=="function"){const T=w(i,l,a);c=typeof T=="string"?T:""}else if(a&&Object.prototype.hasOwnProperty.call(a,M))c="";else if(x){c=l[0];continue}else this.logger.warn(`missed to pass in variable ${M} for interpolating ${i}`),c="";else typeof c!="string"&&!this.useRawValueToEscape&&(c=Q_(c));const L=A.safeValue(c);if(i=i.replace(l[0],L),x?(A.regex.lastIndex+=c.length,A.regex.lastIndex-=l[0].length):A.regex.lastIndex=0,f++,f>=this.maxReplaces)break}}),i}nest(i,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,l,c;function f(p,m){const v=this.nestingOptionsSeparator;if(p.indexOf(v)<0)return p;const w=p.split(new RegExp(`${v}[ ]*{`));let x=`{${w[1]}`;p=w[0],x=this.interpolate(x,c);const S=x.match(/'/g),A=x.match(/"/g);(S&&S.length%2===0&&!A||A.length%2!==0)&&(x=x.replace(/'/g,'"'));try{c=JSON.parse(x),m&&(c={...m,...c})}catch(M){return this.logger.warn(`failed parsing options string in nesting for key ${p}`,M),`${p}${v}${x}`}return delete c.defaultValue,p}for(;a=this.nestingRegexp.exec(i);){let p=[];c={...r},c=c.replace&&typeof c.replace!="string"?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;let m=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){const v=a[1].split(this.formatSeparator).map(w=>w.trim());a[1]=v.shift(),p=v,m=!0}if(l=n(f.call(this,a[1].trim(),c),c),l&&a[0]===i&&typeof l!="string")return l;typeof l!="string"&&(l=Q_(l)),l||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${i}`),l=""),m&&(l=p.reduce((v,w)=>this.format(v,w,r.lng,{...r,interpolationkey:a[1].trim()}),l.trim())),i=i.replace(a[0],l),this.regexp.lastIndex=0}return i}}function _k(t){let i=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");i=r[0].toLowerCase().trim();const a=r[1].substring(0,r[1].length-1);i==="currency"&&a.indexOf(":")<0?n.currency||(n.currency=a.trim()):i==="relativetime"&&a.indexOf(":")<0?n.range||(n.range=a.trim()):a.split(";").forEach(c=>{if(!c)return;const[f,...p]=c.split(":"),m=p.join(":").trim().replace(/^'+|'+$/g,"");n[f.trim()]||(n[f.trim()]=m),m==="false"&&(n[f.trim()]=!1),m==="true"&&(n[f.trim()]=!0),isNaN(m)||(n[f.trim()]=parseInt(m,10))})}return{formatName:i,formatOptions:n}}function Vs(t){const i={};return function(r,a,l){const c=a+JSON.stringify(l);let f=i[c];return f||(f=t(a,l),i[c]=f),f(r)}}class vk{constructor(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Ti.create("formatter"),this.options=i,this.formats={number:Vs((n,r)=>{const a=new Intl.NumberFormat(n,{...r});return l=>a.format(l)}),currency:Vs((n,r)=>{const a=new Intl.NumberFormat(n,{...r,style:"currency"});return l=>a.format(l)}),datetime:Vs((n,r)=>{const a=new Intl.DateTimeFormat(n,{...r});return l=>a.format(l)}),relativetime:Vs((n,r)=>{const a=new Intl.RelativeTimeFormat(n,{...r});return l=>a.format(l,r.range||"day")}),list:Vs((n,r)=>{const a=new Intl.ListFormat(n,{...r});return l=>a.format(l)})},this.init(i)}init(i){const r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}add(i,n){this.formats[i.toLowerCase().trim()]=n}addCached(i,n){this.formats[i.toLowerCase().trim()]=Vs(n)}format(i,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n.split(this.formatSeparator).reduce((f,p)=>{const{formatName:m,formatOptions:v}=_k(p);if(this.formats[m]){let w=f;try{const x=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},S=x.locale||x.lng||a.locale||a.lng||r;w=this.formats[m](f,S,{...v,...a,...x})}catch(x){this.logger.warn(x)}return w}else this.logger.warn(`there was no format function for ${m}`);return f},i)}}function yk(t,i){t.pending[i]!==void 0&&(delete t.pending[i],t.pendingCount--)}class xk extends Fu{constructor(i,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=i,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=a,this.logger=Ti.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,a.backend,a)}queueLoad(i,n,r,a){const l={},c={},f={},p={};return i.forEach(m=>{let v=!0;n.forEach(w=>{const x=`${m}|${w}`;!r.reload&&this.store.hasResourceBundle(m,w)?this.state[x]=2:this.state[x]<0||(this.state[x]===1?c[x]===void 0&&(c[x]=!0):(this.state[x]=1,v=!1,c[x]===void 0&&(c[x]=!0),l[x]===void 0&&(l[x]=!0),p[w]===void 0&&(p[w]=!0)))}),v||(f[m]=!0)}),(Object.keys(l).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(l),pending:Object.keys(c),toLoadLanguages:Object.keys(f),toLoadNamespaces:Object.keys(p)}}loaded(i,n,r){const a=i.split("|"),l=a[0],c=a[1];n&&this.emit("failedLoading",l,c,n),r&&this.store.addResourceBundle(l,c,r),this.state[i]=n?-1:2;const f={};this.queue.forEach(p=>{sk(p.loaded,[l],c),yk(p,i),n&&p.errors.push(n),p.pendingCount===0&&!p.done&&(Object.keys(p.loaded).forEach(m=>{f[m]||(f[m]={});const v=p.loaded[m];v.length&&v.forEach(w=>{f[m][w]===void 0&&(f[m][w]=!0)})}),p.done=!0,p.errors.length?p.callback(p.errors):p.callback())}),this.emit("loaded",f),this.queue=this.queue.filter(p=>!p.done)}read(i,n,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,c=arguments.length>5?arguments[5]:void 0;if(!i.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:i,ns:n,fcName:r,tried:a,wait:l,callback:c});return}this.readingCalls++;const f=(m,v)=>{if(this.readingCalls--,this.waitingReads.length>0){const w=this.waitingReads.shift();this.read(w.lng,w.ns,w.fcName,w.tried,w.wait,w.callback)}if(m&&v&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,i,n,r,a+1,l*2,c)},l);return}c(m,v)},p=this.backend[r].bind(this.backend);if(p.length===2){try{const m=p(i,n);m&&typeof m.then=="function"?m.then(v=>f(null,v)).catch(f):f(null,m)}catch(m){f(m)}return}return p(i,n,f)}prepareLoading(i,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();typeof i=="string"&&(i=this.languageUtils.toResolveHierarchy(i)),typeof n=="string"&&(n=[n]);const l=this.queueLoad(i,n,r,a);if(!l.toLoad.length)return l.pending.length||a(),null;l.toLoad.forEach(c=>{this.loadOne(c)})}load(i,n,r){this.prepareLoading(i,n,{},r)}reload(i,n,r){this.prepareLoading(i,n,{reload:!0},r)}loadOne(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=i.split("|"),a=r[0],l=r[1];this.read(a,l,"read",void 0,void 0,(c,f)=>{c&&this.logger.warn(`${n}loading namespace ${l} for language ${a} failed`,c),!c&&f&&this.logger.log(`${n}loaded namespace ${l} for language ${a}`,f),this.loaded(i,c,f)})}saveMissing(i,n,r,a,l){let c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const p={...c,isUpdate:l},m=this.backend.create.bind(this.backend);if(m.length<6)try{let v;m.length===5?v=m(i,n,r,a,p):v=m(i,n,r,a),v&&typeof v.then=="function"?v.then(w=>f(null,w)).catch(f):f(null,v)}catch(v){f(v)}else m(i,n,r,a,f,p)}!i||!i[0]||this.store.addResource(i[0],n,r,a)}}}function nv(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(i){let n={};if(typeof i[1]=="object"&&(n=i[1]),typeof i[1]=="string"&&(n.defaultValue=i[1]),typeof i[2]=="string"&&(n.tDescription=i[2]),typeof i[2]=="object"||typeof i[3]=="object"){const r=i[3]||i[2];Object.keys(r).forEach(a=>{n[a]=r[a]})}return n},interpolation:{escapeValue:!0,format:(t,i,n,r)=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function sv(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function Ja(){}function wk(t){Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})}class zo extends Fu{constructor(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=sv(i),this.services={},this.logger=Ti,this.modules={external:[]},wk(this),n&&!this.isInitialized&&!i.isClone){if(!this.options.initImmediate)return this.init(i,n),this;setTimeout(()=>{this.init(i,n)},0)}}init(){var i=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const a=nv();this.options={...a,...this.options,...sv(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...a.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);function l(v){return v?typeof v=="function"?new v:v:null}if(!this.options.isClone){this.modules.logger?Ti.init(l(this.modules.logger),this.options):Ti.init(null,this.options);let v;this.modules.formatter?v=this.modules.formatter:typeof Intl<"u"&&(v=vk);const w=new tv(this.options);this.store=new q_(this.options.resources,this.options);const x=this.services;x.logger=Ti,x.resourceStore=this.store,x.languageUtils=w,x.pluralResolver=new gk(w,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),v&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(x.formatter=l(v),x.formatter.init(x,this.options),this.options.interpolation.format=x.formatter.format.bind(x.formatter)),x.interpolator=new mk(this.options),x.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},x.backendConnector=new xk(l(this.modules.backend),x.resourceStore,x,this.options),x.backendConnector.on("*",function(S){for(var A=arguments.length,M=new Array(A>1?A-1:0),L=1;L<A;L++)M[L-1]=arguments[L];i.emit(S,...M)}),this.modules.languageDetector&&(x.languageDetector=l(this.modules.languageDetector),x.languageDetector.init&&x.languageDetector.init(x,this.options.detection,this.options)),this.modules.i18nFormat&&(x.i18nFormat=l(this.modules.i18nFormat),x.i18nFormat.init&&x.i18nFormat.init(this)),this.translator=new iu(this.services,this.options),this.translator.on("*",function(S){for(var A=arguments.length,M=new Array(A>1?A-1:0),L=1;L<A;L++)M[L-1]=arguments[L];i.emit(S,...M)}),this.modules.external.forEach(S=>{S.init&&S.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Ja),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const v=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);v.length>0&&v[0]!=="dev"&&(this.options.lng=v[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(v=>{this[v]=function(){return i.store[v](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(v=>{this[v]=function(){return i.store[v](...arguments),i}});const p=qr(),m=()=>{const v=(w,x)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),p.resolve(x),r(w,x)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return v(null,this.t.bind(this));this.changeLanguage(this.options.lng,v)};return this.options.resources||!this.options.initImmediate?m():setTimeout(m,0),p}loadResources(i){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ja;const a=typeof i=="string"?i:this.language;if(typeof i=="function"&&(r=i),!this.options.resources||this.options.partialBundledLanguages){if(a&&a.toLowerCase()==="cimode")return r();const l=[],c=f=>{if(!f)return;this.services.languageUtils.toResolveHierarchy(f).forEach(m=>{l.indexOf(m)<0&&l.push(m)})};a?c(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(p=>c(p)),this.options.preload&&this.options.preload.forEach(f=>c(f)),this.services.backendConnector.load(l,this.options.ns,f=>{!f&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(f)})}else r(null)}reloadResources(i,n,r){const a=qr();return i||(i=this.languages),n||(n=this.options.ns),r||(r=Ja),this.services.backendConnector.reload(i,n,l=>{a.resolve(),r(l)}),a}use(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&tw.addPostProcessor(i),i.type==="formatter"&&(this.modules.formatter=i),i.type==="3rdParty"&&this.modules.external.push(i),this}setResolvedLanguage(i){if(!(!i||!this.languages)&&!(["cimode","dev"].indexOf(i)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(i,n){var r=this;this.isLanguageChangingTo=i;const a=qr();this.emit("languageChanging",i);const l=p=>{this.language=p,this.languages=this.services.languageUtils.toResolveHierarchy(p),this.resolvedLanguage=void 0,this.setResolvedLanguage(p)},c=(p,m)=>{m?(l(m),this.translator.changeLanguage(m),this.isLanguageChangingTo=void 0,this.emit("languageChanged",m),this.logger.log("languageChanged",m)):this.isLanguageChangingTo=void 0,a.resolve(function(){return r.t(...arguments)}),n&&n(p,function(){return r.t(...arguments)})},f=p=>{!i&&!p&&this.services.languageDetector&&(p=[]);const m=typeof p=="string"?p:this.services.languageUtils.getBestMatchFromCodes(p);m&&(this.language||l(m),this.translator.language||this.translator.changeLanguage(m),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(m)),this.loadResources(m,v=>{c(v,m)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?f(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(f):this.services.languageDetector.detect(f):f(i),a}getFixedT(i,n,r){var a=this;const l=function(c,f){let p;if(typeof f!="object"){for(var m=arguments.length,v=new Array(m>2?m-2:0),w=2;w<m;w++)v[w-2]=arguments[w];p=a.options.overloadTranslationOptionHandler([c,f].concat(v))}else p={...f};p.lng=p.lng||l.lng,p.lngs=p.lngs||l.lngs,p.ns=p.ns||l.ns,p.keyPrefix=p.keyPrefix||r||l.keyPrefix;const x=a.options.keySeparator||".";let S;return p.keyPrefix&&Array.isArray(c)?S=c.map(A=>`${p.keyPrefix}${x}${A}`):S=p.keyPrefix?`${p.keyPrefix}${x}${c}`:c,a.t(S,p)};return typeof i=="string"?l.lng=i:l.lngs=i,l.ns=n,l.keyPrefix=r,l}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(i){this.options.defaultNS=i}hasLoadedNamespace(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const c=(f,p)=>{const m=this.services.backendConnector.state[`${f}|${p}`];return m===-1||m===2};if(n.precheck){const f=n.precheck(this,c);if(f!==void 0)return f}return!!(this.hasResourceBundle(r,i)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(r,i)&&(!a||c(l,i)))}loadNamespaces(i,n){const r=qr();return this.options.ns?(typeof i=="string"&&(i=[i]),i.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{r.resolve(),n&&n(a)}),r):(n&&n(),Promise.resolve())}loadLanguages(i,n){const r=qr();typeof i=="string"&&(i=[i]);const a=this.options.preload||[],l=i.filter(c=>a.indexOf(c)<0);return l.length?(this.options.preload=a.concat(l),this.loadResources(c=>{r.resolve(),n&&n(c)}),r):(n&&n(),Promise.resolve())}dir(i){if(i||(i=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!i)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new tv(nv());return n.indexOf(r.getLanguagePartFromCode(i))>-1||i.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new zo(i,n)}cloneInstance(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ja;const r=i.forkResourceStore;r&&delete i.forkResourceStore;const a={...this.options,...i,isClone:!0},l=new zo(a);return(i.debug!==void 0||i.prefix!==void 0)&&(l.logger=l.logger.clone(i)),["store","services","language"].forEach(f=>{l[f]=this[f]}),l.services={...this.services},l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},r&&(l.store=new q_(this.store.data,a),l.services.resourceStore=l.store),l.translator=new iu(l.services,a),l.translator.on("*",function(f){for(var p=arguments.length,m=new Array(p>1?p-1:0),v=1;v<p;v++)m[v-1]=arguments[v];l.emit(f,...m)}),l.init(a,n),l.translator.options=a,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const _e=zo.createInstance();_e.createInstance=zo.createInstance;_e.createInstance;_e.dir;_e.init;_e.loadResources;_e.reloadResources;_e.use;_e.changeLanguage;_e.getFixedT;_e.t;_e.exists;_e.setDefaultNamespace;_e.hasLoadedNamespace;_e.loadNamespaces;_e.loadLanguages;const Ck={en:{translation:{nav:{intro:"Intro",messages:"Messages",art:"Art",cake:"Cake",credits:"Credits",langChange:"Language changed to English"},credits:{check:"Also check out",nepolabo:"Nepolabo 2023 Anniversary",lamy:"Lamy Anniversary"}}},jp:{translation:{nav:{intro:"",messages:"",art:"",cake:"",credits:"",langChange:""},credits:{check:"",nepolabo:"",lamy:""}}}};_e.use(D2).init({resources:Ck,lng:"jp",interpolation:{escapeValue:!1}});const bk="/2023/nene/assets/artlogo-482f588e.png",Sk="/2023/nene/assets/cakelogo-cc662378.png",Pk="/2023/nene/assets/logo2-9d3a3df4.png",Ek="/2023/nene/assets/messageslogo-6ebe3700.png";fh.createRoot(document.getElementById("root")).render(bt.jsx(su.StrictMode,{children:bt.jsxs(fS,{basename:"/2023/nene",children:[bt.jsx(J2,{}),bt.jsx(ek,{}),bt.jsx("img",{src:Pk,className:"sr-only",alt:""}),bt.jsx("img",{src:Ek,className:"sr-only",alt:""}),bt.jsx("img",{src:bk,className:"sr-only",alt:""}),bt.jsx("img",{src:Sk,className:"sr-only",alt:""})]})}));export{Wk as $,IA as A,V2 as B,Sk as C,Ik as D,Rk as E,Z2 as F,Pk as L,Ek as M,su as R,kk as _,kb as a,N2 as b,bk as c,Xk as d,Mk as e,Dk as f,zk as g,Uk as h,Ok as i,bt as j,$k as k,Hk as l,V_ as m,G2 as n,Y2 as o,Ak as p,Gk as q,O as r,X2 as s,Vk as t,B2 as u,Lk as v,jk as w,Bk as x,Fk as y,Nk as z};
