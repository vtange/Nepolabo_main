function x1(e,i){for(var s=0;s<i.length;s++){const r=i[s];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function s(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=s(a);fetch(a.href,l)}})();function w1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rv={exports:{}},uu={},ov={exports:{}},Ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ta=Symbol.for("react.element"),C1=Symbol.for("react.portal"),b1=Symbol.for("react.fragment"),S1=Symbol.for("react.strict_mode"),P1=Symbol.for("react.profiler"),E1=Symbol.for("react.provider"),T1=Symbol.for("react.context"),A1=Symbol.for("react.forward_ref"),k1=Symbol.for("react.suspense"),I1=Symbol.for("react.memo"),R1=Symbol.for("react.lazy"),yg=Symbol.iterator;function D1(e){return e===null||typeof e!="object"?null:(e=yg&&e[yg]||e["@@iterator"],typeof e=="function"?e:null)}var av={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lv=Object.assign,uv={};function Br(e,i,s){this.props=e,this.context=i,this.refs=uv,this.updater=s||av}Br.prototype.isReactComponent={};Br.prototype.setState=function(e,i){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,i,"setState")};Br.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function hv(){}hv.prototype=Br.prototype;function Ed(e,i,s){this.props=e,this.context=i,this.refs=uv,this.updater=s||av}var Td=Ed.prototype=new hv;Td.constructor=Ed;lv(Td,Br.prototype);Td.isPureReactComponent=!0;var xg=Array.isArray,cv=Object.prototype.hasOwnProperty,Ad={current:null},dv={key:!0,ref:!0,__self:!0,__source:!0};function fv(e,i,s){var r,a={},l=null,h=null;if(i!=null)for(r in i.ref!==void 0&&(h=i.ref),i.key!==void 0&&(l=""+i.key),i)cv.call(i,r)&&!dv.hasOwnProperty(r)&&(a[r]=i[r]);var f=arguments.length-2;if(f===1)a.children=s;else if(1<f){for(var p=Array(f),m=0;m<f;m++)p[m]=arguments[m+2];a.children=p}if(e&&e.defaultProps)for(r in f=e.defaultProps,f)a[r]===void 0&&(a[r]=f[r]);return{$$typeof:ta,type:e,key:l,ref:h,props:a,_owner:Ad.current}}function M1(e,i){return{$$typeof:ta,type:e.type,key:i,ref:e.ref,props:e.props,_owner:e._owner}}function kd(e){return typeof e=="object"&&e!==null&&e.$$typeof===ta}function F1(e){var i={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return i[s]})}var wg=/\/+/g;function bh(e,i){return typeof e=="object"&&e!==null&&e.key!=null?F1(""+e.key):i.toString(36)}function ol(e,i,s,r,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(l){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case ta:case C1:h=!0}}if(h)return h=e,a=a(h),e=r===""?"."+bh(h,0):r,xg(a)?(s="",e!=null&&(s=e.replace(wg,"$&/")+"/"),ol(a,i,s,"",function(m){return m})):a!=null&&(kd(a)&&(a=M1(a,s+(!a.key||h&&h.key===a.key?"":(""+a.key).replace(wg,"$&/")+"/")+e)),i.push(a)),1;if(h=0,r=r===""?".":r+":",xg(e))for(var f=0;f<e.length;f++){l=e[f];var p=r+bh(l,f);h+=ol(l,i,s,p,a)}else if(p=D1(e),typeof p=="function")for(e=p.call(e),f=0;!(l=e.next()).done;)l=l.value,p=r+bh(l,f++),h+=ol(l,i,s,p,a);else if(l==="object")throw i=String(e),Error("Objects are not valid as a React child (found: "+(i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return h}function Oa(e,i,s){if(e==null)return e;var r=[],a=0;return ol(e,r,"","",function(l){return i.call(s,l,a++)}),r}function L1(e){if(e._status===-1){var i=e._result;i=i(),i.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=i)}if(e._status===1)return e._result.default;throw e._result}var Fe={current:null},al={transition:null},B1={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:al,ReactCurrentOwner:Ad};Ct.Children={map:Oa,forEach:function(e,i,s){Oa(e,function(){i.apply(this,arguments)},s)},count:function(e){var i=0;return Oa(e,function(){i++}),i},toArray:function(e){return Oa(e,function(i){return i})||[]},only:function(e){if(!kd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ct.Component=Br;Ct.Fragment=b1;Ct.Profiler=P1;Ct.PureComponent=Ed;Ct.StrictMode=S1;Ct.Suspense=k1;Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B1;Ct.cloneElement=function(e,i,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=lv({},e.props),a=e.key,l=e.ref,h=e._owner;if(i!=null){if(i.ref!==void 0&&(l=i.ref,h=Ad.current),i.key!==void 0&&(a=""+i.key),e.type&&e.type.defaultProps)var f=e.type.defaultProps;for(p in i)cv.call(i,p)&&!dv.hasOwnProperty(p)&&(r[p]=i[p]===void 0&&f!==void 0?f[p]:i[p])}var p=arguments.length-2;if(p===1)r.children=s;else if(1<p){f=Array(p);for(var m=0;m<p;m++)f[m]=arguments[m+2];r.children=f}return{$$typeof:ta,type:e.type,key:a,ref:l,props:r,_owner:h}};Ct.createContext=function(e){return e={$$typeof:T1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:E1,_context:e},e.Consumer=e};Ct.createElement=fv;Ct.createFactory=function(e){var i=fv.bind(null,e);return i.type=e,i};Ct.createRef=function(){return{current:null}};Ct.forwardRef=function(e){return{$$typeof:A1,render:e}};Ct.isValidElement=kd;Ct.lazy=function(e){return{$$typeof:R1,_payload:{_status:-1,_result:e},_init:L1}};Ct.memo=function(e,i){return{$$typeof:I1,type:e,compare:i===void 0?null:i}};Ct.startTransition=function(e){var i=al.transition;al.transition={};try{e()}finally{al.transition=i}};Ct.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ct.useCallback=function(e,i){return Fe.current.useCallback(e,i)};Ct.useContext=function(e){return Fe.current.useContext(e)};Ct.useDebugValue=function(){};Ct.useDeferredValue=function(e){return Fe.current.useDeferredValue(e)};Ct.useEffect=function(e,i){return Fe.current.useEffect(e,i)};Ct.useId=function(){return Fe.current.useId()};Ct.useImperativeHandle=function(e,i,s){return Fe.current.useImperativeHandle(e,i,s)};Ct.useInsertionEffect=function(e,i){return Fe.current.useInsertionEffect(e,i)};Ct.useLayoutEffect=function(e,i){return Fe.current.useLayoutEffect(e,i)};Ct.useMemo=function(e,i){return Fe.current.useMemo(e,i)};Ct.useReducer=function(e,i,s){return Fe.current.useReducer(e,i,s)};Ct.useRef=function(e){return Fe.current.useRef(e)};Ct.useState=function(e){return Fe.current.useState(e)};Ct.useSyncExternalStore=function(e,i,s){return Fe.current.useSyncExternalStore(e,i,s)};Ct.useTransition=function(){return Fe.current.useTransition()};Ct.version="18.2.0";ov.exports=Ct;var N=ov.exports;const hu=w1(N),O1=x1({__proto__:null,default:hu},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N1=N,z1=Symbol.for("react.element"),U1=Symbol.for("react.fragment"),V1=Object.prototype.hasOwnProperty,j1=N1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,H1={key:!0,ref:!0,__self:!0,__source:!0};function pv(e,i,s){var r,a={},l=null,h=null;s!==void 0&&(l=""+s),i.key!==void 0&&(l=""+i.key),i.ref!==void 0&&(h=i.ref);for(r in i)V1.call(i,r)&&!H1.hasOwnProperty(r)&&(a[r]=i[r]);if(e&&e.defaultProps)for(r in i=e.defaultProps,i)a[r]===void 0&&(a[r]=i[r]);return{$$typeof:z1,type:e,key:l,ref:h,props:a,_owner:j1.current}}uu.Fragment=U1;uu.jsx=pv;uu.jsxs=pv;rv.exports=uu;var Tt=rv.exports,uc={},gv={exports:{}},ci={},mv={exports:{}},_v={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function i(J,ot){var ht=J.length;J.push(ot);t:for(;0<ht;){var at=ht-1>>>1,At=J[at];if(0<a(At,ot))J[at]=ot,J[ht]=At,ht=at;else break t}}function s(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var ot=J[0],ht=J.pop();if(ht!==ot){J[0]=ht;t:for(var at=0,At=J.length,xi=At>>>1;at<xi;){var Be=2*(at+1)-1,Li=J[Be],de=Be+1,wi=J[de];if(0>a(Li,ht))de<At&&0>a(wi,Li)?(J[at]=wi,J[de]=ht,at=de):(J[at]=Li,J[Be]=ht,at=Be);else if(de<At&&0>a(wi,ht))J[at]=wi,J[de]=ht,at=de;else break t}}return ot}function a(J,ot){var ht=J.sortIndex-ot.sortIndex;return ht!==0?ht:J.id-ot.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();e.unstable_now=function(){return h.now()-f}}var p=[],m=[],v=1,w=null,x=3,b=!1,E=!1,R=!1,O=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(J){for(var ot=s(m);ot!==null;){if(ot.callback===null)r(m);else if(ot.startTime<=J)r(m),ot.sortIndex=ot.expirationTime,i(p,ot);else break;ot=s(m)}}function D(J){if(R=!1,k(J),!E)if(s(p)!==null)E=!0,St(B);else{var ot=s(m);ot!==null&&It(D,ot.startTime-J)}}function B(J,ot){E=!1,R&&(R=!1,A(G),G=-1),b=!0;var ht=x;try{for(k(ot),w=s(p);w!==null&&(!(w.expirationTime>ot)||J&&!mt());){var at=w.callback;if(typeof at=="function"){w.callback=null,x=w.priorityLevel;var At=at(w.expirationTime<=ot);ot=e.unstable_now(),typeof At=="function"?w.callback=At:w===s(p)&&r(p),k(ot)}else r(p);w=s(p)}if(w!==null)var xi=!0;else{var Be=s(m);Be!==null&&It(D,Be.startTime-ot),xi=!1}return xi}finally{w=null,x=ht,b=!1}}var H=!1,$=null,G=-1,rt=5,it=-1;function mt(){return!(e.unstable_now()-it<rt)}function _t(){if($!==null){var J=e.unstable_now();it=J;var ot=!0;try{ot=$(!0,J)}finally{ot?bt():(H=!1,$=null)}}else H=!1}var bt;if(typeof P=="function")bt=function(){P(_t)};else if(typeof MessageChannel<"u"){var ft=new MessageChannel,vt=ft.port2;ft.port1.onmessage=_t,bt=function(){vt.postMessage(null)}}else bt=function(){O(_t,0)};function St(J){$=J,H||(H=!0,bt())}function It(J,ot){G=O(function(){J(e.unstable_now())},ot)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_continueExecution=function(){E||b||(E=!0,St(B))},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):rt=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return s(p)},e.unstable_next=function(J){switch(x){case 1:case 2:case 3:var ot=3;break;default:ot=x}var ht=x;x=ot;try{return J()}finally{x=ht}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(J,ot){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ht=x;x=J;try{return ot()}finally{x=ht}},e.unstable_scheduleCallback=function(J,ot,ht){var at=e.unstable_now();switch(typeof ht=="object"&&ht!==null?(ht=ht.delay,ht=typeof ht=="number"&&0<ht?at+ht:at):ht=at,J){case 1:var At=-1;break;case 2:At=250;break;case 5:At=1073741823;break;case 4:At=1e4;break;default:At=5e3}return At=ht+At,J={id:v++,callback:ot,priorityLevel:J,startTime:ht,expirationTime:At,sortIndex:-1},ht>at?(J.sortIndex=ht,i(m,J),s(p)===null&&J===s(m)&&(R?(A(G),G=-1):R=!0,It(D,ht-at))):(J.sortIndex=At,i(p,J),E||b||(E=!0,St(B))),J},e.unstable_shouldYield=mt,e.unstable_wrapCallback=function(J){var ot=x;return function(){var ht=x;x=ot;try{return J.apply(this,arguments)}finally{x=ht}}}})(_v);mv.exports=_v;var $1=mv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vv=N,ui=$1;function X(e){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yv=new Set,Do={};function Fn(e,i){Ar(e,i),Ar(e+"Capture",i)}function Ar(e,i){for(Do[e]=i,e=0;e<i.length;e++)yv.add(i[e])}var vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hc=Object.prototype.hasOwnProperty,W1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cg={},bg={};function G1(e){return hc.call(bg,e)?!0:hc.call(Cg,e)?!1:W1.test(e)?bg[e]=!0:(Cg[e]=!0,!1)}function X1(e,i,s,r){if(s!==null&&s.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return r?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Y1(e,i,s,r){if(i===null||typeof i>"u"||X1(e,i,s,r))return!0;if(r)return!1;if(s!==null)switch(s.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function Le(e,i,s,r,a,l,h){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=i,this.sanitizeURL=l,this.removeEmptyString=h}var ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ye[e]=new Le(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var i=e[0];ye[i]=new Le(i,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ye[e]=new Le(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ye[e]=new Le(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ye[e]=new Le(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ye[e]=new Le(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ye[e]=new Le(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ye[e]=new Le(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ye[e]=new Le(e,5,!1,e.toLowerCase(),null,!1,!1)});var Id=/[\-:]([a-z])/g;function Rd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var i=e.replace(Id,Rd);ye[i]=new Le(i,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var i=e.replace(Id,Rd);ye[i]=new Le(i,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var i=e.replace(Id,Rd);ye[i]=new Le(i,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ye[e]=new Le(e,1,!1,e.toLowerCase(),null,!1,!1)});ye.xlinkHref=new Le("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ye[e]=new Le(e,1,!1,e.toLowerCase(),null,!0,!0)});function Dd(e,i,s,r){var a=ye.hasOwnProperty(i)?ye[i]:null;(a!==null?a.type!==0:r||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(Y1(i,s,a,r)&&(s=null),r||a===null?G1(i)&&(s===null?e.removeAttribute(i):e.setAttribute(i,""+s)):a.mustUseProperty?e[a.propertyName]=s===null?a.type===3?!1:"":s:(i=a.attributeName,r=a.attributeNamespace,s===null?e.removeAttribute(i):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,r?e.setAttributeNS(r,i,s):e.setAttribute(i,s))))}var Ss=vv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Na=Symbol.for("react.element"),nr=Symbol.for("react.portal"),rr=Symbol.for("react.fragment"),Md=Symbol.for("react.strict_mode"),cc=Symbol.for("react.profiler"),xv=Symbol.for("react.provider"),wv=Symbol.for("react.context"),Fd=Symbol.for("react.forward_ref"),dc=Symbol.for("react.suspense"),fc=Symbol.for("react.suspense_list"),Ld=Symbol.for("react.memo"),Rs=Symbol.for("react.lazy"),Cv=Symbol.for("react.offscreen"),Sg=Symbol.iterator;function io(e){return e===null||typeof e!="object"?null:(e=Sg&&e[Sg]||e["@@iterator"],typeof e=="function"?e:null)}var Wt=Object.assign,Sh;function po(e){if(Sh===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);Sh=i&&i[1]||""}return`
`+Sh+e}var Ph=!1;function Eh(e,i){if(!e||Ph)return"";Ph=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(m){var r=m}Reflect.construct(e,[],i)}else{try{i.call()}catch(m){r=m}e.call(i.prototype)}else{try{throw Error()}catch(m){r=m}e()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var a=m.stack.split(`
`),l=r.stack.split(`
`),h=a.length-1,f=l.length-1;1<=h&&0<=f&&a[h]!==l[f];)f--;for(;1<=h&&0<=f;h--,f--)if(a[h]!==l[f]){if(h!==1||f!==1)do if(h--,f--,0>f||a[h]!==l[f]){var p=`
`+a[h].replace(" at new "," at ");return e.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",e.displayName)),p}while(1<=h&&0<=f);break}}}finally{Ph=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?po(e):""}function Z1(e){switch(e.tag){case 5:return po(e.type);case 16:return po("Lazy");case 13:return po("Suspense");case 19:return po("SuspenseList");case 0:case 2:case 15:return e=Eh(e.type,!1),e;case 11:return e=Eh(e.type.render,!1),e;case 1:return e=Eh(e.type,!0),e;default:return""}}function pc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case rr:return"Fragment";case nr:return"Portal";case cc:return"Profiler";case Md:return"StrictMode";case dc:return"Suspense";case fc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case wv:return(e.displayName||"Context")+".Consumer";case xv:return(e._context.displayName||"Context")+".Provider";case Fd:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ld:return i=e.displayName||null,i!==null?i:pc(e.type)||"Memo";case Rs:i=e._payload,e=e._init;try{return pc(e(i))}catch{}}return null}function K1(e){var i=e.type;switch(e.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=i.render,e=e.displayName||e.name||"",i.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pc(i);case 8:return i===Md?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Ks(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bv(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Q1(e){var i=bv(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),r=""+e[i];if(!e.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,l=s.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return a.call(this)},set:function(h){r=""+h,l.call(this,h)}}),Object.defineProperty(e,i,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(h){r=""+h},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function za(e){e._valueTracker||(e._valueTracker=Q1(e))}function Sv(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var s=i.getValue(),r="";return e&&(r=bv(e)?e.checked?"true":"false":e.value),e=r,e!==s?(i.setValue(e),!0):!1}function bl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function gc(e,i){var s=i.checked;return Wt({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Pg(e,i){var s=i.defaultValue==null?"":i.defaultValue,r=i.checked!=null?i.checked:i.defaultChecked;s=Ks(i.value!=null?i.value:s),e._wrapperState={initialChecked:r,initialValue:s,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Pv(e,i){i=i.checked,i!=null&&Dd(e,"checked",i,!1)}function mc(e,i){Pv(e,i);var s=Ks(i.value),r=i.type;if(s!=null)r==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}i.hasOwnProperty("value")?_c(e,i.type,s):i.hasOwnProperty("defaultValue")&&_c(e,i.type,Ks(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(e.defaultChecked=!!i.defaultChecked)}function Eg(e,i,s){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var r=i.type;if(!(r!=="submit"&&r!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+e._wrapperState.initialValue,s||i===e.value||(e.value=i),e.defaultValue=i}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function _c(e,i,s){(i!=="number"||bl(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var go=Array.isArray;function xr(e,i,s,r){if(e=e.options,i){i={};for(var a=0;a<s.length;a++)i["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=i.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&r&&(e[s].defaultSelected=!0)}else{for(s=""+Ks(s),i=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}i!==null||e[a].disabled||(i=e[a])}i!==null&&(i.selected=!0)}}function vc(e,i){if(i.dangerouslySetInnerHTML!=null)throw Error(X(91));return Wt({},i,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Tg(e,i){var s=i.value;if(s==null){if(s=i.children,i=i.defaultValue,s!=null){if(i!=null)throw Error(X(92));if(go(s)){if(1<s.length)throw Error(X(93));s=s[0]}i=s}i==null&&(i=""),s=i}e._wrapperState={initialValue:Ks(s)}}function Ev(e,i){var s=Ks(i.value),r=Ks(i.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),i.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),r!=null&&(e.defaultValue=""+r)}function Ag(e){var i=e.textContent;i===e._wrapperState.initialValue&&i!==""&&i!==null&&(e.value=i)}function Tv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yc(e,i){return e==null||e==="http://www.w3.org/1999/xhtml"?Tv(i):e==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ua,Av=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,s,r,a){MSApp.execUnsafeLocalFunction(function(){return e(i,s,r,a)})}:e}(function(e,i){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=i;else{for(Ua=Ua||document.createElement("div"),Ua.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Ua.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;i.firstChild;)e.appendChild(i.firstChild)}});function Mo(e,i){if(i){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=i;return}}e.textContent=i}var yo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},q1=["Webkit","ms","Moz","O"];Object.keys(yo).forEach(function(e){q1.forEach(function(i){i=i+e.charAt(0).toUpperCase()+e.substring(1),yo[i]=yo[e]})});function kv(e,i,s){return i==null||typeof i=="boolean"||i===""?"":s||typeof i!="number"||i===0||yo.hasOwnProperty(e)&&yo[e]?(""+i).trim():i+"px"}function Iv(e,i){e=e.style;for(var s in i)if(i.hasOwnProperty(s)){var r=s.indexOf("--")===0,a=kv(s,i[s],r);s==="float"&&(s="cssFloat"),r?e.setProperty(s,a):e[s]=a}}var J1=Wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xc(e,i){if(i){if(J1[e]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(X(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(X(61))}if(i.style!=null&&typeof i.style!="object")throw Error(X(62))}}function wc(e,i){if(e.indexOf("-")===-1)return typeof i.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cc=null;function Bd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bc=null,wr=null,Cr=null;function kg(e){if(e=sa(e)){if(typeof bc!="function")throw Error(X(280));var i=e.stateNode;i&&(i=gu(i),bc(e.stateNode,e.type,i))}}function Rv(e){wr?Cr?Cr.push(e):Cr=[e]:wr=e}function Dv(){if(wr){var e=wr,i=Cr;if(Cr=wr=null,kg(e),i)for(e=0;e<i.length;e++)kg(i[e])}}function Mv(e,i){return e(i)}function Fv(){}var Th=!1;function Lv(e,i,s){if(Th)return e(i,s);Th=!0;try{return Mv(e,i,s)}finally{Th=!1,(wr!==null||Cr!==null)&&(Fv(),Dv())}}function Fo(e,i){var s=e.stateNode;if(s===null)return null;var r=gu(s);if(r===null)return null;s=r[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break t;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(X(231,i,typeof s));return s}var Sc=!1;if(vs)try{var so={};Object.defineProperty(so,"passive",{get:function(){Sc=!0}}),window.addEventListener("test",so,so),window.removeEventListener("test",so,so)}catch{Sc=!1}function tC(e,i,s,r,a,l,h,f,p){var m=Array.prototype.slice.call(arguments,3);try{i.apply(s,m)}catch(v){this.onError(v)}}var xo=!1,Sl=null,Pl=!1,Pc=null,eC={onError:function(e){xo=!0,Sl=e}};function iC(e,i,s,r,a,l,h,f,p){xo=!1,Sl=null,tC.apply(eC,arguments)}function sC(e,i,s,r,a,l,h,f,p){if(iC.apply(this,arguments),xo){if(xo){var m=Sl;xo=!1,Sl=null}else throw Error(X(198));Pl||(Pl=!0,Pc=m)}}function Ln(e){var i=e,s=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,i.flags&4098&&(s=i.return),e=i.return;while(e)}return i.tag===3?s:null}function Bv(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function Ig(e){if(Ln(e)!==e)throw Error(X(188))}function nC(e){var i=e.alternate;if(!i){if(i=Ln(e),i===null)throw Error(X(188));return i!==e?null:e}for(var s=e,r=i;;){var a=s.return;if(a===null)break;var l=a.alternate;if(l===null){if(r=a.return,r!==null){s=r;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===s)return Ig(a),e;if(l===r)return Ig(a),i;l=l.sibling}throw Error(X(188))}if(s.return!==r.return)s=a,r=l;else{for(var h=!1,f=a.child;f;){if(f===s){h=!0,s=a,r=l;break}if(f===r){h=!0,r=a,s=l;break}f=f.sibling}if(!h){for(f=l.child;f;){if(f===s){h=!0,s=l,r=a;break}if(f===r){h=!0,r=l,s=a;break}f=f.sibling}if(!h)throw Error(X(189))}}if(s.alternate!==r)throw Error(X(190))}if(s.tag!==3)throw Error(X(188));return s.stateNode.current===s?e:i}function Ov(e){return e=nC(e),e!==null?Nv(e):null}function Nv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var i=Nv(e);if(i!==null)return i;e=e.sibling}return null}var zv=ui.unstable_scheduleCallback,Rg=ui.unstable_cancelCallback,rC=ui.unstable_shouldYield,oC=ui.unstable_requestPaint,Jt=ui.unstable_now,aC=ui.unstable_getCurrentPriorityLevel,Od=ui.unstable_ImmediatePriority,Uv=ui.unstable_UserBlockingPriority,El=ui.unstable_NormalPriority,lC=ui.unstable_LowPriority,Vv=ui.unstable_IdlePriority,cu=null,Qi=null;function uC(e){if(Qi&&typeof Qi.onCommitFiberRoot=="function")try{Qi.onCommitFiberRoot(cu,e,void 0,(e.current.flags&128)===128)}catch{}}var Di=Math.clz32?Math.clz32:dC,hC=Math.log,cC=Math.LN2;function dC(e){return e>>>=0,e===0?32:31-(hC(e)/cC|0)|0}var Va=64,ja=4194304;function mo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Tl(e,i){var s=e.pendingLanes;if(s===0)return 0;var r=0,a=e.suspendedLanes,l=e.pingedLanes,h=s&268435455;if(h!==0){var f=h&~a;f!==0?r=mo(f):(l&=h,l!==0&&(r=mo(l)))}else h=s&~a,h!==0?r=mo(h):l!==0&&(r=mo(l));if(r===0)return 0;if(i!==0&&i!==r&&!(i&a)&&(a=r&-r,l=i&-i,a>=l||a===16&&(l&4194240)!==0))return i;if(r&4&&(r|=s&16),i=e.entangledLanes,i!==0)for(e=e.entanglements,i&=r;0<i;)s=31-Di(i),a=1<<s,r|=e[s],i&=~a;return r}function fC(e,i){switch(e){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pC(e,i){for(var s=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var h=31-Di(l),f=1<<h,p=a[h];p===-1?(!(f&s)||f&r)&&(a[h]=fC(f,i)):p<=i&&(e.expiredLanes|=f),l&=~f}}function Ec(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jv(){var e=Va;return Va<<=1,!(Va&4194240)&&(Va=64),e}function Ah(e){for(var i=[],s=0;31>s;s++)i.push(e);return i}function ea(e,i,s){e.pendingLanes|=i,i!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,i=31-Di(i),e[i]=s}function gC(e,i){var s=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-Di(s),l=1<<a;i[a]=0,r[a]=-1,e[a]=-1,s&=~l}}function Nd(e,i){var s=e.entangledLanes|=i;for(e=e.entanglements;s;){var r=31-Di(s),a=1<<r;a&i|e[r]&i&&(e[r]|=i),s&=~a}}var Rt=0;function Hv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var $v,zd,Wv,Gv,Xv,Tc=!1,Ha=[],Us=null,Vs=null,js=null,Lo=new Map,Bo=new Map,Fs=[],mC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dg(e,i){switch(e){case"focusin":case"focusout":Us=null;break;case"dragenter":case"dragleave":Vs=null;break;case"mouseover":case"mouseout":js=null;break;case"pointerover":case"pointerout":Lo.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bo.delete(i.pointerId)}}function no(e,i,s,r,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:i,domEventName:s,eventSystemFlags:r,nativeEvent:l,targetContainers:[a]},i!==null&&(i=sa(i),i!==null&&zd(i)),e):(e.eventSystemFlags|=r,i=e.targetContainers,a!==null&&i.indexOf(a)===-1&&i.push(a),e)}function _C(e,i,s,r,a){switch(i){case"focusin":return Us=no(Us,e,i,s,r,a),!0;case"dragenter":return Vs=no(Vs,e,i,s,r,a),!0;case"mouseover":return js=no(js,e,i,s,r,a),!0;case"pointerover":var l=a.pointerId;return Lo.set(l,no(Lo.get(l)||null,e,i,s,r,a)),!0;case"gotpointercapture":return l=a.pointerId,Bo.set(l,no(Bo.get(l)||null,e,i,s,r,a)),!0}return!1}function Yv(e){var i=bn(e.target);if(i!==null){var s=Ln(i);if(s!==null){if(i=s.tag,i===13){if(i=Bv(s),i!==null){e.blockedOn=i,Xv(e.priority,function(){Wv(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ll(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var s=Ac(e.domEventName,e.eventSystemFlags,i[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var r=new s.constructor(s.type,s);Cc=r,s.target.dispatchEvent(r),Cc=null}else return i=sa(s),i!==null&&zd(i),e.blockedOn=s,!1;i.shift()}return!0}function Mg(e,i,s){ll(e)&&s.delete(i)}function vC(){Tc=!1,Us!==null&&ll(Us)&&(Us=null),Vs!==null&&ll(Vs)&&(Vs=null),js!==null&&ll(js)&&(js=null),Lo.forEach(Mg),Bo.forEach(Mg)}function ro(e,i){e.blockedOn===i&&(e.blockedOn=null,Tc||(Tc=!0,ui.unstable_scheduleCallback(ui.unstable_NormalPriority,vC)))}function Oo(e){function i(a){return ro(a,e)}if(0<Ha.length){ro(Ha[0],e);for(var s=1;s<Ha.length;s++){var r=Ha[s];r.blockedOn===e&&(r.blockedOn=null)}}for(Us!==null&&ro(Us,e),Vs!==null&&ro(Vs,e),js!==null&&ro(js,e),Lo.forEach(i),Bo.forEach(i),s=0;s<Fs.length;s++)r=Fs[s],r.blockedOn===e&&(r.blockedOn=null);for(;0<Fs.length&&(s=Fs[0],s.blockedOn===null);)Yv(s),s.blockedOn===null&&Fs.shift()}var br=Ss.ReactCurrentBatchConfig,Al=!0;function yC(e,i,s,r){var a=Rt,l=br.transition;br.transition=null;try{Rt=1,Ud(e,i,s,r)}finally{Rt=a,br.transition=l}}function xC(e,i,s,r){var a=Rt,l=br.transition;br.transition=null;try{Rt=4,Ud(e,i,s,r)}finally{Rt=a,br.transition=l}}function Ud(e,i,s,r){if(Al){var a=Ac(e,i,s,r);if(a===null)Nh(e,i,r,kl,s),Dg(e,r);else if(_C(a,e,i,s,r))r.stopPropagation();else if(Dg(e,r),i&4&&-1<mC.indexOf(e)){for(;a!==null;){var l=sa(a);if(l!==null&&$v(l),l=Ac(e,i,s,r),l===null&&Nh(e,i,r,kl,s),l===a)break;a=l}a!==null&&r.stopPropagation()}else Nh(e,i,r,null,s)}}var kl=null;function Ac(e,i,s,r){if(kl=null,e=Bd(r),e=bn(e),e!==null)if(i=Ln(e),i===null)e=null;else if(s=i.tag,s===13){if(e=Bv(i),e!==null)return e;e=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null);return kl=e,null}function Zv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aC()){case Od:return 1;case Uv:return 4;case El:case lC:return 16;case Vv:return 536870912;default:return 16}default:return 16}}var Os=null,Vd=null,ul=null;function Kv(){if(ul)return ul;var e,i=Vd,s=i.length,r,a="value"in Os?Os.value:Os.textContent,l=a.length;for(e=0;e<s&&i[e]===a[e];e++);var h=s-e;for(r=1;r<=h&&i[s-r]===a[l-r];r++);return ul=a.slice(e,1<r?1-r:void 0)}function hl(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function $a(){return!0}function Fg(){return!1}function di(e){function i(s,r,a,l,h){this._reactName=s,this._targetInst=a,this.type=r,this.nativeEvent=l,this.target=h,this.currentTarget=null;for(var f in e)e.hasOwnProperty(f)&&(s=e[f],this[f]=s?s(l):l[f]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?$a:Fg,this.isPropagationStopped=Fg,this}return Wt(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=$a)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=$a)},persist:function(){},isPersistent:$a}),i}var Or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jd=di(Or),ia=Wt({},Or,{view:0,detail:0}),wC=di(ia),kh,Ih,oo,du=Wt({},ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==oo&&(oo&&e.type==="mousemove"?(kh=e.screenX-oo.screenX,Ih=e.screenY-oo.screenY):Ih=kh=0,oo=e),kh)},movementY:function(e){return"movementY"in e?e.movementY:Ih}}),Lg=di(du),CC=Wt({},du,{dataTransfer:0}),bC=di(CC),SC=Wt({},ia,{relatedTarget:0}),Rh=di(SC),PC=Wt({},Or,{animationName:0,elapsedTime:0,pseudoElement:0}),EC=di(PC),TC=Wt({},Or,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),AC=di(TC),kC=Wt({},Or,{data:0}),Bg=di(kC),IC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MC(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=DC[e])?!!i[e]:!1}function Hd(){return MC}var FC=Wt({},ia,{key:function(e){if(e.key){var i=IC[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=hl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?RC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hd,charCode:function(e){return e.type==="keypress"?hl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?hl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),LC=di(FC),BC=Wt({},du,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Og=di(BC),OC=Wt({},ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hd}),NC=di(OC),zC=Wt({},Or,{propertyName:0,elapsedTime:0,pseudoElement:0}),UC=di(zC),VC=Wt({},du,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jC=di(VC),HC=[9,13,27,32],$d=vs&&"CompositionEvent"in window,wo=null;vs&&"documentMode"in document&&(wo=document.documentMode);var $C=vs&&"TextEvent"in window&&!wo,Qv=vs&&(!$d||wo&&8<wo&&11>=wo),Ng=String.fromCharCode(32),zg=!1;function qv(e,i){switch(e){case"keyup":return HC.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var or=!1;function WC(e,i){switch(e){case"compositionend":return Jv(i);case"keypress":return i.which!==32?null:(zg=!0,Ng);case"textInput":return e=i.data,e===Ng&&zg?null:e;default:return null}}function GC(e,i){if(or)return e==="compositionend"||!$d&&qv(e,i)?(e=Kv(),ul=Vd=Os=null,or=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Qv&&i.locale!=="ko"?null:i.data;default:return null}}var XC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ug(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!XC[e.type]:i==="textarea"}function ty(e,i,s,r){Rv(r),i=Il(i,"onChange"),0<i.length&&(s=new jd("onChange","change",null,s,r),e.push({event:s,listeners:i}))}var Co=null,No=null;function YC(e){cy(e,0)}function fu(e){var i=ur(e);if(Sv(i))return e}function ZC(e,i){if(e==="change")return i}var ey=!1;if(vs){var Dh;if(vs){var Mh="oninput"in document;if(!Mh){var Vg=document.createElement("div");Vg.setAttribute("oninput","return;"),Mh=typeof Vg.oninput=="function"}Dh=Mh}else Dh=!1;ey=Dh&&(!document.documentMode||9<document.documentMode)}function jg(){Co&&(Co.detachEvent("onpropertychange",iy),No=Co=null)}function iy(e){if(e.propertyName==="value"&&fu(No)){var i=[];ty(i,No,e,Bd(e)),Lv(YC,i)}}function KC(e,i,s){e==="focusin"?(jg(),Co=i,No=s,Co.attachEvent("onpropertychange",iy)):e==="focusout"&&jg()}function QC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fu(No)}function qC(e,i){if(e==="click")return fu(i)}function JC(e,i){if(e==="input"||e==="change")return fu(i)}function tb(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Fi=typeof Object.is=="function"?Object.is:tb;function zo(e,i){if(Fi(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var s=Object.keys(e),r=Object.keys(i);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var a=s[r];if(!hc.call(i,a)||!Fi(e[a],i[a]))return!1}return!0}function Hg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $g(e,i){var s=Hg(e);e=0;for(var r;s;){if(s.nodeType===3){if(r=e+s.textContent.length,e<=i&&r>=i)return{node:s,offset:i-e};e=r}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=Hg(s)}}function sy(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?sy(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function ny(){for(var e=window,i=bl();i instanceof e.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)e=i.contentWindow;else break;i=bl(e.document)}return i}function Wd(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}function eb(e){var i=ny(),s=e.focusedElem,r=e.selectionRange;if(i!==s&&s&&s.ownerDocument&&sy(s.ownerDocument.documentElement,s)){if(r!==null&&Wd(s)){if(i=r.start,e=r.end,e===void 0&&(e=i),"selectionStart"in s)s.selectionStart=i,s.selectionEnd=Math.min(e,s.value.length);else if(e=(i=s.ownerDocument||document)&&i.defaultView||window,e.getSelection){e=e.getSelection();var a=s.textContent.length,l=Math.min(r.start,a);r=r.end===void 0?l:Math.min(r.end,a),!e.extend&&l>r&&(a=r,r=l,l=a),a=$g(s,l);var h=$g(s,r);a&&h&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(i=i.createRange(),i.setStart(a.node,a.offset),e.removeAllRanges(),l>r?(e.addRange(i),e.extend(h.node,h.offset)):(i.setEnd(h.node,h.offset),e.addRange(i)))}}for(i=[],e=s;e=e.parentNode;)e.nodeType===1&&i.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<i.length;s++)e=i[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ib=vs&&"documentMode"in document&&11>=document.documentMode,ar=null,kc=null,bo=null,Ic=!1;function Wg(e,i,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ic||ar==null||ar!==bl(r)||(r=ar,"selectionStart"in r&&Wd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),bo&&zo(bo,r)||(bo=r,r=Il(kc,"onSelect"),0<r.length&&(i=new jd("onSelect","select",null,i,s),e.push({event:i,listeners:r}),i.target=ar)))}function Wa(e,i){var s={};return s[e.toLowerCase()]=i.toLowerCase(),s["Webkit"+e]="webkit"+i,s["Moz"+e]="moz"+i,s}var lr={animationend:Wa("Animation","AnimationEnd"),animationiteration:Wa("Animation","AnimationIteration"),animationstart:Wa("Animation","AnimationStart"),transitionend:Wa("Transition","TransitionEnd")},Fh={},ry={};vs&&(ry=document.createElement("div").style,"AnimationEvent"in window||(delete lr.animationend.animation,delete lr.animationiteration.animation,delete lr.animationstart.animation),"TransitionEvent"in window||delete lr.transitionend.transition);function pu(e){if(Fh[e])return Fh[e];if(!lr[e])return e;var i=lr[e],s;for(s in i)if(i.hasOwnProperty(s)&&s in ry)return Fh[e]=i[s];return e}var oy=pu("animationend"),ay=pu("animationiteration"),ly=pu("animationstart"),uy=pu("transitionend"),hy=new Map,Gg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tn(e,i){hy.set(e,i),Fn(i,[e])}for(var Lh=0;Lh<Gg.length;Lh++){var Bh=Gg[Lh],sb=Bh.toLowerCase(),nb=Bh[0].toUpperCase()+Bh.slice(1);tn(sb,"on"+nb)}tn(oy,"onAnimationEnd");tn(ay,"onAnimationIteration");tn(ly,"onAnimationStart");tn("dblclick","onDoubleClick");tn("focusin","onFocus");tn("focusout","onBlur");tn(uy,"onTransitionEnd");Ar("onMouseEnter",["mouseout","mouseover"]);Ar("onMouseLeave",["mouseout","mouseover"]);Ar("onPointerEnter",["pointerout","pointerover"]);Ar("onPointerLeave",["pointerout","pointerover"]);Fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rb=new Set("cancel close invalid load scroll toggle".split(" ").concat(_o));function Xg(e,i,s){var r=e.type||"unknown-event";e.currentTarget=s,sC(r,i,void 0,e),e.currentTarget=null}function cy(e,i){i=(i&4)!==0;for(var s=0;s<e.length;s++){var r=e[s],a=r.event;r=r.listeners;t:{var l=void 0;if(i)for(var h=r.length-1;0<=h;h--){var f=r[h],p=f.instance,m=f.currentTarget;if(f=f.listener,p!==l&&a.isPropagationStopped())break t;Xg(a,f,m),l=p}else for(h=0;h<r.length;h++){if(f=r[h],p=f.instance,m=f.currentTarget,f=f.listener,p!==l&&a.isPropagationStopped())break t;Xg(a,f,m),l=p}}}if(Pl)throw e=Pc,Pl=!1,Pc=null,e}function Lt(e,i){var s=i[Lc];s===void 0&&(s=i[Lc]=new Set);var r=e+"__bubble";s.has(r)||(dy(i,e,2,!1),s.add(r))}function Oh(e,i,s){var r=0;i&&(r|=4),dy(s,e,r,i)}var Ga="_reactListening"+Math.random().toString(36).slice(2);function Uo(e){if(!e[Ga]){e[Ga]=!0,yv.forEach(function(s){s!=="selectionchange"&&(rb.has(s)||Oh(s,!1,e),Oh(s,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Ga]||(i[Ga]=!0,Oh("selectionchange",!1,i))}}function dy(e,i,s,r){switch(Zv(i)){case 1:var a=yC;break;case 4:a=xC;break;default:a=Ud}s=a.bind(null,i,s,e),a=void 0,!Sc||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(i,s,{capture:!0,passive:a}):e.addEventListener(i,s,!0):a!==void 0?e.addEventListener(i,s,{passive:a}):e.addEventListener(i,s,!1)}function Nh(e,i,s,r,a){var l=r;if(!(i&1)&&!(i&2)&&r!==null)t:for(;;){if(r===null)return;var h=r.tag;if(h===3||h===4){var f=r.stateNode.containerInfo;if(f===a||f.nodeType===8&&f.parentNode===a)break;if(h===4)for(h=r.return;h!==null;){var p=h.tag;if((p===3||p===4)&&(p=h.stateNode.containerInfo,p===a||p.nodeType===8&&p.parentNode===a))return;h=h.return}for(;f!==null;){if(h=bn(f),h===null)return;if(p=h.tag,p===5||p===6){r=l=h;continue t}f=f.parentNode}}r=r.return}Lv(function(){var m=l,v=Bd(s),w=[];t:{var x=hy.get(e);if(x!==void 0){var b=jd,E=e;switch(e){case"keypress":if(hl(s)===0)break t;case"keydown":case"keyup":b=LC;break;case"focusin":E="focus",b=Rh;break;case"focusout":E="blur",b=Rh;break;case"beforeblur":case"afterblur":b=Rh;break;case"click":if(s.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Lg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=bC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=NC;break;case oy:case ay:case ly:b=EC;break;case uy:b=UC;break;case"scroll":b=wC;break;case"wheel":b=jC;break;case"copy":case"cut":case"paste":b=AC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Og}var R=(i&4)!==0,O=!R&&e==="scroll",A=R?x!==null?x+"Capture":null:x;R=[];for(var P=m,k;P!==null;){k=P;var D=k.stateNode;if(k.tag===5&&D!==null&&(k=D,A!==null&&(D=Fo(P,A),D!=null&&R.push(Vo(P,D,k)))),O)break;P=P.return}0<R.length&&(x=new b(x,E,null,s,v),w.push({event:x,listeners:R}))}}if(!(i&7)){t:{if(x=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",x&&s!==Cc&&(E=s.relatedTarget||s.fromElement)&&(bn(E)||E[ys]))break t;if((b||x)&&(x=v.window===v?v:(x=v.ownerDocument)?x.defaultView||x.parentWindow:window,b?(E=s.relatedTarget||s.toElement,b=m,E=E?bn(E):null,E!==null&&(O=Ln(E),E!==O||E.tag!==5&&E.tag!==6)&&(E=null)):(b=null,E=m),b!==E)){if(R=Lg,D="onMouseLeave",A="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(R=Og,D="onPointerLeave",A="onPointerEnter",P="pointer"),O=b==null?x:ur(b),k=E==null?x:ur(E),x=new R(D,P+"leave",b,s,v),x.target=O,x.relatedTarget=k,D=null,bn(v)===m&&(R=new R(A,P+"enter",E,s,v),R.target=k,R.relatedTarget=O,D=R),O=D,b&&E)e:{for(R=b,A=E,P=0,k=R;k;k=tr(k))P++;for(k=0,D=A;D;D=tr(D))k++;for(;0<P-k;)R=tr(R),P--;for(;0<k-P;)A=tr(A),k--;for(;P--;){if(R===A||A!==null&&R===A.alternate)break e;R=tr(R),A=tr(A)}R=null}else R=null;b!==null&&Yg(w,x,b,R,!1),E!==null&&O!==null&&Yg(w,O,E,R,!0)}}t:{if(x=m?ur(m):window,b=x.nodeName&&x.nodeName.toLowerCase(),b==="select"||b==="input"&&x.type==="file")var B=ZC;else if(Ug(x))if(ey)B=JC;else{B=QC;var H=KC}else(b=x.nodeName)&&b.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(B=qC);if(B&&(B=B(e,m))){ty(w,B,s,v);break t}H&&H(e,x,m),e==="focusout"&&(H=x._wrapperState)&&H.controlled&&x.type==="number"&&_c(x,"number",x.value)}switch(H=m?ur(m):window,e){case"focusin":(Ug(H)||H.contentEditable==="true")&&(ar=H,kc=m,bo=null);break;case"focusout":bo=kc=ar=null;break;case"mousedown":Ic=!0;break;case"contextmenu":case"mouseup":case"dragend":Ic=!1,Wg(w,s,v);break;case"selectionchange":if(ib)break;case"keydown":case"keyup":Wg(w,s,v)}var $;if($d)t:{switch(e){case"compositionstart":var G="onCompositionStart";break t;case"compositionend":G="onCompositionEnd";break t;case"compositionupdate":G="onCompositionUpdate";break t}G=void 0}else or?qv(e,s)&&(G="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(G="onCompositionStart");G&&(Qv&&s.locale!=="ko"&&(or||G!=="onCompositionStart"?G==="onCompositionEnd"&&or&&($=Kv()):(Os=v,Vd="value"in Os?Os.value:Os.textContent,or=!0)),H=Il(m,G),0<H.length&&(G=new Bg(G,e,null,s,v),w.push({event:G,listeners:H}),$?G.data=$:($=Jv(s),$!==null&&(G.data=$)))),($=$C?WC(e,s):GC(e,s))&&(m=Il(m,"onBeforeInput"),0<m.length&&(v=new Bg("onBeforeInput","beforeinput",null,s,v),w.push({event:v,listeners:m}),v.data=$))}cy(w,i)})}function Vo(e,i,s){return{instance:e,listener:i,currentTarget:s}}function Il(e,i){for(var s=i+"Capture",r=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Fo(e,s),l!=null&&r.unshift(Vo(e,l,a)),l=Fo(e,i),l!=null&&r.push(Vo(e,l,a))),e=e.return}return r}function tr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Yg(e,i,s,r,a){for(var l=i._reactName,h=[];s!==null&&s!==r;){var f=s,p=f.alternate,m=f.stateNode;if(p!==null&&p===r)break;f.tag===5&&m!==null&&(f=m,a?(p=Fo(s,l),p!=null&&h.unshift(Vo(s,p,f))):a||(p=Fo(s,l),p!=null&&h.push(Vo(s,p,f)))),s=s.return}h.length!==0&&e.push({event:i,listeners:h})}var ob=/\r\n?/g,ab=/\u0000|\uFFFD/g;function Zg(e){return(typeof e=="string"?e:""+e).replace(ob,`
`).replace(ab,"")}function Xa(e,i,s){if(i=Zg(i),Zg(e)!==i&&s)throw Error(X(425))}function Rl(){}var Rc=null,Dc=null;function Mc(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Fc=typeof setTimeout=="function"?setTimeout:void 0,lb=typeof clearTimeout=="function"?clearTimeout:void 0,Kg=typeof Promise=="function"?Promise:void 0,ub=typeof queueMicrotask=="function"?queueMicrotask:typeof Kg<"u"?function(e){return Kg.resolve(null).then(e).catch(hb)}:Fc;function hb(e){setTimeout(function(){throw e})}function zh(e,i){var s=i,r=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(r===0){e.removeChild(a),Oo(i);return}r--}else s!=="$"&&s!=="$?"&&s!=="$!"||r++;s=a}while(s);Oo(i)}function Hs(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return e}function Qg(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return e;i--}else s==="/$"&&i++}e=e.previousSibling}return null}var Nr=Math.random().toString(36).slice(2),Zi="__reactFiber$"+Nr,jo="__reactProps$"+Nr,ys="__reactContainer$"+Nr,Lc="__reactEvents$"+Nr,cb="__reactListeners$"+Nr,db="__reactHandles$"+Nr;function bn(e){var i=e[Zi];if(i)return i;for(var s=e.parentNode;s;){if(i=s[ys]||s[Zi]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(e=Qg(e);e!==null;){if(s=e[Zi])return s;e=Qg(e)}return i}e=s,s=e.parentNode}return null}function sa(e){return e=e[Zi]||e[ys],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ur(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function gu(e){return e[jo]||null}var Bc=[],hr=-1;function en(e){return{current:e}}function Bt(e){0>hr||(e.current=Bc[hr],Bc[hr]=null,hr--)}function Ft(e,i){hr++,Bc[hr]=e.current,e.current=i}var Qs={},Pe=en(Qs),Ze=en(!1),kn=Qs;function kr(e,i){var s=e.type.contextTypes;if(!s)return Qs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===i)return r.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in s)a[l]=i[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ke(e){return e=e.childContextTypes,e!=null}function Dl(){Bt(Ze),Bt(Pe)}function qg(e,i,s){if(Pe.current!==Qs)throw Error(X(168));Ft(Pe,i),Ft(Ze,s)}function fy(e,i,s){var r=e.stateNode;if(i=i.childContextTypes,typeof r.getChildContext!="function")return s;r=r.getChildContext();for(var a in r)if(!(a in i))throw Error(X(108,K1(e)||"Unknown",a));return Wt({},s,r)}function Ml(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qs,kn=Pe.current,Ft(Pe,e),Ft(Ze,Ze.current),!0}function Jg(e,i,s){var r=e.stateNode;if(!r)throw Error(X(169));s?(e=fy(e,i,kn),r.__reactInternalMemoizedMergedChildContext=e,Bt(Ze),Bt(Pe),Ft(Pe,e)):Bt(Ze),Ft(Ze,s)}var cs=null,mu=!1,Uh=!1;function py(e){cs===null?cs=[e]:cs.push(e)}function fb(e){mu=!0,py(e)}function sn(){if(!Uh&&cs!==null){Uh=!0;var e=0,i=Rt;try{var s=cs;for(Rt=1;e<s.length;e++){var r=s[e];do r=r(!0);while(r!==null)}cs=null,mu=!1}catch(a){throw cs!==null&&(cs=cs.slice(e+1)),zv(Od,sn),a}finally{Rt=i,Uh=!1}}return null}var cr=[],dr=0,Fl=null,Ll=0,pi=[],gi=0,In=null,ds=1,fs="";function yn(e,i){cr[dr++]=Ll,cr[dr++]=Fl,Fl=e,Ll=i}function gy(e,i,s){pi[gi++]=ds,pi[gi++]=fs,pi[gi++]=In,In=e;var r=ds;e=fs;var a=32-Di(r)-1;r&=~(1<<a),s+=1;var l=32-Di(i)+a;if(30<l){var h=a-a%5;l=(r&(1<<h)-1).toString(32),r>>=h,a-=h,ds=1<<32-Di(i)+a|s<<a|r,fs=l+e}else ds=1<<l|s<<a|r,fs=e}function Gd(e){e.return!==null&&(yn(e,1),gy(e,1,0))}function Xd(e){for(;e===Fl;)Fl=cr[--dr],cr[dr]=null,Ll=cr[--dr],cr[dr]=null;for(;e===In;)In=pi[--gi],pi[gi]=null,fs=pi[--gi],pi[gi]=null,ds=pi[--gi],pi[gi]=null}var li=null,oi=null,Nt=!1,Ri=null;function my(e,i){var s=mi(5,null,null,0);s.elementType="DELETED",s.stateNode=i,s.return=e,i=e.deletions,i===null?(e.deletions=[s],e.flags|=16):i.push(s)}function tm(e,i){switch(e.tag){case 5:var s=e.type;return i=i.nodeType!==1||s.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(e.stateNode=i,li=e,oi=Hs(i.firstChild),!0):!1;case 6:return i=e.pendingProps===""||i.nodeType!==3?null:i,i!==null?(e.stateNode=i,li=e,oi=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(s=In!==null?{id:ds,overflow:fs}:null,e.memoizedState={dehydrated:i,treeContext:s,retryLane:1073741824},s=mi(18,null,null,0),s.stateNode=i,s.return=e,e.child=s,li=e,oi=null,!0):!1;default:return!1}}function Oc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Nc(e){if(Nt){var i=oi;if(i){var s=i;if(!tm(e,i)){if(Oc(e))throw Error(X(418));i=Hs(s.nextSibling);var r=li;i&&tm(e,i)?my(r,s):(e.flags=e.flags&-4097|2,Nt=!1,li=e)}}else{if(Oc(e))throw Error(X(418));e.flags=e.flags&-4097|2,Nt=!1,li=e}}}function em(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;li=e}function Ya(e){if(e!==li)return!1;if(!Nt)return em(e),Nt=!0,!1;var i;if((i=e.tag!==3)&&!(i=e.tag!==5)&&(i=e.type,i=i!=="head"&&i!=="body"&&!Mc(e.type,e.memoizedProps)),i&&(i=oi)){if(Oc(e))throw _y(),Error(X(418));for(;i;)my(e,i),i=Hs(i.nextSibling)}if(em(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(i===0){oi=Hs(e.nextSibling);break t}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++}e=e.nextSibling}oi=null}}else oi=li?Hs(e.stateNode.nextSibling):null;return!0}function _y(){for(var e=oi;e;)e=Hs(e.nextSibling)}function Ir(){oi=li=null,Nt=!1}function Yd(e){Ri===null?Ri=[e]:Ri.push(e)}var pb=Ss.ReactCurrentBatchConfig;function ki(e,i){if(e&&e.defaultProps){i=Wt({},i),e=e.defaultProps;for(var s in e)i[s]===void 0&&(i[s]=e[s]);return i}return i}var Bl=en(null),Ol=null,fr=null,Zd=null;function Kd(){Zd=fr=Ol=null}function Qd(e){var i=Bl.current;Bt(Bl),e._currentValue=i}function zc(e,i,s){for(;e!==null;){var r=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,r!==null&&(r.childLanes|=i)):r!==null&&(r.childLanes&i)!==i&&(r.childLanes|=i),e===s)break;e=e.return}}function Sr(e,i){Ol=e,Zd=fr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&i&&(Ye=!0),e.firstContext=null)}function vi(e){var i=e._currentValue;if(Zd!==e)if(e={context:e,memoizedValue:i,next:null},fr===null){if(Ol===null)throw Error(X(308));fr=e,Ol.dependencies={lanes:0,firstContext:e}}else fr=fr.next=e;return i}var Sn=null;function qd(e){Sn===null?Sn=[e]:Sn.push(e)}function vy(e,i,s,r){var a=i.interleaved;return a===null?(s.next=s,qd(i)):(s.next=a.next,a.next=s),i.interleaved=s,xs(e,r)}function xs(e,i){e.lanes|=i;var s=e.alternate;for(s!==null&&(s.lanes|=i),s=e,e=e.return;e!==null;)e.childLanes|=i,s=e.alternate,s!==null&&(s.childLanes|=i),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Ds=!1;function Jd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yy(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gs(e,i){return{eventTime:e,lane:i,tag:0,payload:null,callback:null,next:null}}function $s(e,i,s){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Et&2){var a=r.pending;return a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i,xs(e,s)}return a=r.interleaved,a===null?(i.next=i,qd(r)):(i.next=a.next,a.next=i),r.interleaved=i,xs(e,s)}function cl(e,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194240)!==0)){var r=i.lanes;r&=e.pendingLanes,s|=r,i.lanes=s,Nd(e,s)}}function im(e,i){var s=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var a=null,l=null;if(s=s.firstBaseUpdate,s!==null){do{var h={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};l===null?a=l=h:l=l.next=h,s=s.next}while(s!==null);l===null?a=l=i:l=l.next=i}else a=l=i;s={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=i:e.next=i,s.lastBaseUpdate=i}function Nl(e,i,s,r){var a=e.updateQueue;Ds=!1;var l=a.firstBaseUpdate,h=a.lastBaseUpdate,f=a.shared.pending;if(f!==null){a.shared.pending=null;var p=f,m=p.next;p.next=null,h===null?l=m:h.next=m,h=p;var v=e.alternate;v!==null&&(v=v.updateQueue,f=v.lastBaseUpdate,f!==h&&(f===null?v.firstBaseUpdate=m:f.next=m,v.lastBaseUpdate=p))}if(l!==null){var w=a.baseState;h=0,v=m=p=null,f=l;do{var x=f.lane,b=f.eventTime;if((r&x)===x){v!==null&&(v=v.next={eventTime:b,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});t:{var E=e,R=f;switch(x=i,b=s,R.tag){case 1:if(E=R.payload,typeof E=="function"){w=E.call(b,w,x);break t}w=E;break t;case 3:E.flags=E.flags&-65537|128;case 0:if(E=R.payload,x=typeof E=="function"?E.call(b,w,x):E,x==null)break t;w=Wt({},w,x);break t;case 2:Ds=!0}}f.callback!==null&&f.lane!==0&&(e.flags|=64,x=a.effects,x===null?a.effects=[f]:x.push(f))}else b={eventTime:b,lane:x,tag:f.tag,payload:f.payload,callback:f.callback,next:null},v===null?(m=v=b,p=w):v=v.next=b,h|=x;if(f=f.next,f===null){if(f=a.shared.pending,f===null)break;x=f,f=x.next,x.next=null,a.lastBaseUpdate=x,a.shared.pending=null}}while(1);if(v===null&&(p=w),a.baseState=p,a.firstBaseUpdate=m,a.lastBaseUpdate=v,i=a.shared.interleaved,i!==null){a=i;do h|=a.lane,a=a.next;while(a!==i)}else l===null&&(a.shared.lanes=0);Dn|=h,e.lanes=h,e.memoizedState=w}}function sm(e,i,s){if(e=i.effects,i.effects=null,e!==null)for(i=0;i<e.length;i++){var r=e[i],a=r.callback;if(a!==null){if(r.callback=null,r=s,typeof a!="function")throw Error(X(191,a));a.call(r)}}}var xy=new vv.Component().refs;function Uc(e,i,s,r){i=e.memoizedState,s=s(r,i),s=s==null?i:Wt({},i,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var _u={isMounted:function(e){return(e=e._reactInternals)?Ln(e)===e:!1},enqueueSetState:function(e,i,s){e=e._reactInternals;var r=Me(),a=Gs(e),l=gs(r,a);l.payload=i,s!=null&&(l.callback=s),i=$s(e,l,a),i!==null&&(Mi(i,e,a,r),cl(i,e,a))},enqueueReplaceState:function(e,i,s){e=e._reactInternals;var r=Me(),a=Gs(e),l=gs(r,a);l.tag=1,l.payload=i,s!=null&&(l.callback=s),i=$s(e,l,a),i!==null&&(Mi(i,e,a,r),cl(i,e,a))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var s=Me(),r=Gs(e),a=gs(s,r);a.tag=2,i!=null&&(a.callback=i),i=$s(e,a,r),i!==null&&(Mi(i,e,r,s),cl(i,e,r))}};function nm(e,i,s,r,a,l,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,h):i.prototype&&i.prototype.isPureReactComponent?!zo(s,r)||!zo(a,l):!0}function wy(e,i,s){var r=!1,a=Qs,l=i.contextType;return typeof l=="object"&&l!==null?l=vi(l):(a=Ke(i)?kn:Pe.current,r=i.contextTypes,l=(r=r!=null)?kr(e,a):Qs),i=new i(s,l),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=_u,e.stateNode=i,i._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),i}function rm(e,i,s,r){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,r),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,r),i.state!==e&&_u.enqueueReplaceState(i,i.state,null)}function Vc(e,i,s,r){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs=xy,Jd(e);var l=i.contextType;typeof l=="object"&&l!==null?a.context=vi(l):(l=Ke(i)?kn:Pe.current,a.context=kr(e,l)),a.state=e.memoizedState,l=i.getDerivedStateFromProps,typeof l=="function"&&(Uc(e,i,l,s),a.state=e.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(i=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),i!==a.state&&_u.enqueueReplaceState(a,a.state,null),Nl(e,s,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ao(e,i,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(X(309));var r=s.stateNode}if(!r)throw Error(X(147,e));var a=r,l=""+e;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===l?i.ref:(i=function(h){var f=a.refs;f===xy&&(f=a.refs={}),h===null?delete f[l]:f[l]=h},i._stringRef=l,i)}if(typeof e!="string")throw Error(X(284));if(!s._owner)throw Error(X(290,e))}return e}function Za(e,i){throw e=Object.prototype.toString.call(i),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e))}function om(e){var i=e._init;return i(e._payload)}function Cy(e){function i(A,P){if(e){var k=A.deletions;k===null?(A.deletions=[P],A.flags|=16):k.push(P)}}function s(A,P){if(!e)return null;for(;P!==null;)i(A,P),P=P.sibling;return null}function r(A,P){for(A=new Map;P!==null;)P.key!==null?A.set(P.key,P):A.set(P.index,P),P=P.sibling;return A}function a(A,P){return A=Xs(A,P),A.index=0,A.sibling=null,A}function l(A,P,k){return A.index=k,e?(k=A.alternate,k!==null?(k=k.index,k<P?(A.flags|=2,P):k):(A.flags|=2,P)):(A.flags|=1048576,P)}function h(A){return e&&A.alternate===null&&(A.flags|=2),A}function f(A,P,k,D){return P===null||P.tag!==6?(P=Xh(k,A.mode,D),P.return=A,P):(P=a(P,k),P.return=A,P)}function p(A,P,k,D){var B=k.type;return B===rr?v(A,P,k.props.children,D,k.key):P!==null&&(P.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Rs&&om(B)===P.type)?(D=a(P,k.props),D.ref=ao(A,P,k),D.return=A,D):(D=_l(k.type,k.key,k.props,null,A.mode,D),D.ref=ao(A,P,k),D.return=A,D)}function m(A,P,k,D){return P===null||P.tag!==4||P.stateNode.containerInfo!==k.containerInfo||P.stateNode.implementation!==k.implementation?(P=Yh(k,A.mode,D),P.return=A,P):(P=a(P,k.children||[]),P.return=A,P)}function v(A,P,k,D,B){return P===null||P.tag!==7?(P=An(k,A.mode,D,B),P.return=A,P):(P=a(P,k),P.return=A,P)}function w(A,P,k){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Xh(""+P,A.mode,k),P.return=A,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Na:return k=_l(P.type,P.key,P.props,null,A.mode,k),k.ref=ao(A,null,P),k.return=A,k;case nr:return P=Yh(P,A.mode,k),P.return=A,P;case Rs:var D=P._init;return w(A,D(P._payload),k)}if(go(P)||io(P))return P=An(P,A.mode,k,null),P.return=A,P;Za(A,P)}return null}function x(A,P,k,D){var B=P!==null?P.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return B!==null?null:f(A,P,""+k,D);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Na:return k.key===B?p(A,P,k,D):null;case nr:return k.key===B?m(A,P,k,D):null;case Rs:return B=k._init,x(A,P,B(k._payload),D)}if(go(k)||io(k))return B!==null?null:v(A,P,k,D,null);Za(A,k)}return null}function b(A,P,k,D,B){if(typeof D=="string"&&D!==""||typeof D=="number")return A=A.get(k)||null,f(P,A,""+D,B);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Na:return A=A.get(D.key===null?k:D.key)||null,p(P,A,D,B);case nr:return A=A.get(D.key===null?k:D.key)||null,m(P,A,D,B);case Rs:var H=D._init;return b(A,P,k,H(D._payload),B)}if(go(D)||io(D))return A=A.get(k)||null,v(P,A,D,B,null);Za(P,D)}return null}function E(A,P,k,D){for(var B=null,H=null,$=P,G=P=0,rt=null;$!==null&&G<k.length;G++){$.index>G?(rt=$,$=null):rt=$.sibling;var it=x(A,$,k[G],D);if(it===null){$===null&&($=rt);break}e&&$&&it.alternate===null&&i(A,$),P=l(it,P,G),H===null?B=it:H.sibling=it,H=it,$=rt}if(G===k.length)return s(A,$),Nt&&yn(A,G),B;if($===null){for(;G<k.length;G++)$=w(A,k[G],D),$!==null&&(P=l($,P,G),H===null?B=$:H.sibling=$,H=$);return Nt&&yn(A,G),B}for($=r(A,$);G<k.length;G++)rt=b($,A,G,k[G],D),rt!==null&&(e&&rt.alternate!==null&&$.delete(rt.key===null?G:rt.key),P=l(rt,P,G),H===null?B=rt:H.sibling=rt,H=rt);return e&&$.forEach(function(mt){return i(A,mt)}),Nt&&yn(A,G),B}function R(A,P,k,D){var B=io(k);if(typeof B!="function")throw Error(X(150));if(k=B.call(k),k==null)throw Error(X(151));for(var H=B=null,$=P,G=P=0,rt=null,it=k.next();$!==null&&!it.done;G++,it=k.next()){$.index>G?(rt=$,$=null):rt=$.sibling;var mt=x(A,$,it.value,D);if(mt===null){$===null&&($=rt);break}e&&$&&mt.alternate===null&&i(A,$),P=l(mt,P,G),H===null?B=mt:H.sibling=mt,H=mt,$=rt}if(it.done)return s(A,$),Nt&&yn(A,G),B;if($===null){for(;!it.done;G++,it=k.next())it=w(A,it.value,D),it!==null&&(P=l(it,P,G),H===null?B=it:H.sibling=it,H=it);return Nt&&yn(A,G),B}for($=r(A,$);!it.done;G++,it=k.next())it=b($,A,G,it.value,D),it!==null&&(e&&it.alternate!==null&&$.delete(it.key===null?G:it.key),P=l(it,P,G),H===null?B=it:H.sibling=it,H=it);return e&&$.forEach(function(_t){return i(A,_t)}),Nt&&yn(A,G),B}function O(A,P,k,D){if(typeof k=="object"&&k!==null&&k.type===rr&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Na:t:{for(var B=k.key,H=P;H!==null;){if(H.key===B){if(B=k.type,B===rr){if(H.tag===7){s(A,H.sibling),P=a(H,k.props.children),P.return=A,A=P;break t}}else if(H.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Rs&&om(B)===H.type){s(A,H.sibling),P=a(H,k.props),P.ref=ao(A,H,k),P.return=A,A=P;break t}s(A,H);break}else i(A,H);H=H.sibling}k.type===rr?(P=An(k.props.children,A.mode,D,k.key),P.return=A,A=P):(D=_l(k.type,k.key,k.props,null,A.mode,D),D.ref=ao(A,P,k),D.return=A,A=D)}return h(A);case nr:t:{for(H=k.key;P!==null;){if(P.key===H)if(P.tag===4&&P.stateNode.containerInfo===k.containerInfo&&P.stateNode.implementation===k.implementation){s(A,P.sibling),P=a(P,k.children||[]),P.return=A,A=P;break t}else{s(A,P);break}else i(A,P);P=P.sibling}P=Yh(k,A.mode,D),P.return=A,A=P}return h(A);case Rs:return H=k._init,O(A,P,H(k._payload),D)}if(go(k))return E(A,P,k,D);if(io(k))return R(A,P,k,D);Za(A,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,P!==null&&P.tag===6?(s(A,P.sibling),P=a(P,k),P.return=A,A=P):(s(A,P),P=Xh(k,A.mode,D),P.return=A,A=P),h(A)):s(A,P)}return O}var Rr=Cy(!0),by=Cy(!1),na={},qi=en(na),Ho=en(na),$o=en(na);function Pn(e){if(e===na)throw Error(X(174));return e}function tf(e,i){switch(Ft($o,i),Ft(Ho,e),Ft(qi,na),e=i.nodeType,e){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:yc(null,"");break;default:e=e===8?i.parentNode:i,i=e.namespaceURI||null,e=e.tagName,i=yc(i,e)}Bt(qi),Ft(qi,i)}function Dr(){Bt(qi),Bt(Ho),Bt($o)}function Sy(e){Pn($o.current);var i=Pn(qi.current),s=yc(i,e.type);i!==s&&(Ft(Ho,e),Ft(qi,s))}function ef(e){Ho.current===e&&(Bt(qi),Bt(Ho))}var jt=en(0);function zl(e){for(var i=e;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Vh=[];function sf(){for(var e=0;e<Vh.length;e++)Vh[e]._workInProgressVersionPrimary=null;Vh.length=0}var dl=Ss.ReactCurrentDispatcher,jh=Ss.ReactCurrentBatchConfig,Rn=0,$t=null,ne=null,he=null,Ul=!1,So=!1,Wo=0,gb=0;function Ce(){throw Error(X(321))}function nf(e,i){if(i===null)return!1;for(var s=0;s<i.length&&s<e.length;s++)if(!Fi(e[s],i[s]))return!1;return!0}function rf(e,i,s,r,a,l){if(Rn=l,$t=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,dl.current=e===null||e.memoizedState===null?yb:xb,e=s(r,a),So){l=0;do{if(So=!1,Wo=0,25<=l)throw Error(X(301));l+=1,he=ne=null,i.updateQueue=null,dl.current=wb,e=s(r,a)}while(So)}if(dl.current=Vl,i=ne!==null&&ne.next!==null,Rn=0,he=ne=$t=null,Ul=!1,i)throw Error(X(300));return e}function of(){var e=Wo!==0;return Wo=0,e}function Xi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return he===null?$t.memoizedState=he=e:he=he.next=e,he}function yi(){if(ne===null){var e=$t.alternate;e=e!==null?e.memoizedState:null}else e=ne.next;var i=he===null?$t.memoizedState:he.next;if(i!==null)he=i,ne=e;else{if(e===null)throw Error(X(310));ne=e,e={memoizedState:ne.memoizedState,baseState:ne.baseState,baseQueue:ne.baseQueue,queue:ne.queue,next:null},he===null?$t.memoizedState=he=e:he=he.next=e}return he}function Go(e,i){return typeof i=="function"?i(e):i}function Hh(e){var i=yi(),s=i.queue;if(s===null)throw Error(X(311));s.lastRenderedReducer=e;var r=ne,a=r.baseQueue,l=s.pending;if(l!==null){if(a!==null){var h=a.next;a.next=l.next,l.next=h}r.baseQueue=a=l,s.pending=null}if(a!==null){l=a.next,r=r.baseState;var f=h=null,p=null,m=l;do{var v=m.lane;if((Rn&v)===v)p!==null&&(p=p.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),r=m.hasEagerState?m.eagerState:e(r,m.action);else{var w={lane:v,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};p===null?(f=p=w,h=r):p=p.next=w,$t.lanes|=v,Dn|=v}m=m.next}while(m!==null&&m!==l);p===null?h=r:p.next=f,Fi(r,i.memoizedState)||(Ye=!0),i.memoizedState=r,i.baseState=h,i.baseQueue=p,s.lastRenderedState=r}if(e=s.interleaved,e!==null){a=e;do l=a.lane,$t.lanes|=l,Dn|=l,a=a.next;while(a!==e)}else a===null&&(s.lanes=0);return[i.memoizedState,s.dispatch]}function $h(e){var i=yi(),s=i.queue;if(s===null)throw Error(X(311));s.lastRenderedReducer=e;var r=s.dispatch,a=s.pending,l=i.memoizedState;if(a!==null){s.pending=null;var h=a=a.next;do l=e(l,h.action),h=h.next;while(h!==a);Fi(l,i.memoizedState)||(Ye=!0),i.memoizedState=l,i.baseQueue===null&&(i.baseState=l),s.lastRenderedState=l}return[l,r]}function Py(){}function Ey(e,i){var s=$t,r=yi(),a=i(),l=!Fi(r.memoizedState,a);if(l&&(r.memoizedState=a,Ye=!0),r=r.queue,af(ky.bind(null,s,r,e),[e]),r.getSnapshot!==i||l||he!==null&&he.memoizedState.tag&1){if(s.flags|=2048,Xo(9,Ay.bind(null,s,r,a,i),void 0,null),ce===null)throw Error(X(349));Rn&30||Ty(s,i,a)}return a}function Ty(e,i,s){e.flags|=16384,e={getSnapshot:i,value:s},i=$t.updateQueue,i===null?(i={lastEffect:null,stores:null},$t.updateQueue=i,i.stores=[e]):(s=i.stores,s===null?i.stores=[e]:s.push(e))}function Ay(e,i,s,r){i.value=s,i.getSnapshot=r,Iy(i)&&Ry(e)}function ky(e,i,s){return s(function(){Iy(i)&&Ry(e)})}function Iy(e){var i=e.getSnapshot;e=e.value;try{var s=i();return!Fi(e,s)}catch{return!0}}function Ry(e){var i=xs(e,1);i!==null&&Mi(i,e,1,-1)}function am(e){var i=Xi();return typeof e=="function"&&(e=e()),i.memoizedState=i.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:e},i.queue=e,e=e.dispatch=vb.bind(null,$t,e),[i.memoizedState,e]}function Xo(e,i,s,r){return e={tag:e,create:i,destroy:s,deps:r,next:null},i=$t.updateQueue,i===null?(i={lastEffect:null,stores:null},$t.updateQueue=i,i.lastEffect=e.next=e):(s=i.lastEffect,s===null?i.lastEffect=e.next=e:(r=s.next,s.next=e,e.next=r,i.lastEffect=e)),e}function Dy(){return yi().memoizedState}function fl(e,i,s,r){var a=Xi();$t.flags|=e,a.memoizedState=Xo(1|i,s,void 0,r===void 0?null:r)}function vu(e,i,s,r){var a=yi();r=r===void 0?null:r;var l=void 0;if(ne!==null){var h=ne.memoizedState;if(l=h.destroy,r!==null&&nf(r,h.deps)){a.memoizedState=Xo(i,s,l,r);return}}$t.flags|=e,a.memoizedState=Xo(1|i,s,l,r)}function lm(e,i){return fl(8390656,8,e,i)}function af(e,i){return vu(2048,8,e,i)}function My(e,i){return vu(4,2,e,i)}function Fy(e,i){return vu(4,4,e,i)}function Ly(e,i){if(typeof i=="function")return e=e(),i(e),function(){i(null)};if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function By(e,i,s){return s=s!=null?s.concat([e]):null,vu(4,4,Ly.bind(null,i,e),s)}function lf(){}function Oy(e,i){var s=yi();i=i===void 0?null:i;var r=s.memoizedState;return r!==null&&i!==null&&nf(i,r[1])?r[0]:(s.memoizedState=[e,i],e)}function Ny(e,i){var s=yi();i=i===void 0?null:i;var r=s.memoizedState;return r!==null&&i!==null&&nf(i,r[1])?r[0]:(e=e(),s.memoizedState=[e,i],e)}function zy(e,i,s){return Rn&21?(Fi(s,i)||(s=jv(),$t.lanes|=s,Dn|=s,e.baseState=!0),i):(e.baseState&&(e.baseState=!1,Ye=!0),e.memoizedState=s)}function mb(e,i){var s=Rt;Rt=s!==0&&4>s?s:4,e(!0);var r=jh.transition;jh.transition={};try{e(!1),i()}finally{Rt=s,jh.transition=r}}function Uy(){return yi().memoizedState}function _b(e,i,s){var r=Gs(e);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},Vy(e))jy(i,s);else if(s=vy(e,i,s,r),s!==null){var a=Me();Mi(s,e,r,a),Hy(s,i,r)}}function vb(e,i,s){var r=Gs(e),a={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(Vy(e))jy(i,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=i.lastRenderedReducer,l!==null))try{var h=i.lastRenderedState,f=l(h,s);if(a.hasEagerState=!0,a.eagerState=f,Fi(f,h)){var p=i.interleaved;p===null?(a.next=a,qd(i)):(a.next=p.next,p.next=a),i.interleaved=a;return}}catch{}finally{}s=vy(e,i,a,r),s!==null&&(a=Me(),Mi(s,e,r,a),Hy(s,i,r))}}function Vy(e){var i=e.alternate;return e===$t||i!==null&&i===$t}function jy(e,i){So=Ul=!0;var s=e.pending;s===null?i.next=i:(i.next=s.next,s.next=i),e.pending=i}function Hy(e,i,s){if(s&4194240){var r=i.lanes;r&=e.pendingLanes,s|=r,i.lanes=s,Nd(e,s)}}var Vl={readContext:vi,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useInsertionEffect:Ce,useLayoutEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useMutableSource:Ce,useSyncExternalStore:Ce,useId:Ce,unstable_isNewReconciler:!1},yb={readContext:vi,useCallback:function(e,i){return Xi().memoizedState=[e,i===void 0?null:i],e},useContext:vi,useEffect:lm,useImperativeHandle:function(e,i,s){return s=s!=null?s.concat([e]):null,fl(4194308,4,Ly.bind(null,i,e),s)},useLayoutEffect:function(e,i){return fl(4194308,4,e,i)},useInsertionEffect:function(e,i){return fl(4,2,e,i)},useMemo:function(e,i){var s=Xi();return i=i===void 0?null:i,e=e(),s.memoizedState=[e,i],e},useReducer:function(e,i,s){var r=Xi();return i=s!==void 0?s(i):i,r.memoizedState=r.baseState=i,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=_b.bind(null,$t,e),[r.memoizedState,e]},useRef:function(e){var i=Xi();return e={current:e},i.memoizedState=e},useState:am,useDebugValue:lf,useDeferredValue:function(e){return Xi().memoizedState=e},useTransition:function(){var e=am(!1),i=e[0];return e=mb.bind(null,e[1]),Xi().memoizedState=e,[i,e]},useMutableSource:function(){},useSyncExternalStore:function(e,i,s){var r=$t,a=Xi();if(Nt){if(s===void 0)throw Error(X(407));s=s()}else{if(s=i(),ce===null)throw Error(X(349));Rn&30||Ty(r,i,s)}a.memoizedState=s;var l={value:s,getSnapshot:i};return a.queue=l,lm(ky.bind(null,r,l,e),[e]),r.flags|=2048,Xo(9,Ay.bind(null,r,l,s,i),void 0,null),s},useId:function(){var e=Xi(),i=ce.identifierPrefix;if(Nt){var s=fs,r=ds;s=(r&~(1<<32-Di(r)-1)).toString(32)+s,i=":"+i+"R"+s,s=Wo++,0<s&&(i+="H"+s.toString(32)),i+=":"}else s=gb++,i=":"+i+"r"+s.toString(32)+":";return e.memoizedState=i},unstable_isNewReconciler:!1},xb={readContext:vi,useCallback:Oy,useContext:vi,useEffect:af,useImperativeHandle:By,useInsertionEffect:My,useLayoutEffect:Fy,useMemo:Ny,useReducer:Hh,useRef:Dy,useState:function(){return Hh(Go)},useDebugValue:lf,useDeferredValue:function(e){var i=yi();return zy(i,ne.memoizedState,e)},useTransition:function(){var e=Hh(Go)[0],i=yi().memoizedState;return[e,i]},useMutableSource:Py,useSyncExternalStore:Ey,useId:Uy,unstable_isNewReconciler:!1},wb={readContext:vi,useCallback:Oy,useContext:vi,useEffect:af,useImperativeHandle:By,useInsertionEffect:My,useLayoutEffect:Fy,useMemo:Ny,useReducer:$h,useRef:Dy,useState:function(){return $h(Go)},useDebugValue:lf,useDeferredValue:function(e){var i=yi();return ne===null?i.memoizedState=e:zy(i,ne.memoizedState,e)},useTransition:function(){var e=$h(Go)[0],i=yi().memoizedState;return[e,i]},useMutableSource:Py,useSyncExternalStore:Ey,useId:Uy,unstable_isNewReconciler:!1};function Mr(e,i){try{var s="",r=i;do s+=Z1(r),r=r.return;while(r);var a=s}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:i,stack:a,digest:null}}function Wh(e,i,s){return{value:e,source:null,stack:s??null,digest:i??null}}function jc(e,i){try{console.error(i.value)}catch(s){setTimeout(function(){throw s})}}var Cb=typeof WeakMap=="function"?WeakMap:Map;function $y(e,i,s){s=gs(-1,s),s.tag=3,s.payload={element:null};var r=i.value;return s.callback=function(){Hl||(Hl=!0,qc=r),jc(e,i)},s}function Wy(e,i,s){s=gs(-1,s),s.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=i.value;s.payload=function(){return r(a)},s.callback=function(){jc(e,i)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(s.callback=function(){jc(e,i),typeof r!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var h=i.stack;this.componentDidCatch(i.value,{componentStack:h!==null?h:""})}),s}function um(e,i,s){var r=e.pingCache;if(r===null){r=e.pingCache=new Cb;var a=new Set;r.set(i,a)}else a=r.get(i),a===void 0&&(a=new Set,r.set(i,a));a.has(s)||(a.add(s),e=Bb.bind(null,e,i,s),i.then(e,e))}function hm(e){do{var i;if((i=e.tag===13)&&(i=e.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return e;e=e.return}while(e!==null);return null}function cm(e,i,s,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===i?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(i=gs(-1,1),i.tag=2,$s(s,i,1))),s.lanes|=1),e)}var bb=Ss.ReactCurrentOwner,Ye=!1;function De(e,i,s,r){i.child=e===null?by(i,null,s,r):Rr(i,e.child,s,r)}function dm(e,i,s,r,a){s=s.render;var l=i.ref;return Sr(i,a),r=rf(e,i,s,r,l,a),s=of(),e!==null&&!Ye?(i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a,ws(e,i,a)):(Nt&&s&&Gd(i),i.flags|=1,De(e,i,r,a),i.child)}function fm(e,i,s,r,a){if(e===null){var l=s.type;return typeof l=="function"&&!mf(l)&&l.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(i.tag=15,i.type=l,Gy(e,i,l,r,a)):(e=_l(s.type,null,r,i,i.mode,a),e.ref=i.ref,e.return=i,i.child=e)}if(l=e.child,!(e.lanes&a)){var h=l.memoizedProps;if(s=s.compare,s=s!==null?s:zo,s(h,r)&&e.ref===i.ref)return ws(e,i,a)}return i.flags|=1,e=Xs(l,r),e.ref=i.ref,e.return=i,i.child=e}function Gy(e,i,s,r,a){if(e!==null){var l=e.memoizedProps;if(zo(l,r)&&e.ref===i.ref)if(Ye=!1,i.pendingProps=r=l,(e.lanes&a)!==0)e.flags&131072&&(Ye=!0);else return i.lanes=e.lanes,ws(e,i,a)}return Hc(e,i,s,r,a)}function Xy(e,i,s){var r=i.pendingProps,a=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ft(gr,ri),ri|=s;else{if(!(s&1073741824))return e=l!==null?l.baseLanes|s:s,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:e,cachePool:null,transitions:null},i.updateQueue=null,Ft(gr,ri),ri|=e,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:s,Ft(gr,ri),ri|=r}else l!==null?(r=l.baseLanes|s,i.memoizedState=null):r=s,Ft(gr,ri),ri|=r;return De(e,i,a,s),i.child}function Yy(e,i){var s=i.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(i.flags|=512,i.flags|=2097152)}function Hc(e,i,s,r,a){var l=Ke(s)?kn:Pe.current;return l=kr(i,l),Sr(i,a),s=rf(e,i,s,r,l,a),r=of(),e!==null&&!Ye?(i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a,ws(e,i,a)):(Nt&&r&&Gd(i),i.flags|=1,De(e,i,s,a),i.child)}function pm(e,i,s,r,a){if(Ke(s)){var l=!0;Ml(i)}else l=!1;if(Sr(i,a),i.stateNode===null)pl(e,i),wy(i,s,r),Vc(i,s,r,a),r=!0;else if(e===null){var h=i.stateNode,f=i.memoizedProps;h.props=f;var p=h.context,m=s.contextType;typeof m=="object"&&m!==null?m=vi(m):(m=Ke(s)?kn:Pe.current,m=kr(i,m));var v=s.getDerivedStateFromProps,w=typeof v=="function"||typeof h.getSnapshotBeforeUpdate=="function";w||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(f!==r||p!==m)&&rm(i,h,r,m),Ds=!1;var x=i.memoizedState;h.state=x,Nl(i,r,h,a),p=i.memoizedState,f!==r||x!==p||Ze.current||Ds?(typeof v=="function"&&(Uc(i,s,v,r),p=i.memoizedState),(f=Ds||nm(i,s,f,r,x,p,m))?(w||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(i.flags|=4194308)):(typeof h.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=r,i.memoizedState=p),h.props=r,h.state=p,h.context=m,r=f):(typeof h.componentDidMount=="function"&&(i.flags|=4194308),r=!1)}else{h=i.stateNode,yy(e,i),f=i.memoizedProps,m=i.type===i.elementType?f:ki(i.type,f),h.props=m,w=i.pendingProps,x=h.context,p=s.contextType,typeof p=="object"&&p!==null?p=vi(p):(p=Ke(s)?kn:Pe.current,p=kr(i,p));var b=s.getDerivedStateFromProps;(v=typeof b=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(f!==w||x!==p)&&rm(i,h,r,p),Ds=!1,x=i.memoizedState,h.state=x,Nl(i,r,h,a);var E=i.memoizedState;f!==w||x!==E||Ze.current||Ds?(typeof b=="function"&&(Uc(i,s,b,r),E=i.memoizedState),(m=Ds||nm(i,s,m,r,x,E,p)||!1)?(v||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(r,E,p),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(r,E,p)),typeof h.componentDidUpdate=="function"&&(i.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof h.componentDidUpdate!="function"||f===e.memoizedProps&&x===e.memoizedState||(i.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&x===e.memoizedState||(i.flags|=1024),i.memoizedProps=r,i.memoizedState=E),h.props=r,h.state=E,h.context=p,r=m):(typeof h.componentDidUpdate!="function"||f===e.memoizedProps&&x===e.memoizedState||(i.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&x===e.memoizedState||(i.flags|=1024),r=!1)}return $c(e,i,s,r,l,a)}function $c(e,i,s,r,a,l){Yy(e,i);var h=(i.flags&128)!==0;if(!r&&!h)return a&&Jg(i,s,!1),ws(e,i,l);r=i.stateNode,bb.current=i;var f=h&&typeof s.getDerivedStateFromError!="function"?null:r.render();return i.flags|=1,e!==null&&h?(i.child=Rr(i,e.child,null,l),i.child=Rr(i,null,f,l)):De(e,i,f,l),i.memoizedState=r.state,a&&Jg(i,s,!0),i.child}function Zy(e){var i=e.stateNode;i.pendingContext?qg(e,i.pendingContext,i.pendingContext!==i.context):i.context&&qg(e,i.context,!1),tf(e,i.containerInfo)}function gm(e,i,s,r,a){return Ir(),Yd(a),i.flags|=256,De(e,i,s,r),i.child}var Wc={dehydrated:null,treeContext:null,retryLane:0};function Gc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ky(e,i,s){var r=i.pendingProps,a=jt.current,l=!1,h=(i.flags&128)!==0,f;if((f=h)||(f=e!==null&&e.memoizedState===null?!1:(a&2)!==0),f?(l=!0,i.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ft(jt,a&1),e===null)return Nc(i),e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(i.mode&1?e.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(h=r.children,e=r.fallback,l?(r=i.mode,l=i.child,h={mode:"hidden",children:h},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=h):l=wu(h,r,0,null),e=An(e,r,s,null),l.return=i,e.return=i,l.sibling=e,i.child=l,i.child.memoizedState=Gc(s),i.memoizedState=Wc,e):uf(i,h));if(a=e.memoizedState,a!==null&&(f=a.dehydrated,f!==null))return Sb(e,i,h,r,f,a,s);if(l){l=r.fallback,h=i.mode,a=e.child,f=a.sibling;var p={mode:"hidden",children:r.children};return!(h&1)&&i.child!==a?(r=i.child,r.childLanes=0,r.pendingProps=p,i.deletions=null):(r=Xs(a,p),r.subtreeFlags=a.subtreeFlags&14680064),f!==null?l=Xs(f,l):(l=An(l,h,s,null),l.flags|=2),l.return=i,r.return=i,r.sibling=l,i.child=r,r=l,l=i.child,h=e.child.memoizedState,h=h===null?Gc(s):{baseLanes:h.baseLanes|s,cachePool:null,transitions:h.transitions},l.memoizedState=h,l.childLanes=e.childLanes&~s,i.memoizedState=Wc,r}return l=e.child,e=l.sibling,r=Xs(l,{mode:"visible",children:r.children}),!(i.mode&1)&&(r.lanes=s),r.return=i,r.sibling=null,e!==null&&(s=i.deletions,s===null?(i.deletions=[e],i.flags|=16):s.push(e)),i.child=r,i.memoizedState=null,r}function uf(e,i){return i=wu({mode:"visible",children:i},e.mode,0,null),i.return=e,e.child=i}function Ka(e,i,s,r){return r!==null&&Yd(r),Rr(i,e.child,null,s),e=uf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Sb(e,i,s,r,a,l,h){if(s)return i.flags&256?(i.flags&=-257,r=Wh(Error(X(422))),Ka(e,i,h,r)):i.memoizedState!==null?(i.child=e.child,i.flags|=128,null):(l=r.fallback,a=i.mode,r=wu({mode:"visible",children:r.children},a,0,null),l=An(l,a,h,null),l.flags|=2,r.return=i,l.return=i,r.sibling=l,i.child=r,i.mode&1&&Rr(i,e.child,null,h),i.child.memoizedState=Gc(h),i.memoizedState=Wc,l);if(!(i.mode&1))return Ka(e,i,h,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var f=r.dgst;return r=f,l=Error(X(419)),r=Wh(l,r,void 0),Ka(e,i,h,r)}if(f=(h&e.childLanes)!==0,Ye||f){if(r=ce,r!==null){switch(h&-h){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|h)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,xs(e,a),Mi(r,e,a,-1))}return gf(),r=Wh(Error(X(421))),Ka(e,i,h,r)}return a.data==="$?"?(i.flags|=128,i.child=e.child,i=Ob.bind(null,e),a._reactRetry=i,null):(e=l.treeContext,oi=Hs(a.nextSibling),li=i,Nt=!0,Ri=null,e!==null&&(pi[gi++]=ds,pi[gi++]=fs,pi[gi++]=In,ds=e.id,fs=e.overflow,In=i),i=uf(i,r.children),i.flags|=4096,i)}function mm(e,i,s){e.lanes|=i;var r=e.alternate;r!==null&&(r.lanes|=i),zc(e.return,i,s)}function Gh(e,i,s,r,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:a}:(l.isBackwards=i,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=s,l.tailMode=a)}function Qy(e,i,s){var r=i.pendingProps,a=r.revealOrder,l=r.tail;if(De(e,i,r.children,s),r=jt.current,r&2)r=r&1|2,i.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mm(e,s,i);else if(e.tag===19)mm(e,s,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ft(jt,r),!(i.mode&1))i.memoizedState=null;else switch(a){case"forwards":for(s=i.child,a=null;s!==null;)e=s.alternate,e!==null&&zl(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=i.child,i.child=null):(a=s.sibling,s.sibling=null),Gh(i,!1,a,s,l);break;case"backwards":for(s=null,a=i.child,i.child=null;a!==null;){if(e=a.alternate,e!==null&&zl(e)===null){i.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}Gh(i,!0,s,null,l);break;case"together":Gh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function pl(e,i){!(i.mode&1)&&e!==null&&(e.alternate=null,i.alternate=null,i.flags|=2)}function ws(e,i,s){if(e!==null&&(i.dependencies=e.dependencies),Dn|=i.lanes,!(s&i.childLanes))return null;if(e!==null&&i.child!==e.child)throw Error(X(153));if(i.child!==null){for(e=i.child,s=Xs(e,e.pendingProps),i.child=s,s.return=i;e.sibling!==null;)e=e.sibling,s=s.sibling=Xs(e,e.pendingProps),s.return=i;s.sibling=null}return i.child}function Pb(e,i,s){switch(i.tag){case 3:Zy(i),Ir();break;case 5:Sy(i);break;case 1:Ke(i.type)&&Ml(i);break;case 4:tf(i,i.stateNode.containerInfo);break;case 10:var r=i.type._context,a=i.memoizedProps.value;Ft(Bl,r._currentValue),r._currentValue=a;break;case 13:if(r=i.memoizedState,r!==null)return r.dehydrated!==null?(Ft(jt,jt.current&1),i.flags|=128,null):s&i.child.childLanes?Ky(e,i,s):(Ft(jt,jt.current&1),e=ws(e,i,s),e!==null?e.sibling:null);Ft(jt,jt.current&1);break;case 19:if(r=(s&i.childLanes)!==0,e.flags&128){if(r)return Qy(e,i,s);i.flags|=128}if(a=i.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ft(jt,jt.current),r)break;return null;case 22:case 23:return i.lanes=0,Xy(e,i,s)}return ws(e,i,s)}var qy,Xc,Jy,t0;qy=function(e,i){for(var s=i.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Xc=function(){};Jy=function(e,i,s,r){var a=e.memoizedProps;if(a!==r){e=i.stateNode,Pn(qi.current);var l=null;switch(s){case"input":a=gc(e,a),r=gc(e,r),l=[];break;case"select":a=Wt({},a,{value:void 0}),r=Wt({},r,{value:void 0}),l=[];break;case"textarea":a=vc(e,a),r=vc(e,r),l=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Rl)}xc(s,r);var h;s=null;for(m in a)if(!r.hasOwnProperty(m)&&a.hasOwnProperty(m)&&a[m]!=null)if(m==="style"){var f=a[m];for(h in f)f.hasOwnProperty(h)&&(s||(s={}),s[h]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Do.hasOwnProperty(m)?l||(l=[]):(l=l||[]).push(m,null));for(m in r){var p=r[m];if(f=a!=null?a[m]:void 0,r.hasOwnProperty(m)&&p!==f&&(p!=null||f!=null))if(m==="style")if(f){for(h in f)!f.hasOwnProperty(h)||p&&p.hasOwnProperty(h)||(s||(s={}),s[h]="");for(h in p)p.hasOwnProperty(h)&&f[h]!==p[h]&&(s||(s={}),s[h]=p[h])}else s||(l||(l=[]),l.push(m,s)),s=p;else m==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,f=f?f.__html:void 0,p!=null&&f!==p&&(l=l||[]).push(m,p)):m==="children"?typeof p!="string"&&typeof p!="number"||(l=l||[]).push(m,""+p):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Do.hasOwnProperty(m)?(p!=null&&m==="onScroll"&&Lt("scroll",e),l||f===p||(l=[])):(l=l||[]).push(m,p))}s&&(l=l||[]).push("style",s);var m=l;(i.updateQueue=m)&&(i.flags|=4)}};t0=function(e,i,s,r){s!==r&&(i.flags|=4)};function lo(e,i){if(!Nt)switch(e.tailMode){case"hidden":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function be(e){var i=e.alternate!==null&&e.alternate.child===e.child,s=0,r=0;if(i)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=s,i}function Eb(e,i,s){var r=i.pendingProps;switch(Xd(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return be(i),null;case 1:return Ke(i.type)&&Dl(),be(i),null;case 3:return r=i.stateNode,Dr(),Bt(Ze),Bt(Pe),sf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ya(i)?i.flags|=4:e===null||e.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Ri!==null&&(ed(Ri),Ri=null))),Xc(e,i),be(i),null;case 5:ef(i);var a=Pn($o.current);if(s=i.type,e!==null&&i.stateNode!=null)Jy(e,i,s,r,a),e.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!r){if(i.stateNode===null)throw Error(X(166));return be(i),null}if(e=Pn(qi.current),Ya(i)){r=i.stateNode,s=i.type;var l=i.memoizedProps;switch(r[Zi]=i,r[jo]=l,e=(i.mode&1)!==0,s){case"dialog":Lt("cancel",r),Lt("close",r);break;case"iframe":case"object":case"embed":Lt("load",r);break;case"video":case"audio":for(a=0;a<_o.length;a++)Lt(_o[a],r);break;case"source":Lt("error",r);break;case"img":case"image":case"link":Lt("error",r),Lt("load",r);break;case"details":Lt("toggle",r);break;case"input":Pg(r,l),Lt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Lt("invalid",r);break;case"textarea":Tg(r,l),Lt("invalid",r)}xc(s,l),a=null;for(var h in l)if(l.hasOwnProperty(h)){var f=l[h];h==="children"?typeof f=="string"?r.textContent!==f&&(l.suppressHydrationWarning!==!0&&Xa(r.textContent,f,e),a=["children",f]):typeof f=="number"&&r.textContent!==""+f&&(l.suppressHydrationWarning!==!0&&Xa(r.textContent,f,e),a=["children",""+f]):Do.hasOwnProperty(h)&&f!=null&&h==="onScroll"&&Lt("scroll",r)}switch(s){case"input":za(r),Eg(r,l,!0);break;case"textarea":za(r),Ag(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Rl)}r=a,i.updateQueue=r,r!==null&&(i.flags|=4)}else{h=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Tv(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=h.createElement(s,{is:r.is}):(e=h.createElement(s),s==="select"&&(h=e,r.multiple?h.multiple=!0:r.size&&(h.size=r.size))):e=h.createElementNS(e,s),e[Zi]=i,e[jo]=r,qy(e,i,!1,!1),i.stateNode=e;t:{switch(h=wc(s,r),s){case"dialog":Lt("cancel",e),Lt("close",e),a=r;break;case"iframe":case"object":case"embed":Lt("load",e),a=r;break;case"video":case"audio":for(a=0;a<_o.length;a++)Lt(_o[a],e);a=r;break;case"source":Lt("error",e),a=r;break;case"img":case"image":case"link":Lt("error",e),Lt("load",e),a=r;break;case"details":Lt("toggle",e),a=r;break;case"input":Pg(e,r),a=gc(e,r),Lt("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Wt({},r,{value:void 0}),Lt("invalid",e);break;case"textarea":Tg(e,r),a=vc(e,r),Lt("invalid",e);break;default:a=r}xc(s,a),f=a;for(l in f)if(f.hasOwnProperty(l)){var p=f[l];l==="style"?Iv(e,p):l==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&Av(e,p)):l==="children"?typeof p=="string"?(s!=="textarea"||p!=="")&&Mo(e,p):typeof p=="number"&&Mo(e,""+p):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Do.hasOwnProperty(l)?p!=null&&l==="onScroll"&&Lt("scroll",e):p!=null&&Dd(e,l,p,h))}switch(s){case"input":za(e),Eg(e,r,!1);break;case"textarea":za(e),Ag(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ks(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?xr(e,!!r.multiple,l,!1):r.defaultValue!=null&&xr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Rl)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return be(i),null;case 6:if(e&&i.stateNode!=null)t0(e,i,e.memoizedProps,r);else{if(typeof r!="string"&&i.stateNode===null)throw Error(X(166));if(s=Pn($o.current),Pn(qi.current),Ya(i)){if(r=i.stateNode,s=i.memoizedProps,r[Zi]=i,(l=r.nodeValue!==s)&&(e=li,e!==null))switch(e.tag){case 3:Xa(r.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xa(r.nodeValue,s,(e.mode&1)!==0)}l&&(i.flags|=4)}else r=(s.nodeType===9?s:s.ownerDocument).createTextNode(r),r[Zi]=i,i.stateNode=r}return be(i),null;case 13:if(Bt(jt),r=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Nt&&oi!==null&&i.mode&1&&!(i.flags&128))_y(),Ir(),i.flags|=98560,l=!1;else if(l=Ya(i),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(X(318));if(l=i.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(X(317));l[Zi]=i}else Ir(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;be(i),l=!1}else Ri!==null&&(ed(Ri),Ri=null),l=!0;if(!l)return i.flags&65536?i:null}return i.flags&128?(i.lanes=s,i):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(i.child.flags|=8192,i.mode&1&&(e===null||jt.current&1?oe===0&&(oe=3):gf())),i.updateQueue!==null&&(i.flags|=4),be(i),null);case 4:return Dr(),Xc(e,i),e===null&&Uo(i.stateNode.containerInfo),be(i),null;case 10:return Qd(i.type._context),be(i),null;case 17:return Ke(i.type)&&Dl(),be(i),null;case 19:if(Bt(jt),l=i.memoizedState,l===null)return be(i),null;if(r=(i.flags&128)!==0,h=l.rendering,h===null)if(r)lo(l,!1);else{if(oe!==0||e!==null&&e.flags&128)for(e=i.child;e!==null;){if(h=zl(e),h!==null){for(i.flags|=128,lo(l,!1),r=h.updateQueue,r!==null&&(i.updateQueue=r,i.flags|=4),i.subtreeFlags=0,r=s,s=i.child;s!==null;)l=s,e=r,l.flags&=14680066,h=l.alternate,h===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,e=h.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Ft(jt,jt.current&1|2),i.child}e=e.sibling}l.tail!==null&&Jt()>Fr&&(i.flags|=128,r=!0,lo(l,!1),i.lanes=4194304)}else{if(!r)if(e=zl(h),e!==null){if(i.flags|=128,r=!0,s=e.updateQueue,s!==null&&(i.updateQueue=s,i.flags|=4),lo(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!Nt)return be(i),null}else 2*Jt()-l.renderingStartTime>Fr&&s!==1073741824&&(i.flags|=128,r=!0,lo(l,!1),i.lanes=4194304);l.isBackwards?(h.sibling=i.child,i.child=h):(s=l.last,s!==null?s.sibling=h:i.child=h,l.last=h)}return l.tail!==null?(i=l.tail,l.rendering=i,l.tail=i.sibling,l.renderingStartTime=Jt(),i.sibling=null,s=jt.current,Ft(jt,r?s&1|2:s&1),i):(be(i),null);case 22:case 23:return pf(),r=i.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(i.flags|=8192),r&&i.mode&1?ri&1073741824&&(be(i),i.subtreeFlags&6&&(i.flags|=8192)):be(i),null;case 24:return null;case 25:return null}throw Error(X(156,i.tag))}function Tb(e,i){switch(Xd(i),i.tag){case 1:return Ke(i.type)&&Dl(),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Dr(),Bt(Ze),Bt(Pe),sf(),e=i.flags,e&65536&&!(e&128)?(i.flags=e&-65537|128,i):null;case 5:return ef(i),null;case 13:if(Bt(jt),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(X(340));Ir()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return Bt(jt),null;case 4:return Dr(),null;case 10:return Qd(i.type._context),null;case 22:case 23:return pf(),null;case 24:return null;default:return null}}var Qa=!1,Se=!1,Ab=typeof WeakSet=="function"?WeakSet:Set,et=null;function pr(e,i){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(r){Yt(e,i,r)}else s.current=null}function Yc(e,i,s){try{s()}catch(r){Yt(e,i,r)}}var _m=!1;function kb(e,i){if(Rc=Al,e=ny(),Wd(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else t:{s=(s=e.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var a=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{s.nodeType,l.nodeType}catch{s=null;break t}var h=0,f=-1,p=-1,m=0,v=0,w=e,x=null;e:for(;;){for(var b;w!==s||a!==0&&w.nodeType!==3||(f=h+a),w!==l||r!==0&&w.nodeType!==3||(p=h+r),w.nodeType===3&&(h+=w.nodeValue.length),(b=w.firstChild)!==null;)x=w,w=b;for(;;){if(w===e)break e;if(x===s&&++m===a&&(f=h),x===l&&++v===r&&(p=h),(b=w.nextSibling)!==null)break;w=x,x=w.parentNode}w=b}s=f===-1||p===-1?null:{start:f,end:p}}else s=null}s=s||{start:0,end:0}}else s=null;for(Dc={focusedElem:e,selectionRange:s},Al=!1,et=i;et!==null;)if(i=et,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,et=e;else for(;et!==null;){i=et;try{var E=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var R=E.memoizedProps,O=E.memoizedState,A=i.stateNode,P=A.getSnapshotBeforeUpdate(i.elementType===i.type?R:ki(i.type,R),O);A.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var k=i.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(D){Yt(i,i.return,D)}if(e=i.sibling,e!==null){e.return=i.return,et=e;break}et=i.return}return E=_m,_m=!1,E}function Po(e,i,s){var r=i.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Yc(i,s,l)}a=a.next}while(a!==r)}}function yu(e,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&e)===e){var r=s.create;s.destroy=r()}s=s.next}while(s!==i)}}function Zc(e){var i=e.ref;if(i!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof i=="function"?i(e):i.current=e}}function e0(e){var i=e.alternate;i!==null&&(e.alternate=null,e0(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&(delete i[Zi],delete i[jo],delete i[Lc],delete i[cb],delete i[db])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function i0(e){return e.tag===5||e.tag===3||e.tag===4}function vm(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||i0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Kc(e,i,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,i?s.nodeType===8?s.parentNode.insertBefore(e,i):s.insertBefore(e,i):(s.nodeType===8?(i=s.parentNode,i.insertBefore(e,s)):(i=s,i.appendChild(e)),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=Rl));else if(r!==4&&(e=e.child,e!==null))for(Kc(e,i,s),e=e.sibling;e!==null;)Kc(e,i,s),e=e.sibling}function Qc(e,i,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,i?s.insertBefore(e,i):s.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Qc(e,i,s),e=e.sibling;e!==null;)Qc(e,i,s),e=e.sibling}var _e=null,Ii=!1;function ks(e,i,s){for(s=s.child;s!==null;)s0(e,i,s),s=s.sibling}function s0(e,i,s){if(Qi&&typeof Qi.onCommitFiberUnmount=="function")try{Qi.onCommitFiberUnmount(cu,s)}catch{}switch(s.tag){case 5:Se||pr(s,i);case 6:var r=_e,a=Ii;_e=null,ks(e,i,s),_e=r,Ii=a,_e!==null&&(Ii?(e=_e,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):_e.removeChild(s.stateNode));break;case 18:_e!==null&&(Ii?(e=_e,s=s.stateNode,e.nodeType===8?zh(e.parentNode,s):e.nodeType===1&&zh(e,s),Oo(e)):zh(_e,s.stateNode));break;case 4:r=_e,a=Ii,_e=s.stateNode.containerInfo,Ii=!0,ks(e,i,s),_e=r,Ii=a;break;case 0:case 11:case 14:case 15:if(!Se&&(r=s.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var l=a,h=l.destroy;l=l.tag,h!==void 0&&(l&2||l&4)&&Yc(s,i,h),a=a.next}while(a!==r)}ks(e,i,s);break;case 1:if(!Se&&(pr(s,i),r=s.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(f){Yt(s,i,f)}ks(e,i,s);break;case 21:ks(e,i,s);break;case 22:s.mode&1?(Se=(r=Se)||s.memoizedState!==null,ks(e,i,s),Se=r):ks(e,i,s);break;default:ks(e,i,s)}}function ym(e){var i=e.updateQueue;if(i!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Ab),i.forEach(function(r){var a=Nb.bind(null,e,r);s.has(r)||(s.add(r),r.then(a,a))})}}function Ai(e,i){var s=i.deletions;if(s!==null)for(var r=0;r<s.length;r++){var a=s[r];try{var l=e,h=i,f=h;t:for(;f!==null;){switch(f.tag){case 5:_e=f.stateNode,Ii=!1;break t;case 3:_e=f.stateNode.containerInfo,Ii=!0;break t;case 4:_e=f.stateNode.containerInfo,Ii=!0;break t}f=f.return}if(_e===null)throw Error(X(160));s0(l,h,a),_e=null,Ii=!1;var p=a.alternate;p!==null&&(p.return=null),a.return=null}catch(m){Yt(a,i,m)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)n0(i,e),i=i.sibling}function n0(e,i){var s=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ai(i,e),Gi(e),r&4){try{Po(3,e,e.return),yu(3,e)}catch(R){Yt(e,e.return,R)}try{Po(5,e,e.return)}catch(R){Yt(e,e.return,R)}}break;case 1:Ai(i,e),Gi(e),r&512&&s!==null&&pr(s,s.return);break;case 5:if(Ai(i,e),Gi(e),r&512&&s!==null&&pr(s,s.return),e.flags&32){var a=e.stateNode;try{Mo(a,"")}catch(R){Yt(e,e.return,R)}}if(r&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,h=s!==null?s.memoizedProps:l,f=e.type,p=e.updateQueue;if(e.updateQueue=null,p!==null)try{f==="input"&&l.type==="radio"&&l.name!=null&&Pv(a,l),wc(f,h);var m=wc(f,l);for(h=0;h<p.length;h+=2){var v=p[h],w=p[h+1];v==="style"?Iv(a,w):v==="dangerouslySetInnerHTML"?Av(a,w):v==="children"?Mo(a,w):Dd(a,v,w,m)}switch(f){case"input":mc(a,l);break;case"textarea":Ev(a,l);break;case"select":var x=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var b=l.value;b!=null?xr(a,!!l.multiple,b,!1):x!==!!l.multiple&&(l.defaultValue!=null?xr(a,!!l.multiple,l.defaultValue,!0):xr(a,!!l.multiple,l.multiple?[]:"",!1))}a[jo]=l}catch(R){Yt(e,e.return,R)}}break;case 6:if(Ai(i,e),Gi(e),r&4){if(e.stateNode===null)throw Error(X(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(R){Yt(e,e.return,R)}}break;case 3:if(Ai(i,e),Gi(e),r&4&&s!==null&&s.memoizedState.isDehydrated)try{Oo(i.containerInfo)}catch(R){Yt(e,e.return,R)}break;case 4:Ai(i,e),Gi(e);break;case 13:Ai(i,e),Gi(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(df=Jt())),r&4&&ym(e);break;case 22:if(v=s!==null&&s.memoizedState!==null,e.mode&1?(Se=(m=Se)||v,Ai(i,e),Se=m):Ai(i,e),Gi(e),r&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!v&&e.mode&1)for(et=e,v=e.child;v!==null;){for(w=et=v;et!==null;){switch(x=et,b=x.child,x.tag){case 0:case 11:case 14:case 15:Po(4,x,x.return);break;case 1:pr(x,x.return);var E=x.stateNode;if(typeof E.componentWillUnmount=="function"){r=x,s=x.return;try{i=r,E.props=i.memoizedProps,E.state=i.memoizedState,E.componentWillUnmount()}catch(R){Yt(r,s,R)}}break;case 5:pr(x,x.return);break;case 22:if(x.memoizedState!==null){wm(w);continue}}b!==null?(b.return=x,et=b):wm(w)}v=v.sibling}t:for(v=null,w=e;;){if(w.tag===5){if(v===null){v=w;try{a=w.stateNode,m?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(f=w.stateNode,p=w.memoizedProps.style,h=p!=null&&p.hasOwnProperty("display")?p.display:null,f.style.display=kv("display",h))}catch(R){Yt(e,e.return,R)}}}else if(w.tag===6){if(v===null)try{w.stateNode.nodeValue=m?"":w.memoizedProps}catch(R){Yt(e,e.return,R)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===e)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===e)break t;for(;w.sibling===null;){if(w.return===null||w.return===e)break t;v===w&&(v=null),w=w.return}v===w&&(v=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Ai(i,e),Gi(e),r&4&&ym(e);break;case 21:break;default:Ai(i,e),Gi(e)}}function Gi(e){var i=e.flags;if(i&2){try{t:{for(var s=e.return;s!==null;){if(i0(s)){var r=s;break t}s=s.return}throw Error(X(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Mo(a,""),r.flags&=-33);var l=vm(e);Qc(e,l,a);break;case 3:case 4:var h=r.stateNode.containerInfo,f=vm(e);Kc(e,f,h);break;default:throw Error(X(161))}}catch(p){Yt(e,e.return,p)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Ib(e,i,s){et=e,r0(e)}function r0(e,i,s){for(var r=(e.mode&1)!==0;et!==null;){var a=et,l=a.child;if(a.tag===22&&r){var h=a.memoizedState!==null||Qa;if(!h){var f=a.alternate,p=f!==null&&f.memoizedState!==null||Se;f=Qa;var m=Se;if(Qa=h,(Se=p)&&!m)for(et=a;et!==null;)h=et,p=h.child,h.tag===22&&h.memoizedState!==null?Cm(a):p!==null?(p.return=h,et=p):Cm(a);for(;l!==null;)et=l,r0(l),l=l.sibling;et=a,Qa=f,Se=m}xm(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,et=l):xm(e)}}function xm(e){for(;et!==null;){var i=et;if(i.flags&8772){var s=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:Se||yu(5,i);break;case 1:var r=i.stateNode;if(i.flags&4&&!Se)if(s===null)r.componentDidMount();else{var a=i.elementType===i.type?s.memoizedProps:ki(i.type,s.memoizedProps);r.componentDidUpdate(a,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=i.updateQueue;l!==null&&sm(i,l,r);break;case 3:var h=i.updateQueue;if(h!==null){if(s=null,i.child!==null)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}sm(i,h,s)}break;case 5:var f=i.stateNode;if(s===null&&i.flags&4){s=f;var p=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&s.focus();break;case"img":p.src&&(s.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var m=i.alternate;if(m!==null){var v=m.memoizedState;if(v!==null){var w=v.dehydrated;w!==null&&Oo(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Se||i.flags&512&&Zc(i)}catch(x){Yt(i,i.return,x)}}if(i===e){et=null;break}if(s=i.sibling,s!==null){s.return=i.return,et=s;break}et=i.return}}function wm(e){for(;et!==null;){var i=et;if(i===e){et=null;break}var s=i.sibling;if(s!==null){s.return=i.return,et=s;break}et=i.return}}function Cm(e){for(;et!==null;){var i=et;try{switch(i.tag){case 0:case 11:case 15:var s=i.return;try{yu(4,i)}catch(p){Yt(i,s,p)}break;case 1:var r=i.stateNode;if(typeof r.componentDidMount=="function"){var a=i.return;try{r.componentDidMount()}catch(p){Yt(i,a,p)}}var l=i.return;try{Zc(i)}catch(p){Yt(i,l,p)}break;case 5:var h=i.return;try{Zc(i)}catch(p){Yt(i,h,p)}}}catch(p){Yt(i,i.return,p)}if(i===e){et=null;break}var f=i.sibling;if(f!==null){f.return=i.return,et=f;break}et=i.return}}var Rb=Math.ceil,jl=Ss.ReactCurrentDispatcher,hf=Ss.ReactCurrentOwner,_i=Ss.ReactCurrentBatchConfig,Et=0,ce=null,ie=null,ve=0,ri=0,gr=en(0),oe=0,Yo=null,Dn=0,xu=0,cf=0,Eo=null,Xe=null,df=0,Fr=1/0,hs=null,Hl=!1,qc=null,Ws=null,qa=!1,Ns=null,$l=0,To=0,Jc=null,gl=-1,ml=0;function Me(){return Et&6?Jt():gl!==-1?gl:gl=Jt()}function Gs(e){return e.mode&1?Et&2&&ve!==0?ve&-ve:pb.transition!==null?(ml===0&&(ml=jv()),ml):(e=Rt,e!==0||(e=window.event,e=e===void 0?16:Zv(e.type)),e):1}function Mi(e,i,s,r){if(50<To)throw To=0,Jc=null,Error(X(185));ea(e,s,r),(!(Et&2)||e!==ce)&&(e===ce&&(!(Et&2)&&(xu|=s),oe===4&&Ls(e,ve)),Qe(e,r),s===1&&Et===0&&!(i.mode&1)&&(Fr=Jt()+500,mu&&sn()))}function Qe(e,i){var s=e.callbackNode;pC(e,i);var r=Tl(e,e===ce?ve:0);if(r===0)s!==null&&Rg(s),e.callbackNode=null,e.callbackPriority=0;else if(i=r&-r,e.callbackPriority!==i){if(s!=null&&Rg(s),i===1)e.tag===0?fb(bm.bind(null,e)):py(bm.bind(null,e)),ub(function(){!(Et&6)&&sn()}),s=null;else{switch(Hv(r)){case 1:s=Od;break;case 4:s=Uv;break;case 16:s=El;break;case 536870912:s=Vv;break;default:s=El}s=f0(s,o0.bind(null,e))}e.callbackPriority=i,e.callbackNode=s}}function o0(e,i){if(gl=-1,ml=0,Et&6)throw Error(X(327));var s=e.callbackNode;if(Pr()&&e.callbackNode!==s)return null;var r=Tl(e,e===ce?ve:0);if(r===0)return null;if(r&30||r&e.expiredLanes||i)i=Wl(e,r);else{i=r;var a=Et;Et|=2;var l=l0();(ce!==e||ve!==i)&&(hs=null,Fr=Jt()+500,Tn(e,i));do try{Fb();break}catch(f){a0(e,f)}while(1);Kd(),jl.current=l,Et=a,ie!==null?i=0:(ce=null,ve=0,i=oe)}if(i!==0){if(i===2&&(a=Ec(e),a!==0&&(r=a,i=td(e,a))),i===1)throw s=Yo,Tn(e,0),Ls(e,r),Qe(e,Jt()),s;if(i===6)Ls(e,r);else{if(a=e.current.alternate,!(r&30)&&!Db(a)&&(i=Wl(e,r),i===2&&(l=Ec(e),l!==0&&(r=l,i=td(e,l))),i===1))throw s=Yo,Tn(e,0),Ls(e,r),Qe(e,Jt()),s;switch(e.finishedWork=a,e.finishedLanes=r,i){case 0:case 1:throw Error(X(345));case 2:xn(e,Xe,hs);break;case 3:if(Ls(e,r),(r&130023424)===r&&(i=df+500-Jt(),10<i)){if(Tl(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){Me(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Fc(xn.bind(null,e,Xe,hs),i);break}xn(e,Xe,hs);break;case 4:if(Ls(e,r),(r&4194240)===r)break;for(i=e.eventTimes,a=-1;0<r;){var h=31-Di(r);l=1<<h,h=i[h],h>a&&(a=h),r&=~l}if(r=a,r=Jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Rb(r/1960))-r,10<r){e.timeoutHandle=Fc(xn.bind(null,e,Xe,hs),r);break}xn(e,Xe,hs);break;case 5:xn(e,Xe,hs);break;default:throw Error(X(329))}}}return Qe(e,Jt()),e.callbackNode===s?o0.bind(null,e):null}function td(e,i){var s=Eo;return e.current.memoizedState.isDehydrated&&(Tn(e,i).flags|=256),e=Wl(e,i),e!==2&&(i=Xe,Xe=s,i!==null&&ed(i)),e}function ed(e){Xe===null?Xe=e:Xe.push.apply(Xe,e)}function Db(e){for(var i=e;;){if(i.flags&16384){var s=i.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var r=0;r<s.length;r++){var a=s[r],l=a.getSnapshot;a=a.value;try{if(!Fi(l(),a))return!1}catch{return!1}}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ls(e,i){for(i&=~cf,i&=~xu,e.suspendedLanes|=i,e.pingedLanes&=~i,e=e.expirationTimes;0<i;){var s=31-Di(i),r=1<<s;e[s]=-1,i&=~r}}function bm(e){if(Et&6)throw Error(X(327));Pr();var i=Tl(e,0);if(!(i&1))return Qe(e,Jt()),null;var s=Wl(e,i);if(e.tag!==0&&s===2){var r=Ec(e);r!==0&&(i=r,s=td(e,r))}if(s===1)throw s=Yo,Tn(e,0),Ls(e,i),Qe(e,Jt()),s;if(s===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=i,xn(e,Xe,hs),Qe(e,Jt()),null}function ff(e,i){var s=Et;Et|=1;try{return e(i)}finally{Et=s,Et===0&&(Fr=Jt()+500,mu&&sn())}}function Mn(e){Ns!==null&&Ns.tag===0&&!(Et&6)&&Pr();var i=Et;Et|=1;var s=_i.transition,r=Rt;try{if(_i.transition=null,Rt=1,e)return e()}finally{Rt=r,_i.transition=s,Et=i,!(Et&6)&&sn()}}function pf(){ri=gr.current,Bt(gr)}function Tn(e,i){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,lb(s)),ie!==null)for(s=ie.return;s!==null;){var r=s;switch(Xd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dl();break;case 3:Dr(),Bt(Ze),Bt(Pe),sf();break;case 5:ef(r);break;case 4:Dr();break;case 13:Bt(jt);break;case 19:Bt(jt);break;case 10:Qd(r.type._context);break;case 22:case 23:pf()}s=s.return}if(ce=e,ie=e=Xs(e.current,null),ve=ri=i,oe=0,Yo=null,cf=xu=Dn=0,Xe=Eo=null,Sn!==null){for(i=0;i<Sn.length;i++)if(s=Sn[i],r=s.interleaved,r!==null){s.interleaved=null;var a=r.next,l=s.pending;if(l!==null){var h=l.next;l.next=a,r.next=h}s.pending=r}Sn=null}return e}function a0(e,i){do{var s=ie;try{if(Kd(),dl.current=Vl,Ul){for(var r=$t.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Ul=!1}if(Rn=0,he=ne=$t=null,So=!1,Wo=0,hf.current=null,s===null||s.return===null){oe=1,Yo=i,ie=null;break}t:{var l=e,h=s.return,f=s,p=i;if(i=ve,f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var m=p,v=f,w=v.tag;if(!(v.mode&1)&&(w===0||w===11||w===15)){var x=v.alternate;x?(v.updateQueue=x.updateQueue,v.memoizedState=x.memoizedState,v.lanes=x.lanes):(v.updateQueue=null,v.memoizedState=null)}var b=hm(h);if(b!==null){b.flags&=-257,cm(b,h,f,l,i),b.mode&1&&um(l,m,i),i=b,p=m;var E=i.updateQueue;if(E===null){var R=new Set;R.add(p),i.updateQueue=R}else E.add(p);break t}else{if(!(i&1)){um(l,m,i),gf();break t}p=Error(X(426))}}else if(Nt&&f.mode&1){var O=hm(h);if(O!==null){!(O.flags&65536)&&(O.flags|=256),cm(O,h,f,l,i),Yd(Mr(p,f));break t}}l=p=Mr(p,f),oe!==4&&(oe=2),Eo===null?Eo=[l]:Eo.push(l),l=h;do{switch(l.tag){case 3:l.flags|=65536,i&=-i,l.lanes|=i;var A=$y(l,p,i);im(l,A);break t;case 1:f=p;var P=l.type,k=l.stateNode;if(!(l.flags&128)&&(typeof P.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Ws===null||!Ws.has(k)))){l.flags|=65536,i&=-i,l.lanes|=i;var D=Wy(l,f,i);im(l,D);break t}}l=l.return}while(l!==null)}h0(s)}catch(B){i=B,ie===s&&s!==null&&(ie=s=s.return);continue}break}while(1)}function l0(){var e=jl.current;return jl.current=Vl,e===null?Vl:e}function gf(){(oe===0||oe===3||oe===2)&&(oe=4),ce===null||!(Dn&268435455)&&!(xu&268435455)||Ls(ce,ve)}function Wl(e,i){var s=Et;Et|=2;var r=l0();(ce!==e||ve!==i)&&(hs=null,Tn(e,i));do try{Mb();break}catch(a){a0(e,a)}while(1);if(Kd(),Et=s,jl.current=r,ie!==null)throw Error(X(261));return ce=null,ve=0,oe}function Mb(){for(;ie!==null;)u0(ie)}function Fb(){for(;ie!==null&&!rC();)u0(ie)}function u0(e){var i=d0(e.alternate,e,ri);e.memoizedProps=e.pendingProps,i===null?h0(e):ie=i,hf.current=null}function h0(e){var i=e;do{var s=i.alternate;if(e=i.return,i.flags&32768){if(s=Tb(s,i),s!==null){s.flags&=32767,ie=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{oe=6,ie=null;return}}else if(s=Eb(s,i,ri),s!==null){ie=s;return}if(i=i.sibling,i!==null){ie=i;return}ie=i=e}while(i!==null);oe===0&&(oe=5)}function xn(e,i,s){var r=Rt,a=_i.transition;try{_i.transition=null,Rt=1,Lb(e,i,s,r)}finally{_i.transition=a,Rt=r}return null}function Lb(e,i,s,r){do Pr();while(Ns!==null);if(Et&6)throw Error(X(327));s=e.finishedWork;var a=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var l=s.lanes|s.childLanes;if(gC(e,l),e===ce&&(ie=ce=null,ve=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||qa||(qa=!0,f0(El,function(){return Pr(),null})),l=(s.flags&15990)!==0,s.subtreeFlags&15990||l){l=_i.transition,_i.transition=null;var h=Rt;Rt=1;var f=Et;Et|=4,hf.current=null,kb(e,s),n0(s,e),eb(Dc),Al=!!Rc,Dc=Rc=null,e.current=s,Ib(s),oC(),Et=f,Rt=h,_i.transition=l}else e.current=s;if(qa&&(qa=!1,Ns=e,$l=a),l=e.pendingLanes,l===0&&(Ws=null),uC(s.stateNode),Qe(e,Jt()),i!==null)for(r=e.onRecoverableError,s=0;s<i.length;s++)a=i[s],r(a.value,{componentStack:a.stack,digest:a.digest});if(Hl)throw Hl=!1,e=qc,qc=null,e;return $l&1&&e.tag!==0&&Pr(),l=e.pendingLanes,l&1?e===Jc?To++:(To=0,Jc=e):To=0,sn(),null}function Pr(){if(Ns!==null){var e=Hv($l),i=_i.transition,s=Rt;try{if(_i.transition=null,Rt=16>e?16:e,Ns===null)var r=!1;else{if(e=Ns,Ns=null,$l=0,Et&6)throw Error(X(331));var a=Et;for(Et|=4,et=e.current;et!==null;){var l=et,h=l.child;if(et.flags&16){var f=l.deletions;if(f!==null){for(var p=0;p<f.length;p++){var m=f[p];for(et=m;et!==null;){var v=et;switch(v.tag){case 0:case 11:case 15:Po(8,v,l)}var w=v.child;if(w!==null)w.return=v,et=w;else for(;et!==null;){v=et;var x=v.sibling,b=v.return;if(e0(v),v===m){et=null;break}if(x!==null){x.return=b,et=x;break}et=b}}}var E=l.alternate;if(E!==null){var R=E.child;if(R!==null){E.child=null;do{var O=R.sibling;R.sibling=null,R=O}while(R!==null)}}et=l}}if(l.subtreeFlags&2064&&h!==null)h.return=l,et=h;else t:for(;et!==null;){if(l=et,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Po(9,l,l.return)}var A=l.sibling;if(A!==null){A.return=l.return,et=A;break t}et=l.return}}var P=e.current;for(et=P;et!==null;){h=et;var k=h.child;if(h.subtreeFlags&2064&&k!==null)k.return=h,et=k;else t:for(h=P;et!==null;){if(f=et,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:yu(9,f)}}catch(B){Yt(f,f.return,B)}if(f===h){et=null;break t}var D=f.sibling;if(D!==null){D.return=f.return,et=D;break t}et=f.return}}if(Et=a,sn(),Qi&&typeof Qi.onPostCommitFiberRoot=="function")try{Qi.onPostCommitFiberRoot(cu,e)}catch{}r=!0}return r}finally{Rt=s,_i.transition=i}}return!1}function Sm(e,i,s){i=Mr(s,i),i=$y(e,i,1),e=$s(e,i,1),i=Me(),e!==null&&(ea(e,1,i),Qe(e,i))}function Yt(e,i,s){if(e.tag===3)Sm(e,e,s);else for(;i!==null;){if(i.tag===3){Sm(i,e,s);break}else if(i.tag===1){var r=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ws===null||!Ws.has(r))){e=Mr(s,e),e=Wy(i,e,1),i=$s(i,e,1),e=Me(),i!==null&&(ea(i,1,e),Qe(i,e));break}}i=i.return}}function Bb(e,i,s){var r=e.pingCache;r!==null&&r.delete(i),i=Me(),e.pingedLanes|=e.suspendedLanes&s,ce===e&&(ve&s)===s&&(oe===4||oe===3&&(ve&130023424)===ve&&500>Jt()-df?Tn(e,0):cf|=s),Qe(e,i)}function c0(e,i){i===0&&(e.mode&1?(i=ja,ja<<=1,!(ja&130023424)&&(ja=4194304)):i=1);var s=Me();e=xs(e,i),e!==null&&(ea(e,i,s),Qe(e,s))}function Ob(e){var i=e.memoizedState,s=0;i!==null&&(s=i.retryLane),c0(e,s)}function Nb(e,i){var s=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(i),c0(e,s)}var d0;d0=function(e,i,s){if(e!==null)if(e.memoizedProps!==i.pendingProps||Ze.current)Ye=!0;else{if(!(e.lanes&s)&&!(i.flags&128))return Ye=!1,Pb(e,i,s);Ye=!!(e.flags&131072)}else Ye=!1,Nt&&i.flags&1048576&&gy(i,Ll,i.index);switch(i.lanes=0,i.tag){case 2:var r=i.type;pl(e,i),e=i.pendingProps;var a=kr(i,Pe.current);Sr(i,s),a=rf(null,i,r,e,a,s);var l=of();return i.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Ke(r)?(l=!0,Ml(i)):l=!1,i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Jd(i),a.updater=_u,i.stateNode=a,a._reactInternals=i,Vc(i,r,e,s),i=$c(null,i,r,!0,l,s)):(i.tag=0,Nt&&l&&Gd(i),De(null,i,a,s),i=i.child),i;case 16:r=i.elementType;t:{switch(pl(e,i),e=i.pendingProps,a=r._init,r=a(r._payload),i.type=r,a=i.tag=Ub(r),e=ki(r,e),a){case 0:i=Hc(null,i,r,e,s);break t;case 1:i=pm(null,i,r,e,s);break t;case 11:i=dm(null,i,r,e,s);break t;case 14:i=fm(null,i,r,ki(r.type,e),s);break t}throw Error(X(306,r,""))}return i;case 0:return r=i.type,a=i.pendingProps,a=i.elementType===r?a:ki(r,a),Hc(e,i,r,a,s);case 1:return r=i.type,a=i.pendingProps,a=i.elementType===r?a:ki(r,a),pm(e,i,r,a,s);case 3:t:{if(Zy(i),e===null)throw Error(X(387));r=i.pendingProps,l=i.memoizedState,a=l.element,yy(e,i),Nl(i,r,null,s);var h=i.memoizedState;if(r=h.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},i.updateQueue.baseState=l,i.memoizedState=l,i.flags&256){a=Mr(Error(X(423)),i),i=gm(e,i,r,s,a);break t}else if(r!==a){a=Mr(Error(X(424)),i),i=gm(e,i,r,s,a);break t}else for(oi=Hs(i.stateNode.containerInfo.firstChild),li=i,Nt=!0,Ri=null,s=by(i,null,r,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ir(),r===a){i=ws(e,i,s);break t}De(e,i,r,s)}i=i.child}return i;case 5:return Sy(i),e===null&&Nc(i),r=i.type,a=i.pendingProps,l=e!==null?e.memoizedProps:null,h=a.children,Mc(r,a)?h=null:l!==null&&Mc(r,l)&&(i.flags|=32),Yy(e,i),De(e,i,h,s),i.child;case 6:return e===null&&Nc(i),null;case 13:return Ky(e,i,s);case 4:return tf(i,i.stateNode.containerInfo),r=i.pendingProps,e===null?i.child=Rr(i,null,r,s):De(e,i,r,s),i.child;case 11:return r=i.type,a=i.pendingProps,a=i.elementType===r?a:ki(r,a),dm(e,i,r,a,s);case 7:return De(e,i,i.pendingProps,s),i.child;case 8:return De(e,i,i.pendingProps.children,s),i.child;case 12:return De(e,i,i.pendingProps.children,s),i.child;case 10:t:{if(r=i.type._context,a=i.pendingProps,l=i.memoizedProps,h=a.value,Ft(Bl,r._currentValue),r._currentValue=h,l!==null)if(Fi(l.value,h)){if(l.children===a.children&&!Ze.current){i=ws(e,i,s);break t}}else for(l=i.child,l!==null&&(l.return=i);l!==null;){var f=l.dependencies;if(f!==null){h=l.child;for(var p=f.firstContext;p!==null;){if(p.context===r){if(l.tag===1){p=gs(-1,s&-s),p.tag=2;var m=l.updateQueue;if(m!==null){m=m.shared;var v=m.pending;v===null?p.next=p:(p.next=v.next,v.next=p),m.pending=p}}l.lanes|=s,p=l.alternate,p!==null&&(p.lanes|=s),zc(l.return,s,i),f.lanes|=s;break}p=p.next}}else if(l.tag===10)h=l.type===i.type?null:l.child;else if(l.tag===18){if(h=l.return,h===null)throw Error(X(341));h.lanes|=s,f=h.alternate,f!==null&&(f.lanes|=s),zc(h,s,i),h=l.sibling}else h=l.child;if(h!==null)h.return=l;else for(h=l;h!==null;){if(h===i){h=null;break}if(l=h.sibling,l!==null){l.return=h.return,h=l;break}h=h.return}l=h}De(e,i,a.children,s),i=i.child}return i;case 9:return a=i.type,r=i.pendingProps.children,Sr(i,s),a=vi(a),r=r(a),i.flags|=1,De(e,i,r,s),i.child;case 14:return r=i.type,a=ki(r,i.pendingProps),a=ki(r.type,a),fm(e,i,r,a,s);case 15:return Gy(e,i,i.type,i.pendingProps,s);case 17:return r=i.type,a=i.pendingProps,a=i.elementType===r?a:ki(r,a),pl(e,i),i.tag=1,Ke(r)?(e=!0,Ml(i)):e=!1,Sr(i,s),wy(i,r,a),Vc(i,r,a,s),$c(null,i,r,!0,e,s);case 19:return Qy(e,i,s);case 22:return Xy(e,i,s)}throw Error(X(156,i.tag))};function f0(e,i){return zv(e,i)}function zb(e,i,s,r){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(e,i,s,r){return new zb(e,i,s,r)}function mf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ub(e){if(typeof e=="function")return mf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Fd)return 11;if(e===Ld)return 14}return 2}function Xs(e,i){var s=e.alternate;return s===null?(s=mi(e.tag,i,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=i,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,i=e.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function _l(e,i,s,r,a,l){var h=2;if(r=e,typeof e=="function")mf(e)&&(h=1);else if(typeof e=="string")h=5;else t:switch(e){case rr:return An(s.children,a,l,i);case Md:h=8,a|=8;break;case cc:return e=mi(12,s,i,a|2),e.elementType=cc,e.lanes=l,e;case dc:return e=mi(13,s,i,a),e.elementType=dc,e.lanes=l,e;case fc:return e=mi(19,s,i,a),e.elementType=fc,e.lanes=l,e;case Cv:return wu(s,a,l,i);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xv:h=10;break t;case wv:h=9;break t;case Fd:h=11;break t;case Ld:h=14;break t;case Rs:h=16,r=null;break t}throw Error(X(130,e==null?e:typeof e,""))}return i=mi(h,s,i,a),i.elementType=e,i.type=r,i.lanes=l,i}function An(e,i,s,r){return e=mi(7,e,r,i),e.lanes=s,e}function wu(e,i,s,r){return e=mi(22,e,r,i),e.elementType=Cv,e.lanes=s,e.stateNode={isHidden:!1},e}function Xh(e,i,s){return e=mi(6,e,null,i),e.lanes=s,e}function Yh(e,i,s){return i=mi(4,e.children!==null?e.children:[],e.key,i),i.lanes=s,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function Vb(e,i,s,r,a){this.tag=i,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ah(0),this.expirationTimes=Ah(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ah(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function _f(e,i,s,r,a,l,h,f,p){return e=new Vb(e,i,s,f,p),i===1?(i=1,l===!0&&(i|=8)):i=0,l=mi(3,null,null,i),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jd(l),e}function jb(e,i,s){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nr,key:r==null?null:""+r,children:e,containerInfo:i,implementation:s}}function p0(e){if(!e)return Qs;e=e._reactInternals;t:{if(Ln(e)!==e||e.tag!==1)throw Error(X(170));var i=e;do{switch(i.tag){case 3:i=i.stateNode.context;break t;case 1:if(Ke(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break t}}i=i.return}while(i!==null);throw Error(X(171))}if(e.tag===1){var s=e.type;if(Ke(s))return fy(e,s,i)}return i}function g0(e,i,s,r,a,l,h,f,p){return e=_f(s,r,!0,e,a,l,h,f,p),e.context=p0(null),s=e.current,r=Me(),a=Gs(s),l=gs(r,a),l.callback=i??null,$s(s,l,a),e.current.lanes=a,ea(e,a,r),Qe(e,r),e}function Cu(e,i,s,r){var a=i.current,l=Me(),h=Gs(a);return s=p0(s),i.context===null?i.context=s:i.pendingContext=s,i=gs(l,h),i.payload={element:e},r=r===void 0?null:r,r!==null&&(i.callback=r),e=$s(a,i,h),e!==null&&(Mi(e,a,h,l),cl(e,a,h)),h}function Gl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Pm(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<i?s:i}}function vf(e,i){Pm(e,i),(e=e.alternate)&&Pm(e,i)}function Hb(){return null}var m0=typeof reportError=="function"?reportError:function(e){console.error(e)};function yf(e){this._internalRoot=e}bu.prototype.render=yf.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(X(409));Cu(e,i,null,null)};bu.prototype.unmount=yf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Mn(function(){Cu(null,e,null,null)}),i[ys]=null}};function bu(e){this._internalRoot=e}bu.prototype.unstable_scheduleHydration=function(e){if(e){var i=Gv();e={blockedOn:null,target:e,priority:i};for(var s=0;s<Fs.length&&i!==0&&i<Fs[s].priority;s++);Fs.splice(s,0,e),s===0&&Yv(e)}};function xf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Su(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Em(){}function $b(e,i,s,r,a){if(a){if(typeof r=="function"){var l=r;r=function(){var m=Gl(h);l.call(m)}}var h=g0(i,r,e,0,null,!1,!1,"",Em);return e._reactRootContainer=h,e[ys]=h.current,Uo(e.nodeType===8?e.parentNode:e),Mn(),h}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var f=r;r=function(){var m=Gl(p);f.call(m)}}var p=_f(e,0,!1,null,null,!1,!1,"",Em);return e._reactRootContainer=p,e[ys]=p.current,Uo(e.nodeType===8?e.parentNode:e),Mn(function(){Cu(i,p,s,r)}),p}function Pu(e,i,s,r,a){var l=s._reactRootContainer;if(l){var h=l;if(typeof a=="function"){var f=a;a=function(){var p=Gl(h);f.call(p)}}Cu(i,h,e,a)}else h=$b(s,i,e,a,r);return Gl(h)}$v=function(e){switch(e.tag){case 3:var i=e.stateNode;if(i.current.memoizedState.isDehydrated){var s=mo(i.pendingLanes);s!==0&&(Nd(i,s|1),Qe(i,Jt()),!(Et&6)&&(Fr=Jt()+500,sn()))}break;case 13:Mn(function(){var r=xs(e,1);if(r!==null){var a=Me();Mi(r,e,1,a)}}),vf(e,1)}};zd=function(e){if(e.tag===13){var i=xs(e,134217728);if(i!==null){var s=Me();Mi(i,e,134217728,s)}vf(e,134217728)}};Wv=function(e){if(e.tag===13){var i=Gs(e),s=xs(e,i);if(s!==null){var r=Me();Mi(s,e,i,r)}vf(e,i)}};Gv=function(){return Rt};Xv=function(e,i){var s=Rt;try{return Rt=e,i()}finally{Rt=s}};bc=function(e,i,s){switch(i){case"input":if(mc(e,s),i=s.name,s.type==="radio"&&i!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<s.length;i++){var r=s[i];if(r!==e&&r.form===e.form){var a=gu(r);if(!a)throw Error(X(90));Sv(r),mc(r,a)}}}break;case"textarea":Ev(e,s);break;case"select":i=s.value,i!=null&&xr(e,!!s.multiple,i,!1)}};Mv=ff;Fv=Mn;var Wb={usingClientEntryPoint:!1,Events:[sa,ur,gu,Rv,Dv,ff]},uo={findFiberByHostInstance:bn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Gb={bundleType:uo.bundleType,version:uo.version,rendererPackageName:uo.rendererPackageName,rendererConfig:uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ov(e),e===null?null:e.stateNode},findFiberByHostInstance:uo.findFiberByHostInstance||Hb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ja=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ja.isDisabled&&Ja.supportsFiber)try{cu=Ja.inject(Gb),Qi=Ja}catch{}}ci.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wb;ci.createPortal=function(e,i){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xf(i))throw Error(X(200));return jb(e,i,null,s)};ci.createRoot=function(e,i){if(!xf(e))throw Error(X(299));var s=!1,r="",a=m0;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(r=i.identifierPrefix),i.onRecoverableError!==void 0&&(a=i.onRecoverableError)),i=_f(e,1,!1,null,null,s,!1,r,a),e[ys]=i.current,Uo(e.nodeType===8?e.parentNode:e),new yf(i)};ci.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=Ov(i),e=e===null?null:e.stateNode,e};ci.flushSync=function(e){return Mn(e)};ci.hydrate=function(e,i,s){if(!Su(i))throw Error(X(200));return Pu(null,e,i,!0,s)};ci.hydrateRoot=function(e,i,s){if(!xf(e))throw Error(X(405));var r=s!=null&&s.hydratedSources||null,a=!1,l="",h=m0;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onRecoverableError!==void 0&&(h=s.onRecoverableError)),i=g0(i,null,e,1,s??null,a,!1,l,h),e[ys]=i.current,Uo(e),r)for(e=0;e<r.length;e++)s=r[e],a=s._getVersion,a=a(s._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[s,a]:i.mutableSourceEagerHydrationData.push(s,a);return new bu(i)};ci.render=function(e,i,s){if(!Su(i))throw Error(X(200));return Pu(null,e,i,!1,s)};ci.unmountComponentAtNode=function(e){if(!Su(e))throw Error(X(40));return e._reactRootContainer?(Mn(function(){Pu(null,null,e,!1,function(){e._reactRootContainer=null,e[ys]=null})}),!0):!1};ci.unstable_batchedUpdates=ff;ci.unstable_renderSubtreeIntoContainer=function(e,i,s,r){if(!Su(s))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return Pu(e,i,s,!1,r)};ci.version="18.2.0-next-9e3b772b8-20220608";function _0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_0)}catch(e){console.error(e)}}_0(),gv.exports=ci;var Xb=gv.exports,Tm=Xb;uc.createRoot=Tm.createRoot,uc.hydrateRoot=Tm.hydrateRoot;/**
 * @remix-run/router v1.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xl(){return Xl=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Xl.apply(this,arguments)}var zs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(zs||(zs={}));const Am="popstate";function Yb(e){e===void 0&&(e={});function i(r,a){let{pathname:l,search:h,hash:f}=r.location;return id("",{pathname:l,search:h,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(r,a){return typeof a=="string"?a:v0(a)}return Kb(i,s,null,e)}function qe(e,i){if(e===!1||e===null||typeof e>"u")throw new Error(i)}function wf(e,i){if(!e){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function Zb(){return Math.random().toString(36).substr(2,8)}function km(e,i){return{usr:e.state,key:e.key,idx:i}}function id(e,i,s,r){return s===void 0&&(s=null),Xl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof i=="string"?Eu(i):i,{state:s,key:i&&i.key||r||Zb()})}function v0(e){let{pathname:i="/",search:s="",hash:r=""}=e;return s&&s!=="?"&&(i+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(i+=r.charAt(0)==="#"?r:"#"+r),i}function Eu(e){let i={};if(e){let s=e.indexOf("#");s>=0&&(i.hash=e.substr(s),e=e.substr(0,s));let r=e.indexOf("?");r>=0&&(i.search=e.substr(r),e=e.substr(0,r)),e&&(i.pathname=e)}return i}function Kb(e,i,s,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:l=!1}=r,h=a.history,f=zs.Pop,p=null,m=v();m==null&&(m=0,h.replaceState(Xl({},h.state,{idx:m}),""));function v(){return(h.state||{idx:null}).idx}function w(){f=zs.Pop;let O=v(),A=O==null?null:O-m;m=O,p&&p({action:f,location:R.location,delta:A})}function x(O,A){f=zs.Push;let P=id(R.location,O,A);s&&s(P,O),m=v()+1;let k=km(P,m),D=R.createHref(P);try{h.pushState(k,"",D)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;a.location.assign(D)}l&&p&&p({action:f,location:R.location,delta:1})}function b(O,A){f=zs.Replace;let P=id(R.location,O,A);s&&s(P,O),m=v();let k=km(P,m),D=R.createHref(P);h.replaceState(k,"",D),l&&p&&p({action:f,location:R.location,delta:0})}function E(O){let A=a.location.origin!=="null"?a.location.origin:a.location.href,P=typeof O=="string"?O:v0(O);return qe(A,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,A)}let R={get action(){return f},get location(){return e(a,h)},listen(O){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(Am,w),p=O,()=>{a.removeEventListener(Am,w),p=null}},createHref(O){return i(a,O)},createURL:E,encodeLocation(O){let A=E(O);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:x,replace:b,go(O){return h.go(O)}};return R}var Im;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Im||(Im={}));function Qb(e,i,s){s===void 0&&(s="/");let r=typeof i=="string"?Eu(i):i,a=w0(r.pathname||"/",s);if(a==null)return null;let l=y0(e);qb(l);let h=null;for(let f=0;h==null&&f<l.length;++f)h=aS(l[f],hS(a));return h}function y0(e,i,s,r){i===void 0&&(i=[]),s===void 0&&(s=[]),r===void 0&&(r="");let a=(l,h,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};p.relativePath.startsWith("/")&&(qe(p.relativePath.startsWith(r),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(r.length));let m=Er([r,p.relativePath]),v=s.concat(p);l.children&&l.children.length>0&&(qe(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),y0(l.children,i,v,m)),!(l.path==null&&!l.index)&&i.push({path:m,score:rS(m,l.index),routesMeta:v})};return e.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))a(l,h);else for(let p of x0(l.path))a(l,h,p)}),i}function x0(e){let i=e.split("/");if(i.length===0)return[];let[s,...r]=i,a=s.endsWith("?"),l=s.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let h=x0(r.join("/")),f=[];return f.push(...h.map(p=>p===""?l:[l,p].join("/"))),a&&f.push(...h),f.map(p=>e.startsWith("/")&&p===""?"/":p)}function qb(e){e.sort((i,s)=>i.score!==s.score?s.score-i.score:oS(i.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}const Jb=/^:\w+$/,tS=3,eS=2,iS=1,sS=10,nS=-2,Rm=e=>e==="*";function rS(e,i){let s=e.split("/"),r=s.length;return s.some(Rm)&&(r+=nS),i&&(r+=eS),s.filter(a=>!Rm(a)).reduce((a,l)=>a+(Jb.test(l)?tS:l===""?iS:sS),r)}function oS(e,i){return e.length===i.length&&e.slice(0,-1).every((r,a)=>r===i[a])?e[e.length-1]-i[i.length-1]:0}function aS(e,i){let{routesMeta:s}=e,r={},a="/",l=[];for(let h=0;h<s.length;++h){let f=s[h],p=h===s.length-1,m=a==="/"?i:i.slice(a.length)||"/",v=lS({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},m);if(!v)return null;Object.assign(r,v.params);let w=f.route;l.push({params:r,pathname:Er([a,v.pathname]),pathnameBase:dS(Er([a,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(a=Er([a,v.pathnameBase]))}return l}function lS(e,i){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,r]=uS(e.path,e.caseSensitive,e.end),a=i.match(s);if(!a)return null;let l=a[0],h=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:r.reduce((m,v,w)=>{if(v==="*"){let x=f[w]||"";h=l.slice(0,l.length-x.length).replace(/(.)\/+$/,"$1")}return m[v]=cS(f[w]||"",v),m},{}),pathname:l,pathnameBase:h,pattern:e}}function uS(e,i,s){i===void 0&&(i=!1),s===void 0&&(s=!0),wf(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(h,f)=>(r.push(f),"/([^\\/]+)"));return e.endsWith("*")?(r.push("*"),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,i?void 0:"i"),r]}function hS(e){try{return decodeURI(e)}catch(i){return wf(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+i+").")),e}}function cS(e,i){try{return decodeURIComponent(e)}catch(s){return wf(!1,'The value for the URL param "'+i+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+s+").")),e}}function w0(e,i){if(i==="/")return e;if(!e.toLowerCase().startsWith(i.toLowerCase()))return null;let s=i.endsWith("/")?i.length-1:i.length,r=e.charAt(s);return r&&r!=="/"?null:e.slice(s)||"/"}const Er=e=>e.join("/").replace(/\/\/+/g,"/"),dS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");function fS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const C0=["post","put","patch","delete"];new Set(C0);const pS=["get",...C0];new Set(pS);/**
 * React Router v6.14.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sd(){return sd=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},sd.apply(this,arguments)}const gS=N.createContext(null),mS=N.createContext(null),b0=N.createContext(null),Tu=N.createContext(null),Au=N.createContext({outlet:null,matches:[],isDataRoute:!1}),S0=N.createContext(null);function Cf(){return N.useContext(Tu)!=null}function P0(){return Cf()||qe(!1),N.useContext(Tu).location}function _S(e,i){return vS(e,i)}function vS(e,i,s){Cf()||qe(!1);let{navigator:r}=N.useContext(b0),{matches:a}=N.useContext(Au),l=a[a.length-1],h=l?l.params:{};l&&l.pathname;let f=l?l.pathnameBase:"/";l&&l.route;let p=P0(),m;if(i){var v;let R=typeof i=="string"?Eu(i):i;f==="/"||(v=R.pathname)!=null&&v.startsWith(f)||qe(!1),m=R}else m=p;let w=m.pathname||"/",x=f==="/"?w:w.slice(f.length)||"/",b=Qb(e,{pathname:x}),E=bS(b&&b.map(R=>Object.assign({},R,{params:Object.assign({},h,R.params),pathname:Er([f,r.encodeLocation?r.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?f:Er([f,r.encodeLocation?r.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),a,s);return i&&E?N.createElement(Tu.Provider,{value:{location:sd({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:zs.Pop}},E):E}function yS(){let e=TS(),i=fS(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},l=null;return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},i),s?N.createElement("pre",{style:a},s):null,l)}const xS=N.createElement(yS,null);class wS extends N.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,s){return s.location!==i.location||s.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error||s.error,location:s.location,revalidation:i.revalidation||s.revalidation}}componentDidCatch(i,s){console.error("React Router caught the following error during render",i,s)}render(){return this.state.error?N.createElement(Au.Provider,{value:this.props.routeContext},N.createElement(S0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function CS(e){let{routeContext:i,match:s,children:r}=e,a=N.useContext(gS);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),N.createElement(Au.Provider,{value:i},r)}function bS(e,i,s){var r;if(i===void 0&&(i=[]),s===void 0&&(s=null),e==null){var a;if((a=s)!=null&&a.errors)e=s.matches;else return null}let l=e,h=(r=s)==null?void 0:r.errors;if(h!=null){let f=l.findIndex(p=>p.route.id&&(h==null?void 0:h[p.route.id]));f>=0||qe(!1),l=l.slice(0,Math.min(l.length,f+1))}return l.reduceRight((f,p,m)=>{let v=p.route.id?h==null?void 0:h[p.route.id]:null,w=null;s&&(w=p.route.errorElement||xS);let x=i.concat(l.slice(0,m+1)),b=()=>{let E;return v?E=w:p.route.Component?E=N.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=f,N.createElement(CS,{match:p,routeContext:{outlet:f,matches:x,isDataRoute:s!=null},children:E})};return s&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?N.createElement(wS,{location:s.location,revalidation:s.revalidation,component:w,error:v,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}var Dm;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"})(Dm||(Dm={}));var Yl;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"})(Yl||(Yl={}));function SS(e){let i=N.useContext(mS);return i||qe(!1),i}function PS(e){let i=N.useContext(Au);return i||qe(!1),i}function ES(e){let i=PS(),s=i.matches[i.matches.length-1];return s.route.id||qe(!1),s.route.id}function TS(){var e;let i=N.useContext(S0),s=SS(Yl.UseRouteError),r=ES(Yl.UseRouteError);return i||((e=s.errors)==null?void 0:e[r])}function E0(e){qe(!1)}function AS(e){let{basename:i="/",children:s=null,location:r,navigationType:a=zs.Pop,navigator:l,static:h=!1}=e;Cf()&&qe(!1);let f=i.replace(/^\/*/,"/"),p=N.useMemo(()=>({basename:f,navigator:l,static:h}),[f,l,h]);typeof r=="string"&&(r=Eu(r));let{pathname:m="/",search:v="",hash:w="",state:x=null,key:b="default"}=r,E=N.useMemo(()=>{let R=w0(m,f);return R==null?null:{location:{pathname:R,search:v,hash:w,state:x,key:b},navigationType:a}},[f,m,v,w,x,b,a]);return E==null?null:N.createElement(b0.Provider,{value:p},N.createElement(Tu.Provider,{children:s,value:E}))}function kS(e){let{children:i,location:s}=e;return _S(nd(i),s)}var Mm;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(Mm||(Mm={}));new Promise(()=>{});function nd(e,i){i===void 0&&(i=[]);let s=[];return N.Children.forEach(e,(r,a)=>{if(!N.isValidElement(r))return;let l=[...i,a];if(r.type===N.Fragment){s.push.apply(s,nd(r.props.children,l));return}r.type!==E0&&qe(!1),!r.props.index||!r.props.children||qe(!1);let h={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(h.children=nd(r.props.children,l)),s.push(h)}),s}/**
 * React Router DOM v6.14.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const IS="startTransition",Fm=O1[IS];function RS(e){let{basename:i,children:s,future:r,window:a}=e,l=N.useRef();l.current==null&&(l.current=Yb({window:a,v5Compat:!0}));let h=l.current,[f,p]=N.useState({action:h.action,location:h.location}),{v7_startTransition:m}=r||{},v=N.useCallback(w=>{m&&Fm?Fm(()=>p(w)):p(w)},[p,m]);return N.useLayoutEffect(()=>h.listen(v),[h,v]),N.createElement(AS,{basename:i,children:s,location:f.location,navigationType:f.action,navigator:h})}var Lm;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(Lm||(Lm={}));var Bm;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Bm||(Bm={}));const DS="modulepreload",MS=function(e){return"/2023/nene/"+e},Om={},FS=function(i,s,r){if(!s||s.length===0)return i();const a=document.getElementsByTagName("link");return Promise.all(s.map(l=>{if(l=MS(l),l in Om)return;Om[l]=!0;const h=l.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(!!r)for(let v=a.length-1;v>=0;v--){const w=a[v];if(w.href===l&&(!h||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${f}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":DS,h||(m.as="script",m.crossOrigin=""),m.href=l,document.head.appendChild(m),h)return new Promise((v,w)=>{m.addEventListener("load",v),m.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>i())},T0=N.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),ku=N.createContext({}),Iu=N.createContext(null),Ru=typeof document<"u",Zl=Ru?N.useLayoutEffect:N.useEffect,A0=N.createContext({strict:!1});function LS(e,i,s,r){const{visualElement:a}=N.useContext(ku),l=N.useContext(A0),h=N.useContext(Iu),f=N.useContext(T0).reducedMotion,p=N.useRef();r=r||l.renderer,!p.current&&r&&(p.current=r(e,{visualState:i,parent:a,props:s,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:f}));const m=p.current;return N.useInsertionEffect(()=>{m&&m.update(s,h)}),Zl(()=>{m&&m.render()}),N.useEffect(()=>{m&&m.updateFeatures()}),(window.HandoffAppearAnimations?Zl:N.useEffect)(()=>{m&&m.animationState&&m.animationState.animateChanges()}),m}function mr(e){return typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function BS(e,i,s){return N.useCallback(r=>{r&&e.mount&&e.mount(r),i&&(r?i.mount(r):i.unmount()),s&&(typeof s=="function"?s(r):mr(s)&&(s.current=r))},[i])}function Zo(e){return typeof e=="string"||Array.isArray(e)}function Du(e){return typeof e=="object"&&typeof e.start=="function"}const bf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Sf=["initial",...bf];function Mu(e){return Du(e.animate)||Sf.some(i=>Zo(e[i]))}function k0(e){return!!(Mu(e)||e.variants)}function OS(e,i){if(Mu(e)){const{initial:s,animate:r}=e;return{initial:s===!1||Zo(s)?s:void 0,animate:Zo(r)?r:void 0}}return e.inherit!==!1?i:{}}function NS(e){const{initial:i,animate:s}=OS(e,N.useContext(ku));return N.useMemo(()=>({initial:i,animate:s}),[Nm(i),Nm(s)])}function Nm(e){return Array.isArray(e)?e.join(" "):e}const zm={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ko={};for(const e in zm)Ko[e]={isEnabled:i=>zm[e].some(s=>!!i[s])};function zS(e){for(const i in e)Ko[i]={...Ko[i],...e[i]}}const Pf=N.createContext({}),I0=N.createContext({}),US=Symbol.for("motionComponentSymbol");function VS({preloadedFeatures:e,createVisualElement:i,useRender:s,useVisualState:r,Component:a}){e&&zS(e);function l(f,p){let m;const v={...N.useContext(T0),...f,layoutId:jS(f)},{isStatic:w}=v,x=NS(f),b=r(f,w);if(!w&&Ru){x.visualElement=LS(a,b,v,i);const E=N.useContext(I0),R=N.useContext(A0).strict;x.visualElement&&(m=x.visualElement.loadFeatures(v,R,e,E))}return N.createElement(ku.Provider,{value:x},m&&x.visualElement?N.createElement(m,{visualElement:x.visualElement,...v}):null,s(a,f,BS(b,x.visualElement,p),b,w,x.visualElement))}const h=N.forwardRef(l);return h[US]=a,h}function jS({layoutId:e}){const i=N.useContext(Pf).id;return i&&e!==void 0?i+"-"+e:e}function HS(e){function i(r,a={}){return VS(e(r,a))}if(typeof Proxy>"u")return i;const s=new Map;return new Proxy(i,{get:(r,a)=>(s.has(a)||s.set(a,i(a)),s.get(a))})}const $S=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ef(e){return typeof e!="string"||e.includes("-")?!1:!!($S.indexOf(e)>-1||/[A-Z]/.test(e))}const Kl={};function WS(e){Object.assign(Kl,e)}const ra=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bn=new Set(ra);function R0(e,{layout:i,layoutId:s}){return Bn.has(e)||e.startsWith("origin")||(i||s!==void 0)&&(!!Kl[e]||e==="opacity")}const Je=e=>!!(e&&e.getVelocity),GS={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},XS=ra.length;function YS(e,{enableHardwareAcceleration:i=!0,allowTransformNone:s=!0},r,a){let l="";for(let h=0;h<XS;h++){const f=ra[h];if(e[f]!==void 0){const p=GS[f]||f;l+=`${p}(${e[f]}) `}}return i&&!e.z&&(l+="translateZ(0)"),l=l.trim(),a?l=a(e,r?"":l):s&&r&&(l="none"),l}const D0=e=>i=>typeof i=="string"&&i.startsWith(e),M0=D0("--"),rd=D0("var(--"),ZS=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,KS=(e,i)=>i&&typeof e=="number"?i.transform(e):e,qs=(e,i,s)=>Math.min(Math.max(s,e),i),On={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ao={...On,transform:e=>qs(0,1,e)},tl={...On,default:1},ko=e=>Math.round(e*1e5)/1e5,Fu=/(-)?([\d]*\.?[\d])+/g,F0=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,QS=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function oa(e){return typeof e=="string"}const aa=e=>({test:i=>oa(i)&&i.endsWith(e)&&i.split(" ").length===1,parse:parseFloat,transform:i=>`${i}${e}`}),Is=aa("deg"),Ji=aa("%"),ct=aa("px"),qS=aa("vh"),JS=aa("vw"),Um={...Ji,parse:e=>Ji.parse(e)/100,transform:e=>Ji.transform(e*100)},Vm={...On,transform:Math.round},L0={borderWidth:ct,borderTopWidth:ct,borderRightWidth:ct,borderBottomWidth:ct,borderLeftWidth:ct,borderRadius:ct,radius:ct,borderTopLeftRadius:ct,borderTopRightRadius:ct,borderBottomRightRadius:ct,borderBottomLeftRadius:ct,width:ct,maxWidth:ct,height:ct,maxHeight:ct,size:ct,top:ct,right:ct,bottom:ct,left:ct,padding:ct,paddingTop:ct,paddingRight:ct,paddingBottom:ct,paddingLeft:ct,margin:ct,marginTop:ct,marginRight:ct,marginBottom:ct,marginLeft:ct,rotate:Is,rotateX:Is,rotateY:Is,rotateZ:Is,scale:tl,scaleX:tl,scaleY:tl,scaleZ:tl,skew:Is,skewX:Is,skewY:Is,distance:ct,translateX:ct,translateY:ct,translateZ:ct,x:ct,y:ct,z:ct,perspective:ct,transformPerspective:ct,opacity:Ao,originX:Um,originY:Um,originZ:ct,zIndex:Vm,fillOpacity:Ao,strokeOpacity:Ao,numOctaves:Vm};function Tf(e,i,s,r){const{style:a,vars:l,transform:h,transformOrigin:f}=e;let p=!1,m=!1,v=!0;for(const w in i){const x=i[w];if(M0(w)){l[w]=x;continue}const b=L0[w],E=KS(x,b);if(Bn.has(w)){if(p=!0,h[w]=E,!v)continue;x!==(b.default||0)&&(v=!1)}else w.startsWith("origin")?(m=!0,f[w]=E):a[w]=E}if(i.transform||(p||r?a.transform=YS(e.transform,s,v,r):a.transform&&(a.transform="none")),m){const{originX:w="50%",originY:x="50%",originZ:b=0}=f;a.transformOrigin=`${w} ${x} ${b}`}}const Af=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function B0(e,i,s){for(const r in i)!Je(i[r])&&!R0(r,s)&&(e[r]=i[r])}function tP({transformTemplate:e},i,s){return N.useMemo(()=>{const r=Af();return Tf(r,i,{enableHardwareAcceleration:!s},e),Object.assign({},r.vars,r.style)},[i])}function eP(e,i,s){const r=e.style||{},a={};return B0(a,r,e),Object.assign(a,tP(e,i,s)),e.transformValues?e.transformValues(a):a}function iP(e,i,s){const r={},a=eP(e,i,s);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=a,r}const sP=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function Ql(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||sP.has(e)}let O0=e=>!Ql(e);function nP(e){e&&(O0=i=>i.startsWith("on")?!Ql(i):e(i))}try{nP(require("@emotion/is-prop-valid").default)}catch{}function rP(e,i,s){const r={};for(const a in e)a==="values"&&typeof e.values=="object"||(O0(a)||s===!0&&Ql(a)||!i&&!Ql(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}function jm(e,i,s){return typeof e=="string"?e:ct.transform(i+s*e)}function oP(e,i,s){const r=jm(i,e.x,e.width),a=jm(s,e.y,e.height);return`${r} ${a}`}const aP={offset:"stroke-dashoffset",array:"stroke-dasharray"},lP={offset:"strokeDashoffset",array:"strokeDasharray"};function uP(e,i,s=1,r=0,a=!0){e.pathLength=1;const l=a?aP:lP;e[l.offset]=ct.transform(-r);const h=ct.transform(i),f=ct.transform(s);e[l.array]=`${h} ${f}`}function kf(e,{attrX:i,attrY:s,attrScale:r,originX:a,originY:l,pathLength:h,pathSpacing:f=1,pathOffset:p=0,...m},v,w,x){if(Tf(e,m,v,x),w){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:b,style:E,dimensions:R}=e;b.transform&&(R&&(E.transform=b.transform),delete b.transform),R&&(a!==void 0||l!==void 0||E.transform)&&(E.transformOrigin=oP(R,a!==void 0?a:.5,l!==void 0?l:.5)),i!==void 0&&(b.x=i),s!==void 0&&(b.y=s),r!==void 0&&(b.scale=r),h!==void 0&&uP(b,h,f,p,!1)}const N0=()=>({...Af(),attrs:{}}),If=e=>typeof e=="string"&&e.toLowerCase()==="svg";function hP(e,i,s,r){const a=N.useMemo(()=>{const l=N0();return kf(l,i,{enableHardwareAcceleration:!1},If(r),e.transformTemplate),{...l.attrs,style:{...l.style}}},[i]);if(e.style){const l={};B0(l,e.style,e),a.style={...l,...a.style}}return a}function cP(e=!1){return(s,r,a,{latestValues:l},h)=>{const p=(Ef(s)?hP:iP)(r,l,h,s),v={...rP(r,typeof s=="string",e),...p,ref:a},{children:w}=r,x=N.useMemo(()=>Je(w)?w.get():w,[w]);return N.createElement(s,{...v,children:x})}}const Rf=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function z0(e,{style:i,vars:s},r,a){Object.assign(e.style,i,a&&a.getProjectionStyles(r));for(const l in s)e.style.setProperty(l,s[l])}const U0=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function V0(e,i,s,r){z0(e,i,void 0,r);for(const a in i.attrs)e.setAttribute(U0.has(a)?a:Rf(a),i.attrs[a])}function Df(e,i){const{style:s}=e,r={};for(const a in s)(Je(s[a])||i.style&&Je(i.style[a])||R0(a,e))&&(r[a]=s[a]);return r}function j0(e,i){const s=Df(e,i);for(const r in e)if(Je(e[r])||Je(i[r])){const a=ra.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[a]=e[r]}return s}function Mf(e,i,s,r={},a={}){return typeof i=="function"&&(i=i(s!==void 0?s:e.custom,r,a)),typeof i=="string"&&(i=e.variants&&e.variants[i]),typeof i=="function"&&(i=i(s!==void 0?s:e.custom,r,a)),i}function H0(e){const i=N.useRef(null);return i.current===null&&(i.current=e()),i.current}const ql=e=>Array.isArray(e),dP=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),fP=e=>ql(e)?e[e.length-1]||0:e;function vl(e){const i=Je(e)?e.get():e;return dP(i)?i.toValue():i}function pP({scrapeMotionValuesFromProps:e,createRenderState:i,onMount:s},r,a,l){const h={latestValues:gP(r,a,l,e),renderState:i()};return s&&(h.mount=f=>s(r,f,h)),h}const $0=e=>(i,s)=>{const r=N.useContext(ku),a=N.useContext(Iu),l=()=>pP(e,i,r,a);return s?l():H0(l)};function gP(e,i,s,r){const a={},l=r(e,{});for(const x in l)a[x]=vl(l[x]);let{initial:h,animate:f}=e;const p=Mu(e),m=k0(e);i&&m&&!p&&e.inherit!==!1&&(h===void 0&&(h=i.initial),f===void 0&&(f=i.animate));let v=s?s.initial===!1:!1;v=v||h===!1;const w=v?f:h;return w&&typeof w!="boolean"&&!Du(w)&&(Array.isArray(w)?w:[w]).forEach(b=>{const E=Mf(e,b);if(!E)return;const{transitionEnd:R,transition:O,...A}=E;for(const P in A){let k=A[P];if(Array.isArray(k)){const D=v?k.length-1:0;k=k[D]}k!==null&&(a[P]=k)}for(const P in R)a[P]=R[P]}),a}const mP={useVisualState:$0({scrapeMotionValuesFromProps:j0,createRenderState:N0,onMount:(e,i,{renderState:s,latestValues:r})=>{try{s.dimensions=typeof i.getBBox=="function"?i.getBBox():i.getBoundingClientRect()}catch{s.dimensions={x:0,y:0,width:0,height:0}}kf(s,r,{enableHardwareAcceleration:!1},If(i.tagName),e.transformTemplate),V0(i,s)}})},_P={useVisualState:$0({scrapeMotionValuesFromProps:Df,createRenderState:Af})};function vP(e,{forwardMotionProps:i=!1},s,r){return{...Ef(e)?mP:_P,preloadedFeatures:s,useRender:cP(i),createVisualElement:r,Component:e}}function ps(e,i,s,r={passive:!0}){return e.addEventListener(i,s,r),()=>e.removeEventListener(i,s)}const W0=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Lu(e,i="page"){return{point:{x:e[i+"X"],y:e[i+"Y"]}}}const yP=e=>i=>W0(i)&&e(i,Lu(i));function ms(e,i,s,r){return ps(e,i,yP(s),r)}const xP=(e,i)=>s=>i(e(s)),Ys=(...e)=>e.reduce(xP);function G0(e){let i=null;return()=>{const s=()=>{i=null};return i===null?(i=e,s):!1}}const Hm=G0("dragHorizontal"),$m=G0("dragVertical");function X0(e){let i=!1;if(e==="y")i=$m();else if(e==="x")i=Hm();else{const s=Hm(),r=$m();s&&r?i=()=>{s(),r()}:(s&&s(),r&&r())}return i}function Y0(){const e=X0(!0);return e?(e(),!1):!0}class nn{constructor(i){this.isMounted=!1,this.node=i}update(){}}function wP(e){let i=[],s=[],r=0,a=!1,l=!1;const h=new WeakSet,f={schedule:(p,m=!1,v=!1)=>{const w=v&&a,x=w?i:s;return m&&h.add(p),x.indexOf(p)===-1&&(x.push(p),w&&a&&(r=i.length)),p},cancel:p=>{const m=s.indexOf(p);m!==-1&&s.splice(m,1),h.delete(p)},process:p=>{if(a){l=!0;return}if(a=!0,[i,s]=[s,i],s.length=0,r=i.length,r)for(let m=0;m<r;m++){const v=i[m];v(p),h.has(v)&&(f.schedule(v),e())}a=!1,l&&(l=!1,f.process(p))}};return f}const Vt={delta:0,timestamp:0,isProcessing:!1},CP=40;let od=!0,Qo=!1;const Bu=["read","update","preRender","render","postRender"],Tr=Bu.reduce((e,i)=>(e[i]=wP(()=>Qo=!0),e),{}),bP=e=>Tr[e].process(Vt),Z0=e=>{Qo=!1,Vt.delta=od?1e3/60:Math.max(Math.min(e-Vt.timestamp,CP),1),Vt.timestamp=e,Vt.isProcessing=!0,Bu.forEach(bP),Vt.isProcessing=!1,Qo&&(od=!1,requestAnimationFrame(Z0))},SP=()=>{Qo=!0,od=!0,Vt.isProcessing||requestAnimationFrame(Z0)},zt=Bu.reduce((e,i)=>{const s=Tr[i];return e[i]=(r,a=!1,l=!1)=>(Qo||SP(),s.schedule(r,a,l)),e},{});function Cs(e){Bu.forEach(i=>Tr[i].cancel(e))}function Wm(e,i){const s="pointer"+(i?"enter":"leave"),r="onHover"+(i?"Start":"End"),a=(l,h)=>{if(l.type==="touch"||Y0())return;const f=e.getProps();e.animationState&&f.whileHover&&e.animationState.setActive("whileHover",i),f[r]&&zt.update(()=>f[r](l,h))};return ms(e.current,s,a,{passive:!e.getProps()[r]})}class PP extends nn{mount(){this.unmount=Ys(Wm(this.node,!0),Wm(this.node,!1))}unmount(){}}class EP extends nn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let i=!1;try{i=this.node.current.matches(":focus-visible")}catch{i=!0}!i||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ys(ps(this.node.current,"focus",()=>this.onFocus()),ps(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const K0=(e,i)=>i?e===i?!0:K0(e,i.parentElement):!1,re=e=>e;function Zh(e,i){if(!i)return;const s=new PointerEvent("pointer"+e);i(s,Lu(s))}class TP extends nn{constructor(){super(...arguments),this.removeStartListeners=re,this.removeEndListeners=re,this.removeAccessibleListeners=re,this.startPointerPress=(i,s)=>{if(this.removeEndListeners(),this.isPressing)return;const r=this.node.getProps(),l=ms(window,"pointerup",(f,p)=>{if(!this.checkPressEnd())return;const{onTap:m,onTapCancel:v}=this.node.getProps();zt.update(()=>{K0(this.node.current,f.target)?m&&m(f,p):v&&v(f,p)})},{passive:!(r.onTap||r.onPointerUp)}),h=ms(window,"pointercancel",(f,p)=>this.cancelPress(f,p),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Ys(l,h),this.startPress(i,s)},this.startAccessiblePress=()=>{const i=l=>{if(l.key!=="Enter"||this.isPressing)return;const h=f=>{f.key!=="Enter"||!this.checkPressEnd()||Zh("up",(p,m)=>{const{onTap:v}=this.node.getProps();v&&zt.update(()=>v(p,m))})};this.removeEndListeners(),this.removeEndListeners=ps(this.node.current,"keyup",h),Zh("down",(f,p)=>{this.startPress(f,p)})},s=ps(this.node.current,"keydown",i),r=()=>{this.isPressing&&Zh("cancel",(l,h)=>this.cancelPress(l,h))},a=ps(this.node.current,"blur",r);this.removeAccessibleListeners=Ys(s,a)}}startPress(i,s){this.isPressing=!0;const{onTapStart:r,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&zt.update(()=>r(i,s))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Y0()}cancelPress(i,s){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&zt.update(()=>r(i,s))}mount(){const i=this.node.getProps(),s=ms(this.node.current,"pointerdown",this.startPointerPress,{passive:!(i.onTapStart||i.onPointerStart)}),r=ps(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ys(s,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const ad=new WeakMap,Kh=new WeakMap,AP=e=>{const i=ad.get(e.target);i&&i(e)},kP=e=>{e.forEach(AP)};function IP({root:e,...i}){const s=e||document;Kh.has(s)||Kh.set(s,{});const r=Kh.get(s),a=JSON.stringify(i);return r[a]||(r[a]=new IntersectionObserver(kP,{root:e,...i})),r[a]}function RP(e,i,s){const r=IP(i);return ad.set(e,s),r.observe(e),()=>{ad.delete(e),r.unobserve(e)}}const DP={some:0,all:1};class MP extends nn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:i={}}=this.node.getProps(),{root:s,margin:r,amount:a="some",once:l}=i,h={root:s?s.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:DP[a]},f=p=>{const{isIntersecting:m}=p;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:v,onViewportLeave:w}=this.node.getProps(),x=m?v:w;x&&x(p)};return RP(this.node.current,h,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:i,prevProps:s}=this.node;["amount","margin","root"].some(FP(i,s))&&this.startObserver()}unmount(){}}function FP({viewport:e={}},{viewport:i={}}={}){return s=>e[s]!==i[s]}const LP={inView:{Feature:MP},tap:{Feature:TP},focus:{Feature:EP},hover:{Feature:PP}};function Q0(e,i){if(!Array.isArray(i))return!1;const s=i.length;if(s!==e.length)return!1;for(let r=0;r<s;r++)if(i[r]!==e[r])return!1;return!0}function BP(e){const i={};return e.values.forEach((s,r)=>i[r]=s.get()),i}function OP(e){const i={};return e.values.forEach((s,r)=>i[r]=s.getVelocity()),i}function Ou(e,i,s){const r=e.getProps();return Mf(r,i,s!==void 0?s:r.custom,BP(e),OP(e))}const NP="framerAppearId",zP="data-"+Rf(NP);let UP=re,Ff=re;const Zs=e=>e*1e3,_s=e=>e/1e3,VP={current:!1},q0=e=>Array.isArray(e)&&typeof e[0]=="number";function J0(e){return!!(!e||typeof e=="string"&&tx[e]||q0(e)||Array.isArray(e)&&e.every(J0))}const vo=([e,i,s,r])=>`cubic-bezier(${e}, ${i}, ${s}, ${r})`,tx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:vo([0,.65,.55,1]),circOut:vo([.55,0,1,.45]),backIn:vo([.31,.01,.66,-.59]),backOut:vo([.33,1.53,.69,.99])};function ex(e){if(e)return q0(e)?vo(e):Array.isArray(e)?e.map(ex):tx[e]}function jP(e,i,s,{delay:r=0,duration:a,repeat:l=0,repeatType:h="loop",ease:f,times:p}={}){const m={[i]:s};p&&(m.offset=p);const v=ex(f);return Array.isArray(v)&&(m.easing=v),e.animate(m,{delay:r,duration:a,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:l+1,direction:h==="reverse"?"alternate":"normal"})}const Gm={waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate")},Qh={},ix={};for(const e in Gm)ix[e]=()=>(Qh[e]===void 0&&(Qh[e]=Gm[e]()),Qh[e]);function HP(e,{repeat:i,repeatType:s="loop"}){const r=i&&s!=="loop"&&i%2===1?0:e.length-1;return e[r]}const sx=(e,i,s)=>(((1-3*s+3*i)*e+(3*s-6*i))*e+3*i)*e,$P=1e-7,WP=12;function GP(e,i,s,r,a){let l,h,f=0;do h=i+(s-i)/2,l=sx(h,r,a)-e,l>0?s=h:i=h;while(Math.abs(l)>$P&&++f<WP);return h}function la(e,i,s,r){if(e===i&&s===r)return re;const a=l=>GP(l,0,1,e,s);return l=>l===0||l===1?l:sx(a(l),i,r)}const XP=la(.42,0,1,1),YP=la(0,0,.58,1),nx=la(.42,0,.58,1),ZP=e=>Array.isArray(e)&&typeof e[0]!="number",rx=e=>i=>i<=.5?e(2*i)/2:(2-e(2*(1-i)))/2,ox=e=>i=>1-e(1-i),ax=e=>1-Math.sin(Math.acos(e)),Lf=ox(ax),KP=rx(Lf),lx=la(.33,1.53,.69,.99),Bf=ox(lx),QP=rx(Bf),qP=e=>(e*=2)<1?.5*Bf(e):.5*(2-Math.pow(2,-10*(e-1))),JP={linear:re,easeIn:XP,easeInOut:nx,easeOut:YP,circIn:ax,circInOut:KP,circOut:Lf,backIn:Bf,backInOut:QP,backOut:lx,anticipate:qP},Xm=e=>{if(Array.isArray(e)){Ff(e.length===4);const[i,s,r,a]=e;return la(i,s,r,a)}else if(typeof e=="string")return JP[e];return e},Of=(e,i)=>s=>!!(oa(s)&&QS.test(s)&&s.startsWith(e)||i&&Object.prototype.hasOwnProperty.call(s,i)),ux=(e,i,s)=>r=>{if(!oa(r))return r;const[a,l,h,f]=r.match(Fu);return{[e]:parseFloat(a),[i]:parseFloat(l),[s]:parseFloat(h),alpha:f!==void 0?parseFloat(f):1}},tE=e=>qs(0,255,e),qh={...On,transform:e=>Math.round(tE(e))},En={test:Of("rgb","red"),parse:ux("red","green","blue"),transform:({red:e,green:i,blue:s,alpha:r=1})=>"rgba("+qh.transform(e)+", "+qh.transform(i)+", "+qh.transform(s)+", "+ko(Ao.transform(r))+")"};function eE(e){let i="",s="",r="",a="";return e.length>5?(i=e.substring(1,3),s=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(i=e.substring(1,2),s=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),i+=i,s+=s,r+=r,a+=a),{red:parseInt(i,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const ld={test:Of("#"),parse:eE,transform:En.transform},_r={test:Of("hsl","hue"),parse:ux("hue","saturation","lightness"),transform:({hue:e,saturation:i,lightness:s,alpha:r=1})=>"hsla("+Math.round(e)+", "+Ji.transform(ko(i))+", "+Ji.transform(ko(s))+", "+ko(Ao.transform(r))+")"},Re={test:e=>En.test(e)||ld.test(e)||_r.test(e),parse:e=>En.test(e)?En.parse(e):_r.test(e)?_r.parse(e):ld.parse(e),transform:e=>oa(e)?e:e.hasOwnProperty("red")?En.transform(e):_r.transform(e)},Ht=(e,i,s)=>-s*e+s*i+e;function Jh(e,i,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(i-e)*6*s:s<1/2?i:s<2/3?e+(i-e)*(2/3-s)*6:e}function iE({hue:e,saturation:i,lightness:s,alpha:r}){e/=360,i/=100,s/=100;let a=0,l=0,h=0;if(!i)a=l=h=s;else{const f=s<.5?s*(1+i):s+i-s*i,p=2*s-f;a=Jh(p,f,e+1/3),l=Jh(p,f,e),h=Jh(p,f,e-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(h*255),alpha:r}}const tc=(e,i,s)=>{const r=e*e;return Math.sqrt(Math.max(0,s*(i*i-r)+r))},sE=[ld,En,_r],nE=e=>sE.find(i=>i.test(e));function Ym(e){const i=nE(e);let s=i.parse(e);return i===_r&&(s=iE(s)),s}const hx=(e,i)=>{const s=Ym(e),r=Ym(i),a={...s};return l=>(a.red=tc(s.red,r.red,l),a.green=tc(s.green,r.green,l),a.blue=tc(s.blue,r.blue,l),a.alpha=Ht(s.alpha,r.alpha,l),En.transform(a))};function rE(e){var i,s;return isNaN(e)&&oa(e)&&(((i=e.match(Fu))===null||i===void 0?void 0:i.length)||0)+(((s=e.match(F0))===null||s===void 0?void 0:s.length)||0)>0}const cx={regex:ZS,countKey:"Vars",token:"${v}",parse:re},dx={regex:F0,countKey:"Colors",token:"${c}",parse:Re.parse},fx={regex:Fu,countKey:"Numbers",token:"${n}",parse:On.parse};function ec(e,{regex:i,countKey:s,token:r,parse:a}){const l=e.tokenised.match(i);l&&(e["num"+s]=l.length,e.tokenised=e.tokenised.replace(i,r),e.values.push(...l.map(a)))}function Jl(e){const i=e.toString(),s={value:i,tokenised:i,values:[],numVars:0,numColors:0,numNumbers:0};return s.value.includes("var(--")&&ec(s,cx),ec(s,dx),ec(s,fx),s}function px(e){return Jl(e).values}function gx(e){const{values:i,numColors:s,numVars:r,tokenised:a}=Jl(e),l=i.length;return h=>{let f=a;for(let p=0;p<l;p++)p<r?f=f.replace(cx.token,h[p]):p<r+s?f=f.replace(dx.token,Re.transform(h[p])):f=f.replace(fx.token,ko(h[p]));return f}}const oE=e=>typeof e=="number"?0:e;function aE(e){const i=px(e);return gx(e)(i.map(oE))}const Js={test:rE,parse:px,createTransformer:gx,getAnimatableNone:aE},mx=(e,i)=>s=>`${s>0?i:e}`;function _x(e,i){return typeof e=="number"?s=>Ht(e,i,s):Re.test(e)?hx(e,i):e.startsWith("var(")?mx(e,i):yx(e,i)}const vx=(e,i)=>{const s=[...e],r=s.length,a=e.map((l,h)=>_x(l,i[h]));return l=>{for(let h=0;h<r;h++)s[h]=a[h](l);return s}},lE=(e,i)=>{const s={...e,...i},r={};for(const a in s)e[a]!==void 0&&i[a]!==void 0&&(r[a]=_x(e[a],i[a]));return a=>{for(const l in r)s[l]=r[l](a);return s}},yx=(e,i)=>{const s=Js.createTransformer(i),r=Jl(e),a=Jl(i);return r.numVars===a.numVars&&r.numColors===a.numColors&&r.numNumbers>=a.numNumbers?Ys(vx(r.values,a.values),s):mx(e,i)},qo=(e,i,s)=>{const r=i-e;return r===0?1:(s-e)/r},Zm=(e,i)=>s=>Ht(e,i,s);function uE(e){return typeof e=="number"?Zm:typeof e=="string"?Re.test(e)?hx:yx:Array.isArray(e)?vx:typeof e=="object"?lE:Zm}function hE(e,i,s){const r=[],a=s||uE(e[0]),l=e.length-1;for(let h=0;h<l;h++){let f=a(e[h],e[h+1]);if(i){const p=Array.isArray(i)?i[h]||re:i;f=Ys(p,f)}r.push(f)}return r}function xx(e,i,{clamp:s=!0,ease:r,mixer:a}={}){const l=e.length;if(Ff(l===i.length),l===1)return()=>i[0];e[0]>e[l-1]&&(e=[...e].reverse(),i=[...i].reverse());const h=hE(i,r,a),f=h.length,p=m=>{let v=0;if(f>1)for(;v<e.length-2&&!(m<e[v+1]);v++);const w=qo(e[v],e[v+1],m);return h[v](w)};return s?m=>p(qs(e[0],e[l-1],m)):p}function cE(e,i){const s=e[e.length-1];for(let r=1;r<=i;r++){const a=qo(0,i,r);e.push(Ht(s,1,a))}}function dE(e){const i=[0];return cE(i,e.length-1),i}function fE(e,i){return e.map(s=>s*i)}function pE(e,i){return e.map(()=>i||nx).splice(0,e.length-1)}function tu({duration:e=300,keyframes:i,times:s,ease:r="easeInOut"}){const a=ZP(r)?r.map(Xm):Xm(r),l={done:!1,value:i[0]},h=fE(s&&s.length===i.length?s:dE(i),e),f=xx(h,i,{ease:Array.isArray(a)?a:pE(i,a)});return{calculatedDuration:e,next:p=>(l.value=f(p),l.done=p>=e,l)}}function wx(e,i){return i?e*(1e3/i):0}const gE=5;function Cx(e,i,s){const r=Math.max(i-gE,0);return wx(s-e(r),i-r)}const ic=.001,mE=.01,Km=10,_E=.05,vE=1;function yE({duration:e=800,bounce:i=.25,velocity:s=0,mass:r=1}){let a,l;UP(e<=Zs(Km));let h=1-i;h=qs(_E,vE,h),e=qs(mE,Km,_s(e)),h<1?(a=m=>{const v=m*h,w=v*e,x=v-s,b=ud(m,h),E=Math.exp(-w);return ic-x/b*E},l=m=>{const w=m*h*e,x=w*s+s,b=Math.pow(h,2)*Math.pow(m,2)*e,E=Math.exp(-w),R=ud(Math.pow(m,2),h);return(-a(m)+ic>0?-1:1)*((x-b)*E)/R}):(a=m=>{const v=Math.exp(-m*e),w=(m-s)*e+1;return-ic+v*w},l=m=>{const v=Math.exp(-m*e),w=(s-m)*(e*e);return v*w});const f=5/e,p=wE(a,l,f);if(e=Zs(e),isNaN(p))return{stiffness:100,damping:10,duration:e};{const m=Math.pow(p,2)*r;return{stiffness:m,damping:h*2*Math.sqrt(r*m),duration:e}}}const xE=12;function wE(e,i,s){let r=s;for(let a=1;a<xE;a++)r=r-e(r)/i(r);return r}function ud(e,i){return e*Math.sqrt(1-i*i)}const CE=["duration","bounce"],bE=["stiffness","damping","mass"];function Qm(e,i){return i.some(s=>e[s]!==void 0)}function SE(e){let i={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Qm(e,bE)&&Qm(e,CE)){const s=yE(e);i={...i,...s,velocity:0,mass:1},i.isResolvedFromDuration=!0}return i}function bx({keyframes:e,restDelta:i,restSpeed:s,...r}){const a=e[0],l=e[e.length-1],h={done:!1,value:a},{stiffness:f,damping:p,mass:m,velocity:v,duration:w,isResolvedFromDuration:x}=SE(r),b=v?-_s(v):0,E=p/(2*Math.sqrt(f*m)),R=l-a,O=_s(Math.sqrt(f/m)),A=Math.abs(R)<5;s||(s=A?.01:2),i||(i=A?.005:.5);let P;if(E<1){const k=ud(O,E);P=D=>{const B=Math.exp(-E*O*D);return l-B*((b+E*O*R)/k*Math.sin(k*D)+R*Math.cos(k*D))}}else if(E===1)P=k=>l-Math.exp(-O*k)*(R+(b+O*R)*k);else{const k=O*Math.sqrt(E*E-1);P=D=>{const B=Math.exp(-E*O*D),H=Math.min(k*D,300);return l-B*((b+E*O*R)*Math.sinh(H)+k*R*Math.cosh(H))/k}}return{calculatedDuration:x&&w||null,next:k=>{const D=P(k);if(x)h.done=k>=w;else{let B=b;k!==0&&(E<1?B=Cx(P,k,D):B=0);const H=Math.abs(B)<=s,$=Math.abs(l-D)<=i;h.done=H&&$}return h.value=h.done?l:D,h}}}function qm({keyframes:e,velocity:i=0,power:s=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:h,min:f,max:p,restDelta:m=.5,restSpeed:v}){const w=e[0],x={done:!1,value:w},b=G=>f!==void 0&&G<f||p!==void 0&&G>p,E=G=>f===void 0?p:p===void 0||Math.abs(f-G)<Math.abs(p-G)?f:p;let R=s*i;const O=w+R,A=h===void 0?O:h(O);A!==O&&(R=A-w);const P=G=>-R*Math.exp(-G/r),k=G=>A+P(G),D=G=>{const rt=P(G),it=k(G);x.done=Math.abs(rt)<=m,x.value=x.done?A:it};let B,H;const $=G=>{b(x.value)&&(B=G,H=bx({keyframes:[x.value,E(x.value)],velocity:Cx(k,G,x.value),damping:a,stiffness:l,restDelta:m,restSpeed:v}))};return $(0),{calculatedDuration:null,next:G=>{let rt=!1;return!H&&B===void 0&&(rt=!0,D(G),$(G)),B!==void 0&&G>B?H.next(G-B):(!rt&&D(G),x)}}}const PE=e=>{const i=({timestamp:s})=>e(s);return{start:()=>zt.update(i,!0),stop:()=>Cs(i),now:()=>Vt.isProcessing?Vt.timestamp:performance.now()}},Jm=2e4;function t_(e){let i=0;const s=50;let r=e.next(i);for(;!r.done&&i<Jm;)i+=s,r=e.next(i);return i>=Jm?1/0:i}const EE={decay:qm,inertia:qm,tween:tu,keyframes:tu,spring:bx};function eu({autoplay:e=!0,delay:i=0,driver:s=PE,keyframes:r,type:a="keyframes",repeat:l=0,repeatDelay:h=0,repeatType:f="loop",onPlay:p,onStop:m,onComplete:v,onUpdate:w,...x}){let b=1,E=!1,R,O;const A=()=>{R&&R(),O=new Promise(at=>{R=at})};A();let P;const k=EE[a]||tu;let D;k!==tu&&typeof r[0]!="number"&&(D=xx([0,100],r,{clamp:!1}),r=[0,100]);const B=k({...x,keyframes:r});let H;f==="mirror"&&(H=k({...x,keyframes:[...r].reverse(),velocity:-(x.velocity||0)}));let $="idle",G=null,rt=null,it=null;B.calculatedDuration===null&&l&&(B.calculatedDuration=t_(B));const{calculatedDuration:mt}=B;let _t=1/0,bt=1/0;mt!==null&&(_t=mt+h,bt=_t*(l+1)-h);let ft=0;const vt=at=>{if(rt===null)return;b>0&&(rt=Math.min(rt,at)),b<0&&(rt=Math.min(at-bt/b,rt)),G!==null?ft=G:ft=Math.round(at-rt)*b;const At=ft-i*(b>=0?1:-1),xi=b>=0?At<0:At>bt;ft=Math.max(At,0),$==="finished"&&G===null&&(ft=bt);let Be=ft,Li=B;if(l){const ts=ft/_t;let Bi=Math.floor(ts),Oe=ts%1;!Oe&&ts>=1&&(Oe=1),Oe===1&&Bi--,Bi=Math.min(Bi,l+1);const es=!!(Bi%2);es&&(f==="reverse"?(Oe=1-Oe,h&&(Oe-=h/_t)):f==="mirror"&&(Li=H));let ae=qs(0,1,Oe);ft>bt&&(ae=f==="reverse"&&es?1:0),Be=ae*_t}const de=xi?{done:!1,value:r[0]}:Li.next(Be);D&&(de.value=D(de.value));let{done:wi}=de;!xi&&mt!==null&&(wi=b>=0?ft>=bt:ft<=0);const Ur=G===null&&($==="finished"||$==="running"&&wi);return w&&w(de.value),Ur&&J(),de},St=()=>{P&&P.stop(),P=void 0},It=()=>{$="idle",St(),A(),rt=it=null},J=()=>{$="finished",v&&v(),St(),A()},ot=()=>{if(E)return;P||(P=s(vt));const at=P.now();p&&p(),G!==null?rt=at-G:(!rt||$==="finished")&&(rt=at),it=rt,G=null,$="running",P.start()};e&&ot();const ht={then(at,At){return O.then(at,At)},get time(){return _s(ft)},set time(at){at=Zs(at),ft=at,G!==null||!P||b===0?G=at:rt=P.now()-at/b},get duration(){const at=B.calculatedDuration===null?t_(B):B.calculatedDuration;return _s(at)},get speed(){return b},set speed(at){at===b||!P||(b=at,ht.time=_s(ft))},get state(){return $},play:ot,pause:()=>{$="paused",G=ft},stop:()=>{E=!0,$!=="idle"&&($="idle",m&&m(),It())},cancel:()=>{it!==null&&vt(it),It()},complete:()=>{$="finished"},sample:at=>(rt=0,vt(at))};return ht}const TE=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),el=10,AE=2e4,kE=(e,i)=>i.type==="spring"||e==="backgroundColor"||!J0(i.ease);function IE(e,i,{onUpdate:s,onComplete:r,...a}){if(!(ix.waapi()&&TE.has(i)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let h=!1,f,p;const m=()=>{p=new Promise(A=>{f=A})};m();let{keyframes:v,duration:w=300,ease:x,times:b}=a;if(kE(i,a)){const A=eu({...a,repeat:0,delay:0});let P={done:!1,value:v[0]};const k=[];let D=0;for(;!P.done&&D<AE;)P=A.sample(D),k.push(P.value),D+=el;b=void 0,v=k,w=D-el,x="linear"}const E=jP(e.owner.current,i,v,{...a,duration:w,ease:x,times:b}),R=()=>E.cancel(),O=()=>{zt.update(R),f(),m()};return E.onfinish=()=>{e.set(HP(v,a)),r&&r(),O()},{then(A,P){return p.then(A,P)},get time(){return _s(E.currentTime||0)},set time(A){E.currentTime=Zs(A)},get speed(){return E.playbackRate},set speed(A){E.playbackRate=A},get duration(){return _s(w)},play:()=>{h||(E.play(),Cs(R))},pause:()=>E.pause(),stop:()=>{if(h=!0,E.playState==="idle")return;const{currentTime:A}=E;if(A){const P=eu({...a,autoplay:!1});e.setWithVelocity(P.sample(A-el).value,P.sample(A).value,el)}O()},complete:()=>E.finish(),cancel:O}}function RE({keyframes:e,delay:i,onUpdate:s,onComplete:r}){const a=()=>(s&&s(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:re,pause:re,stop:re,then:l=>(l(),Promise.resolve()),cancel:re,complete:re});return i?eu({keyframes:[0,1],duration:0,delay:i,onComplete:a}):a()}const DE={type:"spring",stiffness:500,damping:25,restSpeed:10},ME=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),FE={type:"keyframes",duration:.8},LE={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},BE=(e,{keyframes:i})=>i.length>2?FE:Bn.has(e)?e.startsWith("scale")?ME(i[1]):DE:LE,hd=(e,i)=>e==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(Js.test(i)||i==="0")&&!i.startsWith("url(")),OE=new Set(["brightness","contrast","saturate","opacity"]);function NE(e){const[i,s]=e.slice(0,-1).split("(");if(i==="drop-shadow")return e;const[r]=s.match(Fu)||[];if(!r)return e;const a=s.replace(r,"");let l=OE.has(i)?1:0;return r!==s&&(l*=100),i+"("+l+a+")"}const zE=/([a-z-]*)\(.*?\)/g,cd={...Js,getAnimatableNone:e=>{const i=e.match(zE);return i?i.map(NE).join(" "):e}},UE={...L0,color:Re,backgroundColor:Re,outlineColor:Re,fill:Re,stroke:Re,borderColor:Re,borderTopColor:Re,borderRightColor:Re,borderBottomColor:Re,borderLeftColor:Re,filter:cd,WebkitFilter:cd},Nf=e=>UE[e];function Sx(e,i){let s=Nf(e);return s!==cd&&(s=Js),s.getAnimatableNone?s.getAnimatableNone(i):void 0}const Px=e=>/^0[^.\s]+$/.test(e);function VE(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||Px(e)}function jE(e,i,s,r){const a=hd(i,s);let l;Array.isArray(s)?l=[...s]:l=[null,s];const h=r.from!==void 0?r.from:e.get();let f;const p=[];for(let m=0;m<l.length;m++)l[m]===null&&(l[m]=m===0?h:l[m-1]),VE(l[m])&&p.push(m),typeof l[m]=="string"&&l[m]!=="none"&&l[m]!=="0"&&(f=l[m]);if(a&&p.length&&f)for(let m=0;m<p.length;m++){const v=p[m];l[v]=Sx(i,f)}return l}function HE({when:e,delay:i,delayChildren:s,staggerChildren:r,staggerDirection:a,repeat:l,repeatType:h,repeatDelay:f,from:p,elapsed:m,...v}){return!!Object.keys(v).length}function Ex(e,i){return e[i]||e.default||e}const zf=(e,i,s,r={})=>a=>{const l=Ex(r,e)||{},h=l.delay||r.delay||0;let{elapsed:f=0}=r;f=f-Zs(h);const p=jE(i,e,s,l),m=p[0],v=p[p.length-1],w=hd(e,m),x=hd(e,v);let b={keyframes:p,velocity:i.getVelocity(),ease:"easeOut",...l,delay:-f,onUpdate:E=>{i.set(E),l.onUpdate&&l.onUpdate(E)},onComplete:()=>{a(),l.onComplete&&l.onComplete()}};if(HE(l)||(b={...b,...BE(e,b)}),b.duration&&(b.duration=Zs(b.duration)),b.repeatDelay&&(b.repeatDelay=Zs(b.repeatDelay)),!w||!x||VP.current||l.type===!1)return RE(b);if(i.owner&&i.owner.current instanceof HTMLElement&&!i.owner.getProps().onUpdate){const E=IE(i,e,b);if(E)return E}return eu(b)};function iu(e){return!!(Je(e)&&e.add)}const $E=e=>/^\-?\d*\.?\d+$/.test(e);function Uf(e,i){e.indexOf(i)===-1&&e.push(i)}function Vf(e,i){const s=e.indexOf(i);s>-1&&e.splice(s,1)}class jf{constructor(){this.subscriptions=[]}add(i){return Uf(this.subscriptions,i),()=>Vf(this.subscriptions,i)}notify(i,s,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](i,s,r);else for(let l=0;l<a;l++){const h=this.subscriptions[l];h&&h(i,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const WE=e=>!isNaN(parseFloat(e));class GE{constructor(i,s={}){this.version="10.12.17",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,a=!0)=>{this.prev=this.current,this.current=r;const{delta:l,timestamp:h}=Vt;this.lastUpdated!==h&&(this.timeDelta=l,this.lastUpdated=h,zt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>zt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=i,this.canTrackVelocity=WE(this.current),this.owner=s.owner}onChange(i){return this.on("change",i)}on(i,s){this.events[i]||(this.events[i]=new jf);const r=this.events[i].add(s);return i==="change"?()=>{r(),zt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const i in this.events)this.events[i].clear()}attach(i,s){this.passiveEffect=i,this.stopPassiveEffect=s}set(i,s=!0){!s||!this.passiveEffect?this.updateAndNotify(i,s):this.passiveEffect(i,this.updateAndNotify)}setWithVelocity(i,s,r){this.set(s),this.prev=i,this.timeDelta=r}jump(i){this.updateAndNotify(i),this.prev=i,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?wx(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(i){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=i(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Lr(e,i){return new GE(e,i)}const Tx=e=>i=>i.test(e),XE={test:e=>e==="auto",parse:e=>e},Ax=[On,ct,Ji,Is,JS,qS,XE],ho=e=>Ax.find(Tx(e)),YE=[...Ax,Re,Js],ZE=e=>YE.find(Tx(e));function KE(e,i,s){e.hasValue(i)?e.getValue(i).set(s):e.addValue(i,Lr(s))}function QE(e,i){const s=Ou(e,i);let{transitionEnd:r={},transition:a={},...l}=s?e.makeTargetAnimatable(s,!1):{};l={...l,...r};for(const h in l){const f=fP(l[h]);KE(e,h,f)}}function qE(e,i,s){var r,a;const l=Object.keys(i).filter(f=>!e.hasValue(f)),h=l.length;if(h)for(let f=0;f<h;f++){const p=l[f],m=i[p];let v=null;Array.isArray(m)&&(v=m[0]),v===null&&(v=(a=(r=s[p])!==null&&r!==void 0?r:e.readValue(p))!==null&&a!==void 0?a:i[p]),v!=null&&(typeof v=="string"&&($E(v)||Px(v))?v=parseFloat(v):!ZE(v)&&Js.test(m)&&(v=Sx(p,m)),e.addValue(p,Lr(v,{owner:e})),s[p]===void 0&&(s[p]=v),v!==null&&e.setBaseTarget(p,v))}}function JE(e,i){return i?(i[e]||i.default||i).from:void 0}function tT(e,i,s){const r={};for(const a in e){const l=JE(a,i);if(l!==void 0)r[a]=l;else{const h=s.getValue(a);h&&(r[a]=h.get())}}return r}function eT({protectedKeys:e,needsAnimating:i},s){const r=e.hasOwnProperty(s)&&i[s]!==!0;return i[s]=!1,r}function kx(e,i,{delay:s=0,transitionOverride:r,type:a}={}){let{transition:l=e.getDefaultTransition(),transitionEnd:h,...f}=e.makeTargetAnimatable(i);const p=e.getValue("willChange");r&&(l=r);const m=[],v=a&&e.animationState&&e.animationState.getState()[a];for(const w in f){const x=e.getValue(w),b=f[w];if(!x||b===void 0||v&&eT(v,w))continue;const E={delay:s,elapsed:0,...l};if(window.HandoffAppearAnimations&&!x.hasAnimated){const O=e.getProps()[zP];O&&(E.elapsed=window.HandoffAppearAnimations(O,w,x,zt))}x.start(zf(w,x,b,e.shouldReduceMotion&&Bn.has(w)?{type:!1}:E));const R=x.animation;iu(p)&&(p.add(w),R.then(()=>p.remove(w))),m.push(R)}return h&&Promise.all(m).then(()=>{h&&QE(e,h)}),m}function dd(e,i,s={}){const r=Ou(e,i,s.custom);let{transition:a=e.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(a=s.transitionOverride);const l=r?()=>Promise.all(kx(e,r,s)):()=>Promise.resolve(),h=e.variantChildren&&e.variantChildren.size?(p=0)=>{const{delayChildren:m=0,staggerChildren:v,staggerDirection:w}=a;return iT(e,i,m+p,v,w,s)}:()=>Promise.resolve(),{when:f}=a;if(f){const[p,m]=f==="beforeChildren"?[l,h]:[h,l];return p().then(()=>m())}else return Promise.all([l(),h(s.delay)])}function iT(e,i,s=0,r=0,a=1,l){const h=[],f=(e.variantChildren.size-1)*r,p=a===1?(m=0)=>m*r:(m=0)=>f-m*r;return Array.from(e.variantChildren).sort(sT).forEach((m,v)=>{m.notify("AnimationStart",i),h.push(dd(m,i,{...l,delay:s+p(v)}).then(()=>m.notify("AnimationComplete",i)))}),Promise.all(h)}function sT(e,i){return e.sortNodePosition(i)}function nT(e,i,s={}){e.notify("AnimationStart",i);let r;if(Array.isArray(i)){const a=i.map(l=>dd(e,l,s));r=Promise.all(a)}else if(typeof i=="string")r=dd(e,i,s);else{const a=typeof i=="function"?Ou(e,i,s.custom):i;r=Promise.all(kx(e,a,s))}return r.then(()=>e.notify("AnimationComplete",i))}const rT=[...bf].reverse(),oT=bf.length;function aT(e){return i=>Promise.all(i.map(({animation:s,options:r})=>nT(e,s,r)))}function lT(e){let i=aT(e);const s=hT();let r=!0;const a=(p,m)=>{const v=Ou(e,m);if(v){const{transition:w,transitionEnd:x,...b}=v;p={...p,...b,...x}}return p};function l(p){i=p(e)}function h(p,m){const v=e.getProps(),w=e.getVariantContext(!0)||{},x=[],b=new Set;let E={},R=1/0;for(let A=0;A<oT;A++){const P=rT[A],k=s[P],D=v[P]!==void 0?v[P]:w[P],B=Zo(D),H=P===m?k.isActive:null;H===!1&&(R=A);let $=D===w[P]&&D!==v[P]&&B;if($&&r&&e.manuallyAnimateOnMount&&($=!1),k.protectedKeys={...E},!k.isActive&&H===null||!D&&!k.prevProp||Du(D)||typeof D=="boolean")continue;const G=uT(k.prevProp,D);let rt=G||P===m&&k.isActive&&!$&&B||A>R&&B;const it=Array.isArray(D)?D:[D];let mt=it.reduce(a,{});H===!1&&(mt={});const{prevResolvedValues:_t={}}=k,bt={..._t,...mt},ft=vt=>{rt=!0,b.delete(vt),k.needsAnimating[vt]=!0};for(const vt in bt){const St=mt[vt],It=_t[vt];E.hasOwnProperty(vt)||(St!==It?ql(St)&&ql(It)?!Q0(St,It)||G?ft(vt):k.protectedKeys[vt]=!0:St!==void 0?ft(vt):b.add(vt):St!==void 0&&b.has(vt)?ft(vt):k.protectedKeys[vt]=!0)}k.prevProp=D,k.prevResolvedValues=mt,k.isActive&&(E={...E,...mt}),r&&e.blockInitialAnimation&&(rt=!1),rt&&!$&&x.push(...it.map(vt=>({animation:vt,options:{type:P,...p}})))}if(b.size){const A={};b.forEach(P=>{const k=e.getBaseTarget(P);k!==void 0&&(A[P]=k)}),x.push({animation:A})}let O=!!x.length;return r&&v.initial===!1&&!e.manuallyAnimateOnMount&&(O=!1),r=!1,O?i(x):Promise.resolve()}function f(p,m,v){var w;if(s[p].isActive===m)return Promise.resolve();(w=e.variantChildren)===null||w===void 0||w.forEach(b=>{var E;return(E=b.animationState)===null||E===void 0?void 0:E.setActive(p,m)}),s[p].isActive=m;const x=h(v,p);for(const b in s)s[b].protectedKeys={};return x}return{animateChanges:h,setActive:f,setAnimateFunction:l,getState:()=>s}}function uT(e,i){return typeof i=="string"?i!==e:Array.isArray(i)?!Q0(i,e):!1}function vn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function hT(){return{animate:vn(!0),whileInView:vn(),whileHover:vn(),whileTap:vn(),whileDrag:vn(),whileFocus:vn(),exit:vn()}}class cT extends nn{constructor(i){super(i),i.animationState||(i.animationState=lT(i))}updateAnimationControlsSubscription(){const{animate:i}=this.node.getProps();this.unmount(),Du(i)&&(this.unmount=i.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:i}=this.node.getProps(),{animate:s}=this.node.prevProps||{};i!==s&&this.updateAnimationControlsSubscription()}unmount(){}}let dT=0;class fT extends nn{constructor(){super(...arguments),this.id=dT++}update(){if(!this.node.presenceContext)return;const{isPresent:i,onExitComplete:s,custom:r}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||i===a)return;const l=this.node.animationState.setActive("exit",!i,{custom:r??this.node.getProps().custom});s&&!i&&l.then(()=>s(this.id))}mount(){const{register:i}=this.node.presenceContext||{};i&&(this.unmount=i(this.id))}unmount(){}}const pT={animation:{Feature:cT},exit:{Feature:fT}},e_=(e,i)=>Math.abs(e-i);function gT(e,i){const s=e_(e.x,i.x),r=e_(e.y,i.y);return Math.sqrt(s**2+r**2)}class Ix{constructor(i,s,{transformPagePoint:r}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=nc(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,w=gT(m.offset,{x:0,y:0})>=3;if(!v&&!w)return;const{point:x}=m,{timestamp:b}=Vt;this.history.push({...x,timestamp:b});const{onStart:E,onMove:R}=this.handlers;v||(E&&E(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,m)},this.handlePointerMove=(m,v)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=sc(v,this.transformPagePoint),zt.update(this.updatePoint,!0)},this.handlePointerUp=(m,v)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:w,onSessionEnd:x}=this.handlers,b=nc(m.type==="pointercancel"?this.lastMoveEventInfo:sc(v,this.transformPagePoint),this.history);this.startEvent&&w&&w(m,b),x&&x(m,b)},!W0(i))return;this.handlers=s,this.transformPagePoint=r;const a=Lu(i),l=sc(a,this.transformPagePoint),{point:h}=l,{timestamp:f}=Vt;this.history=[{...h,timestamp:f}];const{onSessionStart:p}=s;p&&p(i,nc(l,this.history)),this.removeListeners=Ys(ms(window,"pointermove",this.handlePointerMove),ms(window,"pointerup",this.handlePointerUp),ms(window,"pointercancel",this.handlePointerUp))}updateHandlers(i){this.handlers=i}end(){this.removeListeners&&this.removeListeners(),Cs(this.updatePoint)}}function sc(e,i){return i?{point:i(e.point)}:e}function i_(e,i){return{x:e.x-i.x,y:e.y-i.y}}function nc({point:e},i){return{point:e,delta:i_(e,Rx(i)),offset:i_(e,mT(i)),velocity:_T(i,.1)}}function mT(e){return e[0]}function Rx(e){return e[e.length-1]}function _T(e,i){if(e.length<2)return{x:0,y:0};let s=e.length-1,r=null;const a=Rx(e);for(;s>=0&&(r=e[s],!(a.timestamp-r.timestamp>Zs(i)));)s--;if(!r)return{x:0,y:0};const l=_s(a.timestamp-r.timestamp);if(l===0)return{x:0,y:0};const h={x:(a.x-r.x)/l,y:(a.y-r.y)/l};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}function hi(e){return e.max-e.min}function fd(e,i=0,s=.01){return Math.abs(e-i)<=s}function s_(e,i,s,r=.5){e.origin=r,e.originPoint=Ht(i.min,i.max,e.origin),e.scale=hi(s)/hi(i),(fd(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Ht(s.min,s.max,e.origin)-e.originPoint,(fd(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Io(e,i,s,r){s_(e.x,i.x,s.x,r?r.originX:void 0),s_(e.y,i.y,s.y,r?r.originY:void 0)}function n_(e,i,s){e.min=s.min+i.min,e.max=e.min+hi(i)}function vT(e,i,s){n_(e.x,i.x,s.x),n_(e.y,i.y,s.y)}function r_(e,i,s){e.min=i.min-s.min,e.max=e.min+hi(i)}function Ro(e,i,s){r_(e.x,i.x,s.x),r_(e.y,i.y,s.y)}function yT(e,{min:i,max:s},r){return i!==void 0&&e<i?e=r?Ht(i,e,r.min):Math.max(e,i):s!==void 0&&e>s&&(e=r?Ht(s,e,r.max):Math.min(e,s)),e}function o_(e,i,s){return{min:i!==void 0?e.min+i:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function xT(e,{top:i,left:s,bottom:r,right:a}){return{x:o_(e.x,s,a),y:o_(e.y,i,r)}}function a_(e,i){let s=i.min-e.min,r=i.max-e.max;return i.max-i.min<e.max-e.min&&([s,r]=[r,s]),{min:s,max:r}}function wT(e,i){return{x:a_(e.x,i.x),y:a_(e.y,i.y)}}function CT(e,i){let s=.5;const r=hi(e),a=hi(i);return a>r?s=qo(i.min,i.max-r,e.min):r>a&&(s=qo(e.min,e.max-a,i.min)),qs(0,1,s)}function bT(e,i){const s={};return i.min!==void 0&&(s.min=i.min-e.min),i.max!==void 0&&(s.max=i.max-e.min),s}const pd=.35;function ST(e=pd){return e===!1?e=0:e===!0&&(e=pd),{x:l_(e,"left","right"),y:l_(e,"top","bottom")}}function l_(e,i,s){return{min:u_(e,i),max:u_(e,s)}}function u_(e,i){return typeof e=="number"?e:e[i]||0}const h_=()=>({translate:0,scale:1,origin:0,originPoint:0}),vr=()=>({x:h_(),y:h_()}),c_=()=>({min:0,max:0}),ee=()=>({x:c_(),y:c_()});function Yi(e){return[e("x"),e("y")]}function Dx({top:e,left:i,right:s,bottom:r}){return{x:{min:i,max:s},y:{min:e,max:r}}}function PT({x:e,y:i}){return{top:i.min,right:e.max,bottom:i.max,left:e.min}}function ET(e,i){if(!i)return e;const s=i({x:e.left,y:e.top}),r=i({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}function rc(e){return e===void 0||e===1}function gd({scale:e,scaleX:i,scaleY:s}){return!rc(e)||!rc(i)||!rc(s)}function wn(e){return gd(e)||Mx(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Mx(e){return d_(e.x)||d_(e.y)}function d_(e){return e&&e!=="0%"}function su(e,i,s){const r=e-s,a=i*r;return s+a}function f_(e,i,s,r,a){return a!==void 0&&(e=su(e,a,r)),su(e,s,r)+i}function md(e,i=0,s=1,r,a){e.min=f_(e.min,i,s,r,a),e.max=f_(e.max,i,s,r,a)}function Fx(e,{x:i,y:s}){md(e.x,i.translate,i.scale,i.originPoint),md(e.y,s.translate,s.scale,s.originPoint)}function TT(e,i,s,r=!1){const a=s.length;if(!a)return;i.x=i.y=1;let l,h;for(let f=0;f<a;f++){l=s[f],h=l.projectionDelta;const p=l.instance;p&&p.style&&p.style.display==="contents"||(r&&l.options.layoutScroll&&l.scroll&&l!==l.root&&yr(e,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),h&&(i.x*=h.x.scale,i.y*=h.y.scale,Fx(e,h)),r&&wn(l.latestValues)&&yr(e,l.latestValues))}i.x=p_(i.x),i.y=p_(i.y)}function p_(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Ms(e,i){e.min=e.min+i,e.max=e.max+i}function g_(e,i,[s,r,a]){const l=i[a]!==void 0?i[a]:.5,h=Ht(e.min,e.max,l);md(e,i[s],i[r],h,i.scale)}const AT=["x","scaleX","originX"],kT=["y","scaleY","originY"];function yr(e,i){g_(e.x,i,AT),g_(e.y,i,kT)}function Lx(e,i){return Dx(ET(e.getBoundingClientRect(),i))}function IT(e,i,s){const r=Lx(e,s),{scroll:a}=i;return a&&(Ms(r.x,a.offset.x),Ms(r.y,a.offset.y)),r}const RT=new WeakMap;class DT{constructor(i){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ee(),this.visualElement=i}start(i,{snapToCursor:s=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=p=>{this.stopAnimation(),s&&this.snapToCursor(Lu(p,"page").point)},l=(p,m)=>{const{drag:v,dragPropagation:w,onDragStart:x}=this.getProps();if(v&&!w&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=X0(v),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Yi(E=>{let R=this.getAxisMotionValue(E).get()||0;if(Ji.test(R)){const{projection:O}=this.visualElement;if(O&&O.layout){const A=O.layout.layoutBox[E];A&&(R=hi(A)*(parseFloat(R)/100))}}this.originPoint[E]=R}),x&&zt.update(()=>x(p,m),!1,!0);const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},h=(p,m)=>{const{dragPropagation:v,dragDirectionLock:w,onDirectionLock:x,onDrag:b}=this.getProps();if(!v&&!this.openGlobalLock)return;const{offset:E}=m;if(w&&this.currentDirection===null){this.currentDirection=MT(E),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",m.point,E),this.updateAxis("y",m.point,E),this.visualElement.render(),b&&b(p,m)},f=(p,m)=>this.stop(p,m);this.panSession=new Ix(i,{onSessionStart:a,onStart:l,onMove:h,onSessionEnd:f},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(i,s){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&zt.update(()=>l(i,s))}cancel(){this.isDragging=!1;const{projection:i,animationState:s}=this.visualElement;i&&(i.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(i,s,r){const{drag:a}=this.getProps();if(!r||!il(i,a,this.currentDirection))return;const l=this.getAxisMotionValue(i);let h=this.originPoint[i]+r[i];this.constraints&&this.constraints[i]&&(h=yT(h,this.constraints[i],this.elastic[i])),l.set(h)}resolveConstraints(){const{dragConstraints:i,dragElastic:s}=this.getProps(),{layout:r}=this.visualElement.projection||{},a=this.constraints;i&&mr(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&r?this.constraints=xT(r.layoutBox,i):this.constraints=!1,this.elastic=ST(s),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Yi(l=>{this.getAxisMotionValue(l)&&(this.constraints[l]=bT(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:i,onMeasureDragConstraints:s}=this.getProps();if(!i||!mr(i))return!1;const r=i.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=IT(r,a.root,this.visualElement.getTransformPagePoint());let h=wT(a.layout.layoutBox,l);if(s){const f=s(PT(h));this.hasMutatedConstraints=!!f,f&&(h=Dx(f))}return h}startAnimation(i){const{drag:s,dragMomentum:r,dragElastic:a,dragTransition:l,dragSnapToOrigin:h,onDragTransitionEnd:f}=this.getProps(),p=this.constraints||{},m=Yi(v=>{if(!il(v,s,this.currentDirection))return;let w=p&&p[v]||{};h&&(w={min:0,max:0});const x=a?200:1e6,b=a?40:1e7,E={type:"inertia",velocity:r?i[v]:0,bounceStiffness:x,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...l,...w};return this.startAxisValueAnimation(v,E)});return Promise.all(m).then(f)}startAxisValueAnimation(i,s){const r=this.getAxisMotionValue(i);return r.start(zf(i,r,0,s))}stopAnimation(){Yi(i=>this.getAxisMotionValue(i).stop())}getAxisMotionValue(i){const s="_drag"+i.toUpperCase(),r=this.visualElement.getProps(),a=r[s];return a||this.visualElement.getValue(i,(r.initial?r.initial[i]:void 0)||0)}snapToCursor(i){Yi(s=>{const{drag:r}=this.getProps();if(!il(s,r,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(s);if(a&&a.layout){const{min:h,max:f}=a.layout.layoutBox[s];l.set(i[s]-Ht(h,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:i,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!mr(s)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Yi(h=>{const f=this.getAxisMotionValue(h);if(f){const p=f.get();a[h]=CT({min:p,max:p},this.constraints[h])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Yi(h=>{if(!il(h,i,null))return;const f=this.getAxisMotionValue(h),{min:p,max:m}=this.constraints[h];f.set(Ht(p,m,a[h]))})}addListeners(){if(!this.visualElement.current)return;RT.set(this.visualElement,this);const i=this.visualElement.current,s=ms(i,"pointerdown",p=>{const{drag:m,dragListener:v=!0}=this.getProps();m&&v&&this.start(p)}),r=()=>{const{dragConstraints:p}=this.getProps();mr(p)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),r();const h=ps(window,"resize",()=>this.scalePositionWithinConstraints()),f=a.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m})=>{this.isDragging&&m&&(Yi(v=>{const w=this.getAxisMotionValue(v);w&&(this.originPoint[v]+=p[v].translate,w.set(w.get()+p[v].translate))}),this.visualElement.render())});return()=>{h(),s(),l(),f&&f()}}getProps(){const i=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:h=pd,dragMomentum:f=!0}=i;return{...i,drag:s,dragDirectionLock:r,dragPropagation:a,dragConstraints:l,dragElastic:h,dragMomentum:f}}}function il(e,i,s){return(i===!0||i===e)&&(s===null||s===e)}function MT(e,i=10){let s=null;return Math.abs(e.y)>i?s="y":Math.abs(e.x)>i&&(s="x"),s}class FT extends nn{constructor(i){super(i),this.removeGroupControls=re,this.removeListeners=re,this.controls=new DT(i)}mount(){const{dragControls:i}=this.node.getProps();i&&(this.removeGroupControls=i.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||re}unmount(){this.removeGroupControls(),this.removeListeners()}}const m_=e=>(i,s)=>{e&&zt.update(()=>e(i,s))};class LT extends nn{constructor(){super(...arguments),this.removePointerDownListener=re}onPointerDown(i){this.session=new Ix(i,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:i,onPanStart:s,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:m_(i),onStart:m_(s),onMove:r,onEnd:(l,h)=>{delete this.session,a&&zt.update(()=>a(l,h))}}}mount(){this.removePointerDownListener=ms(this.node.current,"pointerdown",i=>this.onPointerDown(i))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function BT(){const e=N.useContext(Iu);if(e===null)return[!0,null];const{isPresent:i,onExitComplete:s,register:r}=e,a=N.useId();return N.useEffect(()=>r(a),[]),!i&&s?[!1,()=>s&&s(a)]:[!0]}const yl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function __(e,i){return i.max===i.min?0:e/(i.max-i.min)*100}const co={correct:(e,i)=>{if(!i.target)return e;if(typeof e=="string")if(ct.test(e))e=parseFloat(e);else return e;const s=__(e,i.target.x),r=__(e,i.target.y);return`${s}% ${r}%`}},OT={correct:(e,{treeScale:i,projectionDelta:s})=>{const r=e,a=Js.parse(e);if(a.length>5)return r;const l=Js.createTransformer(e),h=typeof a[0]!="number"?1:0,f=s.x.scale*i.x,p=s.y.scale*i.y;a[0+h]/=f,a[1+h]/=p;const m=Ht(f,p,.5);return typeof a[2+h]=="number"&&(a[2+h]/=m),typeof a[3+h]=="number"&&(a[3+h]/=m),l(a)}};class NT extends hu.Component{componentDidMount(){const{visualElement:i,layoutGroup:s,switchLayoutGroup:r,layoutId:a}=this.props,{projection:l}=i;WS(zT),l&&(s.group&&s.group.add(l),r&&r.register&&a&&r.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),yl.hasEverUpdated=!0}getSnapshotBeforeUpdate(i){const{layoutDependency:s,visualElement:r,drag:a,isPresent:l}=this.props,h=r.projection;return h&&(h.isPresent=l,a||i.layoutDependency!==s||s===void 0?h.willUpdate():this.safeToRemove(),i.isPresent!==l&&(l?h.promote():h.relegate()||zt.postRender(()=>{const f=h.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:i}=this.props.visualElement;i&&(i.root.didUpdate(),queueMicrotask(()=>{!i.currentAnimation&&i.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:i,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:a}=i;a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:i}=this.props;i&&i()}render(){return null}}function Bx(e){const[i,s]=BT(),r=N.useContext(Pf);return hu.createElement(NT,{...e,layoutGroup:r,switchLayoutGroup:N.useContext(I0),isPresent:i,safeToRemove:s})}const zT={borderRadius:{...co,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:co,borderTopRightRadius:co,borderBottomLeftRadius:co,borderBottomRightRadius:co,boxShadow:OT},Ox=["TopLeft","TopRight","BottomLeft","BottomRight"],UT=Ox.length,v_=e=>typeof e=="string"?parseFloat(e):e,y_=e=>typeof e=="number"||ct.test(e);function VT(e,i,s,r,a,l){a?(e.opacity=Ht(0,s.opacity!==void 0?s.opacity:1,jT(r)),e.opacityExit=Ht(i.opacity!==void 0?i.opacity:1,0,HT(r))):l&&(e.opacity=Ht(i.opacity!==void 0?i.opacity:1,s.opacity!==void 0?s.opacity:1,r));for(let h=0;h<UT;h++){const f=`border${Ox[h]}Radius`;let p=x_(i,f),m=x_(s,f);if(p===void 0&&m===void 0)continue;p||(p=0),m||(m=0),p===0||m===0||y_(p)===y_(m)?(e[f]=Math.max(Ht(v_(p),v_(m),r),0),(Ji.test(m)||Ji.test(p))&&(e[f]+="%")):e[f]=m}(i.rotate||s.rotate)&&(e.rotate=Ht(i.rotate||0,s.rotate||0,r))}function x_(e,i){return e[i]!==void 0?e[i]:e.borderRadius}const jT=Nx(0,.5,Lf),HT=Nx(.5,.95,re);function Nx(e,i,s){return r=>r<e?0:r>i?1:s(qo(e,i,r))}function w_(e,i){e.min=i.min,e.max=i.max}function fi(e,i){w_(e.x,i.x),w_(e.y,i.y)}function C_(e,i,s,r,a){return e-=i,e=su(e,1/s,r),a!==void 0&&(e=su(e,1/a,r)),e}function $T(e,i=0,s=1,r=.5,a,l=e,h=e){if(Ji.test(i)&&(i=parseFloat(i),i=Ht(h.min,h.max,i/100)-h.min),typeof i!="number")return;let f=Ht(l.min,l.max,r);e===l&&(f-=i),e.min=C_(e.min,i,s,f,a),e.max=C_(e.max,i,s,f,a)}function b_(e,i,[s,r,a],l,h){$T(e,i[s],i[r],i[a],i.scale,l,h)}const WT=["x","scaleX","originX"],GT=["y","scaleY","originY"];function S_(e,i,s,r){b_(e.x,i,WT,s?s.x:void 0,r?r.x:void 0),b_(e.y,i,GT,s?s.y:void 0,r?r.y:void 0)}function P_(e){return e.translate===0&&e.scale===1}function zx(e){return P_(e.x)&&P_(e.y)}function _d(e,i){return e.x.min===i.x.min&&e.x.max===i.x.max&&e.y.min===i.y.min&&e.y.max===i.y.max}function E_(e){return hi(e.x)/hi(e.y)}class XT{constructor(){this.members=[]}add(i){Uf(this.members,i),i.scheduleRender()}remove(i){if(Vf(this.members,i),i===this.prevLead&&(this.prevLead=void 0),i===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(i){const s=this.members.findIndex(a=>i===a);if(s===0)return!1;let r;for(let a=s;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){r=l;break}}return r?(this.promote(r),!0):!1}promote(i,s){const r=this.lead;if(i!==r&&(this.prevLead=r,this.lead=i,i.show(),r)){r.instance&&r.scheduleRender(),i.scheduleRender(),i.resumeFrom=r,s&&(i.resumeFrom.preserveOpacity=!0),r.snapshot&&(i.snapshot=r.snapshot,i.snapshot.latestValues=r.animationValues||r.latestValues),i.root&&i.root.isUpdating&&(i.isLayoutDirty=!0);const{crossfade:a}=i.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(i=>{const{options:s,resumingFrom:r}=i;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(i=>{i.instance&&i.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function T_(e,i,s){let r="";const a=e.x.translate/i.x,l=e.y.translate/i.y;if((a||l)&&(r=`translate3d(${a}px, ${l}px, 0) `),(i.x!==1||i.y!==1)&&(r+=`scale(${1/i.x}, ${1/i.y}) `),s){const{rotate:p,rotateX:m,rotateY:v}=s;p&&(r+=`rotate(${p}deg) `),m&&(r+=`rotateX(${m}deg) `),v&&(r+=`rotateY(${v}deg) `)}const h=e.x.scale*i.x,f=e.y.scale*i.y;return(h!==1||f!==1)&&(r+=`scale(${h}, ${f})`),r||"none"}const YT=(e,i)=>e.depth-i.depth;class ZT{constructor(){this.children=[],this.isDirty=!1}add(i){Uf(this.children,i),this.isDirty=!0}remove(i){Vf(this.children,i),this.isDirty=!0}forEach(i){this.isDirty&&this.children.sort(YT),this.isDirty=!1,this.children.forEach(i)}}function KT(e,i){const s=performance.now(),r=({timestamp:a})=>{const l=a-s;l>=i&&(Cs(r),e(l-i))};return zt.read(r,!0),()=>Cs(r)}function QT(e){window.MotionDebug&&window.MotionDebug.record(e)}function qT(e){return e instanceof SVGElement&&e.tagName!=="svg"}function JT(e,i,s){const r=Je(e)?e:Lr(e);return r.start(zf("",r,i,s)),r.animation}const A_=["","X","Y","Z"],k_=1e3;let tA=0;const Cn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Ux({attachResizeListener:e,defaultParent:i,measureScroll:s,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(h={},f=i==null?void 0:i()){this.id=tA++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{Cn.totalNodes=Cn.resolvedTargetDeltas=Cn.recalculatedProjection=0,this.nodes.forEach(sA),this.nodes.forEach(lA),this.nodes.forEach(uA),this.nodes.forEach(nA),QT(Cn)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new ZT)}addEventListener(h,f){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new jf),this.eventHandlers.get(h).add(f)}notifyListeners(h,...f){const p=this.eventHandlers.get(h);p&&p.notify(...f)}hasListeners(h){return this.eventHandlers.has(h)}mount(h,f=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=qT(h),this.instance=h;const{layoutId:p,layout:m,visualElement:v}=this.options;if(v&&!v.current&&v.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),f&&(m||p)&&(this.isLayoutDirty=!0),e){let w;const x=()=>this.root.updateBlockedByResize=!1;e(h,()=>{this.root.updateBlockedByResize=!0,w&&w(),w=KT(x,250),yl.hasAnimatedSinceResize&&(yl.hasAnimatedSinceResize=!1,this.nodes.forEach(R_))})}p&&this.root.registerSharedNode(p,this),this.options.animate!==!1&&v&&(p||m)&&this.addEventListener("didUpdate",({delta:w,hasLayoutChanged:x,hasRelativeTargetChanged:b,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||v.getDefaultTransition()||pA,{onLayoutAnimationStart:O,onLayoutAnimationComplete:A}=v.getProps(),P=!this.targetLayout||!_d(this.targetLayout,E)||b,k=!x&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||k||x&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(w,k);const D={...Ex(R,"layout"),onPlay:O,onComplete:A};(v.shouldReduceMotion||this.options.layoutRoot)&&(D.delay=0,D.type=!1),this.startAnimation(D)}else x||R_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Cs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(hA),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const w=this.path[v];w.shouldResetTransform=!0,w.updateScroll("snapshot"),w.options.layoutRoot&&w.willUpdate(!1)}const{layoutId:f,layout:p}=this.options;if(f===void 0&&!p)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),h&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(I_);return}this.isUpdating||this.nodes.forEach(oA),this.isUpdating=!1,this.nodes.forEach(aA),this.nodes.forEach(eA),this.nodes.forEach(iA),this.clearAllSnapshots();const f=performance.now();Vt.delta=qs(0,1e3/60,f-Vt.timestamp),Vt.timestamp=f,Vt.isProcessing=!0,Tr.update.process(Vt),Tr.preRender.process(Vt),Tr.render.process(Vt),Vt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(rA),this.sharedNodes.forEach(cA)}scheduleUpdateProjection(){zt.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){zt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ee(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h="measure"){let f=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(f=!1),f&&(this.scroll={animationId:this.root.animationId,phase:h,isRoot:r(this.instance),offset:s(this.instance)})}resetTransform(){if(!a)return;const h=this.isLayoutDirty||this.shouldResetTransform,f=this.projectionDelta&&!zx(this.projectionDelta),p=this.getTransformTemplate(),m=p?p(this.latestValues,""):void 0,v=m!==this.prevTransformTemplateValue;h&&(f||wn(this.latestValues)||v)&&(a(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const f=this.measurePageBox();let p=this.removeElementScroll(f);return h&&(p=this.removeTransform(p)),gA(p),{animationId:this.root.animationId,measuredBox:f,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:h}=this.options;if(!h)return ee();const f=h.measureViewportBox(),{scroll:p}=this.root;return p&&(Ms(f.x,p.offset.x),Ms(f.y,p.offset.y)),f}removeElementScroll(h){const f=ee();fi(f,h);for(let p=0;p<this.path.length;p++){const m=this.path[p],{scroll:v,options:w}=m;if(m!==this.root&&v&&w.layoutScroll){if(v.isRoot){fi(f,h);const{scroll:x}=this.root;x&&(Ms(f.x,-x.offset.x),Ms(f.y,-x.offset.y))}Ms(f.x,v.offset.x),Ms(f.y,v.offset.y)}}return f}applyTransform(h,f=!1){const p=ee();fi(p,h);for(let m=0;m<this.path.length;m++){const v=this.path[m];!f&&v.options.layoutScroll&&v.scroll&&v!==v.root&&yr(p,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),wn(v.latestValues)&&yr(p,v.latestValues)}return wn(this.latestValues)&&yr(p,this.latestValues),p}removeTransform(h){const f=ee();fi(f,h);for(let p=0;p<this.path.length;p++){const m=this.path[p];if(!m.instance||!wn(m.latestValues))continue;gd(m.latestValues)&&m.updateSnapshot();const v=ee(),w=m.measurePageBox();fi(v,w),S_(f,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,v)}return wn(this.latestValues)&&S_(f,this.latestValues),f}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options={...this.options,...h,crossfade:h.crossfade!==void 0?h.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Vt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){var f;const p=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=p.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=p.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=p.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==p;if(!(h||m&&this.isSharedProjectionDirty||this.isProjectionDirty||!((f=this.parent)===null||f===void 0)&&f.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:w,layoutId:x}=this.options;if(!(!this.layout||!(w||x))){if(this.resolvedRelativeTargetAt=Vt.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ee(),this.relativeTargetOrigin=ee(),Ro(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),fi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ee(),this.targetWithTransforms=ee()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),vT(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):fi(this.target,this.layout.layoutBox),Fx(this.target,this.targetDelta)):fi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ee(),this.relativeTargetOrigin=ee(),Ro(this.relativeTargetOrigin,this.target,b.target),fi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Cn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||gd(this.parent.latestValues)||Mx(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var h;const f=this.getLead(),p=!!this.resumingFrom||this!==f;let m=!0;if((this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty)&&(m=!1),p&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===Vt.timestamp&&(m=!1),m)return;const{layout:v,layoutId:w}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(v||w))return;fi(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,b=this.treeScale.y;TT(this.layoutCorrected,this.treeScale,this.path,p),f.layout&&!f.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(f.target=f.layout.layoutBox);const{target:E}=f;if(!E){this.projectionTransform&&(this.projectionDelta=vr(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=vr(),this.projectionDeltaWithTransform=vr());const R=this.projectionTransform;Io(this.projectionDelta,this.layoutCorrected,E,this.latestValues),this.projectionTransform=T_(this.projectionDelta,this.treeScale),(this.projectionTransform!==R||this.treeScale.x!==x||this.treeScale.y!==b)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E)),Cn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),h){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(h,f=!1){const p=this.snapshot,m=p?p.latestValues:{},v={...this.latestValues},w=vr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const x=ee(),b=p?p.source:void 0,E=this.layout?this.layout.source:void 0,R=b!==E,O=this.getStack(),A=!O||O.members.length<=1,P=!!(R&&!A&&this.options.crossfade===!0&&!this.path.some(fA));this.animationProgress=0;let k;this.mixTargetDelta=D=>{const B=D/1e3;D_(w.x,h.x,B),D_(w.y,h.y,B),this.setTargetDelta(w),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ro(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),dA(this.relativeTarget,this.relativeTargetOrigin,x,B),k&&_d(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=ee()),fi(k,this.relativeTarget)),R&&(this.animationValues=v,VT(v,m,this.latestValues,B,P,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=B},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Cs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=zt.update(()=>{yl.hasAnimatedSinceResize=!0,this.currentAnimation=JT(0,k_,{...h,onUpdate:f=>{this.mixTargetDelta(f),h.onUpdate&&h.onUpdate(f)},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(k_),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:f,target:p,layout:m,latestValues:v}=h;if(!(!f||!p||!m)){if(this!==h&&this.layout&&m&&Vx(this.options.animationType,this.layout.layoutBox,m.layoutBox)){p=this.target||ee();const w=hi(this.layout.layoutBox.x);p.x.min=h.target.x.min,p.x.max=p.x.min+w;const x=hi(this.layout.layoutBox.y);p.y.min=h.target.y.min,p.y.max=p.y.min+x}fi(f,p),yr(f,v),Io(this.projectionDeltaWithTransform,this.layoutCorrected,f,v)}}registerSharedNode(h,f){this.sharedNodes.has(h)||this.sharedNodes.set(h,new XT),this.sharedNodes.get(h).add(f);const m=f.options.initialPromotionConfig;f.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(f):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){var h;const{layoutId:f}=this.options;return f?((h=this.getStack())===null||h===void 0?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:f}=this.options;return f?(h=this.getStack())===null||h===void 0?void 0:h.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:f,preserveFollowOpacity:p}={}){const m=this.getStack();m&&m.promote(this,p),h&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetRotation(){const{visualElement:h}=this.options;if(!h)return;let f=!1;const{latestValues:p}=h;if((p.rotate||p.rotateX||p.rotateY||p.rotateZ)&&(f=!0),!f)return;const m={};for(let v=0;v<A_.length;v++){const w="rotate"+A_[v];p[w]&&(m[w]=p[w],h.setStaticValue(w,0))}h.render();for(const v in m)h.setStaticValue(v,m[v]);h.scheduleRender()}getProjectionStyles(h={}){var f,p;const m={};if(!this.instance||this.isSVG)return m;if(this.isVisible)m.visibility="";else return{visibility:"hidden"};const v=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,m.opacity="",m.pointerEvents=vl(h.pointerEvents)||"",m.transform=v?v(this.latestValues,""):"none",m;const w=this.getLead();if(!this.projectionDelta||!this.layout||!w.target){const R={};return this.options.layoutId&&(R.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,R.pointerEvents=vl(h.pointerEvents)||""),this.hasProjected&&!wn(this.latestValues)&&(R.transform=v?v({},""):"none",this.hasProjected=!1),R}const x=w.animationValues||w.latestValues;this.applyTransformsToTarget(),m.transform=T_(this.projectionDeltaWithTransform,this.treeScale,x),v&&(m.transform=v(x,m.transform));const{x:b,y:E}=this.projectionDelta;m.transformOrigin=`${b.origin*100}% ${E.origin*100}% 0`,w.animationValues?m.opacity=w===this?(p=(f=x.opacity)!==null&&f!==void 0?f:this.latestValues.opacity)!==null&&p!==void 0?p:1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:m.opacity=w===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const R in Kl){if(x[R]===void 0)continue;const{correct:O,applyTo:A}=Kl[R],P=m.transform==="none"?x[R]:O(x[R],w);if(A){const k=A.length;for(let D=0;D<k;D++)m[A[D]]=P}else m[R]=P}return this.options.layoutId&&(m.pointerEvents=w===this?vl(h.pointerEvents)||"":"none"),m}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>{var f;return(f=h.currentAnimation)===null||f===void 0?void 0:f.stop()}),this.root.nodes.forEach(I_),this.root.sharedNodes.clear()}}}function eA(e){e.updateLayout()}function iA(e){var i;const s=((i=e.resumeFrom)===null||i===void 0?void 0:i.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=e.layout,{animationType:l}=e.options,h=s.source!==e.layout.source;l==="size"?Yi(w=>{const x=h?s.measuredBox[w]:s.layoutBox[w],b=hi(x);x.min=r[w].min,x.max=x.min+b}):Vx(l,s.layoutBox,r)&&Yi(w=>{const x=h?s.measuredBox[w]:s.layoutBox[w],b=hi(r[w]);x.max=x.min+b,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[w].max=e.relativeTarget[w].min+b)});const f=vr();Io(f,r,s.layoutBox);const p=vr();h?Io(p,e.applyTransform(a,!0),s.measuredBox):Io(p,r,s.layoutBox);const m=!zx(f);let v=!1;if(!e.resumeFrom){const w=e.getClosestProjectingParent();if(w&&!w.resumeFrom){const{snapshot:x,layout:b}=w;if(x&&b){const E=ee();Ro(E,s.layoutBox,x.layoutBox);const R=ee();Ro(R,r,b.layoutBox),_d(E,R)||(v=!0),w.options.layoutRoot&&(e.relativeTarget=R,e.relativeTargetOrigin=E,e.relativeParent=w)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:s,delta:p,layoutDelta:f,hasLayoutChanged:m,hasRelativeTargetChanged:v})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function sA(e){Cn.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function nA(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function rA(e){e.clearSnapshot()}function I_(e){e.clearMeasurements()}function oA(e){e.isLayoutDirty=!1}function aA(e){const{visualElement:i}=e.options;i&&i.getProps().onBeforeLayoutMeasure&&i.notify("BeforeLayoutMeasure"),e.resetTransform()}function R_(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function lA(e){e.resolveTargetDelta()}function uA(e){e.calcProjection()}function hA(e){e.resetRotation()}function cA(e){e.removeLeadSnapshot()}function D_(e,i,s){e.translate=Ht(i.translate,0,s),e.scale=Ht(i.scale,1,s),e.origin=i.origin,e.originPoint=i.originPoint}function M_(e,i,s,r){e.min=Ht(i.min,s.min,r),e.max=Ht(i.max,s.max,r)}function dA(e,i,s,r){M_(e.x,i.x,s.x,r),M_(e.y,i.y,s.y,r)}function fA(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const pA={duration:.45,ease:[.4,0,.1,1]};function F_(e){e.min=Math.round(e.min),e.max=Math.round(e.max)}function gA(e){F_(e.x),F_(e.y)}function Vx(e,i,s){return e==="position"||e==="preserve-aspect"&&!fd(E_(i),E_(s),.2)}const mA=Ux({attachResizeListener:(e,i)=>ps(e,"resize",i),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),oc={current:void 0},jx=Ux({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!oc.current){const e=new mA({});e.mount(window),e.setOptions({layoutScroll:!0}),oc.current=e}return oc.current},resetTransform:(e,i)=>{e.style.transform=i!==void 0?i:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),_A={pan:{Feature:LT},drag:{Feature:FT,ProjectionNode:jx,MeasureLayout:Bx}},vA=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function yA(e){const i=vA.exec(e);if(!i)return[,];const[,s,r]=i;return[s,r]}function vd(e,i,s=1){const[r,a]=yA(e);if(!r)return;const l=window.getComputedStyle(i).getPropertyValue(r);return l?l.trim():rd(a)?vd(a,i,s+1):a}function xA(e,{...i},s){const r=e.current;if(!(r instanceof Element))return{target:i,transitionEnd:s};s&&(s={...s}),e.values.forEach(a=>{const l=a.get();if(!rd(l))return;const h=vd(l,r);h&&a.set(h)});for(const a in i){const l=i[a];if(!rd(l))continue;const h=vd(l,r);h&&(i[a]=h,s||(s={}),s[a]===void 0&&(s[a]=l))}return{target:i,transitionEnd:s}}const wA=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Hx=e=>wA.has(e),CA=e=>Object.keys(e).some(Hx),L_=e=>e===On||e===ct,B_=(e,i)=>parseFloat(e.split(", ")[i]),O_=(e,i)=>(s,{transform:r})=>{if(r==="none"||!r)return 0;const a=r.match(/^matrix3d\((.+)\)$/);if(a)return B_(a[1],i);{const l=r.match(/^matrix\((.+)\)$/);return l?B_(l[1],e):0}},bA=new Set(["x","y","z"]),SA=ra.filter(e=>!bA.has(e));function PA(e){const i=[];return SA.forEach(s=>{const r=e.getValue(s);r!==void 0&&(i.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),i.length&&e.render(),i}const N_={width:({x:e},{paddingLeft:i="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(i)-parseFloat(s),height:({y:e},{paddingTop:i="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(i)-parseFloat(s),top:(e,{top:i})=>parseFloat(i),left:(e,{left:i})=>parseFloat(i),bottom:({y:e},{top:i})=>parseFloat(i)+(e.max-e.min),right:({x:e},{left:i})=>parseFloat(i)+(e.max-e.min),x:O_(4,13),y:O_(5,14)},EA=(e,i,s)=>{const r=i.measureViewportBox(),a=i.current,l=getComputedStyle(a),{display:h}=l,f={};h==="none"&&i.setStaticValue("display",e.display||"block"),s.forEach(m=>{f[m]=N_[m](r,l)}),i.render();const p=i.measureViewportBox();return s.forEach(m=>{const v=i.getValue(m);v&&v.jump(f[m]),e[m]=N_[m](p,l)}),e},TA=(e,i,s={},r={})=>{i={...i},r={...r};const a=Object.keys(i).filter(Hx);let l=[],h=!1;const f=[];if(a.forEach(p=>{const m=e.getValue(p);if(!e.hasValue(p))return;let v=s[p],w=ho(v);const x=i[p];let b;if(ql(x)){const E=x.length,R=x[0]===null?1:0;v=x[R],w=ho(v);for(let O=R;O<E&&x[O]!==null;O++)b?Ff(ho(x[O])===b):b=ho(x[O])}else b=ho(x);if(w!==b)if(L_(w)&&L_(b)){const E=m.get();typeof E=="string"&&m.set(parseFloat(E)),typeof x=="string"?i[p]=parseFloat(x):Array.isArray(x)&&b===ct&&(i[p]=x.map(parseFloat))}else w!=null&&w.transform&&(b!=null&&b.transform)&&(v===0||x===0)?v===0?m.set(b.transform(v)):i[p]=w.transform(x):(h||(l=PA(e),h=!0),f.push(p),r[p]=r[p]!==void 0?r[p]:i[p],m.jump(x))}),f.length){const p=f.indexOf("height")>=0?window.pageYOffset:null,m=EA(i,e,f);return l.length&&l.forEach(([v,w])=>{e.getValue(v).set(w)}),e.render(),Ru&&p!==null&&window.scrollTo({top:p}),{target:m,transitionEnd:r}}else return{target:i,transitionEnd:r}};function AA(e,i,s,r){return CA(i)?TA(e,i,s,r):{target:i,transitionEnd:r}}const kA=(e,i,s,r)=>{const a=xA(e,i,r);return i=a.target,r=a.transitionEnd,AA(e,i,s,r)},yd={current:null},$x={current:!1};function IA(){if($x.current=!0,!!Ru)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),i=()=>yd.current=e.matches;e.addListener(i),i()}else yd.current=!1}function RA(e,i,s){const{willChange:r}=i;for(const a in i){const l=i[a],h=s[a];if(Je(l))e.addValue(a,l),iu(r)&&r.add(a);else if(Je(h))e.addValue(a,Lr(l,{owner:e})),iu(r)&&r.remove(a);else if(h!==l)if(e.hasValue(a)){const f=e.getValue(a);!f.hasAnimated&&f.set(l)}else{const f=e.getStaticValue(a);e.addValue(a,Lr(f!==void 0?f:l,{owner:e}))}}for(const a in s)i[a]===void 0&&e.removeValue(a);return i}const z_=new WeakMap,Wx=Object.keys(Ko),DA=Wx.length,U_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],MA=Sf.length;class FA{constructor({parent:i,props:s,presenceContext:r,reducedMotionConfig:a,visualState:l},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>zt.render(this.render,!1,!0);const{latestValues:f,renderState:p}=l;this.latestValues=f,this.baseTarget={...f},this.initialValues=s.initial?{...f}:{},this.renderState=p,this.parent=i,this.props=s,this.presenceContext=r,this.depth=i?i.depth+1:0,this.reducedMotionConfig=a,this.options=h,this.isControllingVariants=Mu(s),this.isVariantNode=k0(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(i&&i.current);const{willChange:m,...v}=this.scrapeMotionValuesFromProps(s,{});for(const w in v){const x=v[w];f[w]!==void 0&&Je(x)&&(x.set(f[w],!1),iu(m)&&m.add(w))}}scrapeMotionValuesFromProps(i,s){return{}}mount(i){this.current=i,z_.set(i,this),this.projection&&!this.projection.instance&&this.projection.mount(i),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,r)=>this.bindToMotionValue(r,s)),$x.current||IA(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:yd.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){z_.delete(this.current),this.projection&&this.projection.unmount(),Cs(this.notifyUpdate),Cs(this.render),this.valueSubscriptions.forEach(i=>i()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const i in this.events)this.events[i].clear();for(const i in this.features)this.features[i].unmount();this.current=null}bindToMotionValue(i,s){const r=Bn.has(i),a=s.on("change",h=>{this.latestValues[i]=h,this.props.onUpdate&&zt.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),l=s.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(i,()=>{a(),l()})}sortNodePosition(i){return!this.current||!this.sortInstanceNodePosition||this.type!==i.type?0:this.sortInstanceNodePosition(this.current,i.current)}loadFeatures({children:i,...s},r,a,l){let h,f;for(let p=0;p<DA;p++){const m=Wx[p],{isEnabled:v,Feature:w,ProjectionNode:x,MeasureLayout:b}=Ko[m];x&&(h=x),v(s)&&(!this.features[m]&&w&&(this.features[m]=new w(this)),b&&(f=b))}if(!this.projection&&h){this.projection=new h(this.latestValues,this.parent&&this.parent.projection);const{layoutId:p,layout:m,drag:v,dragConstraints:w,layoutScroll:x,layoutRoot:b}=s;this.projection.setOptions({layoutId:p,layout:m,alwaysMeasureLayout:!!v||w&&mr(w),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof m=="string"?m:"both",initialPromotionConfig:l,layoutScroll:x,layoutRoot:b})}return f}updateFeatures(){for(const i in this.features){const s=this.features[i];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ee()}getStaticValue(i){return this.latestValues[i]}setStaticValue(i,s){this.latestValues[i]=s}makeTargetAnimatable(i,s=!0){return this.makeTargetAnimatableFromInstance(i,this.props,s)}update(i,s){(i.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=i,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<U_.length;r++){const a=U_[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l=i["on"+a];l&&(this.propEventSubscriptions[a]=this.on(a,l))}this.prevMotionValues=RA(this,this.scrapeMotionValuesFromProps(i,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(i){return this.props.variants?this.props.variants[i]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(i=!1){if(i)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const s={};for(let r=0;r<MA;r++){const a=Sf[r],l=this.props[a];(Zo(l)||l===!1)&&(s[a]=l)}return s}addVariantChild(i){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(i),()=>s.variantChildren.delete(i)}addValue(i,s){s!==this.values.get(i)&&(this.removeValue(i),this.bindToMotionValue(i,s)),this.values.set(i,s),this.latestValues[i]=s.get()}removeValue(i){this.values.delete(i);const s=this.valueSubscriptions.get(i);s&&(s(),this.valueSubscriptions.delete(i)),delete this.latestValues[i],this.removeValueFromRenderState(i,this.renderState)}hasValue(i){return this.values.has(i)}getValue(i,s){if(this.props.values&&this.props.values[i])return this.props.values[i];let r=this.values.get(i);return r===void 0&&s!==void 0&&(r=Lr(s,{owner:this}),this.addValue(i,r)),r}readValue(i){return this.latestValues[i]!==void 0||!this.current?this.latestValues[i]:this.readValueFromInstance(this.current,i,this.options)}setBaseTarget(i,s){this.baseTarget[i]=s}getBaseTarget(i){var s;const{initial:r}=this.props,a=typeof r=="string"||typeof r=="object"?(s=Mf(this.props,r))===null||s===void 0?void 0:s[i]:void 0;if(r&&a!==void 0)return a;const l=this.getBaseTargetFromProps(this.props,i);return l!==void 0&&!Je(l)?l:this.initialValues[i]!==void 0&&a===void 0?void 0:this.baseTarget[i]}on(i,s){return this.events[i]||(this.events[i]=new jf),this.events[i].add(s)}notify(i,...s){this.events[i]&&this.events[i].notify(...s)}}class Gx extends FA{sortInstanceNodePosition(i,s){return i.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(i,s){return i.style?i.style[s]:void 0}removeValueFromRenderState(i,{vars:s,style:r}){delete s[i],delete r[i]}makeTargetAnimatableFromInstance({transition:i,transitionEnd:s,...r},{transformValues:a},l){let h=tT(r,i||{},this);if(a&&(s&&(s=a(s)),r&&(r=a(r)),h&&(h=a(h))),l){qE(this,r,h);const f=kA(this,r,h,s);s=f.transitionEnd,r=f.target}return{transition:i,transitionEnd:s,...r}}}function LA(e){return window.getComputedStyle(e)}class BA extends Gx{readValueFromInstance(i,s){if(Bn.has(s)){const r=Nf(s);return r&&r.default||0}else{const r=LA(i),a=(M0(s)?r.getPropertyValue(s):r[s])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(i,{transformPagePoint:s}){return Lx(i,s)}build(i,s,r,a){Tf(i,s,r,a.transformTemplate)}scrapeMotionValuesFromProps(i,s){return Df(i,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:i}=this.props;Je(i)&&(this.childSubscription=i.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}renderInstance(i,s,r,a){z0(i,s,r,a)}}class OA extends Gx{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(i,s){return i[s]}readValueFromInstance(i,s){if(Bn.has(s)){const r=Nf(s);return r&&r.default||0}return s=U0.has(s)?s:Rf(s),i.getAttribute(s)}measureInstanceViewportBox(){return ee()}scrapeMotionValuesFromProps(i,s){return j0(i,s)}build(i,s,r,a){kf(i,s,r,this.isSVGTag,a.transformTemplate)}renderInstance(i,s,r,a){V0(i,s,r,a)}mount(i){this.isSVGTag=If(i.tagName),super.mount(i)}}const NA=(e,i)=>Ef(e)?new OA(i,{enableHardwareAcceleration:!1}):new BA(i,{enableHardwareAcceleration:!0}),zA={layout:{ProjectionNode:jx,MeasureLayout:Bx}},UA={...pT,...LP,..._A,...zA},V_=HS((e,i)=>vP(e,i,UA,NA));function Xx(){const e=N.useRef(!1);return Zl(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function VA(){const e=Xx(),[i,s]=N.useState(0),r=N.useCallback(()=>{e.current&&s(i+1)},[i]);return[N.useCallback(()=>zt.postRender(r),[r]),i]}class jA extends N.Component{getSnapshotBeforeUpdate(i){const s=this.props.childRef.current;if(s&&i.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=s.offsetHeight||0,r.width=s.offsetWidth||0,r.top=s.offsetTop,r.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function HA({children:e,isPresent:i}){const s=N.useId(),r=N.useRef(null),a=N.useRef({width:0,height:0,top:0,left:0});return N.useInsertionEffect(()=>{const{width:l,height:h,top:f,left:p}=a.current;if(i||!r.current||!l||!h)return;r.current.dataset.motionPopId=s;const m=document.createElement("style");return document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${h}px !important;
            top: ${f}px !important;
            left: ${p}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[i]),N.createElement(jA,{isPresent:i,childRef:r,sizeRef:a},N.cloneElement(e,{ref:r}))}const ac=({children:e,initial:i,isPresent:s,onExitComplete:r,custom:a,presenceAffectsLayout:l,mode:h})=>{const f=H0($A),p=N.useId(),m=N.useMemo(()=>({id:p,initial:i,isPresent:s,custom:a,onExitComplete:v=>{f.set(v,!0);for(const w of f.values())if(!w)return;r&&r()},register:v=>(f.set(v,!1),()=>f.delete(v))}),l?void 0:[s]);return N.useMemo(()=>{f.forEach((v,w)=>f.set(w,!1))},[s]),N.useEffect(()=>{!s&&!f.size&&r&&r()},[s]),h==="popLayout"&&(e=N.createElement(HA,{isPresent:s},e)),N.createElement(Iu.Provider,{value:m},e)};function $A(){return new Map}function WA(e){return N.useEffect(()=>()=>e(),[])}const sr=e=>e.key||"";function GA(e,i){e.forEach(s=>{const r=sr(s);i.set(r,s)})}function XA(e){const i=[];return N.Children.forEach(e,s=>{N.isValidElement(s)&&i.push(s)}),i}const YA=({children:e,custom:i,initial:s=!0,onExitComplete:r,exitBeforeEnter:a,presenceAffectsLayout:l=!0,mode:h="sync"})=>{const f=N.useContext(Pf).forceRender||VA()[0],p=Xx(),m=XA(e);let v=m;const w=N.useRef(new Map).current,x=N.useRef(v),b=N.useRef(new Map).current,E=N.useRef(!0);if(Zl(()=>{E.current=!1,GA(m,b),x.current=v}),WA(()=>{E.current=!0,b.clear(),w.clear()}),E.current)return N.createElement(N.Fragment,null,v.map(P=>N.createElement(ac,{key:sr(P),isPresent:!0,initial:s?void 0:!1,presenceAffectsLayout:l,mode:h},P)));v=[...v];const R=x.current.map(sr),O=m.map(sr),A=R.length;for(let P=0;P<A;P++){const k=R[P];O.indexOf(k)===-1&&!w.has(k)&&w.set(k,void 0)}return h==="wait"&&w.size&&(v=[]),w.forEach((P,k)=>{if(O.indexOf(k)!==-1)return;const D=b.get(k);if(!D)return;const B=R.indexOf(k);let H=P;if(!H){const $=()=>{b.delete(k),w.delete(k);const G=x.current.findIndex(rt=>rt.key===k);if(x.current.splice(G,1),!w.size){if(x.current=m,p.current===!1)return;f(),r&&r()}};H=N.createElement(ac,{key:sr(D),isPresent:!1,onExitComplete:$,custom:i,presenceAffectsLayout:l,mode:h},D),w.set(k,H)}v.splice(B,0,H)}),v=v.map(P=>{const k=P.key;return w.has(k)?P:N.createElement(ac,{key:sr(P),isPresent:!0,presenceAffectsLayout:l,mode:h},P)}),N.createElement(N.Fragment,null,w.size?v:v.map(P=>N.cloneElement(P)))};let ZA={data:""},KA=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||ZA,QA=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,qA=/\/\*[^]*?\*\/|  +/g,j_=/\n+/g,Bs=(e,i)=>{let s="",r="",a="";for(let l in e){let h=e[l];l[0]=="@"?l[1]=="i"?s=l+" "+h+";":r+=l[1]=="f"?Bs(h,l):l+"{"+Bs(h,l[1]=="k"?"":i)+"}":typeof h=="object"?r+=Bs(h,i?i.replace(/([^,])+/g,f=>l.replace(/(^:.*)|([^,])+/g,p=>/&/.test(p)?p.replace(/&/g,f):f?f+" "+p:p)):l):h!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Bs.p?Bs.p(l,h):l+":"+h+";")}return s+(i&&a?i+"{"+a+"}":a)+r},ls={},Yx=e=>{if(typeof e=="object"){let i="";for(let s in e)i+=s+Yx(e[s]);return i}return e},JA=(e,i,s,r,a)=>{let l=Yx(e),h=ls[l]||(ls[l]=(p=>{let m=0,v=11;for(;m<p.length;)v=101*v+p.charCodeAt(m++)>>>0;return"go"+v})(l));if(!ls[h]){let p=l!==e?e:(m=>{let v,w,x=[{}];for(;v=QA.exec(m.replace(qA,""));)v[4]?x.shift():v[3]?(w=v[3].replace(j_," ").trim(),x.unshift(x[0][w]=x[0][w]||{})):x[0][v[1]]=v[2].replace(j_," ").trim();return x[0]})(e);ls[h]=Bs(a?{["@keyframes "+h]:p}:p,s?"":"."+h)}let f=s&&ls.g?ls.g:null;return s&&(ls.g=ls[h]),((p,m,v,w)=>{w?m.data=m.data.replace(w,p):m.data.indexOf(p)===-1&&(m.data=v?p+m.data:m.data+p)})(ls[h],i,r,f),h},t2=(e,i,s)=>e.reduce((r,a,l)=>{let h=i[l];if(h&&h.call){let f=h(s),p=f&&f.props&&f.props.className||/^go/.test(f)&&f;h=p?"."+p:f&&typeof f=="object"?f.props?"":Bs(f,""):f===!1?"":f}return r+a+(h??"")},"");function Nu(e){let i=this||{},s=e.call?e(i.p):e;return JA(s.unshift?s.raw?t2(s,[].slice.call(arguments,1),i.p):s.reduce((r,a)=>Object.assign(r,a&&a.call?a(i.p):a),{}):s,KA(i.target),i.g,i.o,i.k)}let Zx,xd,wd;Nu.bind({g:1});let bs=Nu.bind({k:1});function e2(e,i,s,r){Bs.p=i,Zx=e,xd=s,wd=r}function rn(e,i){let s=this||{};return function(){let r=arguments;function a(l,h){let f=Object.assign({},l),p=f.className||a.className;s.p=Object.assign({theme:xd&&xd()},f),s.o=/ *go\d+/.test(p),f.className=Nu.apply(s,r)+(p?" "+p:""),i&&(f.ref=h);let m=e;return e[0]&&(m=f.as||e,delete f.as),wd&&m[0]&&wd(f),Zx(m,f)}return i?i(a):a}}var i2=e=>typeof e=="function",nu=(e,i)=>i2(e)?e(i):e,s2=(()=>{let e=0;return()=>(++e).toString()})(),Kx=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let i=matchMedia("(prefers-reduced-motion: reduce)");e=!i||i.matches}return e}})(),n2=20,xl=new Map,r2=1e3,H_=e=>{if(xl.has(e))return;let i=setTimeout(()=>{xl.delete(e),Nn({type:4,toastId:e})},r2);xl.set(e,i)},o2=e=>{let i=xl.get(e);i&&clearTimeout(i)},Cd=(e,i)=>{switch(i.type){case 0:return{...e,toasts:[i.toast,...e.toasts].slice(0,n2)};case 1:return i.toast.id&&o2(i.toast.id),{...e,toasts:e.toasts.map(l=>l.id===i.toast.id?{...l,...i.toast}:l)};case 2:let{toast:s}=i;return e.toasts.find(l=>l.id===s.id)?Cd(e,{type:1,toast:s}):Cd(e,{type:0,toast:s});case 3:let{toastId:r}=i;return r?H_(r):e.toasts.forEach(l=>{H_(l.id)}),{...e,toasts:e.toasts.map(l=>l.id===r||r===void 0?{...l,visible:!1}:l)};case 4:return i.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(l=>l.id!==i.toastId)};case 5:return{...e,pausedAt:i.time};case 6:let a=i.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+a}))}}},wl=[],Cl={toasts:[],pausedAt:void 0},Nn=e=>{Cl=Cd(Cl,e),wl.forEach(i=>{i(Cl)})},a2={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},l2=(e={})=>{let[i,s]=N.useState(Cl);N.useEffect(()=>(wl.push(s),()=>{let a=wl.indexOf(s);a>-1&&wl.splice(a,1)}),[i]);let r=i.toasts.map(a=>{var l,h;return{...e,...e[a.type],...a,duration:a.duration||((l=e[a.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||a2[a.type],style:{...e.style,...(h=e[a.type])==null?void 0:h.style,...a.style}}});return{...i,toasts:r}},u2=(e,i="blank",s)=>({createdAt:Date.now(),visible:!0,type:i,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...s,id:(s==null?void 0:s.id)||s2()}),ua=e=>(i,s)=>{let r=u2(i,e,s);return Nn({type:2,toast:r}),r.id},ai=(e,i)=>ua("blank")(e,i);ai.error=ua("error");ai.success=ua("success");ai.loading=ua("loading");ai.custom=ua("custom");ai.dismiss=e=>{Nn({type:3,toastId:e})};ai.remove=e=>Nn({type:4,toastId:e});ai.promise=(e,i,s)=>{let r=ai.loading(i.loading,{...s,...s==null?void 0:s.loading});return e.then(a=>(ai.success(nu(i.success,a),{id:r,...s,...s==null?void 0:s.success}),a)).catch(a=>{ai.error(nu(i.error,a),{id:r,...s,...s==null?void 0:s.error})}),e};var h2=(e,i)=>{Nn({type:1,toast:{id:e,height:i}})},c2=()=>{Nn({type:5,time:Date.now()})},d2=e=>{let{toasts:i,pausedAt:s}=l2(e);N.useEffect(()=>{if(s)return;let l=Date.now(),h=i.map(f=>{if(f.duration===1/0)return;let p=(f.duration||0)+f.pauseDuration-(l-f.createdAt);if(p<0){f.visible&&ai.dismiss(f.id);return}return setTimeout(()=>ai.dismiss(f.id),p)});return()=>{h.forEach(f=>f&&clearTimeout(f))}},[i,s]);let r=N.useCallback(()=>{s&&Nn({type:6,time:Date.now()})},[s]),a=N.useCallback((l,h)=>{let{reverseOrder:f=!1,gutter:p=8,defaultPosition:m}=h||{},v=i.filter(b=>(b.position||m)===(l.position||m)&&b.height),w=v.findIndex(b=>b.id===l.id),x=v.filter((b,E)=>E<w&&b.visible).length;return v.filter(b=>b.visible).slice(...f?[x+1]:[0,x]).reduce((b,E)=>b+(E.height||0)+p,0)},[i]);return{toasts:i,handlers:{updateHeight:h2,startPause:c2,endPause:r,calculateOffset:a}}},f2=bs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,p2=bs`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,g2=bs`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,m2=rn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${f2} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${p2} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${g2} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,_2=bs`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,v2=rn("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${_2} 1s linear infinite;
`,y2=bs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,x2=bs`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,w2=rn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${y2} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${x2} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,C2=rn("div")`
  position: absolute;
`,b2=rn("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,S2=bs`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,P2=rn("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${S2} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,E2=({toast:e})=>{let{icon:i,type:s,iconTheme:r}=e;return i!==void 0?typeof i=="string"?N.createElement(P2,null,i):i:s==="blank"?null:N.createElement(b2,null,N.createElement(v2,{...r}),s!=="loading"&&N.createElement(C2,null,s==="error"?N.createElement(m2,{...r}):N.createElement(w2,{...r})))},T2=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,A2=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,k2="0%{opacity:0;} 100%{opacity:1;}",I2="0%{opacity:1;} 100%{opacity:0;}",R2=rn("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,D2=rn("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,M2=(e,i)=>{let s=e.includes("top")?1:-1,[r,a]=Kx()?[k2,I2]:[T2(s),A2(s)];return{animation:i?`${bs(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${bs(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},F2=N.memo(({toast:e,position:i,style:s,children:r})=>{let a=e.height?M2(e.position||i||"top-center",e.visible):{opacity:0},l=N.createElement(E2,{toast:e}),h=N.createElement(D2,{...e.ariaProps},nu(e.message,e));return N.createElement(R2,{className:e.className,style:{...a,...s,...e.style}},typeof r=="function"?r({icon:l,message:h}):N.createElement(N.Fragment,null,l,h))});e2(N.createElement);var L2=({id:e,className:i,style:s,onHeightUpdate:r,children:a})=>{let l=N.useCallback(h=>{if(h){let f=()=>{let p=h.getBoundingClientRect().height;r(e,p)};f(),new MutationObserver(f).observe(h,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return N.createElement("div",{ref:l,className:i,style:s},a)},B2=(e,i)=>{let s=e.includes("top"),r=s?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Kx()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${i*(s?1:-1)}px)`,...r,...a}},O2=Nu`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,sl=16,N2=({reverseOrder:e,position:i="top-center",toastOptions:s,gutter:r,children:a,containerStyle:l,containerClassName:h})=>{let{toasts:f,handlers:p}=d2(s);return N.createElement("div",{style:{position:"fixed",zIndex:9999,top:sl,left:sl,right:sl,bottom:sl,pointerEvents:"none",...l},className:h,onMouseEnter:p.startPause,onMouseLeave:p.endPause},f.map(m=>{let v=m.position||i,w=p.calculateOffset(m,{reverseOrder:e,gutter:r,defaultPosition:i}),x=B2(v,w);return N.createElement(L2,{id:m.id,key:m.id,onHeightUpdate:p.updateHeight,className:m.visible?O2:"",style:x},m.type==="custom"?nu(m.message,m):a?a(m):N.createElement(F2,{toast:m,position:v}))}))},Gk=ai;function z2(){if(console&&console.warn){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];typeof i[0]=="string"&&(i[0]=`react-i18next:: ${i[0]}`),console.warn(...i)}}const $_={};function bd(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];typeof i[0]=="string"&&$_[i[0]]||(typeof i[0]=="string"&&($_[i[0]]=new Date),z2(...i))}const Qx=(e,i)=>()=>{if(e.isInitialized)i();else{const s=()=>{setTimeout(()=>{e.off("initialized",s)},0),i()};e.on("initialized",s)}};function W_(e,i,s){e.loadNamespaces(i,Qx(e,s))}function G_(e,i,s,r){typeof s=="string"&&(s=[s]),s.forEach(a=>{e.options.ns.indexOf(a)<0&&e.options.ns.push(a)}),e.loadLanguages(i,Qx(e,r))}function U2(e,i){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=i.languages[0],a=i.options?i.options.fallbackLng:!1,l=i.languages[i.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const h=(f,p)=>{const m=i.services.backendConnector.state[`${f}|${p}`];return m===-1||m===2};return s.bindI18n&&s.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!h(i.isLanguageChangingTo,e)?!1:!!(i.hasResourceBundle(r,e)||!i.services.backendConnector.backend||i.options.resources&&!i.options.partialBundledLanguages||h(r,e)&&(!a||h(l,e)))}function V2(e,i){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!i.languages||!i.languages.length?(bd("i18n.languages were undefined or empty",i.languages),!0):i.options.ignoreJSONStructure!==void 0?i.hasLoadedNamespace(e,{lng:s.lng,precheck:(a,l)=>{if(s.bindI18n&&s.bindI18n.indexOf("languageChanging")>-1&&a.services.backendConnector.backend&&a.isLanguageChangingTo&&!l(a.isLanguageChangingTo,e))return!1}}):U2(e,i,s)}const j2=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,H2={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},$2=e=>H2[e],W2=e=>e.replace(j2,$2);let Sd={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:W2};function G2(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Sd={...Sd,...e}}function X2(){return Sd}let qx;function Y2(e){qx=e}function Z2(){return qx}const K2={type:"3rdParty",init(e){G2(e.options.react),Y2(e)}},Q2=N.createContext();class q2{constructor(){this.usedNamespaces={}}addUsedNamespaces(i){i.forEach(s=>{this.usedNamespaces[s]||(this.usedNamespaces[s]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const J2=(e,i)=>{const s=N.useRef();return N.useEffect(()=>{s.current=i?s.current:e},[e,i]),s.current};function tk(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:s}=i,{i18n:r,defaultNS:a}=N.useContext(Q2)||{},l=s||r||Z2();if(l&&!l.reportNamespaces&&(l.reportNamespaces=new q2),!l){bd("You will need to pass in an i18next instance by using initReactI18next");const k=(B,H)=>typeof H=="string"?H:H&&typeof H=="object"&&typeof H.defaultValue=="string"?H.defaultValue:Array.isArray(B)?B[B.length-1]:B,D=[k,{},!1];return D.t=k,D.i18n={},D.ready=!1,D}l.options.react&&l.options.react.wait!==void 0&&bd("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const h={...X2(),...l.options.react,...i},{useSuspense:f,keyPrefix:p}=h;let m=e||a||l.options&&l.options.defaultNS;m=typeof m=="string"?[m]:m||["translation"],l.reportNamespaces.addUsedNamespaces&&l.reportNamespaces.addUsedNamespaces(m);const v=(l.isInitialized||l.initializedStoreOnce)&&m.every(k=>V2(k,l,h));function w(){return l.getFixedT(i.lng||null,h.nsMode==="fallback"?m:m[0],p)}const[x,b]=N.useState(w);let E=m.join();i.lng&&(E=`${i.lng}${E}`);const R=J2(E),O=N.useRef(!0);N.useEffect(()=>{const{bindI18n:k,bindI18nStore:D}=h;O.current=!0,!v&&!f&&(i.lng?G_(l,i.lng,m,()=>{O.current&&b(w)}):W_(l,m,()=>{O.current&&b(w)})),v&&R&&R!==E&&O.current&&b(w);function B(){O.current&&b(w)}return k&&l&&l.on(k,B),D&&l&&l.store.on(D,B),()=>{O.current=!1,k&&l&&k.split(" ").forEach(H=>l.off(H,B)),D&&l&&D.split(" ").forEach(H=>l.store.off(H,B))}},[l,E]);const A=N.useRef(!0);N.useEffect(()=>{O.current&&!A.current&&b(w),A.current=!1},[l,p]);const P=[x,l,v];if(P.t=x,P.i18n=l,P.ready=v,v||!v&&!f)return P;throw new Promise(k=>{i.lng?G_(l,i.lng,m,()=>k()):W_(l,m,()=>k())})}let Ie=[],zr=(e,i)=>{let s=[],r={get(){return r.lc||r.listen(()=>{})(),r.value},l:i||0,lc:0,listen(a,l){return r.lc=s.push(a,l||r.l)/2,()=>{let h=s.indexOf(a);~h&&(s.splice(h,2),r.lc--,r.lc||r.off())}},notify(a){let l=!Ie.length;for(let h=0;h<s.length;h+=2)Ie.push(s[h],r.value,a,s[h+1]);if(l){for(let h=0;h<Ie.length;h+=4){let f=!1;for(let p=h+7;p<Ie.length;p+=4)if(Ie[p]<Ie[h+3]){f=!0;break}f?Ie.push(Ie[h],Ie[h+1],Ie[h+2],Ie[h+3]):Ie[h](Ie[h+1],Ie[h+2])}Ie.length=0}},off(){},set(a){r.value!==a&&(r.value=a,r.notify())},subscribe(a,l){let h=r.listen(a,l);return a(r.value),h},value:e};return r};function ek(e,i,s){let r=new Set([...i,void 0]);return e.listen((a,l)=>{r.has(l)&&s(a,l)})}function ik(e,i={}){let s=N.useCallback(a=>i.keys?ek(e,i.keys,a):e.listen(a),[i.keys,e]),r=e.get.bind(e);return N.useSyncExternalStore(s,r,r)}/*!
 * excalibur - 0.28.0 - 2023-8-10
 * https://github.com/excaliburjs/Excalibur
 * Copyright (c) 2023 Excalibur.js <https://github.com/excaliburjs/Excalibur/graphs/contributors>
 * Licensed BSD-2-Clause
 * @preserve
 */var sk={4662:(e,i,s)=>{s(3430);var r=s(8791);e.exports=r("Array","sort")},8343:(e,i,s)=>{s(4769);var r=s(9276);e.exports=r.Object.keys},7111:(e,i,s)=>{var r=s(6733),a=s(9821),l=TypeError;e.exports=function(h){if(r(h))return h;throw l(a(h)+" is not a function")}},1176:(e,i,s)=>{var r=s(5052),a=String,l=TypeError;e.exports=function(h){if(r(h))return h;throw l(a(h)+" is not an object")}},9540:(e,i,s)=>{var r=s(905),a=s(3231),l=s(9646),h=function(f){return function(p,m,v){var w=r(p),x=l(w),b=a(v,x),E;if(f&&m!=m){for(;x>b;)if(E=w[b++],E!=E)return!0}else for(;x>b;b++)if((f||b in w)&&w[b]===m)return f||b||0;return!f&&-1}};e.exports={includes:h(!0),indexOf:h(!1)}},6038:(e,i,s)=>{var r=s(4229);e.exports=function(a,l){var h=[][a];return!!h&&r(function(){h.call(null,l||function(){return 1},1)})}},9794:(e,i,s)=>{var r=s(3231),a=s(9646),l=s(2324),h=Array,f=Math.max;e.exports=function(p,m,v){for(var w=a(p),x=r(m,w),b=r(v===void 0?w:v,w),E=h(f(b-x,0)),R=0;x<b;x++,R++)l(E,R,p[x]);return E.length=R,E}},3867:(e,i,s)=>{var r=s(9794),a=Math.floor,l=function(p,m){var v=p.length,w=a(v/2);return v<8?h(p,m):f(p,l(r(p,0,w),m),l(r(p,w),m),m)},h=function(p,m){for(var v=p.length,w=1,x,b;w<v;){for(b=w,x=p[w];b&&m(p[b-1],x)>0;)p[b]=p[--b];b!==w++&&(p[b]=x)}return p},f=function(p,m,v,w){for(var x=m.length,b=v.length,E=0,R=0;E<x||R<b;)p[E+R]=E<x&&R<b?w(m[E],v[R])<=0?m[E++]:v[R++]:E<x?m[E++]:v[R++];return p};e.exports=l},7079:(e,i,s)=>{var r=s(5968),a=r({}.toString),l=r("".slice);e.exports=function(h){return l(a(h),8,-1)}},1589:(e,i,s)=>{var r=s(1601),a=s(6733),l=s(7079),h=s(95),f=h("toStringTag"),p=Object,m=l(function(){return arguments}())=="Arguments",v=function(w,x){try{return w[x]}catch{}};e.exports=r?l:function(w){var x,b,E;return w===void 0?"Undefined":w===null?"Null":typeof(b=v(x=p(w),f))=="string"?b:m?l(x):(E=l(x))=="Object"&&a(x.callee)?"Arguments":E}},7081:(e,i,s)=>{var r=s(8270),a=s(4826),l=s(7933),h=s(1787);e.exports=function(f,p,m){for(var v=a(p),w=h.f,x=l.f,b=0;b<v.length;b++){var E=v[b];!r(f,E)&&!(m&&r(m,E))&&w(f,E,x(p,E))}}},5762:(e,i,s)=>{var r=s(7400),a=s(1787),l=s(5358);e.exports=r?function(h,f,p){return a.f(h,f,l(1,p))}:function(h,f,p){return h[f]=p,h}},5358:e=>{e.exports=function(i,s){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:s}}},2324:(e,i,s)=>{var r=s(9310),a=s(1787),l=s(5358);e.exports=function(h,f,p){var m=r(f);m in h?a.f(h,m,l(0,p)):h[m]=p}},4768:(e,i,s)=>{var r=s(6733),a=s(1787),l=s(6039),h=s(8400);e.exports=function(f,p,m,v){v||(v={});var w=v.enumerable,x=v.name!==void 0?v.name:p;if(r(m)&&l(m,x,v),v.global)w?f[p]=m:h(p,m);else{try{v.unsafe?f[p]&&(w=!0):delete f[p]}catch{}w?f[p]=m:a.f(f,p,{value:m,enumerable:!1,configurable:!v.nonConfigurable,writable:!v.nonWritable})}return f}},8400:(e,i,s)=>{var r=s(9859),a=Object.defineProperty;e.exports=function(l,h){try{a(r,l,{value:h,configurable:!0,writable:!0})}catch{r[l]=h}return h}},9563:(e,i,s)=>{var r=s(9821),a=TypeError;e.exports=function(l,h){if(!delete l[h])throw a("Cannot delete property "+r(h)+" of "+r(l))}},7400:(e,i,s)=>{var r=s(4229);e.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},3777:e=>{var i=typeof document=="object"&&document.all,s=typeof i>"u"&&i!==void 0;e.exports={all:i,IS_HTMLDDA:s}},2635:(e,i,s)=>{var r=s(9859),a=s(5052),l=r.document,h=a(l)&&a(l.createElement);e.exports=function(f){return h?l.createElement(f):{}}},2671:(e,i,s)=>{var r=s(598),a=r.match(/firefox\/(\d+)/i);e.exports=!!a&&+a[1]},8506:(e,i,s)=>{var r=s(598);e.exports=/MSIE|Trident/.test(r)},598:e=>{e.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},5884:(e,i,s)=>{var r=s(9859),a=s(598),l=r.process,h=r.Deno,f=l&&l.versions||h&&h.version,p=f&&f.v8,m,v;p&&(m=p.split("."),v=m[0]>0&&m[0]<4?1:+(m[0]+m[1])),!v&&a&&(m=a.match(/Edge\/(\d+)/),(!m||m[1]>=74)&&(m=a.match(/Chrome\/(\d+)/),m&&(v=+m[1]))),e.exports=v},9811:(e,i,s)=>{var r=s(598),a=r.match(/AppleWebKit\/(\d+)\./);e.exports=!!a&&+a[1]},8791:(e,i,s)=>{var r=s(9859),a=s(5968);e.exports=function(l,h){return a(r[l].prototype[h])}},3837:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3103:(e,i,s)=>{var r=s(9859),a=s(7933).f,l=s(5762),h=s(4768),f=s(8400),p=s(7081),m=s(6541);e.exports=function(v,w){var x=v.target,b=v.global,E=v.stat,R,O,A,P,k,D;if(b?O=r:E?O=r[x]||f(x,{}):O=(r[x]||{}).prototype,O)for(A in w){if(k=w[A],v.dontCallGetSet?(D=a(O,A),P=D&&D.value):P=O[A],R=m(b?A:x+(E?".":"#")+A,v.forced),!R&&P!==void 0){if(typeof k==typeof P)continue;p(k,P)}(v.sham||P&&P.sham)&&l(k,"sham",!0),h(O,A,k,v)}}},4229:e=>{e.exports=function(i){try{return!!i()}catch{return!0}}},7188:(e,i,s)=>{var r=s(4229);e.exports=!r(function(){var a=function(){}.bind();return typeof a!="function"||a.hasOwnProperty("prototype")})},266:(e,i,s)=>{var r=s(7188),a=Function.prototype.call;e.exports=r?a.bind(a):function(){return a.apply(a,arguments)}},1805:(e,i,s)=>{var r=s(7400),a=s(8270),l=Function.prototype,h=r&&Object.getOwnPropertyDescriptor,f=a(l,"name"),p=f&&function(){}.name==="something",m=f&&(!r||r&&h(l,"name").configurable);e.exports={EXISTS:f,PROPER:p,CONFIGURABLE:m}},5968:(e,i,s)=>{var r=s(7188),a=Function.prototype,l=a.call,h=r&&a.bind.bind(l,l);e.exports=r?h:function(f){return function(){return l.apply(f,arguments)}}},1333:(e,i,s)=>{var r=s(9859),a=s(6733),l=function(h){return a(h)?h:void 0};e.exports=function(h,f){return arguments.length<2?l(r[h]):r[h]&&r[h][f]}},5300:(e,i,s)=>{var r=s(7111),a=s(9650);e.exports=function(l,h){var f=l[h];return a(f)?void 0:r(f)}},9859:function(e,i,s){var r=function(a){return a&&a.Math==Math&&a};e.exports=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof s.g=="object"&&s.g)||function(){return this}()||this||Function("return this")()},8270:(e,i,s)=>{var r=s(5968),a=s(2991),l=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(f,p){return l(a(f),p)}},5977:e=>{e.exports={}},4394:(e,i,s)=>{var r=s(7400),a=s(4229),l=s(2635);e.exports=!r&&!a(function(){return Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a!=7})},9337:(e,i,s)=>{var r=s(5968),a=s(4229),l=s(7079),h=Object,f=r("".split);e.exports=a(function(){return!h("z").propertyIsEnumerable(0)})?function(p){return l(p)=="String"?f(p,""):h(p)}:h},8511:(e,i,s)=>{var r=s(5968),a=s(6733),l=s(5353),h=r(Function.toString);a(l.inspectSource)||(l.inspectSource=function(f){return h(f)}),e.exports=l.inspectSource},6407:(e,i,s)=>{var r=s(1180),a=s(9859),l=s(5052),h=s(5762),f=s(8270),p=s(5353),m=s(4399),v=s(5977),w="Object already initialized",x=a.TypeError,b=a.WeakMap,E,R,O,A=function(B){return O(B)?R(B):E(B,{})},P=function(B){return function(H){var $;if(!l(H)||($=R(H)).type!==B)throw x("Incompatible receiver, "+B+" required");return $}};if(r||p.state){var k=p.state||(p.state=new b);k.get=k.get,k.has=k.has,k.set=k.set,E=function(B,H){if(k.has(B))throw x(w);return H.facade=B,k.set(B,H),H},R=function(B){return k.get(B)||{}},O=function(B){return k.has(B)}}else{var D=m("state");v[D]=!0,E=function(B,H){if(f(B,D))throw x(w);return H.facade=B,h(B,D,H),H},R=function(B){return f(B,D)?B[D]:{}},O=function(B){return f(B,D)}}e.exports={set:E,get:R,has:O,enforce:A,getterFor:P}},6733:(e,i,s)=>{var r=s(3777),a=r.all;e.exports=r.IS_HTMLDDA?function(l){return typeof l=="function"||l===a}:function(l){return typeof l=="function"}},6541:(e,i,s)=>{var r=s(4229),a=s(6733),l=/#|\.prototype\./,h=function(w,x){var b=p[f(w)];return b==v?!0:b==m?!1:a(x)?r(x):!!x},f=h.normalize=function(w){return String(w).replace(l,".").toLowerCase()},p=h.data={},m=h.NATIVE="N",v=h.POLYFILL="P";e.exports=h},9650:e=>{e.exports=function(i){return i==null}},5052:(e,i,s)=>{var r=s(6733),a=s(3777),l=a.all;e.exports=a.IS_HTMLDDA?function(h){return typeof h=="object"?h!==null:r(h)||h===l}:function(h){return typeof h=="object"?h!==null:r(h)}},4231:e=>{e.exports=!1},9395:(e,i,s)=>{var r=s(1333),a=s(6733),l=s(1321),h=s(6969),f=Object;e.exports=h?function(p){return typeof p=="symbol"}:function(p){var m=r("Symbol");return a(m)&&l(m.prototype,f(p))}},9646:(e,i,s)=>{var r=s(4237);e.exports=function(a){return r(a.length)}},6039:(e,i,s)=>{var r=s(5968),a=s(4229),l=s(6733),h=s(8270),f=s(7400),p=s(1805).CONFIGURABLE,m=s(8511),v=s(6407),w=v.enforce,x=v.get,b=String,E=Object.defineProperty,R=r("".slice),O=r("".replace),A=r([].join),P=f&&!a(function(){return E(function(){},"length",{value:8}).length!==8}),k=String(String).split("String"),D=e.exports=function(B,H,$){R(b(H),0,7)==="Symbol("&&(H="["+O(b(H),/^Symbol\(([^)]*)\)/,"$1")+"]"),$&&$.getter&&(H="get "+H),$&&$.setter&&(H="set "+H),(!h(B,"name")||p&&B.name!==H)&&(f?E(B,"name",{value:H,configurable:!0}):B.name=H),P&&$&&h($,"arity")&&B.length!==$.arity&&E(B,"length",{value:$.arity});try{$&&h($,"constructor")&&$.constructor?f&&E(B,"prototype",{writable:!1}):B.prototype&&(B.prototype=void 0)}catch{}var G=w(B);return h(G,"source")||(G.source=A(k,typeof H=="string"?H:"")),B};Function.prototype.toString=D(function(){return l(this)&&x(this).source||m(this)},"toString")},917:e=>{var i=Math.ceil,s=Math.floor;e.exports=Math.trunc||function(a){var l=+a;return(l>0?s:i)(l)}},1787:(e,i,s)=>{var r=s(7400),a=s(4394),l=s(7137),h=s(1176),f=s(9310),p=TypeError,m=Object.defineProperty,v=Object.getOwnPropertyDescriptor,w="enumerable",x="configurable",b="writable";i.f=r?l?function(R,O,A){if(h(R),O=f(O),h(A),typeof R=="function"&&O==="prototype"&&"value"in A&&b in A&&!A[b]){var P=v(R,O);P&&P[b]&&(R[O]=A.value,A={configurable:x in A?A[x]:P[x],enumerable:w in A?A[w]:P[w],writable:!1})}return m(R,O,A)}:m:function(R,O,A){if(h(R),O=f(O),h(A),a)try{return m(R,O,A)}catch{}if("get"in A||"set"in A)throw p("Accessors not supported");return"value"in A&&(R[O]=A.value),R}},7933:(e,i,s)=>{var r=s(7400),a=s(266),l=s(9195),h=s(5358),f=s(905),p=s(9310),m=s(8270),v=s(4394),w=Object.getOwnPropertyDescriptor;i.f=r?w:function(b,E){if(b=f(b),E=p(E),v)try{return w(b,E)}catch{}if(m(b,E))return h(!a(l.f,b,E),b[E])}},8151:(e,i,s)=>{var r=s(140),a=s(3837),l=a.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(f){return r(f,l)}},894:(e,i)=>{i.f=Object.getOwnPropertySymbols},1321:(e,i,s)=>{var r=s(5968);e.exports=r({}.isPrototypeOf)},140:(e,i,s)=>{var r=s(5968),a=s(8270),l=s(905),h=s(9540).indexOf,f=s(5977),p=r([].push);e.exports=function(m,v){var w=l(m),x=0,b=[],E;for(E in w)!a(f,E)&&a(w,E)&&p(b,E);for(;v.length>x;)a(w,E=v[x++])&&(~h(b,E)||p(b,E));return b}},5632:(e,i,s)=>{var r=s(140),a=s(3837);e.exports=Object.keys||function(h){return r(h,a)}},9195:(e,i)=>{var s={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!s.call({1:2},1);i.f=a?function(h){var f=r(this,h);return!!f&&f.enumerable}:s},2914:(e,i,s)=>{var r=s(266),a=s(6733),l=s(5052),h=TypeError;e.exports=function(f,p){var m,v;if(p==="string"&&a(m=f.toString)&&!l(v=r(m,f))||a(m=f.valueOf)&&!l(v=r(m,f))||p!=="string"&&a(m=f.toString)&&!l(v=r(m,f)))return v;throw h("Can't convert object to primitive value")}},4826:(e,i,s)=>{var r=s(1333),a=s(5968),l=s(8151),h=s(894),f=s(1176),p=a([].concat);e.exports=r("Reflect","ownKeys")||function(v){var w=l.f(f(v)),x=h.f;return x?p(w,x(v)):w}},9276:(e,i,s)=>{var r=s(9859);e.exports=r},8885:(e,i,s)=>{var r=s(9650),a=TypeError;e.exports=function(l){if(r(l))throw a("Can't call method on "+l);return l}},4399:(e,i,s)=>{var r=s(3036),a=s(1441),l=r("keys");e.exports=function(h){return l[h]||(l[h]=a(h))}},5353:(e,i,s)=>{var r=s(9859),a=s(8400),l="__core-js_shared__",h=r[l]||a(l,{});e.exports=h},3036:(e,i,s)=>{var r=s(4231),a=s(5353);(e.exports=function(l,h){return a[l]||(a[l]=h!==void 0?h:{})})("versions",[]).push({version:"3.32.0",mode:r?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.0/LICENSE",source:"https://github.com/zloirock/core-js"})},4860:(e,i,s)=>{var r=s(5884),a=s(4229),l=s(9859),h=l.String;e.exports=!!Object.getOwnPropertySymbols&&!a(function(){var f=Symbol();return!h(f)||!(Object(f)instanceof Symbol)||!Symbol.sham&&r&&r<41})},3231:(e,i,s)=>{var r=s(3329),a=Math.max,l=Math.min;e.exports=function(h,f){var p=r(h);return p<0?a(p+f,0):l(p,f)}},905:(e,i,s)=>{var r=s(9337),a=s(8885);e.exports=function(l){return r(a(l))}},3329:(e,i,s)=>{var r=s(917);e.exports=function(a){var l=+a;return l!==l||l===0?0:r(l)}},4237:(e,i,s)=>{var r=s(3329),a=Math.min;e.exports=function(l){return l>0?a(r(l),9007199254740991):0}},2991:(e,i,s)=>{var r=s(8885),a=Object;e.exports=function(l){return a(r(l))}},2066:(e,i,s)=>{var r=s(266),a=s(5052),l=s(9395),h=s(5300),f=s(2914),p=s(95),m=TypeError,v=p("toPrimitive");e.exports=function(w,x){if(!a(w)||l(w))return w;var b=h(w,v),E;if(b){if(x===void 0&&(x="default"),E=r(b,w,x),!a(E)||l(E))return E;throw m("Can't convert object to primitive value")}return x===void 0&&(x="number"),f(w,x)}},9310:(e,i,s)=>{var r=s(2066),a=s(9395);e.exports=function(l){var h=r(l,"string");return a(h)?h:h+""}},1601:(e,i,s)=>{var r=s(95),a=r("toStringTag"),l={};l[a]="z",e.exports=String(l)==="[object z]"},3326:(e,i,s)=>{var r=s(1589),a=String;e.exports=function(l){if(r(l)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return a(l)}},9821:e=>{var i=String;e.exports=function(s){try{return i(s)}catch{return"Object"}}},1441:(e,i,s)=>{var r=s(5968),a=0,l=Math.random(),h=r(1 .toString);e.exports=function(f){return"Symbol("+(f===void 0?"":f)+")_"+h(++a+l,36)}},6969:(e,i,s)=>{var r=s(4860);e.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},7137:(e,i,s)=>{var r=s(7400),a=s(4229);e.exports=r&&a(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},1180:(e,i,s)=>{var r=s(9859),a=s(6733),l=r.WeakMap;e.exports=a(l)&&/native code/.test(String(l))},95:(e,i,s)=>{var r=s(9859),a=s(3036),l=s(8270),h=s(1441),f=s(4860),p=s(6969),m=r.Symbol,v=a("wks"),w=p?m.for||m:m&&m.withoutSetter||h;e.exports=function(x){return l(v,x)||(v[x]=f&&l(m,x)?m[x]:w("Symbol."+x)),v[x]}},3430:(e,i,s)=>{var r=s(3103),a=s(5968),l=s(7111),h=s(2991),f=s(9646),p=s(9563),m=s(3326),v=s(4229),w=s(3867),x=s(6038),b=s(2671),E=s(8506),R=s(5884),O=s(9811),A=[],P=a(A.sort),k=a(A.push),D=v(function(){A.sort(void 0)}),B=v(function(){A.sort(null)}),H=x("sort"),$=!v(function(){if(R)return R<70;if(!(b&&b>3)){if(E)return!0;if(O)return O<603;var it="",mt,_t,bt,ft;for(mt=65;mt<76;mt++){switch(_t=String.fromCharCode(mt),mt){case 66:case 69:case 70:case 72:bt=3;break;case 68:case 71:bt=4;break;default:bt=2}for(ft=0;ft<47;ft++)A.push({k:_t+ft,v:bt})}for(A.sort(function(vt,St){return St.v-vt.v}),ft=0;ft<A.length;ft++)_t=A[ft].k.charAt(0),it.charAt(it.length-1)!==_t&&(it+=_t);return it!=="DGBEFHACIJK"}}),G=D||!B||!H||!$,rt=function(it){return function(mt,_t){return _t===void 0?-1:mt===void 0?1:it!==void 0?+it(mt,_t)||0:m(mt)>m(_t)?1:-1}};r({target:"Array",proto:!0,forced:G},{sort:function(mt){mt!==void 0&&l(mt);var _t=h(this);if($)return mt===void 0?P(_t):P(_t,mt);var bt=[],ft=f(_t),vt,St;for(St=0;St<ft;St++)St in _t&&k(bt,_t[St]);for(w(bt,rt(mt)),vt=f(bt),St=0;St<vt;)_t[St]=bt[St++];for(;St<ft;)p(_t,St++);return _t}})},4769:(e,i,s)=>{var r=s(3103),a=s(2991),l=s(5632),h=s(4229),f=h(function(){l(1)});r({target:"Object",stat:!0,forced:f},{keys:function(m){return l(a(m))}})},1388:(e,i,s)=>{s.d(i,{Z:()=>p});var r=s(272),a=s.n(r),l=s(2609),h=s.n(l),f=h()(a());f.push([e.id,`/* Buttons styles start */

button#excalibur-play {
  display: inline-block;
  position: relative;
  z-index: 999;
  border-radius: 6px;
  border: none;
  /*border: 3px solid;
    border-color: white;
    box-shadow: 0 0 10px #ccc;*/
  padding: 1rem 1.5rem 1rem 4rem;
  margin: 0;
  text-decoration: none;
  background: #00b233;
  color: #ffffff;
  font-family: sans-serif;
  font-size: 2rem;
  white-space: nowrap;
  line-height: 1;
  cursor: pointer;
  text-align: center;
  transition: background 250ms ease-in-out, transform 150ms ease;
  -webkit-appearance: none;
  -moz-appearance: none;

  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */
  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */
  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */
  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */
  animation: excalibur-button-fadein 200ms;
}

/*
button#excalibur-play {
  display: none;
}*/

button#excalibur-play:after {
  position: absolute;
  content: '';
  border: 8px solid;
  border-color: transparent transparent transparent white;
  left: 35px;
  top: 24px;
  width: 0;
  height: 0;
}

button#excalibur-play:before {
  position: absolute;
  content: '';
  border: 3px solid;
  left: 19px;
  top: 14px;
  border-radius: 20px;
  width: 30px;
  height: 30px;
}

button#excalibur-play:hover,
button#excalibur-play:focus {
  background: #00982c;
}

button#excalibur-play:focus {
  outline: 1px solid #fff;
  outline-offset: -4px;
}

button#excalibur-play:active {
  transform: scale(0.99);
}

@keyframes excalibur-button-fadein {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Firefox < 16 */
@-moz-keyframes excalibur-button-fadein {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Safari, Chrome and Opera > 12.1 */
@-webkit-keyframes excalibur-button-fadein {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Internet Explorer */
@-ms-keyframes excalibur-button-fadein {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Opera < 12.1 */
@-o-keyframes excalibur-button-fadein {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
`,"",{version:3,sources:["webpack://./Loader.css"],names:[],mappings:"AAAA,yBAAyB;;AAEzB;EACE,qBAAqB;EACrB,kBAAkB;EAClB,YAAY;EACZ,kBAAkB;EAClB,YAAY;EACZ;;+BAE6B;EAC7B,8BAA8B;EAC9B,SAAS;EACT,qBAAqB;EACrB,mBAAmB;EACnB,cAAc;EACd,uBAAuB;EACvB,eAAe;EACf,mBAAmB;EACnB,cAAc;EACd,eAAe;EACf,kBAAkB;EAClB,8DAA8D;EAC9D,wBAAwB;EACxB,qBAAqB;;EAErB,gDAAgD,EAAE,oCAAoC;EACtF,6CAA6C,EAAE,iBAAiB;EAChE,4CAA4C,EAAE,sBAAsB;EACpE,2CAA2C,EAAE,iBAAiB;EAC9D,wCAAwC;AAC1C;;AAEA;;;EAGE;;AAEF;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,uDAAuD;EACvD,UAAU;EACV,SAAS;EACT,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,UAAU;EACV,SAAS;EACT,mBAAmB;EACnB,WAAW;EACX,YAAY;AACd;;AAEA;;EAEE,mBAAmB;AACrB;;AAEA;EACE,uBAAuB;EACvB,oBAAoB;AACtB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,oCAAoC;AACpC;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,sBAAsB;AACtB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF",sourcesContent:[`/* Buttons styles start */\r
\r
button#excalibur-play {\r
  display: inline-block;\r
  position: relative;\r
  z-index: 999;\r
  border-radius: 6px;\r
  border: none;\r
  /*border: 3px solid;\r
    border-color: white;\r
    box-shadow: 0 0 10px #ccc;*/\r
  padding: 1rem 1.5rem 1rem 4rem;\r
  margin: 0;\r
  text-decoration: none;\r
  background: #00b233;\r
  color: #ffffff;\r
  font-family: sans-serif;\r
  font-size: 2rem;\r
  white-space: nowrap;\r
  line-height: 1;\r
  cursor: pointer;\r
  text-align: center;\r
  transition: background 250ms ease-in-out, transform 150ms ease;\r
  -webkit-appearance: none;\r
  -moz-appearance: none;\r
\r
  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */\r
  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */\r
  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */\r
  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */\r
  animation: excalibur-button-fadein 200ms;\r
}\r
\r
/*\r
button#excalibur-play {\r
  display: none;\r
}*/\r
\r
button#excalibur-play:after {\r
  position: absolute;\r
  content: '';\r
  border: 8px solid;\r
  border-color: transparent transparent transparent white;\r
  left: 35px;\r
  top: 24px;\r
  width: 0;\r
  height: 0;\r
}\r
\r
button#excalibur-play:before {\r
  position: absolute;\r
  content: '';\r
  border: 3px solid;\r
  left: 19px;\r
  top: 14px;\r
  border-radius: 20px;\r
  width: 30px;\r
  height: 30px;\r
}\r
\r
button#excalibur-play:hover,\r
button#excalibur-play:focus {\r
  background: #00982c;\r
}\r
\r
button#excalibur-play:focus {\r
  outline: 1px solid #fff;\r
  outline-offset: -4px;\r
}\r
\r
button#excalibur-play:active {\r
  transform: scale(0.99);\r
}\r
\r
@keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Firefox < 16 */\r
@-moz-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Safari, Chrome and Opera > 12.1 */\r
@-webkit-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Internet Explorer */\r
@-ms-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Opera < 12.1 */\r
@-o-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
`],sourceRoot:""}]);const p=f},7379:(e,i,s)=>{s.d(i,{Z:()=>p});var r=s(272),a=s.n(r),l=s(2609),h=s.n(l),f=h()(a());f.push([e.id,`
#ex-toast-container {
  position: absolute;
  height: 0;
  min-width: 50%;
  left: 50%;
  top: 0;
}

.ex-toast-message {
  left: -50%;
  position: relative;
  display: flex;
  justify-content: space-between;


  padding: 10px;
  margin-top: 5px;
  font-size: 18px;
  font-family: sans-serif;
  border-radius: 6px;
  border: 3px solid #b7b779;
  background-color: rgb(253, 253, 192);
}


.ex-toast-message button {
  align-self: flex-start;
}`,"",{version:3,sources:["webpack://./Util/Toaster.css"],names:[],mappings:";AACA;EACE,kBAAkB;EAClB,SAAS;EACT,cAAc;EACd,SAAS;EACT,MAAM;AACR;;AAEA;EACE,UAAU;EACV,kBAAkB;EAClB,aAAa;EACb,8BAA8B;;;EAG9B,aAAa;EACb,eAAe;EACf,eAAe;EACf,uBAAuB;EACvB,kBAAkB;EAClB,yBAAyB;EACzB,oCAAoC;AACtC;;;AAGA;EACE,sBAAsB;AACxB",sourcesContent:[`\r
#ex-toast-container {\r
  position: absolute;\r
  height: 0;\r
  min-width: 50%;\r
  left: 50%;\r
  top: 0;\r
}\r
\r
.ex-toast-message {\r
  left: -50%;\r
  position: relative;\r
  display: flex;\r
  justify-content: space-between;\r
\r
\r
  padding: 10px;\r
  margin-top: 5px;\r
  font-size: 18px;\r
  font-family: sans-serif;\r
  border-radius: 6px;\r
  border: 3px solid #b7b779;\r
  background-color: rgb(253, 253, 192);\r
}\r
\r
\r
.ex-toast-message button {\r
  align-self: flex-start;\r
}`],sourceRoot:""}]);const p=f},2609:e=>{e.exports=function(i){var s=[];return s.toString=function(){return this.map(function(a){var l="",h=typeof a[5]<"u";return a[4]&&(l+="@supports (".concat(a[4],") {")),a[2]&&(l+="@media ".concat(a[2]," {")),h&&(l+="@layer".concat(a[5].length>0?" ".concat(a[5]):""," {")),l+=i(a),h&&(l+="}"),a[2]&&(l+="}"),a[4]&&(l+="}"),l}).join("")},s.i=function(a,l,h,f,p){typeof a=="string"&&(a=[[null,a,void 0]]);var m={};if(h)for(var v=0;v<this.length;v++){var w=this[v][0];w!=null&&(m[w]=!0)}for(var x=0;x<a.length;x++){var b=[].concat(a[x]);h&&m[b[0]]||(typeof p<"u"&&(typeof b[5]>"u"||(b[1]="@layer".concat(b[5].length>0?" ".concat(b[5]):""," {").concat(b[1],"}")),b[5]=p),l&&(b[2]&&(b[1]="@media ".concat(b[2]," {").concat(b[1],"}")),b[2]=l),f&&(b[4]?(b[1]="@supports (".concat(b[4],") {").concat(b[1],"}"),b[4]=f):b[4]="".concat(f)),s.push(b))}},s}},272:e=>{e.exports=function(i){var s=i[1],r=i[3];if(!r)return s;if(typeof btoa=="function"){var a=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),h="/*# ".concat(l," */");return[s].concat([h]).join(`
`)}return[s].join(`
`)}}},X_={};function Ot(e){var i=X_[e];if(i!==void 0)return i.exports;var s=X_[e]={id:e,exports:{}};return sk[e].call(s.exports,s,s.exports,Ot),s.exports}Ot.n=e=>{var i=e&&e.__esModule?()=>e.default:()=>e;return Ot.d(i,{a:i}),i};Ot.d=(e,i)=>{for(var s in i)Ot.o(i,s)&&!Ot.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})};Ot.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();Ot.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i);Ot.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var T={};(()=>{Ot.d(T,{fWn:()=>Xr,Ia8:()=>fp,rqv:()=>yh,hLI:()=>Xn,yyv:()=>eg,tX5:()=>xi,vtX:()=>zi,r7K:()=>up,lCh:()=>Up,cE4:()=>Kt,fwF:()=>Ui,sce:()=>Kr,AQ6:()=>Kw,_c7:()=>Ti,KUs:()=>Yp,Ajp:()=>Hn,dkO:()=>es,RDh:()=>ka,_H9:()=>Sa,mxs:()=>Pp,OmD:()=>yt,kBf:()=>pt,C4F:()=>ma,NQt:()=>gh,JjN:()=>ug,EK_:()=>Oe,V1s:()=>Np,xHm:()=>Gw,Xz7:()=>fa,Cdc:()=>wa,FKn:()=>pe,SUY:()=>_h,ab2:()=>va,GfZ:()=>Ni,YMS:()=>Ts,oyv:()=>qt,aUb:()=>dn,SdD:()=>at,JUv:()=>Si,jEj:()=>mn,TFq:()=>Pi,HDU:()=>ot,R_y:()=>J,ydN:()=>cn,t50:()=>ht,s$$:()=>ph,v2G:()=>gt,Ilk:()=>K,s9i:()=>ag,dxL:()=>pn,LLX:()=>og,wA2:()=>ii,R_p:()=>we,IQ$:()=>Qp,I5F:()=>Vu,X8$:()=>Zp,FR6:()=>It,U8o:()=>St,kbG:()=>Ve,iS_:()=>Be,cGG:()=>lg,RPN:()=>Aa,skb:()=>tg,SLU:()=>Zu,RdJ:()=>Ae,cNu:()=>Tp,gU7:()=>rp,LSk:()=>Ap,Nmp:()=>Ea,d1Y:()=>se,xrL:()=>ah,sRW:()=>lh,cmV:()=>vg,qWz:()=>Sp,N0Q:()=>bp,q8b:()=>Ut,ynB:()=>je,jT9:()=>Lp,wAz:()=>Kn,D4V:()=>Jn,NLr:()=>s1,N6H:()=>wi,W1A:()=>de,JHW:()=>ue,ZZ$:()=>$w,v2K:()=>jp,pBf:()=>n1,vpe:()=>p,GMl:()=>m,zW2:()=>e,B0K:()=>ih,Nv7:()=>da,C_p:()=>Ps,MUA:()=>Ur,xqU:()=>Li,pTp:()=>Ep,vUK:()=>h,j9l:()=>ch,Zxw:()=>Zn,v51:()=>Mt,Hdx:()=>Pa,Z$d:()=>Ca,iqV:()=>cg,o$7:()=>Jr,olM:()=>jn,Zm$:()=>v,$QH:()=>E,i78:()=>R,nJg:()=>Bi,h6u:()=>mt,hts:()=>it,j88:()=>G,VME:()=>rt,fy2:()=>ts,nt:()=>m1,Ukr:()=>to,zsu:()=>Ue,oA6:()=>me,TVh:()=>Qr,TwZ:()=>Gr,GTT:()=>ya,xxj:()=>Jp,XdK:()=>bt,Jmb:()=>xe,cXo:()=>Yu,Dm5:()=>At,IIB:()=>r,ebW:()=>pg,zI0:()=>_a,LYD:()=>Ma,cEG:()=>ig,SEl:()=>o1,t9V:()=>gg,ez5:()=>Un,N1d:()=>ju,R8U:()=>zn,SKZ:()=>w,__J:()=>r1,RI$:()=>Op,x12:()=>wh,ccz:()=>Te,aNw:()=>sp,XrL:()=>Uw,xwn:()=>Fp,dNK:()=>Mp,ini:()=>ae,YdH:()=>lt,F5T:()=>Jf,y3G:()=>ze,l57:()=>Xu,xn0:()=>sh,t2V:()=>dh,uxB:()=>Xt,cpd:()=>Xp,fiy:()=>mp,$XZ:()=>_p,UG6:()=>as,uqK:()=>Es,STE:()=>ep,y$z:()=>Oi,mAD:()=>sg,sOq:()=>si,hUw:()=>Ta,_0G:()=>a1,Sqs:()=>_g,hpZ:()=>Ra,Vol:()=>qp,vYX:()=>Qn,wIZ:()=>nt,cBi:()=>Fa,c30:()=>ng,MPV:()=>Vi,RFv:()=>Gn,Ux6:()=>qn,rxy:()=>eo,I$c:()=>on,kfC:()=>Da,VjY:()=>ji,mgq:()=>Ch,YVA:()=>le,Kgp:()=>qf,HH$:()=>vt,M_d:()=>k,rgh:()=>A,Ra6:()=>$,KhR:()=>b,BS5:()=>B,xhz:()=>ft,xOq:()=>P,a9j:()=>O,bHk:()=>H,CgK:()=>x,cuY:()=>D,kvE:()=>Wr,SBu:()=>Hr,AE_:()=>Hp,ctO:()=>$p,OLH:()=>Bp,kky:()=>Vr,nSF:()=>$n,zHn:()=>os,zwx:()=>Kp,AeJ:()=>xa,hLz:()=>cp,D9g:()=>Vp,wA:()=>pp,jhr:()=>gp,GVs:()=>qu,_zO:()=>ha,LXZ:()=>ow,w6$:()=>yp,mhV:()=>vp,MOD:()=>ni,kwd:()=>wp,Lmr:()=>xp,xsS:()=>qr,K5l:()=>qw,lLr:()=>Ju,Z$r:()=>$f,IXb:()=>fh,SGH:()=>rg,SMj:()=>As,L34:()=>y1,exe:()=>ei,bnF:()=>ge,MFA:()=>Zt,$uU:()=>ip,Sap:()=>zw,jyi:()=>ln,E03:()=>ca,V6q:()=>un,rg2:()=>vh,DVW:()=>pa,nVo:()=>Dp,F6N:()=>mg,xP7:()=>Ei,Odq:()=>Wp,Zif:()=>He,ZGJ:()=>rh,MJk:()=>dg,xvT:()=>Yr,PHM:()=>ba,dpR:()=>fe,n9L:()=>Rp,KwO:()=>Ip,SxM:()=>Ww,B7y:()=>fn,x7r:()=>fg,wx7:()=>$r,Uvn:()=>tt,OFT:()=>oh,xzN:()=>zp,CcZ:()=>Xw,M5Z:()=>Ci,ZrN:()=>a,OWs:()=>F,dF9:()=>nh,oZy:()=>ns,rD2:()=>rs,VHo:()=>_t,ohE:()=>hn,R$E:()=>tp,xQN:()=>gn,AdJ:()=>mh,q3I:()=>Gp,Pab:()=>Vn,uZ5:()=>Ne,McK:()=>f,F9c:()=>ew,k0b:()=>hh,hnT:()=>u1,RSJ:()=>f1,Mku:()=>c1,h90:()=>g1,rms:()=>p1,ErP:()=>l1,aVg:()=>d1,lPc:()=>h1,Z8E:()=>hp,_N2:()=>Zr,yFn:()=>Zw,lNv:()=>dp,cu9:()=>kp,MZQ:()=>op,FUM:()=>ap,BxR:()=>xt,vdf:()=>is,iaL:()=>sw,w6H:()=>$u,Q4c:()=>Vw,Xxe:()=>ti,Uxb:()=>Gf,Yr5:()=>iw,Bhw:()=>j,yOA:()=>i});var e={};Ot.r(e),Ot.d(e,{ActivateEvent:()=>xi,CollisionEndEvent:()=>at,CollisionPostSolveEvent:()=>ot,CollisionPreSolveEvent:()=>J,CollisionStartEvent:()=>ht,ContactEndEvent:()=>It,ContactStartEvent:()=>St,DeactivateEvent:()=>Be,EnterTriggerEvent:()=>wi,EnterViewPortEvent:()=>de,EventTypes:()=>m,ExitTriggerEvent:()=>Ur,ExitViewPortEvent:()=>Li,GameEvent:()=>v,GameStartEvent:()=>E,GameStopEvent:()=>R,GamepadAxisEvent:()=>mt,GamepadButtonEvent:()=>it,GamepadConnectEvent:()=>G,GamepadDisconnectEvent:()=>rt,HiddenEvent:()=>bt,InitializeEvent:()=>At,KillEvent:()=>w,PostCollisionEvent:()=>vt,PostDebugDrawEvent:()=>k,PostDrawEvent:()=>A,PostFrameEvent:()=>$,PostKillEvent:()=>b,PostUpdateEvent:()=>B,PreCollisionEvent:()=>ft,PreDebugDrawEvent:()=>P,PreDrawEvent:()=>O,PreFrameEvent:()=>H,PreKillEvent:()=>x,PreUpdateEvent:()=>D,VisibleEvent:()=>_t});var i={};Ot.r(i),Ot.d(i,{getAttributeComponentSize:()=>Kf,getAttributePointerType:()=>Qf,getGlTypeSizeBytes:()=>Qu});var s={};Ot.r(s),Ot.d(s,{circle:()=>Lw,line:()=>th,point:()=>Mw,roundRect:()=>eh,vector:()=>Fw});var r={};Ot.r(r),Ot.d(r,{Axes:()=>es,Buttons:()=>Oe,Gamepad:()=>Bi,Gamepads:()=>ts,KeyEvent:()=>Un,Keyboard:()=>ju,Keys:()=>zn,NativePointerButton:()=>as,PointerButton:()=>Vi,PointerComponent:()=>Gn,PointerEvent:()=>qn,PointerEventReceiver:()=>eo,PointerScope:()=>on,PointerSystem:()=>Da,PointerType:()=>ji,WheelDeltaMode:()=>gn,WheelEvent:()=>mh});var a={};Ot.r(a),Ot.d(a,{ConsoleAppender:()=>Vu,DrawUtil:()=>s,EasingFunctions:()=>Ut,LogLevel:()=>ae,Logger:()=>lt,Observable:()=>Oi,ScreenAppender:()=>$f,addItemToArray:()=>nw,contains:()=>Wu,delay:()=>Gu,fail:()=>Xf,getPosition:()=>jr,removeItemFromArray:()=>ss}),Ot(4662),Ot(8343);function l(){if(typeof window>"u"&&(window={audioContext:function(){}}),typeof window<"u"&&!window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(d){window.setInterval(d,1e3/60)}),typeof window<"u"&&!window.cancelAnimationFrame&&(window.cancelAnimationFrame=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(){}),typeof window<"u"&&!window.AudioContext){if(window.webkitAudioContext){const t=window.webkitAudioContext.prototype.decodeAudioData;window.webkitAudioContext.prototype.decodeAudioData=function(n){return new Promise((o,u)=>{t.call(this,n,o,u)})}}window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext||window.oAudioContext}typeof window<"u"&&!window.devicePixelRatio&&(window.devicePixelRatio=window.devicePixelRatio||1)}class h{static useCanvasGraphicsContext(){h.enable("use-canvas-context")}static freeze(){h._FROZEN=!0}static _reset(){h._FROZEN=!1,h._FLAGS={}}static enable(t){if(this._FROZEN)throw Error("Feature flags can only be enabled before Engine constructor time");h._FLAGS[t]=!0}static disable(t){if(this._FROZEN)throw Error("Feature flags can only be disabled before Engine constructor time");h._FLAGS[t]=!1}static isEnabled(t){return!!h._FLAGS[t]}static show(){return Object.keys(h._FLAGS)}}h._FROZEN=!1,h._FLAGS={};function f(d,t){return{type:d,value:t}}class p{constructor(){this._paused=!1,this._listeners={},this._listenersOnce={},this._pipes=[]}clear(){this._listeners={},this._listenersOnce={},this._pipes.length=0}on(t,n){var o;return this._listeners[t]=(o=this._listeners[t])!==null&&o!==void 0?o:[],this._listeners[t].push(n),{close:()=>this.off(t,n)}}once(t,n){var o;return this._listenersOnce[t]=(o=this._listenersOnce[t])!==null&&o!==void 0?o:[],this._listenersOnce[t].push(n),{close:()=>this.off(t,n)}}off(t,n){var o,u,c,g;if(n){const _=(o=this._listeners[t])===null||o===void 0?void 0:o.indexOf(n);_>-1&&((u=this._listeners[t])===null||u===void 0||u.splice(_,1));const y=(c=this._listenersOnce[t])===null||c===void 0?void 0:c.indexOf(n);y>-1&&((g=this._listenersOnce[t])===null||g===void 0||g.splice(y,1))}else delete this._listeners[t]}emit(t,n){var o;if(this._paused)return;(o=this._listeners[t])===null||o===void 0||o.forEach(c=>c(n));const u=this._listenersOnce[t];this._listenersOnce[t]=[],u&&u.forEach(c=>c(n)),this._pipes.forEach(c=>{c.emit(t,n)})}pipe(t){if(this===t)throw Error("Cannot pipe to self");return this._pipes.push(t),{close:()=>{const n=this._pipes.indexOf(t);n>-1&&this._pipes.splice(n,1)}}}unpipe(t){const n=this._pipes.indexOf(t);n>-1&&this._pipes.splice(n,1)}pause(){this._paused=!0}unpause(){this._paused=!1}}var m;(function(d){d.Kill="kill",d.PreKill="prekill",d.PostKill="postkill",d.PreDraw="predraw",d.PostDraw="postdraw",d.PreDebugDraw="predebugdraw",d.PostDebugDraw="postdebugdraw",d.PreUpdate="preupdate",d.PostUpdate="postupdate",d.PreFrame="preframe",d.PostFrame="postframe",d.PreCollision="precollision",d.CollisionStart="collisionstart",d.CollisionEnd="collisionend",d.PostCollision="postcollision",d.Initialize="initialize",d.Activate="activate",d.Deactivate="deactivate",d.ExitViewport="exitviewport",d.EnterViewport="enterviewport",d.ExitTrigger="exit",d.EnterTrigger="enter",d.Connect="connect",d.Disconnect="disconnect",d.Button="button",d.Axis="axis",d.Visible="visible",d.Hidden="hidden",d.Start="start",d.Stop="stop",d.PointerUp="pointerup",d.PointerDown="pointerdown",d.PointerMove="pointermove",d.PointerEnter="pointerenter",d.PointerLeave="pointerleave",d.PointerCancel="pointercancel",d.PointerWheel="pointerwheel",d.Up="up",d.Down="down",d.Move="move",d.Enter="enter",d.Leave="leave",d.Cancel="cancel",d.Wheel="wheel",d.Press="press",d.Release="release",d.Hold="hold",d.PointerDragStart="pointerdragstart",d.PointerDragEnd="pointerdragend",d.PointerDragEnter="pointerdragenter",d.PointerDragLeave="pointerdragleave",d.PointerDragMove="pointerdragmove"})(m||(m={}));class v{constructor(){this._bubbles=!0}get bubbles(){return this._bubbles}set bubbles(t){this._bubbles=t}stopPropagation(){this.bubbles=!1}}class w extends v{constructor(t){super(),this.target=t}}class x extends v{constructor(t){super(),this.target=t}}class b extends v{constructor(t){super(),this.target=t}}class E extends v{constructor(t){super(),this.target=t}}class R extends v{constructor(t){super(),this.target=t}}class O extends v{constructor(t,n,o){super(),this.ctx=t,this.delta=n,this.target=o}}class A extends v{constructor(t,n,o){super(),this.ctx=t,this.delta=n,this.target=o}}class P extends v{constructor(t,n){super(),this.ctx=t,this.target=n}}class k extends v{constructor(t,n){super(),this.ctx=t,this.target=n}}class D extends v{constructor(t,n,o){super(),this.engine=t,this.delta=n,this.target=o}}class B extends v{constructor(t,n,o){super(),this.engine=t,this.delta=n,this.target=o}}class H extends v{constructor(t,n){super(),this.engine=t,this.prevStats=n,this.target=t}}class $ extends v{constructor(t,n){super(),this.engine=t,this.stats=n,this.target=t}}class G extends v{constructor(t,n){super(),this.index=t,this.gamepad=n,this.target=n}}class rt extends v{constructor(t,n){super(),this.index=t,this.gamepad=n,this.target=n}}class it extends v{constructor(t,n,o){super(),this.button=t,this.value=n,this.target=o}}class mt extends v{constructor(t,n,o){super(),this.axis=t,this.value=n,this.target=o}}class _t extends v{constructor(t){super(),this.target=t}}class bt extends v{constructor(t){super(),this.target=t}}class ft extends v{constructor(t,n,o,u){super(),this.other=n,this.side=o,this.intersection=u,this.target=t}}class vt extends v{constructor(t,n,o,u){super(),this.other=n,this.side=o,this.intersection=u,this.target=t}get actor(){return this.target}set actor(t){this.target=t}}class St{constructor(t,n,o){this.target=t,this.other=n,this.contact=o}}class It{constructor(t,n){this.target=t,this.other=n}}class J{constructor(t,n,o,u,c){this.target=t,this.other=n,this.side=o,this.intersection=u,this.contact=c}}class ot{constructor(t,n,o,u,c){this.target=t,this.other=n,this.side=o,this.intersection=u,this.contact=c}}class ht extends v{constructor(t,n,o){super(),this.other=n,this.contact=o,this.target=t}get actor(){return this.target}set actor(t){this.target=t}}class at extends v{constructor(t,n){super(),this.other=n,this.target=t}get actor(){return this.target}set actor(t){this.target=t}}class At extends v{constructor(t,n){super(),this.engine=t,this.target=n}}class xi extends v{constructor(t,n){super(),this.context=t,this.target=n}}class Be extends v{constructor(t,n){super(),this.context=t,this.target=n}}class Li extends v{constructor(t){super(),this.target=t}}class de extends v{constructor(t){super(),this.target=t}}class wi extends v{constructor(t,n){super(),this.target=t,this.actor=n}}class Ur extends v{constructor(t,n){super(),this.target=t,this.actor=n}}class ts{constructor(){this.events=new p,this.enabled=!1,this.supported=!!navigator.getGamepads,this._gamePadTimeStamps=[0,0,0,0],this._oldPads=[],this._pads=[],this._initSuccess=!1,this._navigator=navigator,this._minimumConfiguration=null}init(){this.supported&&(this._initSuccess||(this._oldPads=this._clonePads(this._navigator.getGamepads()),this._oldPads.length&&this._oldPads[0]&&(this._initSuccess=!0)))}setMinimumGamepadConfiguration(t){this._enableAndUpdate(),this._minimumConfiguration=t}_enableAndUpdate(){this.enabled||(this.enabled=!0,this.update())}_isGamepadValid(t){if(!this._minimumConfiguration)return!0;if(!t)return!1;const n=t.axes.filter(u=>typeof u!==void 0).length,o=t.buttons.filter(u=>typeof u!==void 0).length;return n>=this._minimumConfiguration.axis&&o>=this._minimumConfiguration.buttons&&t.connected}emit(t,n){this.events.emit(t,n)}on(t,n){return this._enableAndUpdate(),this.events.on(t,n)}once(t,n){return this.events.once(t,n)}off(t,n){this._enableAndUpdate(),this.events.off(t,n)}update(){if(!this.enabled||!this.supported)return;this.init();const t=this._navigator.getGamepads();for(let n=0;n<t.length;n++){if(t[n])!this.at(n).connected&&this._isGamepadValid(t[n])&&this.events.emit("connect",new G(n,this.at(n))),this.at(n).connected=!0;else{const y=this.at(n);y.connected&&this.events.emit("disconnect",new rt(n,y)),y.connected=!1;continue}if(this.at(n).update(),t[n].timestamp&&t[n].timestamp===this._gamePadTimeStamps[n])continue;this._gamePadTimeStamps[n]=t[n].timestamp,this.at(n).navigatorGamepad=t[n];let o,u,c,g,_;for(o in Oe)u=Oe[o],typeof u=="number"&&t[n].buttons[u]&&(_=t[n].buttons[u].value,_!==this._oldPads[n].getButton(u)&&(t[n].buttons[u].pressed?(this.at(n).updateButton(u,_),this.at(n).events.emit("button",new it(u,_,this.at(n)))):this.at(n).updateButton(u,0)));for(c in es)g=es[c],typeof g=="number"&&(_=t[n].axes[g],_!==this._oldPads[n].getAxes(g)&&(this.at(n).updateAxes(g,_),this.at(n).events.emit("axis",new mt(g,_,this.at(n)))));this._oldPads[n]=this._clonePad(t[n])}}at(t){if(this._enableAndUpdate(),t>=this._pads.length)for(let n=this._pads.length-1,o=t;n<o;n++)this._pads.push(new Bi),this._oldPads.push(new Bi);return this._pads[t]}getValidGamepads(){this._enableAndUpdate();const t=[];for(let n=0;n<this._pads.length;n++)this._isGamepadValid(this.at(n).navigatorGamepad)&&this.at(n).connected&&t.push(this.at(n));return t}count(){return this._pads.filter(t=>t.connected).length}_clonePads(t){const n=[];for(let o=0,u=t.length;o<u;o++)n.push(this._clonePad(t[o]));return n}_clonePad(t){let n,o;const u=new Bi;if(!t)return u;for(n=0,o=t.buttons.length;n<o;n++)t.buttons[n]&&u.updateButton(n,t.buttons[n].value);for(n=0,o=t.axes.length;n<o;n++)u.updateAxes(n,t.axes[n]);return u}}ts.MinAxisMoveThreshold=.05;class Bi{constructor(){this.events=new p,this.connected=!1,this._axes=new Array(4),this._buttons=new Array(16),this._buttonsUp=new Array(16),this._buttonsDown=new Array(16);for(let t=0;t<this._buttons.length;t++)this._buttons[t]=0;for(let t=0;t<this._axes.length;t++)this._axes[t]=0}update(){this._buttonsDown=new Array(16),this._buttonsUp=new Array(16)}isButtonPressed(t,n=1){return this._buttons[t]>=n}isButtonHeld(t,n=1){return this._buttons[t]>=n}wasButtonPressed(t,n=1){return this._buttonsDown[t]>=n}wasButtonReleased(t){return!!this._buttonsUp[t]}getButton(t){return this._buttons[t]}getAxes(t){const n=this._axes[t];return Math.abs(n)<ts.MinAxisMoveThreshold?0:n}updateButton(t,n){n===0&&this._buttons[t]?this._buttonsUp[t]=1:this._buttonsDown[t]=n,this._buttons[t]=n}updateAxes(t,n){this._axes[t]=n}emit(t,n){this.events.emit(t,n)}on(t,n){return this.events.on(t,n)}once(t,n){return this.events.once(t,n)}off(t,n){this.events.off(t,n)}}var Oe;(function(d){d[d.Face1=0]="Face1",d[d.Face2=1]="Face2",d[d.Face3=2]="Face3",d[d.Face4=3]="Face4",d[d.LeftBumper=4]="LeftBumper",d[d.RightBumper=5]="RightBumper",d[d.LeftTrigger=6]="LeftTrigger",d[d.RightTrigger=7]="RightTrigger",d[d.Select=8]="Select",d[d.Start=9]="Start",d[d.LeftStick=10]="LeftStick",d[d.RightStick=11]="RightStick",d[d.DpadUp=12]="DpadUp",d[d.DpadDown=13]="DpadDown",d[d.DpadLeft=14]="DpadLeft",d[d.DpadRight=15]="DpadRight"})(Oe||(Oe={}));var es;(function(d){d[d.LeftStickX=0]="LeftStickX",d[d.LeftStickY=1]="LeftStickY",d[d.RightStickX=2]="RightStickX",d[d.RightStickY=3]="RightStickY"})(es||(es={}));var ae;(function(d){d[d.Debug=0]="Debug",d[d.Info=1]="Info",d[d.Warn=2]="Warn",d[d.Error=3]="Error",d[d.Fatal=4]="Fatal"})(ae||(ae={}));class lt{constructor(){if(this._appenders=[],this.defaultLevel=ae.Info,lt._INSTANCE)throw new Error("Logger is a singleton");return lt._INSTANCE=this,lt._INSTANCE.addAppender(new Vu),lt._INSTANCE}static getInstance(){return lt._INSTANCE==null&&(lt._INSTANCE=new lt),lt._INSTANCE}addAppender(t){this._appenders.push(t)}clearAppenders(){this._appenders.length=0}_log(t,n){t==null&&(t=this.defaultLevel);const o=this._appenders.length;for(let u=0;u<o;u++)t>=this.defaultLevel&&this._appenders[u].log(t,n)}debug(...t){this._log(ae.Debug,t)}info(...t){this._log(ae.Info,t)}warn(...t){this._log(ae.Warn,t)}error(...t){this._log(ae.Error,t)}fatal(...t){this._log(ae.Fatal,t)}}lt._INSTANCE=null;class Vu{log(t,n){if(!console&&!console.log&&console.warn&&console.error)return;const o=[];o.unshift.apply(o,n),o.unshift("["+ae[t]+"] : "),t<ae.Warn?console.log.apply?console.log.apply(console,o):console.log(o.join(" ")):t<ae.Error?console.warn.apply?console.warn.apply(console,o):console.warn(o.join(" ")):console.error.apply?console.error.apply(console,o):console.error(o.join(" "))}}class $f{constructor(t,n){this._messages=[],this._canvas=document.createElement("canvas"),this._canvas.width=t||window.innerWidth,this._canvas.height=n||window.innerHeight,this._canvas.style.position="absolute",this._ctx=this._canvas.getContext("2d"),document.body.appendChild(this._canvas)}log(t,n){const o=n.join(",");this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._messages.unshift("["+ae[t]+"] : "+o);let u=10,c=1;for(let g=0;g<this._messages.length;g++)this._ctx.fillStyle="rgba(255,255,255,"+c.toFixed(2)+")",this._ctx.fillText(this._messages[g],200,u),u+=10,c=c>0?c-.05:0}}function Wf(){try{const d=()=>{};window.top.addEventListener("blur",d),window.top.removeEventListener("blur",d)}catch{return!0}return!1}var zn;(function(d){d.Num0="Numpad0",d.Num1="Numpad1",d.Num2="Numpad2",d.Num3="Numpad3",d.Num4="Numpad4",d.Num5="Numpad5",d.Num6="Numpad6",d.Num7="Numpad7",d.Num8="Numpad8",d.Num9="Numpad9",d.NumAdd="NumpadAdd",d.NumSubtract="NumpadSubtract",d.NumMultiply="NumpadMultiply",d.NumDivide="NumpadDivide",d.NumDecimal="NumpadDecimal",d.Numpad0="Numpad0",d.Numpad1="Numpad1",d.Numpad2="Numpad2",d.Numpad3="Numpad3",d.Numpad4="Numpad4",d.Numpad5="Numpad5",d.Numpad6="Numpad6",d.Numpad7="Numpad7",d.Numpad8="Numpad8",d.Numpad9="Numpad9",d.NumpadAdd="NumpadAdd",d.NumpadSubtract="NumpadSubtract",d.NumpadMultiply="NumpadMultiply",d.NumpadDivide="NumpadDivide",d.NumpadDecimal="NumpadDecimal",d.NumLock="NumLock",d.ShiftLeft="ShiftLeft",d.ShiftRight="ShiftRight",d.AltLeft="AltLeft",d.AltRight="AltRight",d.ControlLeft="ControlLeft",d.ControlRight="ControlRight",d.MetaLeft="MetaLeft",d.MetaRight="MetaRight",d.Key0="Digit0",d.Key1="Digit1",d.Key2="Digit2",d.Key3="Digit3",d.Key4="Digit4",d.Key5="Digit5",d.Key6="Digit6",d.Key7="Digit7",d.Key8="Digit8",d.Key9="Digit9",d.Digit0="Digit0",d.Digit1="Digit1",d.Digit2="Digit2",d.Digit3="Digit3",d.Digit4="Digit4",d.Digit5="Digit5",d.Digit6="Digit6",d.Digit7="Digit7",d.Digit8="Digit8",d.Digit9="Digit9",d.F1="F1",d.F2="F2",d.F3="F3",d.F4="F4",d.F5="F5",d.F6="F6",d.F7="F7",d.F8="F8",d.F9="F9",d.F10="F10",d.F11="F11",d.F12="F12",d.A="KeyA",d.B="KeyB",d.C="KeyC",d.D="KeyD",d.E="KeyE",d.F="KeyF",d.G="KeyG",d.H="KeyH",d.I="KeyI",d.J="KeyJ",d.K="KeyK",d.L="KeyL",d.M="KeyM",d.N="KeyN",d.O="KeyO",d.P="KeyP",d.Q="KeyQ",d.R="KeyR",d.S="KeyS",d.T="KeyT",d.U="KeyU",d.V="KeyV",d.W="KeyW",d.X="KeyX",d.Y="KeyY",d.Z="KeyZ",d.KeyA="KeyA",d.KeyB="KeyB",d.KeyC="KeyC",d.KeyD="KeyD",d.KeyE="KeyE",d.KeyF="KeyF",d.KeyG="KeyG",d.KeyH="KeyH",d.KeyI="KeyI",d.KeyJ="KeyJ",d.KeyK="KeyK",d.KeyL="KeyL",d.KeyM="KeyM",d.KeyN="KeyN",d.KeyO="KeyO",d.KeyP="KeyP",d.KeyQ="KeyQ",d.KeyR="KeyR",d.KeyS="KeyS",d.KeyT="KeyT",d.KeyU="KeyU",d.KeyV="KeyV",d.KeyW="KeyW",d.KeyX="KeyX",d.KeyY="KeyY",d.KeyZ="KeyZ",d.Semicolon="Semicolon",d.Quote="Quote",d.Comma="Comma",d.Minus="Minus",d.Period="Period",d.Slash="Slash",d.Equal="Equal",d.BracketLeft="BracketLeft",d.Backslash="Backslash",d.BracketRight="BracketRight",d.Backquote="Backquote",d.Up="ArrowUp",d.Down="ArrowDown",d.Left="ArrowLeft",d.Right="ArrowRight",d.ArrowUp="ArrowUp",d.ArrowDown="ArrowDown",d.ArrowLeft="ArrowLeft",d.ArrowRight="ArrowRight",d.Space="Space",d.Backspace="Backspace",d.Delete="Delete",d.Esc="Escape",d.Escape="Escape",d.Enter="Enter",d.NumpadEnter="NumpadEnter",d.ContextMenu="ContextMenu"})(zn||(zn={}));class Un extends v{constructor(t,n,o){super(),this.key=t,this.value=n,this.originalEvent=o}}class ju{constructor(){this.events=new p,this._keys=[],this._keysUp=[],this._keysDown=[],this._releaseAllKeys=t=>{for(const n of this._keys){const o=new Un(n,t.key,t);this.events.emit("up",o),this.events.emit("release",o)}this._keysUp=Array.from(new Set(this._keys.concat(this._keysUp))),this._keys.length=0},this._handleKeyDown=t=>{!t.metaKey&&(this._keys.includes(zn.MetaLeft)||this._keys.includes(zn.MetaRight))&&this._releaseAllKeys(t);const n=t.code;if(this._keys.indexOf(n)===-1){this._keys.push(n),this._keysDown.push(n);const o=new Un(n,t.key,t);this.events.emit("down",o),this.events.emit("press",o)}},this._handleKeyUp=t=>{const n=t.code,o=this._keys.indexOf(n);this._keys.splice(o,1),this._keysUp.push(n);const u=new Un(n,t.key,t);this.events.emit("up",u),this.events.emit("release",u),t.key==="Meta"&&this._releaseAllKeys(t)}}emit(t,n){this.events.emit(t,n)}on(t,n){return this.events.on(t,n)}once(t,n){return this.events.once(t,n)}off(t,n){this.events.off(t,n)}init(t){let{global:n}=t;const{grabWindowFocus:o}=t;n||(Wf()?(n=window,o&&window.focus(),lt.getInstance().warn("Excalibur might be in a cross-origin iframe, in order to receive keyboard events it must be in focus")):n=window.top),n.addEventListener("blur",()=>{this._keys.length=0}),n.addEventListener("keyup",this._handleKeyUp),n.addEventListener("keydown",this._handleKeyDown)}update(){this._keysDown.length=0,this._keysUp.length=0;for(let t=0;t<this._keys.length;t++)this.events.emit("hold",new Un(this._keys[t]))}getKeys(){return this._keys}wasPressed(t){return this._keysDown.indexOf(t)>-1}isHeld(t){return this._keys.indexOf(t)>-1}wasReleased(t){return this._keysUp.indexOf(t)>-1}triggerEvent(t,n,o){t==="down"&&this._handleKeyDown(new KeyboardEvent("keydown",{code:n,key:o??null})),t==="up"&&this._handleKeyUp(new KeyboardEvent("keyup",{code:n,key:o??null}))}}var on;(function(d){d.Canvas="Canvas",d.Document="Document"})(on||(on={}));const Hu=4294967295;class Vr{constructor(t){this.seed=t,this._lowerMask=2147483647,this._upperMask=2147483648,this._w=32,this._n=624,this._m=397,this._a=2567483615,this._u=11,this._s=7,this._b=2636928640,this._t=15,this._c=4022730752,this._l=18,this._f=1812433253,this._mt=new Array(this._n),this._mt[0]=(t||Date.now())>>>0;for(let n=1;n<this._n;n++){const o=this._mt[n-1]^this._mt[n-1]>>>this._w-2;this._mt[n]=(this._f*((o&4294901760)>>>16)<<16)+this._f*(o&65535)+n>>>0}this._index=this._n}_twist(){const t=[0,this._a];let n=0,o=0;for(;o<this._n-this._m;o++)n=this._mt[o]&this._upperMask|this._mt[o+1]&this._lowerMask,this._mt[o]=this._mt[o+this._m]^n>>>1^t[n&1]&Hu;for(;o<this._n-1;o++)n=this._mt[o]&this._upperMask|this._mt[o+1]&this._lowerMask,this._mt[o]=this._mt[o+(this._m-this._n)]^n>>>1^t[n&1]&Hu;n=this._mt[this._n-1]&this._upperMask|this._mt[0]&this._lowerMask,this._mt[this._n-1]=this._mt[this._m-1]^n>>>1^t[n&1]&Hu,this._index=0}nextInt(){this._index>=this._n&&this._twist();let t=this._mt[this._index++];return t^=t>>>this._u,t^=t<<this._s&this._b,t^=t<<this._t&this._c,t^=t>>>this._l,t>>>0}next(){return this.nextInt()*(1/4294967296)}floating(t,n){return(n-t)*this.next()+t}integer(t,n){return Math.floor((n-t+1)*this.next()+t)}bool(t=.5){return this.next()<=t}pickOne(t){return t[this.integer(0,t.length-1)]}pickSet(t,n,o=!1){return o?this._pickSetWithDuplicates(t,n):this._pickSetWithoutDuplicates(t,n)}_pickSetWithoutDuplicates(t,n){if(n>t.length||n<0)throw new Error("Invalid number of elements to pick, must pick a value 0 < n <= length");if(n===t.length)return t;const o=new Array(n);let u=0;const c=t.slice(0);for(;u<n;){const g=this.integer(0,c.length-1);o[u++]=c[g],c.splice(g,1)}return o}_pickSetWithDuplicates(t,n){if(n<0)throw new Error("Invalid number of elements to pick, must pick a value 0 <= n < MAX_INT");const o=new Array(n);for(let u=0;u<n;u++)o[u]=this.pickOne(t);return o}shuffle(t){const n=t.slice(0);let o=null;for(let u=0;u<n.length-2;u++){const c=this.integer(u,n.length-1);o=n[u],n[u]=n[c],n[c]=o}return n}range(t,n,o){const u=new Array(t);for(let c=0;c<t;c++)u[c]=this.integer(n,o);return u}d4(){return this.integer(1,4)}d6(){return this.integer(1,6)}d8(){return this.integer(1,8)}d10(){return this.integer(1,10)}d12(){return this.integer(1,12)}d20(){return this.integer(1,20)}}const Ci=Math.PI*2;function ew(d){return d>=0?d-Math.floor(d):d-Math.ceil(d)}function ti(d){return d===0?0:d<0?-1:1}function Ne(d,t,n){return Math.min(Math.max(t,d),n)}function Vn(d){let t=d;if(d>Ci)for(;t>Ci;)t-=Ci;if(d<0)for(;t<0;)t+=Ci;return t}function Gf(d){return 180/Math.PI*d}function iw(d){return d/180*Math.PI}const $u=(d,t)=>Array.from(new Array(t-d+1),(n,o)=>o+d);function is(d,t,n=new Vr){return n?n.floating(d,t):d+Math.random()*(t-d)}function sw(d,t,n=new Vr){return n?n.integer(d,t):Math.round(is(d,t))}class F{static get Zero(){return new F(0,0)}static get One(){return new F(1,1)}static get Half(){return new F(.5,.5)}static get Up(){return new F(0,-1)}static get Down(){return new F(0,1)}static get Left(){return new F(-1,0)}static get Right(){return new F(1,0)}static fromAngle(t){return new F(Math.cos(t),Math.sin(t))}static isValid(t){return!(t==null||isNaN(t.x)||isNaN(t.y)||t.x===1/0||t.y===1/0||t.x===-1/0||t.y===-1/0)}static distance(t,n){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}static min(t,n){return new F(Math.min(t.x,n.x),Math.min(t.y,n.y))}static max(t,n){return new F(Math.max(t.x,n.x),Math.max(t.y,n.y))}constructor(t,n){this._x=0,this._y=0,this._x=t,this._y=n}get x(){return this._x}set x(t){this._x=t}get y(){return this._y}set y(t){this._y=t}setTo(t,n){this.x=t,this.y=n}equals(t,n=.001){return Math.abs(this.x-t.x)<=n&&Math.abs(this.y-t.y)<=n}distance(t){if(!t)return Math.sqrt(this.x*this.x+this.y*this.y);const n=this.x-t.x,o=this.y-t.y;return Math.sqrt(n*n+o*o)}squareDistance(t){t||(t=F.Zero);const n=this.x-t.x,o=this.y-t.y;return n*n+o*o}clampMagnitude(t){const n=this.size,o=Ne(n,0,t);return this.size=o,this}get size(){return this.distance()}set size(t){const n=this.normalize().scale(t);this.setTo(n.x,n.y)}normalize(){const t=this.distance();return t>0?new F(this.x/t,this.y/t):new F(0,1)}average(t){return this.add(t).scale(.5)}scale(t,n){const o=n||new F(0,0);return t instanceof F?(o.x=this.x*t.x,o.y=this.y*t.y):(o.x=this.x*t,o.y=this.y*t),o}add(t,n){return n?(n.x=this.x+t.x,n.y=this.y+t.y,n):new F(this.x+t.x,this.y+t.y)}sub(t){return new F(this.x-t.x,this.y-t.y)}addEqual(t){return this.setTo(this.x+t.x,this.y+t.y),this}subEqual(t){return this.setTo(this.x-t.x,this.y-t.y),this}scaleEqual(t){return this.setTo(this.x*t,this.y*t),this}dot(t){return this.x*t.x+this.y*t.y}cross(t){if(t instanceof F)return this.x*t.y-this.y*t.x;if(typeof t=="number")return new F(t*this.y,-t*this.x)}static cross(t,n){return new F(-t*n.y,t*n.x)}perpendicular(){return new F(this.y,-this.x)}normal(){return this.perpendicular().normalize()}negate(){return this.scale(-1)}toAngle(){return Math.atan2(this.y,this.x)}rotate(t,n){n||(n=new F(0,0));const o=Math.sin(t),u=Math.cos(t),c=u*(this.x-n.x)-o*(this.y-n.y)+n.x,g=o*(this.x-n.x)+u*(this.y-n.y)+n.y;return new F(c,g)}clone(t){const n=t??new F(0,0);return n.x=this.x,n.y=this.y,n}toString(t){return t?`(${this.x.toFixed(t)}, ${this.y.toFixed(t)})`:`(${this.x}, ${this.y})`}}function j(d,t){return new F(d,t)}class K{constructor(t,n,o,u){this.r=t,this.g=n,this.b=o,this.a=u??1}static fromRGB(t,n,o,u){return new K(t,n,o,u)}static fromRGBString(t){const n=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)/i;let o=null;if(o=t.match(n)){const u=parseInt(o[1],10),c=parseInt(o[2],10),g=parseInt(o[3],10);let _=1;return o[4]&&(_=parseFloat(o[4])),new K(u,c,g,_)}else throw new Error("Invalid rgb/a string: "+t)}static fromHex(t){const n=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i;let o=null;if(o=t.match(n)){const u=parseInt(o[1],16),c=parseInt(o[2],16),g=parseInt(o[3],16);let _=1;return o[4]&&(_=parseInt(o[4],16)/255),new K(u,c,g,_)}else throw new Error("Invalid hex string: "+t)}static fromHSL(t,n,o,u=1){return new bi(t,n,o,u).toRGBA()}lighten(t=.1){const n=bi.fromRGBA(this.r,this.g,this.b,this.a);return n.l+=(1-n.l)*t,n.toRGBA()}darken(t=.1){const n=bi.fromRGBA(this.r,this.g,this.b,this.a);return n.l-=n.l*t,n.toRGBA()}saturate(t=.1){const n=bi.fromRGBA(this.r,this.g,this.b,this.a);return n.s+=n.s*t,n.toRGBA()}desaturate(t=.1){const n=bi.fromRGBA(this.r,this.g,this.b,this.a);return n.s-=n.s*t,n.toRGBA()}multiply(t){const n=t.r/255*this.r/255*255,o=t.g/255*this.g/255*255,u=t.b/255*this.b/255*255,c=t.a*this.a;return new K(n,o,u,c)}screen(t){const n=t.invert(),o=t.invert();return n.multiply(o).invert()}invert(){return new K(255-this.r,255-this.g,255-this.b,1-this.a)}average(t){const n=(t.r+this.r)/2,o=(t.g+this.g)/2,u=(t.b+this.b)/2,c=(t.a+this.a)/2;return new K(n,o,u,c)}equal(t){return this.toString()===t.toString()}toString(t="rgb"){switch(t){case"rgb":return this.toRGBA();case"hsl":return this.toHSLA();case"hex":return this.toHex();default:throw new Error("Invalid Color format")}}_componentToHex(t){const n=t.toString(16);return n.length===1?"0"+n:n}toHex(){return"#"+this._componentToHex(this.r)+this._componentToHex(this.g)+this._componentToHex(this.b)}toRGBA(){const t=String(this.r.toFixed(0))+", "+String(this.g.toFixed(0))+", "+String(this.b.toFixed(0));return this.a!==void 0||this.a!==null?"rgba("+t+", "+String(this.a)+")":"rgb("+t+")"}toHSLA(){return bi.fromRGBA(this.r,this.g,this.b,this.a).toString()}fillStyle(){return this.toString()}clone(){return new K(this.r,this.g,this.b,this.a)}static get Black(){return K.fromHex("#000000")}static get White(){return K.fromHex("#FFFFFF")}static get Gray(){return K.fromHex("#808080")}static get LightGray(){return K.fromHex("#D3D3D3")}static get DarkGray(){return K.fromHex("#A9A9A9")}static get Yellow(){return K.fromHex("#FFFF00")}static get Orange(){return K.fromHex("#FFA500")}static get Red(){return K.fromHex("#FF0000")}static get Vermilion(){return K.fromHex("#FF5B31")}static get Rose(){return K.fromHex("#FF007F")}static get Magenta(){return K.fromHex("#FF00FF")}static get Violet(){return K.fromHex("#7F00FF")}static get Blue(){return K.fromHex("#0000FF")}static get Azure(){return K.fromHex("#007FFF")}static get Cyan(){return K.fromHex("#00FFFF")}static get Viridian(){return K.fromHex("#59978F")}static get Green(){return K.fromHex("#00FF00")}static get Chartreuse(){return K.fromHex("#7FFF00")}static get Transparent(){return K.fromHex("#FFFFFF00")}static get ExcaliburBlue(){return K.fromHex("#176BAA")}}class bi{constructor(t,n,o,u){this.h=t,this.s=n,this.l=o,this.a=u}static hue2rgb(t,n,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?t+(n-t)*6*o:o<1/2?n:o<2/3?t+(n-t)*(2/3-o)*6:t}static fromRGBA(t,n,o,u){t/=255,n/=255,o/=255;const c=Math.max(t,n,o),g=Math.min(t,n,o);let _,y;const C=(c+g)/2;if(c===g)_=y=0;else{const S=c-g;switch(y=C>.5?S/(2-c-g):S/(c+g),c){case t:_=(n-o)/S+(n<o?6:0);break;case n:_=(o-t)/S+2;break;case o:_=(t-n)/S+4;break}_/=6}return new bi(_,y,C,u)}toRGBA(){let t,n,o;if(this.s===0)t=n=o=this.l;else{const u=this.l<.5?this.l*(1+this.s):this.l+this.s-this.l*this.s,c=2*this.l-u;t=bi.hue2rgb(c,u,this.h+1/3),n=bi.hue2rgb(c,u,this.h),o=bi.hue2rgb(c,u,this.h-1/3)}return new K(t*255,n*255,o*255,this.a)}toString(){const t=this.h.toFixed(0),n=this.s.toFixed(0),o=this.l.toFixed(0),u=this.a.toFixed(0);return`hsla(${t}, ${n}, ${o}, ${u})`}}var Zt;(function(d){d.None="None",d.Top="Top",d.Bottom="Bottom",d.Left="Left",d.Right="Right"})(Zt||(Zt={})),function(d){function t(o){return o===d.Top?d.Bottom:o===d.Bottom?d.Top:o===d.Left?d.Right:o===d.Right?d.Left:d.None}d.getOpposite=t;function n(o){const u=[F.Left,F.Right,F.Up,F.Down],c=[d.Left,d.Right,d.Top,d.Bottom];let g=-Number.MAX_VALUE,_=-1;for(let y=0;y<u.length;y++)u[y].dot(o)>g&&(g=u[y].dot(o),_=y);return c[_]}d.fromDirection=n}(Zt||(Zt={}));class pt{constructor(t=0,n=0,o=0,u=0){typeof t=="object"?(this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom):typeof t=="number"&&(this.left=t,this.top=n,this.right=o,this.bottom=u)}clone(){return new pt(this.left,this.top,this.right,this.bottom)}static getSideFromIntersection(t){return t&&t?Math.abs(t.x)>Math.abs(t.y)?t.x<0?Zt.Right:Zt.Left:t.y<0?Zt.Bottom:Zt.Top:Zt.None}static fromPoints(t){let n=1/0,o=1/0,u=-1/0,c=-1/0;for(let g=0;g<t.length;g++)t[g].x<n&&(n=t[g].x),t[g].x>u&&(u=t[g].x),t[g].y<o&&(o=t[g].y),t[g].y>c&&(c=t[g].y);return new pt(n,o,u,c)}static fromDimension(t,n,o=F.Half,u=F.Zero){return new pt(-t*o.x+u.x,-n*o.y+u.y,t-t*o.x+u.x,n-n*o.y+u.y)}get width(){return this.right-this.left}get height(){return this.bottom-this.top}hasZeroDimensions(){return this.width===0||this.height===0}get center(){return new F((this.left+this.right)/2,(this.top+this.bottom)/2)}translate(t){return new pt(this.left+t.x,this.top+t.y,this.right+t.x,this.bottom+t.y)}rotate(t,n=F.Zero){const o=this.getPoints().map(u=>u.rotate(t,n));return pt.fromPoints(o)}scale(t,n=F.Zero){const o=this.translate(n);return new pt(o.left*t.x,o.top*t.y,o.right*t.x,o.bottom*t.y)}transform(t){const n=t.data[0]*this.left,o=t.data[1]*this.left,u=t.data[0]*this.right,c=t.data[1]*this.right,g=t.data[2]*this.top,_=t.data[3]*this.top,y=t.data[2]*this.bottom,C=t.data[3]*this.bottom,S=t.getPosition(),I=Math.min(n,u)+Math.min(g,y)+S.x,M=Math.min(o,c)+Math.min(_,C)+S.y,L=Math.max(n,u)+Math.max(g,y)+S.x,V=Math.max(o,c)+Math.max(_,C)+S.y;return new pt({left:I,top:M,right:L,bottom:V})}getPerimeter(){const t=this.width,n=this.height;return 2*(t+n)}getPoints(){const t=[];return t.push(new F(this.left,this.top)),t.push(new F(this.right,this.top)),t.push(new F(this.right,this.bottom)),t.push(new F(this.left,this.bottom)),t}rayCast(t,n=1/0){let o=-1/0,u=1/0;const c=t.dir.x===0?Number.MAX_VALUE:1/t.dir.x,g=t.dir.y===0?Number.MAX_VALUE:1/t.dir.y,_=(this.left-t.pos.x)*c,y=(this.right-t.pos.x)*c;o=Math.min(_,y),u=Math.max(_,y);const C=(this.top-t.pos.y)*g,S=(this.bottom-t.pos.y)*g;return o=Math.max(o,Math.min(C,S)),u=Math.min(u,Math.max(C,S)),u>=Math.max(0,o)&&o<n}rayCastTime(t,n=1/0){let o=-1/0,u=1/0;const c=t.dir.x===0?Number.MAX_VALUE:1/t.dir.x,g=t.dir.y===0?Number.MAX_VALUE:1/t.dir.y,_=(this.left-t.pos.x)*c,y=(this.right-t.pos.x)*c;o=Math.min(_,y),u=Math.max(_,y);const C=(this.top-t.pos.y)*g,S=(this.bottom-t.pos.y)*g;return o=Math.max(o,Math.min(C,S)),u=Math.min(u,Math.max(C,S)),u>=Math.max(0,o)&&o<n?o:-1}contains(t){return t instanceof F?this.left<=t.x&&this.top<=t.y&&this.bottom>=t.y&&this.right>=t.x:t instanceof pt?this.left<=t.left&&this.top<=t.top&&t.bottom<=this.bottom&&t.right<=this.right:!1}combine(t){return new pt(Math.min(this.left,t.left),Math.min(this.top,t.top),Math.max(this.right,t.right),Math.max(this.bottom,t.bottom))}get dimensions(){return new F(this.width,this.height)}overlaps(t,n){const o=n||0;if(t.hasZeroDimensions())return this.contains(t);if(this.hasZeroDimensions())return t.contains(this);const u=this.combine(t);return u.width+o<t.width+this.width&&u.height+o<t.height+this.height}intersect(t){const n=this.combine(t);if(n.width<t.width+this.width&&n.height<t.height+this.height&&!n.dimensions.equals(t.dimensions)&&!n.dimensions.equals(this.dimensions)){let o=0;this.right>=t.left&&this.right<=t.right?o=t.left-this.right:o=t.right-this.left;let u=0;return this.top<=t.bottom&&this.top>=t.top?u=t.bottom-this.top:u=t.top-this.bottom,Math.abs(o)<Math.abs(u)?new F(o,0):new F(0,u)}else if(n.dimensions.equals(t.dimensions)||n.dimensions.equals(this.dimensions)){let o=0;this.width-t.width>=0?this.right-t.right<=t.left-this.left?o=t.left-this.right:o=t.right-this.left:t.right-this.right<=this.left-t.left?o=this.left-t.right:o=this.right-t.left;let u=0;return this.height-t.height>=0?this.bottom-t.bottom<=t.top-this.top?u=t.top-this.bottom:u=t.bottom-this.top:t.bottom-this.bottom<=this.top-t.top?u=this.top-t.bottom:u=this.bottom-t.top,Math.abs(o)<Math.abs(u)?new F(o,0):new F(0,u)}else return null}intersectWithSide(t){const n=this.intersect(t);return pt.getSideFromIntersection(n)}draw(t,n=K.Yellow){t.debug.drawRect(this.left,this.top,this.width,this.height,{color:n})}}class jn{constructor(){this._isCompleted=!1,this.promise=new Promise((t,n)=>{this._resolver=t,this._rejecter=n})}get isCompleted(){return this._isCompleted}resolve(t){this._isCompleted||(this._isCompleted=!0,this._resolver(t))}reject(t){this._isCompleted||(this._isCompleted=!0,this._rejecter(t))}}function jr(d){let t=0,n=0;const o=c=>{t+=c.offsetLeft,c.offsetParent&&o(c.offsetParent)},u=c=>{n+=c.offsetTop,c.offsetParent&&u(c.offsetParent)};return o(d),u(d),new F(t,n)}function nw(d,t){return t.indexOf(d)===-1?(t.push(d),!0):!1}function ss(d,t){let n=-1;return(n=t.indexOf(d))>-1?(t.splice(n,1),!0):!1}function Wu(d,t){for(let n=0;n<d.length;n++)if(d[n]===t)return!0;return!1}function Xf(d){throw new Error(d)}function Gu(d,t){var n;const o=new jn;return((n=t==null?void 0:t.schedule.bind(t))!==null&&n!==void 0?n:setTimeout)(()=>{o.resolve()},d),o.promise}var Xu;(function(d){d[d.X=12]="X",d[d.Y=13]="Y"})(Xu||(Xu={}));class ze{constructor(){this.data=new Float32Array(16),this._scaleX=1,this._scaleSignX=1,this._scaleY=1,this._scaleSignY=1}static ortho(t,n,o,u,c,g){const _=new ze;return _.data[0]=2/(n-t),_.data[1]=0,_.data[2]=0,_.data[3]=0,_.data[4]=0,_.data[5]=2/(u-o),_.data[6]=0,_.data[7]=0,_.data[8]=0,_.data[9]=0,_.data[10]=-2/(g-c),_.data[11]=0,_.data[12]=-(n+t)/(n-t),_.data[13]=-(u+o)/(u-o),_.data[14]=-(g+c)/(g-c),_.data[15]=1,_}clone(t){const n=t||new ze;return n.data[0]=this.data[0],n.data[1]=this.data[1],n.data[2]=this.data[2],n.data[3]=this.data[3],n.data[4]=this.data[4],n.data[5]=this.data[5],n.data[6]=this.data[6],n.data[7]=this.data[7],n.data[8]=this.data[8],n.data[9]=this.data[9],n.data[10]=this.data[10],n.data[11]=this.data[11],n.data[12]=this.data[12],n.data[13]=this.data[13],n.data[14]=this.data[14],n.data[15]=this.data[15],n}toDOMMatrix(){return new DOMMatrix([...this.data])}static fromFloat32Array(t){const n=new ze;return n.data=t,n}static identity(){const t=new ze;return t.data[0]=1,t.data[1]=0,t.data[2]=0,t.data[3]=0,t.data[4]=0,t.data[5]=1,t.data[6]=0,t.data[7]=0,t.data[8]=0,t.data[9]=0,t.data[10]=1,t.data[11]=0,t.data[12]=0,t.data[13]=0,t.data[14]=0,t.data[15]=1,t}reset(){const t=this;return t.data[0]=1,t.data[1]=0,t.data[2]=0,t.data[3]=0,t.data[4]=0,t.data[5]=1,t.data[6]=0,t.data[7]=0,t.data[8]=0,t.data[9]=0,t.data[10]=1,t.data[11]=0,t.data[12]=0,t.data[13]=0,t.data[14]=0,t.data[15]=1,t}static translation(t,n){const o=ze.identity();return o.data[12]=t,o.data[13]=n,o}static scale(t,n){const o=ze.identity();return o.data[0]=t,o.data[5]=n,o.data[10]=1,o.data[15]=1,o}static rotation(t){const n=ze.identity();return n.data[0]=Math.cos(t),n.data[4]=-Math.sin(t),n.data[1]=Math.sin(t),n.data[5]=Math.cos(t),n}multiply(t,n){if(t instanceof F){const o=n||new F(0,0),u=t,c=u.x*this.data[0]+u.y*this.data[4]+this.data[12],g=u.x*this.data[1]+u.y*this.data[5]+this.data[13];return o.x=c,o.y=g,o}else{const o=n||new ze,u=t,c=this.data[0],g=this.data[1],_=this.data[2],y=this.data[3],C=this.data[4],S=this.data[5],I=this.data[6],M=this.data[7],L=this.data[8],V=this.data[9],Y=this.data[10],Z=this.data[11],U=this.data[12],z=this.data[13],Q=this.data[14],q=this.data[15],ut=u.data[0],st=u.data[1],W=u.data[2],wt=u.data[3],kt=u.data[4],Dt=u.data[5],Pt=u.data[6],te=u.data[7],$e=u.data[8],We=u.data[9],Ge=u.data[10],Hi=u.data[11],$i=u.data[12],Wi=u.data[13],dt=u.data[14],_n=u.data[15];o.data[0]=c*ut+C*st+L*W+U*wt,o.data[1]=g*ut+S*st+V*W+z*wt,o.data[2]=_*ut+I*st+Y*W+Q*wt,o.data[3]=y*ut+M*st+Z*W+q*wt,o.data[4]=c*kt+C*Dt+L*Pt+U*te,o.data[5]=g*kt+S*Dt+V*Pt+z*te,o.data[6]=_*kt+I*Dt+Y*Pt+Q*te,o.data[7]=y*kt+M*Dt+Z*Pt+q*te,o.data[8]=c*$e+C*We+L*Ge+U*Hi,o.data[9]=g*$e+S*We+V*Ge+z*Hi,o.data[10]=_*$e+I*We+Y*Ge+Q*Hi,o.data[11]=y*$e+M*We+Z*Ge+q*Hi,o.data[12]=c*$i+C*Wi+L*dt+U*_n,o.data[13]=g*$i+S*Wi+V*dt+z*_n,o.data[14]=_*$i+I*Wi+Y*dt+Q*_n,o.data[15]=y*$i+M*Wi+Z*dt+q*_n;const Ba=this.getScale();return o._scaleSignX=ti(Ba.x)*ti(o._scaleSignX),o._scaleSignY=ti(Ba.y)*ti(o._scaleSignY),o}}translate(t,n){const o=this.data[0],u=this.data[1],c=this.data[2],g=this.data[3],_=this.data[4],y=this.data[5],C=this.data[6],S=this.data[7],I=this.data[8],M=this.data[9],L=this.data[10],V=this.data[11],Y=this.data[12],Z=this.data[13],U=this.data[14],z=this.data[15],Q=0,q=1;return this.data[12]=o*t+_*n+I*Q+Y*q,this.data[13]=u*t+y*n+M*Q+Z*q,this.data[14]=c*t+C*n+L*Q+U*q,this.data[15]=g*t+S*n+V*Q+z*q,this}setPosition(t,n){this.data[12]=t,this.data[13]=n}getPosition(){return j(this.data[12],this.data[13])}rotate(t){const n=this.data[0],o=this.data[1],u=this.data[2],c=this.data[3],g=this.data[4],_=this.data[5],y=this.data[6],C=this.data[7],S=Math.sin(t),I=Math.cos(t);return this.data[0]=I*n+S*g,this.data[1]=I*o+S*_,this.data[2]=I*u+S*y,this.data[3]=I*c+S*C,this.data[4]=I*g-S*n,this.data[5]=I*_-S*o,this.data[6]=I*y-S*u,this.data[7]=I*C-S*c,this}scale(t,n){const o=this.data[0],u=this.data[1],c=this.data[2],g=this.data[3],_=this.data[4],y=this.data[5],C=this.data[6],S=this.data[7];return this.data[0]=o*t,this.data[1]=u*t,this.data[2]=c*t,this.data[3]=g*t,this.data[4]=_*n,this.data[5]=y*n,this.data[6]=C*n,this.data[7]=S*n,this}setRotation(t){const n=this.getScale(),o=Math.sin(t),u=Math.cos(t);this.data[0]=u*n.x,this.data[1]=o*n.y,this.data[4]=-o*n.x,this.data[5]=u*n.y}getRotation(){const t=Math.atan2(this.data[1]/this.getScaleY(),this.data[0]/this.getScaleX());return Vn(t)}getScaleX(){const t=j(this.data[0],this.data[4]).size;return this._scaleSignX*t}getScaleY(){const t=j(this.data[1],this.data[5]).size;return this._scaleSignY*t}getScale(){return j(this.getScaleX(),this.getScaleY())}setScaleX(t){if(this._scaleX===t)return;this._scaleSignX=ti(t);const n=j(this.data[0]*this._scaleSignX,this.data[4]*this._scaleSignX).normalize();this.data[0]=n.x*t,this.data[4]=n.y*t,this._scaleX=t}setScaleY(t){if(this._scaleY===t)return;this._scaleSignY=ti(t);const n=j(this.data[1]*this._scaleSignY,this.data[5]*this._scaleSignY).normalize();this.data[1]=n.x*t,this.data[5]=n.y*t,this._scaleY=t}setScale(t){this.setScaleX(t.x),this.setScaleY(t.y)}getBasisDeterminant(){return this.data[0]*this.data[5]-this.data[1]*this.data[4]}getAffineInverse(t){const o=1/this.getBasisDeterminant(),u=this.data[0],c=this.data[4],g=this.data[1],_=this.data[5],y=t||ze.identity();y.data[0]=_*o,y.data[1]=-g*o,y.data[4]=-c*o,y.data[5]=u*o;const C=this.data[12],S=this.data[13];return y.data[12]=-(C*y.data[0]+S*y.data[4]),y.data[13]=-(C*y.data[1]+S*y.data[5]),y}isIdentity(){return this.data[0]===1&&this.data[1]===0&&this.data[2]===0&&this.data[3]===0&&this.data[4]===0&&this.data[5]===1&&this.data[6]===0&&this.data[7]===0&&this.data[8]===0&&this.data[9]===0&&this.data[10]===1&&this.data[11]===0&&this.data[12]===0&&this.data[13]===0&&this.data[14]===0&&this.data[15]===1}toString(){return`
[${this.data[0]} ${this.data[4]} ${this.data[8]} ${this.data[12]}]
[${this.data[1]} ${this.data[5]} ${this.data[9]} ${this.data[13]}]
[${this.data[2]} ${this.data[6]} ${this.data[10]} ${this.data[14]}]
[${this.data[3]} ${this.data[7]} ${this.data[11]} ${this.data[15]}]
`}}class Kt{constructor(){this.data=new Float64Array(6),this._scale=new Float64Array([1,1]),this._scaleSignX=1,this._scaleSignY=1}toDOMMatrix(){return new DOMMatrix([...this.data])}static identity(){const t=new Kt;return t.data[0]=1,t.data[1]=0,t.data[2]=0,t.data[3]=1,t.data[4]=0,t.data[5]=0,t}static translation(t,n){const o=Kt.identity();return o.data[4]=t,o.data[5]=n,o}static scale(t,n){const o=Kt.identity();return o.data[0]=t,o.data[3]=n,o._scale[0]=t,o._scale[1]=n,o}static rotation(t){const n=Kt.identity();return n.data[0]=Math.cos(t),n.data[1]=Math.sin(t),n.data[2]=-Math.sin(t),n.data[3]=Math.cos(t),n}setPosition(t,n){this.data[4]=t,this.data[5]=n}getPosition(){return j(this.data[4],this.data[5])}rotate(t){const n=this.data[0],o=this.data[1],u=this.data[2],c=this.data[3],g=Math.sin(t),_=Math.cos(t);return this.data[0]=_*n+g*u,this.data[1]=_*o+g*c,this.data[2]=_*u-g*n,this.data[3]=_*c-g*o,this}translate(t,n){const o=this.data[0],u=this.data[1],c=this.data[2],g=this.data[3],_=this.data[4],y=this.data[5];return this.data[4]=o*t+c*n+_,this.data[5]=u*t+g*n+y,this}scale(t,n){const o=this.data[0],u=this.data[1],c=this.data[2],g=this.data[3];return this.data[0]=o*t,this.data[1]=u*t,this.data[2]=c*n,this.data[3]=g*n,this._scale[0]=t,this._scale[1]=n,this}determinant(){return this.data[0]*this.data[3]-this.data[1]*this.data[2]}inverse(t){const o=1/this.determinant(),u=this.data[0],c=this.data[2],g=this.data[1],_=this.data[3],y=t||Kt.identity();y.data[0]=_*o,y.data[1]=-g*o,y.data[2]=-c*o,y.data[3]=u*o;const C=this.data[4],S=this.data[5];return y.data[4]=-(C*y.data[0]+S*y.data[2]),y.data[5]=-(C*y.data[1]+S*y.data[3]),y}multiply(t,n){if(t instanceof F){const o=n||new F(0,0),u=t,c=u.x*this.data[0]+u.y*this.data[2]+this.data[4],g=u.x*this.data[1]+u.y*this.data[3]+this.data[5];return o.x=c,o.y=g,o}else{const o=n||new Kt,u=t,c=this.data[0],g=this.data[1],_=this.data[2],y=this.data[3],C=this.data[4],S=this.data[5],I=u.data[0],M=u.data[1],L=u.data[2],V=u.data[3],Y=u.data[4],Z=u.data[5];o.data[0]=c*I+_*M,o.data[1]=g*I+y*M,o.data[2]=c*L+_*V,o.data[3]=g*L+y*V,o.data[4]=c*Y+_*Z+C,o.data[5]=g*Y+y*Z+S;const U=this.getScale();return o._scaleSignX=ti(U.x)*ti(o._scaleSignX),o._scaleSignY=ti(U.y)*ti(o._scaleSignY),o}}to4x4(){const t=new ze;return t.data[0]=this.data[0],t.data[1]=this.data[1],t.data[2]=0,t.data[3]=0,t.data[4]=this.data[2],t.data[5]=this.data[3],t.data[6]=0,t.data[7]=0,t.data[8]=0,t.data[9]=0,t.data[10]=1,t.data[11]=0,t.data[12]=this.data[4],t.data[13]=this.data[5],t.data[14]=0,t.data[15]=1,t}setRotation(t){const n=this.getScale(),o=Math.sin(t),u=Math.cos(t);this.data[0]=u*n.x,this.data[1]=o*n.y,this.data[2]=-o*n.x,this.data[3]=u*n.y}getRotation(){const t=Math.atan2(this.data[1]/this.getScaleY(),this.data[0]/this.getScaleX());return Vn(t)}getScaleX(){const t=j(this.data[0],this.data[2]).distance();return this._scaleSignX*t}getScaleY(){const t=j(this.data[1],this.data[3]).distance();return this._scaleSignY*t}getScale(){return j(this.getScaleX(),this.getScaleY())}setScaleX(t){if(t===this._scale[0])return;this._scaleSignX=ti(t);const n=j(this.data[0]*this._scaleSignX,this.data[2]*this._scaleSignX).normalize();this.data[0]=n.x*t,this.data[2]=n.y*t,this._scale[0]=t}setScaleY(t){if(t===this._scale[1])return;this._scaleSignY=ti(t);const n=j(this.data[1]*this._scaleSignY,this.data[3]*this._scaleSignY).normalize();this.data[1]=n.x*t,this.data[3]=n.y*t,this._scale[1]=t}setScale(t){this.setScaleX(t.x),this.setScaleY(t.y)}isIdentity(){return this.data[0]===1&&this.data[1]===0&&this.data[2]===0&&this.data[3]===1&&this.data[4]===0&&this.data[5]===0}reset(){const t=this;return t.data[0]=1,t.data[1]=0,t.data[2]=0,t.data[3]=1,t.data[4]=0,t.data[5]=0,t}clone(t){const n=t||new Kt;return n.data[0]=this.data[0],n.data[1]=this.data[1],n.data[2]=this.data[2],n.data[3]=this.data[3],n.data[4]=this.data[4],n.data[5]=this.data[5],n}toString(){return`
[${this.data[0]} ${this.data[2]} ${this.data[4]}]
[${this.data[1]} ${this.data[3]} ${this.data[5]}]
[0 0 1]
`}}class rw{constructor(){this._transforms=[],this._currentTransform=Kt.identity()}save(){this._transforms.push(this._currentTransform),this._currentTransform=this._currentTransform.clone()}restore(){this._currentTransform=this._transforms.pop()}translate(t,n){return this._currentTransform.translate(t,n)}rotate(t){return this._currentTransform.rotate(t)}scale(t,n){return this._currentTransform.scale(t,n)}set current(t){this._currentTransform=t}get current(){return this._currentTransform}}class Yf{constructor(){this._states=[],this._currentState=this._getDefaultState()}_getDefaultState(){return{opacity:1,z:0,tint:K.White,material:null}}_cloneState(){return{opacity:this._currentState.opacity,z:this._currentState.z,tint:this._currentState.tint.clone(),material:this._currentState.material}}save(){this._states.push(this._currentState),this._currentState=this._cloneState()}restore(){this._currentState=this._states.pop()}get current(){return this._currentState}set current(t){this._currentState=t}}const ow={Complete:"complete",Load:"load",LoadStart:"loadstart",Progress:"progress",Error:"error"};class ha{constructor(t,n,o=!1){this.path=t,this.responseType=n,this.bustCache=o,this.data=null,this.logger=lt.getInstance(),this.events=new p}isLoaded(){return this.data!==null}_cacheBust(t){return/\?\w*=\w*/.test(t)?t+="&__="+Date.now():t+="?__="+Date.now(),t}load(){return new Promise((t,n)=>{if(this.data!==null){this.logger.debug("Already have data for resource",this.path),this.events.emit("complete",this.data),t(this.data);return}const o=new XMLHttpRequest;o.open("GET",this.bustCache?this._cacheBust(this.path):this.path,!0),o.responseType=this.responseType,o.addEventListener("loadstart",u=>this.events.emit("loadstart",u)),o.addEventListener("progress",u=>this.events.emit("progress",u)),o.addEventListener("error",u=>this.events.emit("error",u)),o.addEventListener("load",u=>this.events.emit("load",u)),o.addEventListener("load",()=>{if(o.status!==0&&o.status!==200){this.logger.error("Failed to load resource ",this.path," server responded with error code",o.status),this.events.emit("error",o.response),n(new Error(o.statusText));return}this.data=o.response,this.events.emit("complete",this.data),this.logger.debug("Completed loading resource",this.path),t(this.data)}),o.send()})}}function an(d,t){return d&&(d.__isProxy===void 0?new Proxy(d,{set:(n,o,u)=>(n[o]!==u&&(n[o]=u,typeof o=="string"&&o[0]!=="_"&&t(n)),!0),get:(n,o)=>o!=="__isProxy"?n[o]:!0}):d)}function Zf(d,t){return d&&(d.__isProxy===void 0?new Proxy(d,{set:(n,o,u)=>(n[o]=u,typeof o=="string"&&o[0]!=="_"&&t(n),!0),get:(n,o)=>o!=="__isProxy"?n[o]:!0}):d)}class Ue{isStale(){return this._transformStale}get flipHorizontal(){return this._flipHorizontal}set flipHorizontal(t){this._flipHorizontal=t,this._transformStale=!0}get flipVertical(){return this._flipVertical}set flipVertical(t){this._flipVertical=t,this._transformStale=!0}get rotation(){return this._rotation}set rotation(t){this._rotation=t,this._transformStale=!0}get scale(){return this._scale}set scale(t){this._scale=an(t,()=>{this._transformStale=!0}),this._transformStale=!0}get origin(){return this._origin}set origin(t){this._origin=an(t,()=>{this._transformStale=!0}),this._transformStale=!0}constructor(t){var n,o,u,c,g,_;this.id=Ue._ID++,this.transform=Kt.identity(),this.tint=null,this._transformStale=!0,this.showDebug=!1,this._flipHorizontal=!1,this._flipVertical=!1,this._rotation=0,this.opacity=1,this._scale=F.One,this._origin=null,this._width=0,this._height=0,t&&(this.origin=(n=t.origin)!==null&&n!==void 0?n:this.origin,this.flipHorizontal=(o=t.flipHorizontal)!==null&&o!==void 0?o:this.flipHorizontal,this.flipVertical=(u=t.flipVertical)!==null&&u!==void 0?u:this.flipVertical,this.rotation=(c=t.rotation)!==null&&c!==void 0?c:this.rotation,this.opacity=(g=t.opacity)!==null&&g!==void 0?g:this.opacity,this.scale=(_=t.scale)!==null&&_!==void 0?_:this.scale)}cloneGraphicOptions(){return{origin:this.origin?this.origin.clone():null,flipHorizontal:this.flipHorizontal,flipVertical:this.flipVertical,rotation:this.rotation,opacity:this.opacity,scale:this.scale?this.scale.clone():null}}get width(){return Math.abs(this._width*this.scale.x)}get height(){return Math.abs(this._height*this.scale.y)}set width(t){this._width=t,this._transformStale=!0}set height(t){this._height=t,this._transformStale=!0}get localBounds(){return pt.fromDimension(this.width,this.height,F.Zero)}draw(t,n,o){this._preDraw(t,n,o),this._drawImage(t,0,0),this._postDraw(t)}_preDraw(t,n,o){t.save(),t.translate(n,o),this._transformStale&&(this.transform.reset(),this.transform.scale(Math.abs(this.scale.x),Math.abs(this.scale.y)),this._rotate(this.transform),this._flip(this.transform),this._transformStale=!1),t.multiply(this.transform),t.opacity=t.opacity*this.opacity,this.tint&&(t.tint=this.tint)}_rotate(t){var n;const o=this.scale.x>0?1:-1,u=this.scale.y>0?1:-1,c=(n=this.origin)!==null&&n!==void 0?n:j(this.width/2,this.height/2);t.translate(c.x,c.y),t.rotate(this.rotation),t.scale(o,u),t.translate(-c.x,-c.y)}_flip(t){this.flipHorizontal&&(t.translate(this.width/this.scale.x,0),t.scale(-1,1)),this.flipVertical&&(t.translate(0,this.height/this.scale.y),t.scale(1,-1))}_postDraw(t){this.showDebug&&t.debug.drawRect(0,0,this.width,this.height),t.restore()}}Ue._ID=0;class ln extends Ue{static from(t){return new ln({image:t})}constructor(t){var n,o;super(t),this._logger=lt.getInstance(),this._dirty=!0,this._logNotLoadedWarning=!1,this.image=t.image;const{width:u,height:c}=t;this.sourceView=(n=t.sourceView)!==null&&n!==void 0?n:{x:0,y:0,width:u??0,height:c??0},this.destSize=(o=t.destSize)!==null&&o!==void 0?o:{width:u??0,height:c??0},this._updateSpriteDimensions(),this.image.ready.then(()=>{this._updateSpriteDimensions()})}get width(){return Math.abs(this.destSize.width*this.scale.x)}get height(){return Math.abs(this.destSize.height*this.scale.y)}set width(t){t/=Math.abs(this.scale.x),this.destSize.width=t,super.width=Math.ceil(this.destSize.width)}set height(t){t/=Math.abs(this.scale.y),this.destSize.height=t,super.height=Math.ceil(this.destSize.height)}_updateSpriteDimensions(){var t,n,o,u,c,g;const{width:_,height:y}=this.image;this.sourceView.width=((t=this.sourceView)===null||t===void 0?void 0:t.width)||_,this.sourceView.height=((n=this.sourceView)===null||n===void 0?void 0:n.height)||y,this.destSize.width=((o=this.destSize)===null||o===void 0?void 0:o.width)||((u=this.sourceView)===null||u===void 0?void 0:u.width)||_,this.destSize.height=((c=this.destSize)===null||c===void 0?void 0:c.height)||((g=this.sourceView)===null||g===void 0?void 0:g.height)||y,this.width=Math.ceil(this.destSize.width)*this.scale.x,this.height=Math.ceil(this.destSize.height)*this.scale.y}_preDraw(t,n,o){this.image.isLoaded()&&this._dirty&&(this._dirty=!1,this._updateSpriteDimensions()),super._preDraw(t,n,o)}_drawImage(t,n,o){this.image.isLoaded()?t.drawImage(this.image.image,this.sourceView.x,this.sourceView.y,this.sourceView.width,this.sourceView.height,n,o,this.destSize.width,this.destSize.height):(this._logNotLoadedWarning||this._logger.warn(`ImageSource ${this.image.path} is not yet loaded and won't be drawn. Please call .load() or include in a Loader.

Read https://excaliburjs.com/docs/imagesource for more information.`),this._logNotLoadedWarning=!0)}clone(){return new ln({image:this.image,sourceView:{...this.sourceView},destSize:{...this.destSize},...this.cloneGraphicOptions()})}}var xe;(function(d){d.Pixel="Pixel",d.Blended="Blended"})(xe||(xe={}));class fe{constructor(t){this._textureMap=new Map,this._gl=t,fe._MAX_TEXTURE_SIZE=t.getParameter(t.MAX_TEXTURE_SIZE)}get(t){return this._textureMap.get(t)}has(t){return this._textureMap.has(t)}load(t,n,o=!1){const u=this._gl;if(!u)return null;let c=null;if(this.has(t)&&(c=this.get(t)),c)return o&&(u.bindTexture(u.TEXTURE_2D,c),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,t)),c;c=u.createTexture(),fe.checkImageSizeSupportedAndLog(t),u.bindTexture(u.TEXTURE_2D,c),u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE);const g=n??fe.filtering;return u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,g===xe.Pixel?u.NEAREST:u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,g===xe.Pixel?u.NEAREST:u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,t),this._textureMap.set(t,c),c}delete(t){const n=this._gl;if(!n)return null;let o=null;this.has(t)&&(o=this.get(t),n.deleteTexture(o))}static checkImageSizeSupportedAndLog(t){var n;const o=(n=t.dataset.originalSrc)!==null&&n!==void 0?n:"internal canvas bitmap";return t.width>fe._MAX_TEXTURE_SIZE||t.height>fe._MAX_TEXTURE_SIZE?(fe._LOGGER.error(`The image [${o}] provided to Excalibur is too large for the device's maximum texture size of (${fe._MAX_TEXTURE_SIZE}x${fe._MAX_TEXTURE_SIZE}) please resize to an image for excalibur to render properly.

Images will likely render as black rectangles.

Read more here: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits`),!1):((t.width>4096||t.height>4096)&&fe._LOGGER.warn(`The image [${o}] provided to excalibur is too large may not work on all mobile devices, it is recommended you resize images to a maximum (4096x4096).

Images will likely render as black rectangles on some mobile platforms.

Read more here: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits`),!0)}}fe._LOGGER=lt.getInstance(),fe.filtering=xe.Blended,fe._MAX_TEXTURE_SIZE=4096;class Yu{get width(){return this.image.naturalWidth}get height(){return this.image.naturalHeight}isLoaded(){return this._src||(this._src=this.data.src),!!this._src}get image(){return this.data}constructor(t,n=!1,o){this.path=t,this._logger=lt.getInstance(),this.data=new Image,this._readyFuture=new jn,this.ready=this._readyFuture.promise,this._resource=new ha(t,"blob",n),this.filtering=o,(t.endsWith(".svg")||t.endsWith(".gif"))&&this._logger.warn(`Image type is not fully supported, you may have mixed results ${t}. Fully supported: jpg, bmp, and png`)}get bustCache(){return this._resource.bustCache}set bustCache(t){this._resource.bustCache=t}async load(){if(this.isLoaded())return this.data;try{let t;if(this.path.includes("data:image/"))t=this.path;else{const u=await this._resource.load();t=URL.createObjectURL(u)}const n=new Image,o=new jn;n.onload=()=>o.resolve(),n.src=t,n.setAttribute("data-original-src",this.path),await o.promise,this.data=n,fe.checkImageSizeSupportedAndLog(this.data)}catch(t){throw`Error loading ImageSource from path '${this.path}' with error [${t.message}]`}return this.data.setAttribute("filtering",this.filtering),this._readyFuture.resolve(this.data),this.data}toSprite(){return ln.from(this)}unload(){this.data=new Image}}class un{constructor(t){this._logger=lt.getInstance(),this.sprites=[];const{sprites:n,rows:o,columns:u}=t;this.sprites=n,this.rows=o??1,this.columns=u??this.sprites.length}getSprite(t,n){if(t>=this.columns||t<0)return this._logger.warn(`No sprite exists in the SpriteSheet at (${t}, ${n}), x: ${t} should be between 0 and ${this.columns-1}`),null;if(n>=this.rows||n<0)return this._logger.warn(`No sprite exists in the SpriteSheet at (${t}, ${n}), y: ${n} should be between 0 and ${this.rows-1}`),null;const o=t+n*this.columns;return this.sprites[o]}static fromImageSourceWithSourceViews(t){const n=t.sourceViews.map(o=>new ln({image:t.image,sourceView:o}));return new un({sprites:n})}static fromImageSource(t){var n;const o=[];t.spacing=(n=t.spacing)!==null&&n!==void 0?n:{};const{image:u,grid:{rows:c,columns:g,spriteWidth:_,spriteHeight:y},spacing:{originOffset:C,margin:S}}=t,I={x:0,y:0,...C},M={x:0,y:0,...S};for(let L=0;L<g;L++)for(let V=0;V<c;V++)o[L+V*g]=new ln({image:u,sourceView:{x:L*_+M.x*L+I.x,y:V*y+M.y*V+I.y,width:_,height:y},destSize:{height:y,width:_}});return new un({sprites:o,rows:c,columns:g})}clone(){return new un({sprites:this.sprites.map(t=>t.clone()),rows:this.rows,columns:this.columns})}}class ca extends Ue{constructor(t){super(t),this._text="",this.alphabet="",this.shadow=null,this.caseInsensitive=!1,this.spacing=0,this._logger=lt.getInstance(),this._alreadyWarnedAlphabet=!1,this._alreadyWarnedSpriteSheet=!1;const{alphabet:n,spriteSheet:o,caseInsensitive:u,spacing:c,shadow:g}=t;this.alphabet=n,this.spriteSheet=o,this.caseInsensitive=u??this.caseInsensitive,this.spacing=c??this.spacing,this.shadow=g??this.shadow}_getCharacterSprites(t){const n=[],o=this.caseInsensitive?t.toLocaleLowerCase():t,u=this.caseInsensitive?this.alphabet.toLocaleLowerCase():this.alphabet;for(let c=0;c<o.length;c++){const g=o[c];let _=u.indexOf(g);_===-1&&(_=0,this._alreadyWarnedAlphabet||(this._logger.warn(`SpriteFont - Cannot find letter '${g}' in configured alphabet '${u}'.`),this._logger.warn("There maybe be more issues in the SpriteFont configuration. No additional warnings will be logged."),this._alreadyWarnedAlphabet=!0));const y=this.spriteSheet.sprites[_];y?n.push(y):this._alreadyWarnedSpriteSheet||(this._logger.warn(`SpriteFont - Cannot find sprite for '${g}' at index '${_}' in configured SpriteSheet`),this._logger.warn("There maybe be more issues in the SpriteFont configuration. No additional warnings will be logged."),this._alreadyWarnedSpriteSheet=!0)}return n}measureText(t,n){const o=this._getLinesFromText(t,n),u=o.reduce((y,C)=>y.length>C.length?y:C),c=this._getCharacterSprites(u);let g=0,_=0;for(const y of c)g+=y.width+this.spacing,_=Math.max(_,y.height);return pt.fromDimension(g,_*o.length,F.Zero)}_drawImage(t,n,o,u){let c=0,g=0,_=0;const y=this._getLinesFromText(this._text,u);for(const C of y){for(const S of this._getCharacterSprites(C))S.draw(t,n+c,o+g),c+=S.width+this.spacing,_=Math.max(_,S.height);c=0,g+=_}}render(t,n,o,u,c,g){this._text=n;const _=this.measureText(n,g);this.width=_.width,this.height=_.height,this.shadow&&(t.save(),t.translate(this.shadow.offset.x,this.shadow.offset.y),this._preDraw(t,u,c),this._drawImage(t,0,0,g),this._postDraw(t),t.restore()),this._preDraw(t,u,c),this._drawImage(t,0,0,g),this._postDraw(t)}clone(){return new ca({alphabet:this.alphabet,spriteSheet:this.spriteSheet,spacing:this.spacing})}_getLinesFromText(t,n){if(this._cachedText===t&&this._cachedRenderWidth===n)return this._cachedLines;const o=t.split(`
`);if(n==null)return o;for(let u=0;u<o.length;u++){let c=o[u],g="";if(this.measureText(c).width>n){for(;this.measureText(c).width>n;)g=c[c.length-1]+g,c=c.slice(0,-1);o[u]=c,o[u+1]=g}}return this._cachedText=t,this._cachedLines=o,this._cachedRenderWidth=n,o}}const aw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAAwCAYAAAD+f6R/AAAAAXNSR0IArs4c6QAABcJJREFUeJztnemu7CgMhGE07//KmT9NhrAFVzkQndQntXRP3/bCZkwCSQhCCCGEEEIIIYQQQog/TRz953Ecx/nDGIe/vdNhlc9tIz605Fk/ZmWfsO1hn9Gxuv1KHbvb3iL/VN+d1WORbyr7yR/5b9M4vjNeqko6jPJHq5wGHU151o9J2Udse9hndCxuv0rH7rY3yD/Wdyf13MrnQeDfkZIUSGKM4ff3cWN82pEZuTyQGX2IxeyR63va//8VNCYCq+1yEkLtWyagXv1P1r1H+110gP3PzT4gT8uW/mdQ8mUG8E9DqOz4MS9ICKGbXpS2BpnIrRzYeS96cll08INlCMl2/glzdcfazuuPqQO03lmqrBHsf272Q6NODXj6zzZIJd/LAHYTg3Mays5gBi7ZR27fOgs0yj8rm36DLMFiPgkAdXHKOwUQeMCQ/adSh/qBQrT/tPxbAwA9+DOZEILPAATSuHMgTv7+Auk/df2lHPCZLvMSLJe34LkEQ9PwXF1SRTllMYgvIaflqyVAjLGbsiCDcOK76jflxZ+sINPyROc5071yKWK5CJTV3dMp6+tBlyCtNlhAq/+XbWoBDcRNXYBMzD4VvQygSuPYC2jGGaSSOxXfy3dTUEsanIvNeepm38N/hssSALTPZnAXfwIYRJn2b7UBcw0FKX+nDdAMpm2j9WVnxrUa7TXaVAca/B+TgaAVh6R/rH0P/5m01dt/RLYViJn+w/bhVX2P7f/duqom5qb02pRLCLGIMgBU1wCEEN9BAUCID6MAIMSHUQAQ4sMoAAjxYRQAhPgwd1uB0fuZ7H3cnn2P+9mr/Pe4B8/eB/fwP4eRtci/0f6OfTCPt/9oHwC6G6y19RHZDumxmwzR4eE/s/2Tte/q/+XLdc9DeJ19diesQc/j7Z8fCe4tAS4CxZ7sp7eiJi7HiZmjmOTGJs+93CbS3nP0XIPH3vW8/qz6QPnX2QdsV/1uw/iZYvg8ACeHd28rpPzfNfhL+7vkw/4Ou9s+Onhbv91elpKZ48Dl6bzpwwibHigRArf+Ptk9+L3Y1Q5OB4LgCeSBw1iuB3GeJh1/HrX/zF0A9Mk+u45zMkc3r4rWPomma5+p/514LB+Zo93MErJ1JHxXPzByGa/licRYVKbpeQCoQ6Q8yxuCwJF9IPsoDkHAo/3Tx26cvA4EtJ/n04w8QOq/mrR7ddfLAC5BYFNlVI/0CnOVUflOpvJUQMx9AIMIW/nWDM67/qw0+95v9goBqD9j+72u/KD9U89IbnQbMIR2Zbneh5zUY7Hdk7XIP3UffVb+r+wDYAZLq+1n1+C7y3/ny2r7p5yeByDEh9HzAIQQJwoAQnwYBQAhPowCgBBjoNu3hNxSFACE6INuKvPajPZ4EFEAEKINcybGYzOd247WEd3TgA2jlmjEyrd+j9hvfVbD2PWQ3ZmGlu2HyO8og8eBuNUvNYWoDgMVpwHTJoLWdz1Y+ZYOy5uF7t6PPruZxANrud1lQXkP0jsGz/Yz+vGGMuygFyhSPcJnc1pMnQZElc+cRnoAlxdTvoDuK7puqF7uCQy+3fyFMiA02/vJQHh7DQDogMPTSGFNA56HTzbZ9yAfBOb1Zyo3qGM3MfMZ3f76huXf6xlmAHknMlLNXsBBBvbljIz9Uyz5Y5TzIBLR/qy/rNyrZ8+L/0BZ0m+tgXD0OK5XZxC/9P7I/g4hVFvzXf1/6i5A7+3AlijMPBLMZfCvuAp7A9rY56ApHitmLQc7c8bOv6ftAxlM9Xp35nkEK7nJetBsaMhtAAAuOLQGXwhh2dXQnn1rZ/a42BI3dL7L+jkFAbQddwdA9Ah35yMKhgEgVT46EFh5D4jz+OgavNKxeBCd1wDSJ/97oR8eoJkLi9t9/BDgDHTJ5NE7Dnzechh914OVv9M1K9PCqsfqb88XVg9qN9lm6nG176UPu+zn17GOxuO0vOWEEC/j+LFKTgghlvEfYJaLS+SA2O0AAAAASUVORK5CYII=";class Zu{constructor(){this.fontSheet=aw,this.size=16,this.load()}load(){return this._imageSource=new Yu(this.fontSheet),this._imageSource.load().then(()=>{this._spriteSheet=un.fromImageSource({image:this._imageSource,grid:{rows:3,columns:16,spriteWidth:16,spriteHeight:16}}),this._spriteFont=new ca({alphabet:`0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ,!'&."?-()+ `,caseInsensitive:!0,spriteSheet:this._spriteSheet,spacing:-6})})}write(t,n,o){this._imageSource.isLoaded()&&this._spriteFont.render(t,n,null,o.x,o.y)}}class lw{constructor(t,n){this._gl=t,this._texture=n}use(){const t=this._gl;t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this._texture)}disable(){const t=this._gl;t.bindTexture(t.TEXTURE_2D,null)}}class Ku{constructor(t){this.width=t.width,this.height=t.height,this._gl=t.gl,this._setupFramebuffer()}setResolution(t,n){const o=this._gl;this.width=t,this.height=n,o.bindTexture(o.TEXTURE_2D,this._frameTexture),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,this.width,this.height,0,o.RGBA,o.UNSIGNED_BYTE,null)}get frameBuffer(){return this._frameBuffer}get frameTexture(){return this._frameTexture}_setupFramebuffer(){const t=this._gl;this._frameTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._frameTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);const n=t.COLOR_ATTACHMENT0;this._frameBuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this._frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,n,t.TEXTURE_2D,this._frameTexture,0),this.disable()}toRenderSource(){return new lw(this._gl,this._frameTexture)}use(){const t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._frameBuffer),t.viewport(0,0,this.width,this.height)}disable(){const t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindTexture(t.TEXTURE_2D,null)}}const uw=`#version 300 es\r
in vec2 a_position;\r
in vec4 a_color;\r
\r
out lowp vec4 v_color;\r
\r
uniform mat4 u_matrix;\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Passthrough the color\r
   v_color = a_color;\r
}`,hw=`#version 300 es\r
precision mediump float;\r
\r
// Color\r
in lowp vec4 v_color;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  fragColor = v_color;\r
}`;function Qu(d,t){switch(t){case d.FLOAT:return 4;case d.SHORT:return 2;case d.UNSIGNED_SHORT:return 2;case d.BYTE:return 1;case d.UNSIGNED_BYTE:return 1;default:return 1}}function Kf(d,t){switch(t){case d.LOW_FLOAT:case d.HIGH_FLOAT:case d.FLOAT:return 1;case d.FLOAT_VEC2:return 2;case d.FLOAT_VEC3:return 3;case d.FLOAT_VEC4:return 4;case d.BYTE:return 1;case d.UNSIGNED_BYTE:return 1;case d.UNSIGNED_SHORT:case d.SHORT:return 1;default:return 1}}function Qf(d,t){switch(t){case d.LOW_FLOAT:case d.HIGH_FLOAT:case d.FLOAT:case d.FLOAT_VEC2:case d.FLOAT_VEC3:case d.FLOAT_VEC4:return d.FLOAT;case d.BYTE:return d.BYTE;case d.UNSIGNED_BYTE:return d.UNSIGNED_BYTE;case d.SHORT:return d.SHORT;case d.UNSIGNED_SHORT:return d.UNSIGNED_SHORT;default:return d.FLOAT}}class ei{get compiled(){return this._compiled}constructor(t){this._logger=lt.getInstance(),this.uniforms={},this.attributes={},this._compiled=!1;const{gl:n,vertexSource:o,fragmentSource:u}=t;this._gl=n,this.vertexSource=o,this.fragmentSource=u}use(){this._gl.useProgram(this.program),ei._ACTIVE_SHADER_INSTANCE=this}isCurrentlyBound(){return ei._ACTIVE_SHADER_INSTANCE===this}compile(){const t=this._gl,n=this._compileShader(t,this.vertexSource,t.VERTEX_SHADER),o=this._compileShader(t,this.fragmentSource,t.FRAGMENT_SHADER);this.program=this._createProgram(t,n,o);const u=this.getAttributes();for(const g of u)this.attributes[g.name]=g;const c=this.getUniforms();for(const g of c)this.uniforms[g.name]=g;return this._compiled=!0,this.program}getUniforms(){const t=this._gl,n=t.getProgramParameter(this.program,t.ACTIVE_UNIFORMS),o=[];for(let u=0;u<n;u++){const c=t.getActiveUniform(this.program,u),g=t.getUniformLocation(this.program,c.name);o.push({name:c.name,glType:c.type,location:g})}return o}getAttributes(){const t=this._gl,n=t.getProgramParameter(this.program,t.ACTIVE_ATTRIBUTES),o=[];for(let u=0;u<n;u++){const c=t.getActiveAttrib(this.program,u),g=t.getAttribLocation(this.program,c.name);o.push({name:c.name,glType:Qf(t,c.type),size:Kf(t,c.type),location:g,normalized:!1})}return o}setTexture(t,n){const o=this._gl;o.activeTexture(o.TEXTURE0+t),o.bindTexture(o.TEXTURE_2D,n)}setUniformInt(t,n){this.setUniform("uniform1i",t,~~n)}trySetUniformInt(t,n){return this.trySetUniform("uniform1i",t,~~n)}setUniformIntArray(t,n){this.setUniform("uniform1iv",t,n)}trySetUniformIntArray(t,n){return this.trySetUniform("uniform1iv",t,n)}setUniformBoolean(t,n){this.setUniform("uniform1i",t,n?1:0)}trySetUniformBoolean(t,n){return this.trySetUniform("uniform1i",t,n?1:0)}setUniformFloat(t,n){this.setUniform("uniform1f",t,n)}trySetUniformFloat(t,n){return this.trySetUniform("uniform1f",t,n)}setUniformFloatArray(t,n){this.setUniform("uniform1fv",t,n)}trySetUniformFloatArray(t,n){return this.trySetUniform("uniform1fv",t,n)}setUniformFloatVector(t,n){this.setUniform("uniform2f",t,n.x,n.y)}trySetUniformFloatVector(t,n){return this.trySetUniform("uniform2f",t,n.x,n.y)}setUniformFloatColor(t,n){this.setUniform("uniform4f",t,n.r/255,n.g/255,n.b/255,n.a)}trySetUniformFloatColor(t,n){return this.trySetUniform("uniform4f",t,n.r/255,n.g/255,n.b/255,n.a)}setUniformMatrix(t,n){this.setUniform("uniformMatrix4fv",t,!1,n.data)}trySetUniformMatrix(t,n){return this.trySetUniform("uniformMatrix4fv",t,!1,n.data)}setUniform(t,n,...o){if(!this._compiled)throw Error(`Must compile shader before setting a uniform ${t}:${n}`);if(!this.isCurrentlyBound())throw Error("Currently accessed shader instance is not the current active shader in WebGL, must call `shader.use()` before setting uniforms");const c=this._gl.getUniformLocation(this.program,n);if(c){const g=[c,...o];this._gl[t].apply(this._gl,g)}else throw Error(`Uniform ${t}:${n} doesn't exist or is not used in the shader source code, unused uniforms are optimized away by most browsers`)}trySetUniform(t,n,...o){if(!this._compiled)return this._logger.warn(`Must compile shader before setting a uniform ${t}:${n}`),!1;if(!this.isCurrentlyBound())return this._logger.warn("Currently accessed shader instance is not the current active shader in WebGL, must call `shader.use()` before setting uniforms"),!1;const c=this._gl.getUniformLocation(this.program,n);if(c){const g=[c,...o];this._gl[t].apply(this._gl,g)}else return!1;return!0}_createProgram(t,n,o){const u=t.createProgram();if(u===null)throw Error("Could not create graphics shader program");if(t.attachShader(u,n),t.attachShader(u,o),t.linkProgram(u),!t.getProgramParameter(u,t.LINK_STATUS))throw Error(`Could not link the program: [${t.getProgramInfoLog(u)}]`);return u}_compileShader(t,n,o){const u=t.VERTEX_SHADER===o?"vertex":"fragment",c=t.createShader(o);if(c===null)throw Error(`Could not build shader: [${n}]`);if(t.shaderSource(c,n),t.compileShader(c),!t.getShaderParameter(c,t.COMPILE_STATUS)){const _=t.getShaderInfoLog(c);throw Error(`Could not compile ${u} shader:

${_}${this._processSourceForError(n,_)}`)}return c}_processSourceForError(t,n){const o=t.split(`
`),u=n.search(/\d:\d/),c=n.indexOf(" ",u),[g,_]=n.slice(u,c).split(":").map(y=>Number(y));for(let y=0;y<o.length;y++)o[y]=`${y+1}: ${o[y]}${_===y+1?" <----- ERROR!":""}`;return`

Source:
`+o.join(`
`)}}ei._ACTIVE_SHADER_INSTANCE=null;class ns{constructor(t){this.type="dynamic";const{gl:n,size:o,type:u,data:c}=t;if(this._gl=n,this.buffer=this._gl.createBuffer(),!c&&!o)throw Error("Must either provide data or a size to the VertexBuffer");c?this.bufferData=c:this.bufferData=new Float32Array(o),this.type=u??this.type,n.bindBuffer(n.ARRAY_BUFFER,this.buffer),n.bufferData(n.ARRAY_BUFFER,this.bufferData,this.type==="static"?n.STATIC_DRAW:n.DYNAMIC_DRAW)}bind(){const t=this._gl;t.bindBuffer(t.ARRAY_BUFFER,this.buffer)}upload(t){const n=this._gl;n.bindBuffer(n.ARRAY_BUFFER,this.buffer),t?n.bufferSubData(n.ARRAY_BUFFER,0,this.bufferData,0,t):n.bufferData(n.ARRAY_BUFFER,this.bufferData,this.type==="static"?n.STATIC_DRAW:n.DYNAMIC_DRAW)}}class rs{get vertexBuffer(){return this._vertexBuffer}get attributes(){return this._attributes}constructor(t){this._logger=lt.getInstance(),this._layout=[],this._attributes=[],this._vertexTotalSizeBytes=0;const{gl:n,shader:o,vertexBuffer:u,attributes:c}=t;this._gl=n,this._vertexBuffer=u,this._attributes=c,this._shader=o,o&&this.initialize()}get totalVertexSizeBytes(){return this._vertexTotalSizeBytes}set shader(t){t&&this._shader!==t&&(this._shader=t,this.initialize())}get shader(){return this._shader}initialize(){if(!this._shader)return;if(!this._shader.compiled)throw Error("Shader not compiled, shader must be compiled before defining a vertex layout");this._layout.length=0;const t=this._shader.attributes;for(const o of this._attributes){const u=t[o[0]];if(!u)throw Error(`The attribute named: ${o[0]} size ${o[1]} not found in the shader source code:
 ${this._shader.vertexSource}`);if(u.size!==o[1])throw Error(`VertexLayout size definition for attribute: [${o[0]}, ${o[1]}], doesnt match shader source size ${u.size}:
 ${this._shader.vertexSource}`);this._layout.push(u)}let n=0;for(const o of this._layout){const u=Qu(this._gl,o.glType);this._vertexTotalSizeBytes+=u*o.size,n+=o.size}this._vertexBuffer.bufferData.length%n!==0&&this._logger.warn(`The vertex component size (${n})  does divide evenly into the specified vertex buffer (${this._vertexBuffer.bufferData.length})`)}use(t=!1,n){if(!this._shader)throw Error("No shader is associated with this vertex layout, a shader must be set");const o=this._gl;if(!this._shader.isCurrentlyBound())throw Error("Shader associated with this vertex layout is not active! Call shader.use() before layout.use()");this._vertexBuffer.bind(),t&&this._vertexBuffer.upload(n);let u=0;for(const c of this._layout)o.vertexAttribPointer(c.location,c.size,c.glType,c.normalized,this.totalVertexSizeBytes,u),o.enableVertexAttribArray(c.location),u+=Qu(o,c.glType)*c.size}}class Qt{static clear(){Qt.DrawCallCount=0,Qt.DrawnImagesCount=0}}Qt.DrawCallCount=0,Qt.DrawnImagesCount=0;class cw{constructor(){this.type="ex.line",this.priority=0,this._maxLines=10922,this._vertexIndex=0,this._lineCount=0}initialize(t,n){this._gl=t,this._context=n,this._shader=new ei({gl:t,vertexSource:uw,fragmentSource:hw}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._vertexBuffer=new ns({gl:t,size:6*2*this._maxLines,type:"dynamic"}),this._layout=new rs({gl:t,vertexBuffer:this._vertexBuffer,shader:this._shader,attributes:[["a_position",2],["a_color",4]]})}draw(t,n,o){this._isFull()&&this.flush(),this._lineCount++;const u=this._context.getTransform(),c=u.multiply(t),g=u.multiply(n),_=this._vertexBuffer.bufferData;_[this._vertexIndex++]=c.x,_[this._vertexIndex++]=c.y,_[this._vertexIndex++]=o.r/255,_[this._vertexIndex++]=o.g/255,_[this._vertexIndex++]=o.b/255,_[this._vertexIndex++]=o.a,_[this._vertexIndex++]=g.x,_[this._vertexIndex++]=g.y,_[this._vertexIndex++]=o.r/255,_[this._vertexIndex++]=o.g/255,_[this._vertexIndex++]=o.b/255,_[this._vertexIndex++]=o.a}_isFull(){return this._lineCount>=this._maxLines}hasPendingDraws(){return this._lineCount!==0}flush(){if(this._lineCount===0)return;const t=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),t.drawArrays(t.LINES,0,this._lineCount*2),Qt.DrawnImagesCount+=this._lineCount,Qt.DrawCallCount++,this._vertexIndex=0,this._lineCount=0}}const dw=`#version 300 es\r
in vec2 a_position;\r
in vec4 a_color;\r
in float a_size;\r
out lowp vec4 v_color;\r
uniform mat4 u_matrix;\r
\r
void main() {\r
  gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
  gl_PointSize = a_size * 2.0;\r
  v_color = a_color;\r
}`,fw=`#version 300 es\r
\r
precision mediump float;\r
in lowp vec4 v_color;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  float r = 0.0, delta = 0.0, alpha = 1.0;\r
  vec2 cxy = 2.0 * gl_PointCoord - 1.0;\r
  r = dot(cxy, cxy);\r
\r
  delta = fwidth(r);\r
  alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\r
  // "premultiply" the color by alpha\r
  vec4 color = v_color;\r
  color.a = color.a * alpha;\r
  color.rgb = color.rgb * color.a;\r
  fragColor = color;\r
}`;class pw{constructor(){this.type="ex.point",this.priority=0,this._maxPoints=10922,this._pointCount=0,this._vertexIndex=0}initialize(t,n){this._gl=t,this._context=n,this._shader=new ei({gl:t,vertexSource:dw,fragmentSource:fw}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._buffer=new ns({gl:t,size:7*this._maxPoints,type:"dynamic"}),this._layout=new rs({gl:t,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_color",4],["a_size",1]]})}draw(t,n,o){this._isFull()&&this.flush(),this._pointCount++;const u=this._context.getTransform(),c=this._context.opacity,g=this._context.snapToPixel,_=u.multiply(t);g&&(_.x=~~(_.x+xt),_.y=~~(_.y+xt));const y=this._buffer.bufferData;y[this._vertexIndex++]=_.x,y[this._vertexIndex++]=_.y,y[this._vertexIndex++]=n.r/255,y[this._vertexIndex++]=n.g/255,y[this._vertexIndex++]=n.b/255,y[this._vertexIndex++]=n.a*c,y[this._vertexIndex++]=o*Math.max(u.getScaleX(),u.getScaleY())}_isFull(){return this._pointCount>=this._maxPoints}hasPendingDraws(){return this._pointCount!==0}flush(){if(this._pointCount===0)return;const t=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),t.drawArrays(t.POINTS,0,this._pointCount),Qt.DrawnImagesCount+=this._pointCount,Qt.DrawCallCount++,this._pointCount=0,this._vertexIndex=0}}const gw=`#version 300 es\r
in vec2 a_position;\r
\r
in vec2 a_texcoord;\r
out vec2 v_texcoord;\r
\r
void main() {\r
  gl_Position = vec4(a_position, 0.0, 1.0);\r
\r
  // Pass the texcoord to the fragment shader.\r
  v_texcoord = a_texcoord;\r
}`,mw=`#version 300 es\r
precision mediump float;\r
\r
// Passed in from the vertex shader.\r
in vec2 v_texcoord;\r
\r
// The texture.\r
uniform sampler2D u_texture;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
   fragColor = texture(u_texture, v_texcoord);\r
}`;class _w{constructor(t){this._gl=t,this._shader=new ei({gl:t,vertexSource:gw,fragmentSource:mw}),this._shader.compile(),this._buffer=new ns({gl:t,type:"static",data:new Float32Array([-1,-1,0,0,-1,1,0,1,1,-1,1,0,1,-1,1,0,-1,1,0,1,1,1,1,1])}),this._layout=new rs({gl:t,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_texcoord",2]]}),this._buffer.upload()}renderWithPostProcessor(t){const n=this._gl;t.getShader().use(),t.getLayout().use(),n.drawArrays(n.TRIANGLES,0,6)}renderToScreen(){const t=this._gl;this._shader.use(),this._layout.use(),t.drawArrays(t.TRIANGLES,0,6)}}class Hr{constructor(t,n,o){this._logger=lt.getInstance(),this._gl=t,this.buffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer);const u=n*6;if(!o)this.bufferData=new Uint32Array(u);else{const _=Math.floor(16383.5);this.bufferGlType=t.UNSIGNED_SHORT,this.bufferData=new Uint16Array(u),n>_&&this._logger.warn(`Total quads exceeds hardware index buffer limit (uint16), max(${_}) requested quads(${n})`)}let c=0;for(let g=0;g<u;g+=6)this.bufferData[g+0]=c+0,this.bufferData[g+1]=c+1,this.bufferData[g+2]=c+2,this.bufferData[g+3]=c+2,this.bufferData[g+4]=c+1,this.bufferData[g+5]=c+3,c+=4;t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.bufferData,t.STATIC_DRAW)}get size(){return this.bufferData.length}upload(){const t=this._gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.bufferData,t.STATIC_DRAW)}bind(){const t=this._gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer)}}const vw=`#version 300 es\r
precision mediump float;\r
\r
// UV coord\r
in vec2 v_texcoord;\r
\r
// Texture index\r
in lowp float v_textureIndex;\r
\r
// Textures in the current draw\r
uniform sampler2D u_textures[%%count%%];\r
\r
// Opacity\r
in float v_opacity;\r
\r
in vec4 v_tint;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
   // In order to support the most efficient sprite batching, we have multiple\r
   // textures loaded into the gpu (usually 8) this picker logic skips over textures\r
   // that do not apply to a particular sprite.\r
\r
   vec4 color = vec4(1.0, 0, 0, 1.0);\r
\r
   // GLSL is templated out to pick the right texture and set the vec4 color\r
   %%texture_picker%%\r
\r
   color.rgb = color.rgb * v_opacity;\r
   color.a = color.a * v_opacity;\r
   fragColor = color * v_tint;\r
}`,yw=`#version 300 es\r
in vec2 a_position;\r
\r
// Opacity \r
in float a_opacity;\r
out float v_opacity;\r
\r
// UV coordinate\r
in vec2 a_texcoord;\r
out vec2 v_texcoord;\r
\r
// Texture number\r
in lowp float a_textureIndex;\r
out lowp float v_textureIndex;\r
\r
in vec4 a_tint;\r
out vec4 v_tint;\r
\r
uniform mat4 u_matrix;\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Pass through the Opacity to the fragment shader\r
   v_opacity = a_opacity;\r
   // Pass through the UV coord to the fragment shader\r
   v_texcoord = a_texcoord;\r
   // Pass through the texture number to the fragment shader\r
   v_textureIndex = a_textureIndex;\r
   // Pass through the tint\r
   v_tint = a_tint;\r
}`;class xw{constructor(){this.type="ex.image",this.priority=0,this._maxImages=10922,this._maxTextures=0,this._imageCount=0,this._textures=[],this._vertexIndex=0}initialize(t,n){this._gl=t,this._context=n,this._maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),125);const o=this._transformFragmentSource(vw,this._maxTextures);this._shader=new ei({gl:t,fragmentSource:o,vertexSource:yw}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",n.ortho),this._shader.setUniformIntArray("u_textures",[...Array(this._maxTextures)].map((u,c)=>c)),this._buffer=new ns({gl:t,size:10*4*this._maxImages,type:"dynamic"}),this._layout=new rs({gl:t,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_opacity",1],["a_texcoord",2],["a_textureIndex",1],["a_tint",4]]}),this._quads=new Hr(t,this._maxImages,!0)}_transformFragmentSource(t,n){let o=t.replace("%%count%%",n.toString()),u="";for(let c=0;c<n;c++)c===0?u+=`if (v_textureIndex <= ${c}.5) {
`:u+=`   else if (v_textureIndex <= ${c}.5) {
`,u+=`      color = texture(u_textures[${c}], v_texcoord);
`,u+=`   }
`;return o=o.replace("%%texture_picker%%",u),o}_addImageAsTexture(t){const n=t.getAttribute("filtering");let o=null;(n===xe.Blended||n===xe.Pixel)&&(o=n);const u=t.getAttribute("forceUpload")==="true",c=this._context.textureLoader.load(t,o,u);t.removeAttribute("forceUpload"),this._textures.indexOf(c)===-1&&this._textures.push(c)}_bindTextures(t){for(let n=0;n<this._maxTextures;n++)t.activeTexture(t.TEXTURE0+n),t.bindTexture(t.TEXTURE_2D,this._textures[n]||this._textures[0])}_getTextureIdForImage(t){if(t){const n=this._context.textureLoader.get(t);return this._textures.indexOf(n)}return-1}_isFull(){return this._imageCount>=this._maxImages||this._textures.length>=this._maxTextures}draw(t,n,o,u,c,g,_,y,C){var S,I,M,L;this._isFull()&&this.flush(),this._imageCount++,this._addImageAsTexture(t);let V=(t==null?void 0:t.width)||u||0,Y=(t==null?void 0:t.height)||c||0,Z=[0,0,(S=u??(t==null?void 0:t.width))!==null&&S!==void 0?S:0,(I=c??(t==null?void 0:t.height))!==null&&I!==void 0?I:0],U=[n??1,o??1];g!==void 0&&_!==void 0&&y!==void 0&&C!==void 0&&(Z=[n??1,o??1,(M=u??(t==null?void 0:t.width))!==null&&M!==void 0?M:0,(L=c??(t==null?void 0:t.height))!==null&&L!==void 0?L:0],U=[g,_],V=y,Y=C),n=Z[0],o=Z[1];const z=Z[2],Q=Z[3],q=this._context.getTransform(),ut=this._context.opacity,st=this._context.snapToPixel;let W=j(U[0],U[1]),wt=j(U[0]+V,U[1]),kt=j(U[0],U[1]+Y),Dt=j(U[0]+V,U[1]+Y);W=q.multiply(W),wt=q.multiply(wt),kt=q.multiply(kt),Dt=q.multiply(Dt),st&&(W.x=~~(W.x+xt),W.y=~~(W.y+xt),wt.x=~~(wt.x+xt),wt.y=~~(wt.y+xt),kt.x=~~(kt.x+xt),kt.y=~~(kt.y+xt),Dt.x=~~(Dt.x+xt),Dt.y=~~(Dt.y+xt));const Pt=this._context.tint,te=this._getTextureIdForImage(t),$e=t.width||V,We=t.height||Y,Ge=n/$e,Hi=o/We,$i=(n+z-.01)/$e,Wi=(o+Q-.01)/We,dt=this._layout.vertexBuffer.bufferData;dt[this._vertexIndex++]=W.x,dt[this._vertexIndex++]=W.y,dt[this._vertexIndex++]=ut,dt[this._vertexIndex++]=Ge,dt[this._vertexIndex++]=Hi,dt[this._vertexIndex++]=te,dt[this._vertexIndex++]=Pt.r/255,dt[this._vertexIndex++]=Pt.g/255,dt[this._vertexIndex++]=Pt.b/255,dt[this._vertexIndex++]=Pt.a,dt[this._vertexIndex++]=kt.x,dt[this._vertexIndex++]=kt.y,dt[this._vertexIndex++]=ut,dt[this._vertexIndex++]=Ge,dt[this._vertexIndex++]=Wi,dt[this._vertexIndex++]=te,dt[this._vertexIndex++]=Pt.r/255,dt[this._vertexIndex++]=Pt.g/255,dt[this._vertexIndex++]=Pt.b/255,dt[this._vertexIndex++]=Pt.a,dt[this._vertexIndex++]=wt.x,dt[this._vertexIndex++]=wt.y,dt[this._vertexIndex++]=ut,dt[this._vertexIndex++]=$i,dt[this._vertexIndex++]=Hi,dt[this._vertexIndex++]=te,dt[this._vertexIndex++]=Pt.r/255,dt[this._vertexIndex++]=Pt.g/255,dt[this._vertexIndex++]=Pt.b/255,dt[this._vertexIndex++]=Pt.a,dt[this._vertexIndex++]=Dt.x,dt[this._vertexIndex++]=Dt.y,dt[this._vertexIndex++]=ut,dt[this._vertexIndex++]=$i,dt[this._vertexIndex++]=Wi,dt[this._vertexIndex++]=te,dt[this._vertexIndex++]=Pt.r/255,dt[this._vertexIndex++]=Pt.g/255,dt[this._vertexIndex++]=Pt.b/255,dt[this._vertexIndex++]=Pt.a}hasPendingDraws(){return this._imageCount!==0}flush(){if(this._imageCount===0)return;const t=this._gl;this._shader.use(),this._layout.use(!0,4*10*this._imageCount),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._bindTextures(t),this._quads.bind(),t.drawElements(t.TRIANGLES,this._imageCount*6,this._quads.bufferGlType,0),Qt.DrawnImagesCount+=this._imageCount,Qt.DrawCallCount++,this._imageCount=0,this._vertexIndex=0,this._textures.length=0}}const ww=`#version 300 es\r
\r
precision mediump float;\r
\r
// UV coord\r
in vec2 v_uv;\r
\r
in vec2 v_size; // in pixels\r
\r
// Color coord to blend with image\r
in lowp vec4 v_color;\r
\r
// Stroke color if used\r
in lowp vec4 v_strokeColor;\r
\r
// Stroke thickness if used\r
in lowp float v_strokeThickness; // in pixels\r
\r
// Opacity\r
in float v_opacity;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
    // modified from https://stackoverflow.com/questions/59197671/glsl-rounded-rectangle-with-variable-border\r
    vec2 uv = v_uv;\r
    vec2 fragCoord = uv * v_size;\r
    float maxX = v_size.x - v_strokeThickness;\r
    float minX = v_strokeThickness;\r
    float maxY = v_size.y - v_strokeThickness;\r
    float minY = v_strokeThickness;\r
\r
    if (fragCoord.x < maxX && fragCoord.x > minX &&\r
        fragCoord.y < maxY && fragCoord.y > minY) {\r
      fragColor = v_color;\r
    } else {\r
      fragColor = v_strokeColor;\r
    }\r
    fragColor.a *= v_opacity;\r
    fragColor.rgb *= fragColor.a;\r
\r
    // vec2 v2CenteredPos     = abs(fragCoord - v_size.xy / 2.0);\r
    // vec2 v2HalfShapeSizePx = v_size.xy/2.0 - v_strokeThickness/2.0;\r
\r
    // float fHalfBorderDist      = 0.0;\r
    // float fHalfBorderThickness = 0.0;\r
\r
    // if (fragCoord.x > max(v_radius, v_strokeThickness) && \r
    //     fragCoord.x < v_size.x - max(v_radius, v_strokeThickness))\r
    // {\r
    //     fHalfBorderDist      = v2CenteredPos.y - v2HalfShapeSizePx.y;\r
    //     fHalfBorderThickness = v_strokeThickness / 2.0;\r
    // }\r
    // else if (fragCoord.y > max(v_radius, v_strokeThickness) && \r
    //          fragCoord.y < v_size.y - max(v_radius, v_strokeThickness))\r
    // {\r
    //     fHalfBorderDist      = v2CenteredPos.x - v2HalfShapeSizePx.x;\r
    //     fHalfBorderThickness = v_strokeThickness / 2.0;\r
    // }\r
    // else\r
    // {\r
    //     vec2 edgeVec = max(vec2(0.0), v_radius - vec2(\r
    //         uv.x > 0.5 ? v_size.x - fragCoord.x : fragCoord.x,\r
    //         uv.y > 0.5 ? v_size.y - fragCoord.y : fragCoord.y));\r
        \r
    //     float ellipse_ab    = v_radius-v_strokeThickness;\r
    //     vec2 ellipse_isect = (v_strokeThickness > v_radius || v_strokeThickness > v_radius) ? vec2(0.0) :\r
    //                             edgeVec.xy * ellipse_ab*ellipse_ab / length(ellipse_ab*edgeVec.yx); \r
            \r
    //     fHalfBorderThickness = (v_radius - length(ellipse_isect)) / 2.0;\r
    //     fHalfBorderDist      = length(edgeVec) - (v_radius - fHalfBorderThickness);\r
    // }\r
\r
    // vec4 v4FromColor = v_strokeColor;\r
    // v4FromColor.rgb *= v4FromColor.a;\r
    // vec4 v4ToColor   = vec4(0.0); // background color is transparent\r
    // if (fHalfBorderDist < 0.0) {\r
    //     v4ToColor = v_color;\r
    //     v4ToColor.rgb *= v4ToColor.a;\r
    // }\r
\r
    // float mixPct = abs(fHalfBorderDist) - fHalfBorderThickness;\r
\r
    // vec4 finalColor = mix(v4FromColor, v4ToColor, mixPct);\r
    // gl_FragColor = finalColor;\r
}`,Cw=`#version 300 es\r
in vec2 a_position;\r
\r
// UV coordinate\r
in vec2 a_uv;\r
out vec2 v_uv;\r
\r
in vec2 a_size;\r
out vec2 v_size;\r
\r
// Opacity \r
in float a_opacity;\r
out float v_opacity;\r
\r
in vec4 a_color;\r
out vec4 v_color;\r
\r
in vec4 a_strokeColor;\r
out vec4 v_strokeColor;\r
\r
in float a_strokeThickness;\r
out float v_strokeThickness;\r
\r
uniform mat4 u_matrix;\r
\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Pass through UV coords\r
   v_uv = a_uv;\r
   // Pass through size\r
   v_size = a_size;\r
   // Pass through the Opacity to the fragment shader\r
   v_opacity = a_opacity;\r
   // Pass through the color to the fragment shader\r
   v_color = a_color;\r
   // Pass through the stroke color to the fragment shader\r
   v_strokeColor = a_strokeColor;\r
   // Pass through the stroke thickenss to the fragment shader\r
   v_strokeThickness = a_strokeThickness;\r
}`;class bw{constructor(){this.type="ex.rectangle",this.priority=0,this._maxRectangles=10922,this._rectangleCount=0,this._vertexIndex=0}initialize(t,n){this._gl=t,this._context=n,this._shader=new ei({gl:t,fragmentSource:ww,vertexSource:Cw}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",n.ortho),this._buffer=new ns({gl:t,size:16*4*this._maxRectangles,type:"dynamic"}),this._layout=new rs({gl:t,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_uv",2],["a_size",2],["a_opacity",1],["a_color",4],["a_strokeColor",4],["a_strokeThickness",1]]}),this._quads=new Hr(t,this._maxRectangles,!0)}_isFull(){return this._rectangleCount>=this._maxRectangles}draw(...t){t[0]instanceof F&&t[1]instanceof F?this.drawLine.apply(this,t):this.drawRectangle.apply(this,t)}drawLine(t,n,o,u=1){this._isFull()&&this.flush(),this._rectangleCount++;const c=this._context.getTransform(),g=this._context.opacity,_=this._context.snapToPixel,y=n.sub(t),C=y.size,S=y.normalize().perpendicular(),I=u/2,M=c.multiply(S.scale(I).add(t)),L=c.multiply(S.scale(-I).add(t)),V=c.multiply(S.scale(I).add(n)),Y=c.multiply(S.scale(-I).add(n));_&&(M.x=~~(M.x+xt),M.y=~~(M.y+xt),V.x=~~(V.x+xt),V.y=~~(V.y+xt),L.x=~~(L.x+xt),L.y=~~(L.y+xt),Y.x=~~(Y.x+xt),Y.y=~~(Y.y+xt));const Z=0,U=0,z=1,Q=1,q=K.Transparent,ut=0,st=1,W=this._layout.vertexBuffer.bufferData;W[this._vertexIndex++]=M.x,W[this._vertexIndex++]=M.y,W[this._vertexIndex++]=Z,W[this._vertexIndex++]=U,W[this._vertexIndex++]=C,W[this._vertexIndex++]=u,W[this._vertexIndex++]=g,W[this._vertexIndex++]=o.r/255,W[this._vertexIndex++]=o.g/255,W[this._vertexIndex++]=o.b/255,W[this._vertexIndex++]=o.a,W[this._vertexIndex++]=q.r/255,W[this._vertexIndex++]=q.g/255,W[this._vertexIndex++]=q.b/255,W[this._vertexIndex++]=q.a,W[this._vertexIndex++]=ut/st,W[this._vertexIndex++]=L.x,W[this._vertexIndex++]=L.y,W[this._vertexIndex++]=Z,W[this._vertexIndex++]=Q,W[this._vertexIndex++]=C,W[this._vertexIndex++]=u,W[this._vertexIndex++]=g,W[this._vertexIndex++]=o.r/255,W[this._vertexIndex++]=o.g/255,W[this._vertexIndex++]=o.b/255,W[this._vertexIndex++]=o.a,W[this._vertexIndex++]=q.r/255,W[this._vertexIndex++]=q.g/255,W[this._vertexIndex++]=q.b/255,W[this._vertexIndex++]=q.a,W[this._vertexIndex++]=ut/st,W[this._vertexIndex++]=V.x,W[this._vertexIndex++]=V.y,W[this._vertexIndex++]=z,W[this._vertexIndex++]=U,W[this._vertexIndex++]=C,W[this._vertexIndex++]=u,W[this._vertexIndex++]=g,W[this._vertexIndex++]=o.r/255,W[this._vertexIndex++]=o.g/255,W[this._vertexIndex++]=o.b/255,W[this._vertexIndex++]=o.a,W[this._vertexIndex++]=q.r/255,W[this._vertexIndex++]=q.g/255,W[this._vertexIndex++]=q.b/255,W[this._vertexIndex++]=q.a,W[this._vertexIndex++]=ut/st,W[this._vertexIndex++]=Y.x,W[this._vertexIndex++]=Y.y,W[this._vertexIndex++]=z,W[this._vertexIndex++]=Q,W[this._vertexIndex++]=C,W[this._vertexIndex++]=u,W[this._vertexIndex++]=g,W[this._vertexIndex++]=o.r/255,W[this._vertexIndex++]=o.g/255,W[this._vertexIndex++]=o.b/255,W[this._vertexIndex++]=o.a,W[this._vertexIndex++]=q.r/255,W[this._vertexIndex++]=q.g/255,W[this._vertexIndex++]=q.b/255,W[this._vertexIndex++]=q.a,W[this._vertexIndex++]=ut/st}drawRectangle(t,n,o,u,c=K.Transparent,g=0){this._isFull()&&this.flush(),this._rectangleCount++;const _=this._context.getTransform(),y=this._context.opacity,C=this._context.snapToPixel,S=_.multiply(t.add(j(0,0))),I=_.multiply(t.add(j(n,0))),M=_.multiply(t.add(j(n,o))),L=_.multiply(t.add(j(0,o)));C&&(S.x=~~(S.x+xt),S.y=~~(S.y+xt),I.x=~~(I.x+xt),I.y=~~(I.y+xt),L.x=~~(L.x+xt),L.y=~~(L.y+xt),M.x=~~(M.x+xt),M.y=~~(M.y+xt));const V=0,Y=0,Z=1,U=1,z=this._layout.vertexBuffer.bufferData;z[this._vertexIndex++]=S.x,z[this._vertexIndex++]=S.y,z[this._vertexIndex++]=V,z[this._vertexIndex++]=Y,z[this._vertexIndex++]=n,z[this._vertexIndex++]=o,z[this._vertexIndex++]=y,z[this._vertexIndex++]=u.r/255,z[this._vertexIndex++]=u.g/255,z[this._vertexIndex++]=u.b/255,z[this._vertexIndex++]=u.a,z[this._vertexIndex++]=c.r/255,z[this._vertexIndex++]=c.g/255,z[this._vertexIndex++]=c.b/255,z[this._vertexIndex++]=c.a,z[this._vertexIndex++]=g,z[this._vertexIndex++]=L.x,z[this._vertexIndex++]=L.y,z[this._vertexIndex++]=V,z[this._vertexIndex++]=U,z[this._vertexIndex++]=n,z[this._vertexIndex++]=o,z[this._vertexIndex++]=y,z[this._vertexIndex++]=u.r/255,z[this._vertexIndex++]=u.g/255,z[this._vertexIndex++]=u.b/255,z[this._vertexIndex++]=u.a,z[this._vertexIndex++]=c.r/255,z[this._vertexIndex++]=c.g/255,z[this._vertexIndex++]=c.b/255,z[this._vertexIndex++]=c.a,z[this._vertexIndex++]=g,z[this._vertexIndex++]=I.x,z[this._vertexIndex++]=I.y,z[this._vertexIndex++]=Z,z[this._vertexIndex++]=Y,z[this._vertexIndex++]=n,z[this._vertexIndex++]=o,z[this._vertexIndex++]=y,z[this._vertexIndex++]=u.r/255,z[this._vertexIndex++]=u.g/255,z[this._vertexIndex++]=u.b/255,z[this._vertexIndex++]=u.a,z[this._vertexIndex++]=c.r/255,z[this._vertexIndex++]=c.g/255,z[this._vertexIndex++]=c.b/255,z[this._vertexIndex++]=c.a,z[this._vertexIndex++]=g,z[this._vertexIndex++]=M.x,z[this._vertexIndex++]=M.y,z[this._vertexIndex++]=Z,z[this._vertexIndex++]=U,z[this._vertexIndex++]=n,z[this._vertexIndex++]=o,z[this._vertexIndex++]=y,z[this._vertexIndex++]=u.r/255,z[this._vertexIndex++]=u.g/255,z[this._vertexIndex++]=u.b/255,z[this._vertexIndex++]=u.a,z[this._vertexIndex++]=c.r/255,z[this._vertexIndex++]=c.g/255,z[this._vertexIndex++]=c.b/255,z[this._vertexIndex++]=c.a,z[this._vertexIndex++]=g}hasPendingDraws(){return this._rectangleCount!==0}flush(){if(this._rectangleCount===0)return;const t=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._quads.bind(),t.drawElements(t.TRIANGLES,this._rectangleCount*6,this._quads.bufferGlType,0),Qt.DrawnImagesCount+=this._rectangleCount,Qt.DrawCallCount++,this._rectangleCount=0,this._vertexIndex=0}}const Sw=`#version 300 es\r
precision highp float;\r
\r
// UV coord\r
in vec2 v_uv;\r
\r
// Color coord to blend with image\r
in lowp vec4 v_color;\r
\r
// Stroke color if used\r
in lowp vec4 v_strokeColor;\r
\r
// Stroke thickness if used\r
in lowp float v_strokeThickness;\r
\r
// Opacity\r
in float v_opacity;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  // make (0, 0) the center the uv \r
  vec2 uv = v_uv * 2.0 - 1.0;\r
\r
  vec4 color = v_color;\r
  vec4 strokeColor = v_strokeColor;\r
\r
  // circle border is at radius 1.0 \r
  // dist is > 0 when inside the circle \r
  float d = length(uv);\r
  float dist = 1.0 - length(uv);\r
\r
  // Fade based on fwidth\r
  float fade = fwidth(dot(uv, uv));\r
\r
  // if dist is greater than 0 step to 1;\r
  // when we cross this 0 threshold add a smooth fade\r
  float fill = smoothstep(-fade/2.0, fade/2.0, dist);\r
\r
  // if dist is greater than the stroke thickness step to 1\r
  float stroke = 1.0 - smoothstep(v_strokeThickness, v_strokeThickness + fade, dist);\r
\r
  strokeColor.a *= fill * stroke;\r
  strokeColor.rgb *= strokeColor.a;\r
\r
  color.a *= fill * (1.0 - stroke);\r
  color.rgb *= color.a;\r
\r
  vec4 finalColor = mix(vec4(0.0), (color + strokeColor), fill);\r
  finalColor.rgb = finalColor.rgb * v_opacity;\r
  finalColor.a = finalColor.a * v_opacity;\r
  fragColor = finalColor;\r
}`,Pw=`#version 300 es\r
in vec2 a_position;\r
\r
// UV coordinate\r
in vec2 a_uv;\r
out vec2 v_uv;\r
\r
// Opacity \r
in float a_opacity;\r
out float v_opacity;\r
\r
in vec4 a_color;\r
out vec4 v_color;\r
\r
in vec4 a_strokeColor;\r
out vec4 v_strokeColor;\r
\r
in float a_strokeThickness;\r
out float v_strokeThickness;\r
\r
uniform mat4 u_matrix;\r
\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Pass through UV coords\r
   v_uv = a_uv;\r
   // Pass through the Opacity to the fragment shader\r
   v_opacity = a_opacity;\r
   // Pass through the color to the fragment shader\r
   v_color = a_color;\r
   // Pass through the stroke color to the fragment shader\r
   v_strokeColor = a_strokeColor;\r
   // Pass through the stroke thickenss to the fragment shader\r
   v_strokeThickness = a_strokeThickness;\r
}`;class Ew{constructor(){this.type="ex.circle",this.priority=0,this._maxCircles=10922,this._circleCount=0,this._vertexIndex=0}initialize(t,n){this._gl=t,this._context=n,this._shader=new ei({gl:t,fragmentSource:Sw,vertexSource:Pw}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",n.ortho),this._buffer=new ns({gl:t,size:14*4*this._maxCircles,type:"dynamic"}),this._layout=new rs({gl:t,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_uv",2],["a_opacity",1],["a_color",4],["a_strokeColor",4],["a_strokeThickness",1]]}),this._quads=new Hr(t,this._maxCircles,!0)}_isFull(){return this._circleCount>=this._maxCircles}draw(t,n,o,u=K.Transparent,c=0){this._isFull()&&this.flush(),this._circleCount++;const g=this._context.getTransform(),_=this._context.opacity,y=this._context.snapToPixel,C=g.multiply(t.add(j(-n,-n))),S=g.multiply(t.add(j(n,-n))),I=g.multiply(t.add(j(n,n))),M=g.multiply(t.add(j(-n,n)));y&&(C.x=~~(C.x+xt),C.y=~~(C.y+xt),S.x=~~(S.x+xt),S.y=~~(S.y+xt),M.x=~~(M.x+xt),M.y=~~(M.y+xt),I.x=~~(I.x+xt),I.y=~~(I.y+xt));const L=0,V=0,Y=1,Z=1,U=this._layout.vertexBuffer.bufferData;U[this._vertexIndex++]=C.x,U[this._vertexIndex++]=C.y,U[this._vertexIndex++]=L,U[this._vertexIndex++]=V,U[this._vertexIndex++]=_,U[this._vertexIndex++]=o.r/255,U[this._vertexIndex++]=o.g/255,U[this._vertexIndex++]=o.b/255,U[this._vertexIndex++]=o.a,U[this._vertexIndex++]=u.r/255,U[this._vertexIndex++]=u.g/255,U[this._vertexIndex++]=u.b/255,U[this._vertexIndex++]=u.a,U[this._vertexIndex++]=c/n,U[this._vertexIndex++]=M.x,U[this._vertexIndex++]=M.y,U[this._vertexIndex++]=L,U[this._vertexIndex++]=Z,U[this._vertexIndex++]=_,U[this._vertexIndex++]=o.r/255,U[this._vertexIndex++]=o.g/255,U[this._vertexIndex++]=o.b/255,U[this._vertexIndex++]=o.a,U[this._vertexIndex++]=u.r/255,U[this._vertexIndex++]=u.g/255,U[this._vertexIndex++]=u.b/255,U[this._vertexIndex++]=u.a,U[this._vertexIndex++]=c/n,U[this._vertexIndex++]=S.x,U[this._vertexIndex++]=S.y,U[this._vertexIndex++]=Y,U[this._vertexIndex++]=V,U[this._vertexIndex++]=_,U[this._vertexIndex++]=o.r/255,U[this._vertexIndex++]=o.g/255,U[this._vertexIndex++]=o.b/255,U[this._vertexIndex++]=o.a,U[this._vertexIndex++]=u.r/255,U[this._vertexIndex++]=u.g/255,U[this._vertexIndex++]=u.b/255,U[this._vertexIndex++]=u.a,U[this._vertexIndex++]=c/n,U[this._vertexIndex++]=I.x,U[this._vertexIndex++]=I.y,U[this._vertexIndex++]=Y,U[this._vertexIndex++]=Z,U[this._vertexIndex++]=_,U[this._vertexIndex++]=o.r/255,U[this._vertexIndex++]=o.g/255,U[this._vertexIndex++]=o.b/255,U[this._vertexIndex++]=o.a,U[this._vertexIndex++]=u.r/255,U[this._vertexIndex++]=u.g/255,U[this._vertexIndex++]=u.b/255,U[this._vertexIndex++]=u.a,U[this._vertexIndex++]=c/n}hasPendingDraws(){return this._circleCount!==0}flush(){if(this._circleCount===0)return;const t=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._quads.bind(),t.drawElements(t.TRIANGLES,this._circleCount*6,this._quads.bufferGlType,0),Qt.DrawnImagesCount+=this._circleCount,Qt.DrawCallCount++,this._circleCount=0,this._vertexIndex=0}}class qf{constructor(t,n,o=100){this.builder=t,this.recycler=n,this.maxObjects=o,this.totalAllocations=0,this.index=0,this.objects=[],this.disableWarnings=!1,this._logger=lt.getInstance()}preallocate(){for(let t=0;t<this.maxObjects;t++)this.objects[t]=this.builder()}using(t){const n=t(this);return n?this.done(...n):this.done()}borrow(t){const n=this.get();t(n),this.index--}get(...t){return this.index===this.maxObjects&&(this.disableWarnings||this._logger.warn("Max pooled objects reached, possible memory leak? Doubling"),this.maxObjects=this.maxObjects*2),this.objects[this.index]?this.recycler(this.objects[this.index++],...t):(this.totalAllocations++,this.objects[this.index++]=this.builder(...t))}done(...t){this.index=0;for(const n of t){const o=this.objects.indexOf(n);this.objects[o]=this.builder(),this.totalAllocations++}return t}}class Tw{constructor(){this.z=0,this.priority=0,this.transform=Kt.identity(),this.state={z:0,opacity:1,tint:K.White,material:null}}}const Aw=`#version 300 es
in vec2 a_position;

in vec2 a_uv;
out vec2 v_uv;

uniform mat4 u_matrix;
uniform mat4 u_transform;

void main() {
  // Set the vertex position using the ortho & transform matrix
  gl_Position = u_matrix * u_transform * vec4(a_position, 0.0, 1.0);

  // Pass through the UV coord to the fragment shader
  v_uv = a_uv;
}
`;class Jf{constructor(t){this._color=K.Transparent,this._initialized=!1;const{color:n,name:o,vertexSource:u,fragmentSource:c}=t;this._name=o,this._vertexSource=u??Aw,this._fragmentSource=c,this._color=n??this._color}initialize(t,n){this._initialized||(this._shader=n.createShader({vertexSource:this._vertexSource,fragmentSource:this._fragmentSource}),this._shader.compile(),this._initialized=!0)}get name(){var t;return(t=this._name)!==null&&t!==void 0?t:"anonymous material"}getShader(){return this._shader}use(){if(this._initialized)this._shader.use(),this._shader.trySetUniformFloatColor("u_color",this._color);else throw Error(`Material ${this.name} not yet initialized, use the ExcaliburGraphicsContext.createMaterial() to work around this.`)}}class kw{constructor(){this.type="ex.material",this.priority=0,this._textures=[]}initialize(t,n){this._gl=t,this._context=n,this._buffer=new ns({gl:t,size:4*4,type:"dynamic"}),this._layout=new rs({gl:t,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_uv",2]]}),this._quads=new Hr(t,1,!0)}draw(t,n,o,u,c,g,_,y,C){var S,I,M,L;const V=this._gl,Y=this._context.material;Y.initialize(V,this._context);const Z=this._context.getTransform(),U=this._context.opacity,z=Y.getShader(),Q=this._layout.vertexBuffer.bufferData;let q=0,ut=(t==null?void 0:t.width)||u||0,st=(t==null?void 0:t.height)||c||0,W=[0,0,(S=u??(t==null?void 0:t.width))!==null&&S!==void 0?S:0,(I=c??(t==null?void 0:t.height))!==null&&I!==void 0?I:0],wt=[n??1,o??1];g!==void 0&&_!==void 0&&y!==void 0&&C!==void 0&&(W=[n??1,o??1,(M=u??(t==null?void 0:t.width))!==null&&M!==void 0?M:0,(L=c??(t==null?void 0:t.height))!==null&&L!==void 0?L:0],wt=[g,_],ut=y,st=C),n=W[0],o=W[1];const kt=W[2],Dt=W[3],Pt=j(wt[0],wt[1]),te=j(wt[0]+ut,wt[1]),$e=j(wt[0],wt[1]+st),We=j(wt[0]+ut,wt[1]+st),Ge=t.width||ut,Hi=t.height||st,$i=n/Ge,Wi=o/Hi,dt=(n+kt-.01)/Ge,_n=(o+Dt-.01)/Hi;Q[q++]=Pt.x,Q[q++]=Pt.y,Q[q++]=$i,Q[q++]=Wi,Q[q++]=$e.x,Q[q++]=$e.y,Q[q++]=$i,Q[q++]=_n,Q[q++]=te.x,Q[q++]=te.y,Q[q++]=dt,Q[q++]=Wi,Q[q++]=We.x,Q[q++]=We.y,Q[q++]=dt,Q[q++]=_n;const Ba=this._addImageAsTexture(t);Y.use(),this._layout.shader=z,this._layout.use(!0),z.trySetUniformFloat("u_opacity",U),z.trySetUniformFloatVector("u_resolution",j(this._context.width,this._context.height)),z.trySetUniformFloatVector("u_size",j(kt,Dt)),z.trySetUniformMatrix("u_matrix",this._context.ortho),z.trySetUniformMatrix("u_transform",Z.to4x4()),V.activeTexture(V.TEXTURE0+0),V.bindTexture(V.TEXTURE_2D,Ba),z.trySetUniformInt("u_graphic",0),this._quads.bind(),V.drawElements(V.TRIANGLES,6,this._quads.bufferGlType,0)}_addImageAsTexture(t){const n=t.getAttribute("filtering");let o=null;(n===xe.Blended||n===xe.Pixel)&&(o=n);const u=t.getAttribute("forceUpload")==="true",c=this._context.textureLoader.load(t,o,u);return t.removeAttribute("forceUpload"),this._textures.indexOf(c)===-1&&this._textures.push(c),c}hasPendingDraws(){return!1}flush(){}}const xt=1e-4;class Iw{constructor(t){this._webglCtx=t,this._debugText=new Zu}drawRect(t,n,o,u,c={color:K.Black}){this.drawLine(j(t,n),j(t+o,n),{...c}),this.drawLine(j(t+o,n),j(t+o,n+u),{...c}),this.drawLine(j(t+o,n+u),j(t,n+u),{...c}),this.drawLine(j(t,n+u),j(t,n),{...c})}drawLine(t,n,o={color:K.Black}){this._webglCtx.draw("ex.line",t,n,o.color)}drawPoint(t,n={color:K.Black,size:5}){this._webglCtx.draw("ex.point",t,n.color,n.size)}drawText(t,n){this._debugText.write(this._webglCtx,t,n)}}class Ps{get z(){return this._state.current.z}set z(t){this._state.current.z=t}get opacity(){return this._state.current.opacity}set opacity(t){this._state.current.opacity=t}get tint(){return this._state.current.tint}set tint(t){this._state.current.tint=t}get width(){return this.__gl.canvas.width}get height(){return this.__gl.canvas.height}get ortho(){return this._ortho}checkIfResolutionSupported(t){let n=!0;return(t.width>4096||t.height>4096)&&(n=!1),n}constructor(t){this._logger=lt.getInstance(),this._renderers=new Map,this._isDrawLifecycle=!1,this.useDrawSorting=!0,this._drawCallPool=new qf(()=>new Tw,y=>(y.priority=0,y.z=0,y.renderer=void 0,y.args=void 0,y),4e3),this._drawCalls=[],this._postProcessTargets=[],this._postprocessors=[],this._transform=new rw,this._state=new Yf,this.snapToPixel=!1,this.smoothing=!1,this.backgroundColor=K.ExcaliburBlue,this._alreadyWarnedDrawLifecycle=!1,this.debug=new Iw(this),this._totalPostProcessorTime=0;const{canvasElement:n,enableTransparency:o,smoothing:u,snapToPixel:c,backgroundColor:g,useDrawSorting:_}=t;if(this.__gl=n.getContext("webgl2",{antialias:u??this.smoothing,premultipliedAlpha:!1,alpha:o??!0,depth:!0,powerPreference:"high-performance"}),!this.__gl)throw Error("Failed to retrieve webgl context from browser");this.textureLoader=new fe(this.__gl),this.snapToPixel=c??this.snapToPixel,this.smoothing=u??this.smoothing,this.backgroundColor=g??this.backgroundColor,this.useDrawSorting=_??this.useDrawSorting,this._drawCallPool.disableWarnings=!0,this._drawCallPool.preallocate(),this._init()}_init(){const t=this.__gl;this._ortho=ze.ortho(0,t.canvas.width,t.canvas.height,0,400,-400),t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(this.backgroundColor.r/255,this.backgroundColor.g/255,this.backgroundColor.b/255,this.backgroundColor.a),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),this.register(new xw),this.register(new kw),this.register(new bw),this.register(new Ew),this.register(new pw),this.register(new cw),this._screenRenderer=new _w(t),this._renderTarget=new Ku({gl:t,width:t.canvas.width,height:t.canvas.height}),this._postProcessTargets=[new Ku({gl:t,width:t.canvas.width,height:t.canvas.height}),new Ku({gl:t,width:t.canvas.width,height:t.canvas.height})]}register(t){this._renderers.set(t.type,t),t.initialize(this.__gl,this)}get(t){return this._renderers.get(t)}_isCurrentRenderer(t){return!this._currentRenderer||this._currentRenderer===t}beginDrawLifecycle(){this._isDrawLifecycle=!0}endDrawLifecycle(){this._isDrawLifecycle=!1}draw(t,...n){!this._isDrawLifecycle&&!this._alreadyWarnedDrawLifecycle&&(this._logger.warn(`Attempting to draw outside the the drawing lifecycle (preDraw/postDraw) is not supported and is a source of bugs/errors.
If you want to do custom drawing, use Actor.graphics, or any onPreDraw or onPostDraw handler.`),this._alreadyWarnedDrawLifecycle=!0);const o=this._renderers.get(t);if(o)if(this.useDrawSorting){const u=this._drawCallPool.get();u.z=this._state.current.z,u.priority=o.priority,u.renderer=t,this.getTransform().clone(u.transform),u.state.z=this._state.current.z,u.state.opacity=this._state.current.opacity,u.state.tint=this._state.current.tint,u.state.material=this._state.current.material,u.args=n,this._drawCalls.push(u)}else this._currentRenderer||(this._currentRenderer=o),this._isCurrentRenderer(o)||this._currentRenderer.flush(),o.draw(...n),this._currentRenderer=o;else throw Error(`No renderer with name ${t} has been registered`)}resetTransform(){this._transform.current=Kt.identity()}updateViewport(t){const n=this.__gl;this._ortho=this._ortho=ze.ortho(0,t.width,t.height,0,400,-400),this._renderTarget.setResolution(n.canvas.width,n.canvas.height),this._postProcessTargets[0].setResolution(n.canvas.width,n.canvas.height),this._postProcessTargets[1].setResolution(n.canvas.width,n.canvas.height)}drawImage(t,n,o,u,c,g,_,y,C){if(!(u===0||c===0)){{if(y===0||C===0)return;if(t.width===0||t.height===0)return}if(!t){lt.getInstance().warn("Cannot draw a null or undefined image"),console.trace&&console.trace();return}this._state.current.material?this.draw("ex.material",t,n,o,u,c,g,_,y,C):this.draw("ex.image",t,n,o,u,c,g,_,y,C)}}drawLine(t,n,o,u=1){this.draw("ex.rectangle",t,n,o,u)}drawRectangle(t,n,o,u,c,g){this.draw("ex.rectangle",t,n,o,u,c,g)}drawCircle(t,n,o,u,c){this.draw("ex.circle",t,n,o,u,c)}save(){this._transform.save(),this._state.save()}restore(){this._transform.restore(),this._state.restore()}translate(t,n){this._transform.translate(this.snapToPixel?~~(t+xt):t,this.snapToPixel?~~(n+xt):n)}rotate(t){this._transform.rotate(t)}scale(t,n){this._transform.scale(t,n)}transform(t){this._transform.current=t}getTransform(){return this._transform.current}multiply(t){this._transform.current.multiply(t,this._transform.current)}addPostProcessor(t){this._postprocessors.push(t),t.initialize(this.__gl)}removePostProcessor(t){const n=this._postprocessors.indexOf(t);n!==-1&&this._postprocessors.splice(n,1)}clearPostProcessors(){this._postprocessors.length=0}updatePostProcessors(t){for(const n of this._postprocessors){const o=n.getShader();o.use();const u=o.getUniforms();this._totalPostProcessorTime+=t,u.find(c=>c.name==="u_time_ms")&&o.setUniformFloat("u_time_ms",this._totalPostProcessorTime),u.find(c=>c.name==="u_elapsed_ms")&&o.setUniformFloat("u_elapsed_ms",t),u.find(c=>c.name==="u_resolution")&&o.setUniformFloatVector("u_resolution",j(this.width,this.height)),n.onUpdate&&n.onUpdate(t)}}set material(t){this._state.current.material=t}get material(){return this._state.current.material}createMaterial(t){const n=new Jf(t);return n.initialize(this.__gl,this),n}createShader(t){const n=this.__gl,{vertexSource:o,fragmentSource:u}=t,c=new ei({gl:n,vertexSource:o,fragmentSource:u});return c.compile(),c}clear(){const t=this.__gl;this._renderTarget.use(),t.clearColor(this.backgroundColor.r/255,this.backgroundColor.g/255,this.backgroundColor.b/255,this.backgroundColor.a),t.clear(t.COLOR_BUFFER_BIT)}flush(){const t=this.__gl;if(this._renderTarget.use(),this.useDrawSorting){const o=new Map;for(const[g]of this._renderers){const _=this._drawCalls.findIndex(y=>y.renderer===g);o.set(g,_)}this._drawCalls.sort((g,_)=>{const y=g.z-_.z,C=o.get(g.renderer)-o.get(_.renderer),S=g.priority-_.priority;return y===0?S===0?C:S:y});const u=this._transform.current,c=this._state.current;if(this._drawCalls.length){let g=this._drawCalls[0].renderer,_=this._renderers.get(g);for(let y=0;y<this._drawCalls.length;y++)this._transform.current=this._drawCalls[y].transform,this._state.current=this._drawCalls[y].state,this._drawCalls[y].renderer!==g&&(_.flush(),g=this._drawCalls[y].renderer,_=this._renderers.get(g)),_.draw(...this._drawCalls[y].args);_.hasPendingDraws()&&_.flush()}this._transform.current=u,this._state.current=c,this._drawCallPool.done(),this._drawCalls.length=0}else for(const o of this._renderers.values())o.hasPendingDraws()&&o.flush();this._renderTarget.disable(),this._renderTarget.toRenderSource().use();for(let o=0;o<this._postprocessors.length;o++)this._postProcessTargets[o%2].use(),this._screenRenderer.renderWithPostProcessor(this._postprocessors[o]),this._postProcessTargets[o%2].toRenderSource().use();t.bindFramebuffer(t.FRAMEBUFFER,null),this._screenRenderer.renderToScreen()}}const Gt=1e-4;class Rw{constructor(t){this._ex=t,this._debugText=new Zu}drawRect(t,n,o,u){this._ex.__ctx.save(),this._ex.__ctx.strokeStyle="red",this._ex.__ctx.strokeRect(this._ex.snapToPixel?~~(t+Gt):t,this._ex.snapToPixel?~~(n+Gt):n,this._ex.snapToPixel?~~(o+Gt):o,this._ex.snapToPixel?~~(u+Gt):u),this._ex.__ctx.restore()}drawLine(t,n,o={color:K.Black}){this._ex.__ctx.save(),this._ex.__ctx.beginPath(),this._ex.__ctx.strokeStyle=o.color.toString(),this._ex.__ctx.moveTo(this._ex.snapToPixel?~~(t.x+Gt):t.x,this._ex.snapToPixel?~~(t.y+Gt):t.y),this._ex.__ctx.lineTo(this._ex.snapToPixel?~~(n.x+Gt):n.x,this._ex.snapToPixel?~~(n.y+Gt):n.y),this._ex.__ctx.lineWidth=2,this._ex.__ctx.stroke(),this._ex.__ctx.closePath(),this._ex.__ctx.restore()}drawPoint(t,n={color:K.Black,size:5}){this._ex.__ctx.save(),this._ex.__ctx.beginPath(),this._ex.__ctx.fillStyle=n.color.toString(),this._ex.__ctx.arc(this._ex.snapToPixel?~~(t.x+Gt):t.x,this._ex.snapToPixel?~~(t.y+Gt):t.y,n.size,0,Math.PI*2),this._ex.__ctx.fill(),this._ex.__ctx.closePath(),this._ex.__ctx.restore()}drawText(t,n){this._debugText.write(this._ex,t,n)}}class da{get width(){return this.__ctx.canvas.width}get height(){return this.__ctx.canvas.height}get opacity(){return this._state.current.opacity}set opacity(t){this._state.current.opacity=t}get tint(){return this._state.current.tint}set tint(t){this._state.current.tint=t}get smoothing(){return this.__ctx.imageSmoothingEnabled}set smoothing(t){this.__ctx.imageSmoothingEnabled=t}constructor(t){this.useDrawSorting=!1,this.z=0,this.backgroundColor=K.ExcaliburBlue,this._state=new Yf,this.snapToPixel=!1,this.debug=new Rw(this);const{canvasElement:n,enableTransparency:o,snapToPixel:u,smoothing:c,backgroundColor:g}=t;this.__ctx=n.getContext("2d",{alpha:o??!0}),this.backgroundColor=g??this.backgroundColor,this.snapToPixel=u??this.snapToPixel,this.smoothing=c??this.smoothing}resetTransform(){this.__ctx.resetTransform()}updateViewport(t){}drawImage(t,n,o,u,c,g,_,y,C){if(u===0||c===0)return;if(y===0||C===0)return;if(t.width===0||t.height===0)return;this.__ctx.globalAlpha=this.opacity;const S=[t,n,o,u,c,g,_,y,C].filter(I=>I!==void 0).map(I=>typeof I=="number"&&this.snapToPixel?~~I:I);this.__ctx.drawImage.apply(this.__ctx,S),Qt.DrawCallCount++,Qt.DrawnImagesCount=1}drawLine(t,n,o,u=1){this.__ctx.save(),this.__ctx.beginPath(),this.__ctx.strokeStyle=o.toString(),this.__ctx.moveTo(this.snapToPixel?~~(t.x+Gt):t.x,this.snapToPixel?~~(t.y+Gt):t.y),this.__ctx.lineTo(this.snapToPixel?~~(n.x+Gt):n.x,this.snapToPixel?~~(n.y+Gt):n.y),this.__ctx.lineWidth=u,this.__ctx.stroke(),this.__ctx.closePath(),this.__ctx.restore()}drawRectangle(t,n,o,u){this.__ctx.save(),this.__ctx.fillStyle=u.toString(),this.__ctx.fillRect(this.snapToPixel?~~(t.x+Gt):t.x,this.snapToPixel?~~(t.y+Gt):t.y,this.snapToPixel?~~(n+Gt):n,this.snapToPixel?~~(o+Gt):o),this.__ctx.restore()}drawCircle(t,n,o,u,c){this.__ctx.save(),this.__ctx.beginPath(),u&&(this.__ctx.strokeStyle=u.toString()),c&&(this.__ctx.lineWidth=c),this.__ctx.fillStyle=o.toString(),this.__ctx.arc(this.snapToPixel?~~(t.x+Gt):t.x,this.snapToPixel?~~(t.y+Gt):t.y,n,0,Math.PI*2),this.__ctx.fill(),u&&this.__ctx.stroke(),this.__ctx.closePath(),this.__ctx.restore()}save(){this.__ctx.save()}restore(){this.__ctx.restore()}translate(t,n){this.__ctx.translate(this.snapToPixel?~~(t+Gt):t,this.snapToPixel?~~(n+Gt):n)}rotate(t){this.__ctx.rotate(t)}scale(t,n){this.__ctx.scale(t,n)}getTransform(){throw new Error("Not implemented")}multiply(t){this.__ctx.setTransform(this.__ctx.getTransform().multiply(t.toDOMMatrix()))}addPostProcessor(t){}removePostProcessor(t){}clearPostProcessors(){}updatePostProcessors(t){}beginDrawLifecycle(){}endDrawLifecycle(){}set material(t){this._state.current.material=t}get material(){return this._state.current.material}createMaterial(t){return null}clear(){this.__ctx.clearRect(0,0,this.width,this.height),this.__ctx.fillStyle=this.backgroundColor.toString(),this.__ctx.fillRect(0,0,this.width,this.height),Qt.clear()}flush(){}}var se;(function(d){d.Fixed="Fixed",d.FitContainerAndFill="FitContainerAndFill",d.FitScreenAndFill="FitScreenAndFill",d.FitContainerAndZoom="FitContainerAndZoom",d.FitScreenAndZoom="FitScreenAndZoom",d.FitScreen="FitScreen",d.FillScreen="FillScreen",d.FitContainer="FitContainer",d.FillContainer="FillContainer"})(se||(se={}));class qu{static get SVGA(){return{width:800,height:600}}static get Standard(){return{width:1920,height:1080}}static get Atari2600(){return{width:160,height:192}}static get GameBoy(){return{width:160,height:144}}static get GameBoyAdvance(){return{width:240,height:160}}static get NintendoDS(){return{width:256,height:192}}static get NES(){return{width:256,height:224}}static get SNES(){return{width:256,height:244}}}class Ju{constructor(t){var n,o,u;this._antialiasing=!0,this._resolutionStack=[],this._viewportStack=[],this._pixelRatioOverride=null,this._isFullScreen=!1,this._isDisposed=!1,this._logger=lt.getInstance(),this._fullscreenChangeHandler=()=>{this._isFullScreen=!this._isFullScreen,this._logger.debug("Fullscreen Change",this._isFullScreen)},this._pixelRatioChangeHandler=()=>{this._logger.debug("Pixel Ratio Change",window.devicePixelRatio),this._listenForPixelRatio(),this._devicePixelRatio=this._calculateDevicePixelRatio(),this.applyResolutionAndViewport()},this._resizeHandler=()=>{const c=this.parent;this._logger.debug("View port resized"),this._setResolutionAndViewportByDisplayMode(c),this.applyResolutionAndViewport()},this._devicePixelRatio=this._calculateDevicePixelRatio(),this._alreadyWarned=!1,this._contentArea=new pt,this.viewport=t.viewport,this.resolution=(n=t.resolution)!==null&&n!==void 0?n:{...this.viewport},this._contentResolution=this.resolution,this._displayMode=(o=t.displayMode)!==null&&o!==void 0?o:se.Fixed,this._canvas=t.canvas,this.graphicsContext=t.context,this._antialiasing=(u=t.antialiasing)!==null&&u!==void 0?u:this._antialiasing,this._browser=t.browser,this._pixelRatioOverride=t.pixelRatio,this._applyDisplayMode(),this._listenForPixelRatio(),this._canvas.addEventListener("fullscreenchange",this._fullscreenChangeHandler),this.applyResolutionAndViewport()}_listenForPixelRatio(){this._mediaQueryList&&!this._mediaQueryList.addEventListener&&this._mediaQueryList.removeListener(this._pixelRatioChangeHandler),this._mediaQueryList=this._browser.window.nativeComponent.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener?this._mediaQueryList.addEventListener("change",this._pixelRatioChangeHandler,{once:!0}):this._mediaQueryList.addListener(this._pixelRatioChangeHandler)}dispose(){this._isDisposed||(this._isDisposed=!0,this._browser.window.off("resize",this._resizeHandler),this._resizeObserver&&this._resizeObserver.disconnect(),this.parent.removeEventListener("resize",this._resizeHandler),this._mediaQueryList.removeEventListener?this._mediaQueryList.removeEventListener("change",this._pixelRatioChangeHandler):this._mediaQueryList.removeListener(this._pixelRatioChangeHandler),this._canvas.removeEventListener("fullscreenchange",this._fullscreenChangeHandler))}_calculateDevicePixelRatio(){return window.devicePixelRatio<1?1:window.devicePixelRatio||1}get pixelRatio(){return this._pixelRatioOverride?this._pixelRatioOverride:this._devicePixelRatio}get isHiDpi(){return this.pixelRatio!==1}get displayMode(){return this._displayMode}get canvas(){return this._canvas}get parent(){switch(this.displayMode){case se.FillContainer:case se.FitContainer:case se.FitContainerAndFill:case se.FitContainerAndZoom:return this.canvas.parentElement||document.body;default:return window}}get resolution(){return this._resolution}set resolution(t){this._resolution=t}get viewport(){return this._viewport?this._viewport:this._resolution}set viewport(t){this._viewport=t}get aspectRatio(){return this._resolution.width/this._resolution.height}get scaledWidth(){return this._resolution.width*this.pixelRatio}get scaledHeight(){return this._resolution.height*this.pixelRatio}setCurrentCamera(t){this._camera=t}pushResolutionAndViewport(){this._resolutionStack.push(this.resolution),this._viewportStack.push(this.viewport),this.resolution={...this.resolution},this.viewport={...this.viewport}}peekViewport(){return this._viewportStack[this._viewportStack.length-1]}peekResolution(){return this._resolutionStack[this._resolutionStack.length-1]}popResolutionAndViewport(){this.resolution=this._resolutionStack.pop(),this.viewport=this._viewportStack.pop()}applyResolutionAndViewport(){this._canvas.width=this.scaledWidth,this._canvas.height=this.scaledHeight,this.graphicsContext instanceof Ps&&!this.graphicsContext.checkIfResolutionSupported({width:this.scaledWidth,height:this.scaledHeight})&&!this._alreadyWarned&&(this._alreadyWarned=!0,this._logger.warn(`The currently configured resolution (${this.resolution.width}x${this.resolution.height}) and pixel ratio (${this.pixelRatio}) are too large for the platform WebGL implementation, this may work but cause WebGL rendering to behave oddly. Try reducing the resolution or disabling Hi DPI scaling to avoid this (read more here https://excaliburjs.com/docs/screens#understanding-viewport--resolution).`)),this._antialiasing?this._canvas.style.imageRendering="auto":(this._canvas.style.imageRendering="pixelated",this._canvas.style.imageRendering===""&&(this._canvas.style.imageRendering="crisp-edges")),this._canvas.style.width=this.viewport.width+"px",this._canvas.style.height=this.viewport.height+"px",this.graphicsContext.updateViewport(this.resolution),this.graphicsContext.resetTransform(),this.graphicsContext.smoothing=this._antialiasing,this.graphicsContext instanceof da&&this.graphicsContext.scale(this.pixelRatio,this.pixelRatio)}get antialiasing(){return this._antialiasing}set antialiasing(t){this._antialiasing=t,this.graphicsContext.smoothing=this._antialiasing}get isFullScreen(){return this._isFullScreen}goFullScreen(t){if(t){const n=document.getElementById(t);if(n)return n.requestFullscreen()}return this._canvas.requestFullscreen()}exitFullScreen(){return document.exitFullscreen()}pageToScreenCoordinates(t){let n=t.x,o=t.y;if(this._isFullScreen||(n-=jr(this._canvas).x,o-=jr(this._canvas).y),this._isFullScreen)if(window.innerWidth/this.aspectRatio<window.innerHeight){const u=window.innerWidth/this.aspectRatio,c=(window.innerHeight-u)/2;o=(o-c)/u*this.viewport.height,n=n/window.innerWidth*this.viewport.width}else{const u=window.innerHeight*this.aspectRatio,c=(window.innerWidth-u)/2;n=(n-c)/u*this.viewport.width,o=o/window.innerHeight*this.viewport.height}return n=n/this.viewport.width*this.resolution.width,o=o/this.viewport.height*this.resolution.height,new F(n,o)}screenToPageCoordinates(t){let n=t.x,o=t.y;if(n=n/this.resolution.width*this.viewport.width,o=o/this.resolution.height*this.viewport.height,this._isFullScreen)if(window.innerWidth/this.aspectRatio<window.innerHeight){const u=window.innerWidth/this.aspectRatio,c=(window.innerHeight-u)/2;o=o/this.viewport.height*u+c,n=n/this.viewport.width*window.innerWidth}else{const u=window.innerHeight*this.aspectRatio,c=(window.innerWidth-u)/2;n=n/this.viewport.width*u+c,o=o/this.viewport.height*window.innerHeight}return this._isFullScreen||(n+=jr(this._canvas).x,o+=jr(this._canvas).y),new F(n,o)}screenToWorldCoordinates(t){return this._camera?this._camera.inverse.multiply(t):t.sub(j(this.resolution.width/2,this.resolution.height/2))}worldToScreenCoordinates(t){return this._camera?this._camera.transform.multiply(t):t.add(j(this.resolution.width/2,this.resolution.height/2))}pageToWorldCoordinates(t){const n=this.pageToScreenCoordinates(t);return this.screenToWorldCoordinates(n)}worldToPageCoordinates(t){const n=this.worldToScreenCoordinates(t);return this.screenToPageCoordinates(n)}getWorldBounds(){return pt.fromDimension(this.resolution.width,this.resolution.height,F.Half).scale(j(1/this._camera.zoom,1/this._camera.zoom)).rotate(this._camera.rotation).translate(this._camera.pos)}get canvasWidth(){return this.canvas.width}get halfCanvasWidth(){return this.canvas.width/2}get canvasHeight(){return this.canvas.height}get halfCanvasHeight(){return this.canvas.height/2}get drawWidth(){return this._camera?this.resolution.width/this._camera.zoom:this.resolution.width}get halfDrawWidth(){return this.drawWidth/2}get drawHeight(){return this._camera?this.resolution.height/this._camera.zoom:this.resolution.height}get halfDrawHeight(){return this.drawHeight/2}get center(){return j(this.halfDrawWidth,this.halfDrawHeight)}get contentArea(){return this._contentArea}_computeFit(){document.body.style.margin="0px",document.body.style.overflow="hidden";const t=this.aspectRatio;let n=0,o=0;window.innerWidth/t<window.innerHeight?(n=window.innerWidth,o=window.innerWidth/t):(n=window.innerHeight*t,o=window.innerHeight),this.viewport={width:n,height:o},this._contentArea=pt.fromDimension(this.resolution.width,this.resolution.height,F.Zero)}_computeFitScreenAndFill(){document.body.style.margin="0px",document.body.style.overflow="hidden";const t=window.innerWidth,n=window.innerHeight;this._computeFitAndFill(t,n)}_computeFitContainerAndFill(){document.body.style.margin="0px",document.body.style.overflow="hidden";const t=this.canvas.parentElement,n=t.clientWidth,o=t.clientHeight;this._computeFitAndFill(n,o)}_computeFitAndFill(t,n){if(this.viewport={width:t,height:n},t/n<=this._contentResolution.width/this._contentResolution.height){this.resolution={width:t*this._contentResolution.width/t,height:t*this._contentResolution.width/t*n/t};const o=(this.resolution.height-this._contentResolution.height)/2;this._contentArea=new pt({top:o,left:0,right:this._contentResolution.width,bottom:this.resolution.height-o})}else{this.resolution={width:n*this._contentResolution.height/n*t/n,height:n*this._contentResolution.height/n};const o=(this.resolution.width-this._contentResolution.width)/2;this._contentArea=new pt({top:0,left:o,right:this.resolution.width-o,bottom:this._contentResolution.height})}}_computeFitScreenAndZoom(){document.body.style.margin="0px",document.body.style.overflow="hidden",this.canvas.style.position="absolute";const t=window.innerWidth,n=window.innerHeight;this._computeFitAndZoom(t,n)}_computeFitContainerAndZoom(){document.body.style.margin="0px",document.body.style.overflow="hidden",this.canvas.style.position="absolute";const t=this.canvas.parentElement;t.style.position="relative",t.style.overflow="hidden";const n=t.clientWidth,o=t.clientHeight;this._computeFitAndZoom(n,o)}_computeFitAndZoom(t,n){const o=this.aspectRatio;let u=0,c=0;t/o<n?(u=t,c=t/o):(u=n*o,c=n);const g=t/u,_=n/c,y=Math.max(g,_),C=u*y,S=c*y;C>t?this.canvas.style.left=-(C-t)/2+"px":this.canvas.style.left="",S>n?this.canvas.style.top=-(S-n)/2+"px":this.canvas.style.top="",this.viewport={width:C,height:S};const I=pt.fromDimension(this.viewport.width,this.viewport.height,F.Zero);if(this.viewport.width>t){const M=(this.viewport.width-t)/this.viewport.width*this.resolution.width;I.top=0,I.left=M/2,I.right=this.resolution.width-M/2,I.bottom=this.resolution.height}if(this.viewport.height>n){const M=(this.viewport.height-n)/this.viewport.height*this.resolution.height;I.top=M/2,I.left=0,I.bottom=this.resolution.height-M/2,I.right=this.resolution.width}this._contentArea=I}_computeFitContainer(){const t=this.aspectRatio;let n=0,o=0;const u=this.canvas.parentElement;u.clientWidth/t<u.clientHeight?(n=u.clientWidth,o=u.clientWidth/t):(n=u.clientHeight*t,o=u.clientHeight),this.viewport={width:n,height:o},this._contentArea=pt.fromDimension(this.resolution.width,this.resolution.height,F.Zero)}_applyDisplayMode(){this._setResolutionAndViewportByDisplayMode(this.parent),this.parent instanceof Window?this._browser.window.on("resize",this._resizeHandler):(this._resizeObserver=new ResizeObserver(()=>{this._resizeHandler()}),this._resizeObserver.observe(this.parent)),this.parent.addEventListener("resize",this._resizeHandler)}_setResolutionAndViewportByDisplayMode(t){this.displayMode===se.FillContainer&&(this.resolution={width:t.clientWidth,height:t.clientHeight},this.viewport=this.resolution),this.displayMode===se.FillScreen&&(document.body.style.margin="0px",document.body.style.overflow="hidden",this.resolution={width:t.innerWidth,height:t.innerHeight},this.viewport=this.resolution),this._contentArea=pt.fromDimension(this.resolution.width,this.resolution.height,F.Zero),this.displayMode===se.FitScreen&&this._computeFit(),this.displayMode===se.FitContainer&&this._computeFitContainer(),this.displayMode===se.FitScreenAndFill&&this._computeFitScreenAndFill(),this.displayMode===se.FitContainerAndFill&&this._computeFitContainerAndFill(),this.displayMode===se.FitScreenAndZoom&&this._computeFitScreenAndZoom(),this.displayMode===se.FitContainerAndZoom&&this._computeFitContainerAndZoom()}}class Hn{static create(){return this._INSTANCE||(window.AudioContext||window.webkitAudioContext)&&(this._INSTANCE=new AudioContext),this._INSTANCE}}Hn._INSTANCE=null;function Dw(d){return!!d.playbackState}class hn{static unlock(){return new Promise((n,o)=>{if(hn._UNLOCKED||!Hn.create())return n(!0);const u=setTimeout(()=>{lt.getInstance().warn("Excalibur was unable to unlock the audio context, audio probably will not play in this browser."),n(!1)},200),c=Hn.create();c.resume().then(()=>{const g=c.createBuffer(1,1,22050),_=c.createBufferSource();let y=!1;_.buffer=g,_.connect(c.destination),_.onended=()=>y=!0,_.start(0),setTimeout(()=>{Dw(_)?(_.playbackState===_.PLAYING_STATE||_.playbackState===_.FINISHED_STATE)&&(hn._UNLOCKED=!0):(c.currentTime>0||y)&&(hn._UNLOCKED=!0)},0),clearTimeout(u),n(!0)},()=>{o()})})}static isUnlocked(){return this._UNLOCKED}}hn._UNLOCKED=!1;function th(d,t=K.Red,n,o,u,c,g=1,_="butt"){d.save(),d.beginPath(),d.lineWidth=g,d.lineCap=_,d.strokeStyle=t.toString(),d.moveTo(n,o),d.lineTo(u,c),d.closePath(),d.stroke(),d.restore()}function Mw(d,t=K.Red,n){d.beginPath(),d.strokeStyle=t.toString(),d.arc(n.x,n.y,5,0,Math.PI*2),d.closePath(),d.stroke()}function Fw(d,t,n,o,u=1){const c=t?t.toString():"blue",g=o.scale(u);d.beginPath(),d.strokeStyle=c,d.moveTo(n.x,n.y),d.lineTo(n.x+g.x,n.y+g.y),d.closePath(),d.stroke()}function eh(d,t,n,o,u,c=5,g=K.White,_=null){let y;if(typeof c=="number")y={tl:c,tr:c,br:c,bl:c};else{const C={tl:0,tr:0,br:0,bl:0};for(const S in C)if(C.hasOwnProperty(S)){const I=S;y[I]=c[I]||C[I]}}d.beginPath(),d.moveTo(t+y.tl,n),d.lineTo(t+o-y.tr,n),d.quadraticCurveTo(t+o,n,t+o,n+y.tr),d.lineTo(t+o,n+u-y.br),d.quadraticCurveTo(t+o,n+u,t+o-y.br,n+u),d.lineTo(t+y.bl,n+u),d.quadraticCurveTo(t,n+u,t,n+u-y.bl),d.lineTo(t,n+y.tl),d.quadraticCurveTo(t,n,t+y.tl,n),d.closePath(),_&&(d.fillStyle=_.toString(),d.fill()),g&&(d.strokeStyle=g.toString(),d.stroke())}function Lw(d,t,n,o,u=K.White,c=null){d.beginPath(),d.arc(t,n,o,0,Math.PI*2),d.closePath(),c&&(d.fillStyle=c.toString(),d.fill()),u&&(d.strokeStyle=u.toString(),d.stroke())}const Bw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdQAAAB2CAYAAABxhGI9AAAACXBIWXMAAAsSAAALEgHS3X78AAAKnUlEQVR42u3dP2wjSx0H8N8hJIonIRmJjsq0SBR+BQ1dcqKhe0lD77SvSwpKkJKGPulpktfRIMUdEqKIqV57rpAokM4dbSiyq7ONPTP7x39ifz7SFbnEnp3xer47O7uzH15fXwMA6OYHmgAABCoACFQAEKgAgEAFAIEKAAIVAAQqACBQAUCgAoBABQCBCgAIVAAQqAAgUAFAoAIAAhUABCoACFQAEKgAgECFLbmOiNeFf2PbAyz68Pr6qhUgbRwR92v+/zwiJrYHMEKFMmcN///UtgcQqFBk1PD/97U9Qx8VCFSgu4EmAIEKAAIVAAQqACBQ4Z25jojP8eX+0WtNAgIVaOY+Im5j+eKh24h41jQgUIEyZ7F5NaPU7wCBCiwYd/w9cOB+qAlgJ3KLLow0EV198803RWvJfvfddx+0lhEqHKu5JgAjVCBvlhmFzjQRXUekHz9+TP79y8uLRjNChXfvoePvAYEKxNtj1e42/O5JoIJABcrdRMRVLM+X3kTEpaaB988cKuzWg9EobTWdMx0Oly8uN4dqhAoARqgnaN3arHfqu7OyH8ItKLVB/P+CEfMTHyGPY3npx1m8zWGDEeoBfUk/xdti57dr/r1Wv2+6EPow3tZ5rRdS72s1neuF97xvWd+XTH0/V+UMttDWqbI/r2nrxfp+jv2uSjSO7S+OXy/A/3lN+9xX5T5HxEUPZZ0tfB71+w57eJ/HFu+z+jkv1u92YX9fbI/HhX3JA9rp5MPr66tWaG9UfUGbrHIzi7cLUyYFf/tpTady03EEeL8mUJ6i7MKYNvWNqr4Pe2jradXO60LrvPAz2PQ5RPX684ah8dxD+2zantnCgVipSVV+m/tgB9W2DDq2Sx/vM95wcHhZhWVJm8yrv58cSgfTdc70+++/X/r522+/tUKSEepBqo+om4ZLPerMjUwuNnQCtx1GWJtee1FwdD5uWd86xLs8UaVt2aNEO1/saZ/Z5rYMW4zq6v34rGV9Bg3q2eZ9SkeNm9qwyUh30OPIHYFKx5FG03C7znSOqYBq+qW/zpQ3anH037TNHluG6f0WPsPhHvab4QFty7ogOeuxDYcNy2/zu2214WNYWxmBurNO8bGn97pNBOO8xy/9uCorZZ4I2r4C7aJgO7ZV9iE49Dm6NvOWx+pWE9CUq3zbdTp9doz38TbXtzqH9RT5CyWe422OaZoZGeZCabrhPQY9HjwsjpTvCg4YtlE2+Ta/j2bzn8fqrDqgm+6yUHOmAvWUjAtGhbNYvsBknDnqH1Qhc7VmxHgeb/NbudA5j/UXlYwif2p6luhAc9teu1npiHKnDs8if6tCm7JLX3NKpgttXe9ruc9mHMd7a83iwdxF5vt8tutARaCeklRnNK9C8WnNF7geJQ4T4XG3JhSnVdilQrG+yOnrlVHfsEGYzhNBn7Lu6tS7+HJafJQ4EMiNlNqWXZ9WPvVgnVYHG5M1ByDXkT6leX2EgTqJtyt45yv7S2qO3sEZjZhDLXeR+YKdJ0Zdk8QocvH9N732KrNtq+FZ/zzIHABcJrYpd+Xv14lOd5ap76SgrduW/VTQ1qcQpqnbgu4ifZvUMNpd9XuoZmvCtPaQ2Y/BCHVLgbrJTeRPDdVf6pfMKDU2fOkHmVFFfXr3MsouLsnNvV5kRoe5+s431PeuoKPqWnaurY/ZPBEeqwceN4l96iwO6H7Mjq4y7VGPVNe10VaZMzVCPVWpI/Z6FZbcv5fMqGCU+dLfFGzj58jP8+bCdJCo7yzKTwdOF0bu9Ug7V4c+yz7FJfYeGoysUss0HssIdVZwYLDujMqlESoCdTtGsZtbHnJBeNdDSJSs0jTKdMJN1HNX54Wv7bvsU9NkVJVa13dX+/wuArV0X/l5RHyo/lnfF4G6p6DrS0kHdtXhy35TGErDPYZUn2WfWqDOo/lVqdMD2O/hKJhD7S/odukymq9s02QN4EEPR/zbaOumZc+r15zK1Zqznl9jsfiemTM1QmV3HUuTkedlg9HIQzRbUD93dfC+2tpj2fIHEH2+RqCCQH13gZq7hWXTNpVu19OB1fc9nQ0AKOKUb5lU0P1kDyOneoWk0lOZ9cIP0x7qu8+2BhCoR2wYu1+e7DmaXzBSsu5vaX1ne2zrpmUPTmxf7PM1Dm4y/vC7ny7Nif7+z/9ZmtM0Z3panPLtPmra9f16bcK0Dpbnwk43Vd/RHtu6zfNQTy1QBy3aqG2g9nVmxml+BOoJyT3NpWmn9xhfFnu4bvDa+44BXhqqfdf3uUF9+yz77AT31Yue2mjecYQ62NLfgkA9ghHqLNEhNem4H1c6vdyDxhf/bpz5m4coW/c39wi6VH2bPtHlcaV9cvXts+zxCe6rTeqc2ndL7uGd93QwM9bFcAzMoZZ7SgTBbWx+asui61h/iq1+RmjqdbnQXQ3T1DNQ63V/U9ucqm/pMzPb1rePsk/1iTOjgvatR4W3Lc8ULB78pELyrnAfeTcj1NU509/86mfJ33/8+Mf00a05UyPUEw7UVCeWG/WNEiExyHRMt5ltW30izUPk18ytt7lNfc8i//DvtvXto+ySA5BjljsLUF8lPkqMPEtW1JomDsiGBZ9Byb4NAvUITSN9GuwsIj6t6UTOqk7jJREkmzqli8xIs96udSO20sX0H1vW92IL9e1a9rgqVyf91gbPsTy9UD9n9lOkT8k+RfkFR5PMNqxOcdSf32PBvg3vilO+zdxE+okx9Wm0ph36XYsRZCpMF993GOk5qvqB3Dct6jvssb67KvuUNJ3frw92bhr8/STSF0JdRPMLpUCgnsgo9S76PZ246ZFk1wWvK5m3vVoYvW1Sz7nN91jfXbQ1ZQc7TW6HeaoOalypG/8/p/rP1aNAc6ZHzSnfdqPUPhdy2PQw6Nz9gSVhuhiqueUHR3uu7y7K3rdDX4u46ZrPbUa0IFBZ0seKQ3XQTRt2vm3W/a2DbNKys++rvm3ep6+y1x2UdP3bWU9lzra47U1GmlctX/sQ23t+aOlByLTh/4NAPaCRxtcdO5HLSJ/6vNtCwGx67VPmPbvWd1q9frKHtp4kAqRJ2HR9j762JfX3bZ//elPtj13PPDx1+D5tqk/Xi6NO8SHz7MmH19dXrdBNfVFP6T2PT1UHNit87/t4m5+aRH+nQBdvqyhZDKJLfZs8h7XPsqdV2ZOV+tanKB8aln0dyxdAXbV4j4gvt4oMOrbP6vbU73NW7TMlbdTnPrWpfqXfh9HKZ9vke7KuTeZRNtXRSe6+1FV//ce/ln5eXfsXgcqXzr6+9261M3moOoa7E6nvTZTfy7iNsmfb7kjfgXGsvxe0vihsEts9HTquPpt1q1vtahu2TqAiUAEEKj0zhwoARqgAu/OnX/442WH+9xc/Wvr58re/Tr7f41/+ZsRqhAoACFQAEKgAcHjMoQJskJsz/eqrr5Z+vvr7v5fmQFevAl5lztQIFQAQqAAgUAHgIJlDBdhgdQ41N2eKESoAIFABQKACwFEwhwoARqgAIFABQKACAAIVAAQqAAhUABCoAIBABQCBCgACFQAEKgAgUAFAoAKAQAUAgQoACFQAEKgAIFABQKACAAIVAAQqAAhUABCoAIBABQCBCgACFQAQqAAgUAFAoAKAQAUAlvwPcFDns1DsH4sAAAAASUVORK5CYII=";var Ow=Ot(1388);class $n extends Ue{constructor(t){var n,o,u,c,g,_,y,C,S,I;super(t),this.filtering=null,this.lineCap="butt",this.quality=1,this._dirty=!0,this._smoothing=!1,this._color=an(K.Black,()=>this.flagDirty()),this._lineWidth=1,this._lineDash=[],this._padding=0,t&&(this.quality=(n=t.quality)!==null&&n!==void 0?n:this.quality,this.color=(o=t.color)!==null&&o!==void 0?o:K.Black,this.strokeColor=t==null?void 0:t.strokeColor,this.smoothing=(u=t.smoothing)!==null&&u!==void 0?u:this.smoothing,this.lineWidth=(c=t.lineWidth)!==null&&c!==void 0?c:this.lineWidth,this.lineDash=(g=t.lineDash)!==null&&g!==void 0?g:this.lineDash,this.lineCap=(_=t.lineCap)!==null&&_!==void 0?_:this.lineCap,this.padding=(y=t.padding)!==null&&y!==void 0?y:this.padding,this.filtering=(C=t.filtering)!==null&&C!==void 0?C:this.filtering),this._bitmap=document.createElement("canvas");const M=(S=t==null?void 0:t.width)!==null&&S!==void 0?S:this._bitmap.width,L=(I=t==null?void 0:t.height)!==null&&I!==void 0?I:this._bitmap.height;this.width=M,this.height=L;const V=this._bitmap.getContext("2d");if(V)this._ctx=V;else throw new Error("Browser does not support 2d canvas drawing, cannot create Raster graphic")}cloneRasterOptions(){return{color:this.color?this.color.clone():null,strokeColor:this.strokeColor?this.strokeColor.clone():null,smoothing:this.smoothing,lineWidth:this.lineWidth,lineDash:this.lineDash,lineCap:this.lineCap,quality:this.quality,padding:this.padding}}get dirty(){return this._dirty}flagDirty(){this._dirty=!0}get width(){return Math.abs(this._getTotalWidth()*this.scale.x)}set width(t){t/=Math.abs(this.scale.x),this._bitmap.width=t,this._originalWidth=t,this.flagDirty()}get height(){return Math.abs(this._getTotalHeight()*this.scale.y)}set height(t){t/=Math.abs(this.scale.y),this._bitmap.height=t,this._originalHeight=t,this.flagDirty()}_getTotalWidth(){var t;return(((t=this._originalWidth)!==null&&t!==void 0?t:this._bitmap.width)+this.padding*2)*1}_getTotalHeight(){var t;return(((t=this._originalHeight)!==null&&t!==void 0?t:this._bitmap.height)+this.padding*2)*1}get localBounds(){return pt.fromDimension(this._getTotalWidth()*this.scale.x,this._getTotalHeight()*this.scale.y,F.Zero)}get smoothing(){return this._smoothing}set smoothing(t){this._smoothing=t,this.flagDirty()}get color(){return this._color}set color(t){this.flagDirty(),this._color=an(t,()=>this.flagDirty())}get strokeColor(){return this._strokeColor}set strokeColor(t){this.flagDirty(),this._strokeColor=an(t,()=>this.flagDirty())}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,this.flagDirty()}get lineDash(){return this._lineDash}set lineDash(t){this._lineDash=t,this.flagDirty()}get padding(){return this._padding}set padding(t){this._padding=t,this.flagDirty()}rasterize(){this._dirty=!1,this._ctx.clearRect(0,0,this._getTotalWidth(),this._getTotalHeight()),this._ctx.save(),this._applyRasterProperties(this._ctx),this.execute(this._ctx),this._ctx.restore()}_applyRasterProperties(t){var n,o,u;this._bitmap.width=this._getTotalWidth()*this.quality,this._bitmap.height=this._getTotalHeight()*this.quality,this._bitmap.setAttribute("filtering",this.filtering),this._bitmap.setAttribute("forceUpload","true"),t.scale(this.quality,this.quality),t.translate(this.padding,this.padding),t.imageSmoothingEnabled=this.smoothing,t.lineWidth=this.lineWidth,t.setLineDash((n=this.lineDash)!==null&&n!==void 0?n:t.getLineDash()),t.lineCap=this.lineCap,t.strokeStyle=(o=this.strokeColor)===null||o===void 0?void 0:o.toString(),t.fillStyle=(u=this.color)===null||u===void 0?void 0:u.toString()}_drawImage(t,n,o){this._dirty&&this.rasterize(),t.scale(1/this.quality,1/this.quality),t.drawImage(this._bitmap,n,o)}}class fa extends $n{get ctx(){return this._ctx}constructor(t){super(t),this._options=t}clone(){return new fa({...this._options,...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(t){var n,o;!((n=this._options)===null||n===void 0)&&n.draw&&((o=this._options)===null||o===void 0||o.draw(t)),this._options.cache||this.flagDirty()}}class ih{}ih.type={any:"",blob:"blob",json:"json",text:"text",document:"document",arraybuffer:"arraybuffer"};class pa{constructor(){this.states=new Map}get currentState(){return this._currentState}set currentState(t){this._currentState=t}static create(t,n){const o=new pa;o.data=n;for(const u in t.states)o.states.set(u,{name:u,...t.states[u]});for(const u of o.states.values())for(const c of u.transitions)if(c!=="*"&&!o.states.has(c))throw Error(`Invalid state machine, state [${u.name}] has a transition to another state that doesn't exist [${c}]`);return o.currentState=o.startState=o.states.get(t.start),o}in(t){return this.currentState.name===t}go(t,n){var o,u;if(this.currentState.transitions.includes(t)||this.currentState.transitions.includes("*")){const c=this.states.get(t);return this.currentState.onExit&&((o=this.currentState)===null||o===void 0?void 0:o.onExit({to:c.name,data:this.data}))===!1||c!=null&&c.onEnter&&(c==null?void 0:c.onEnter({from:this.currentState.name,eventData:n,data:this.data}))===!1?!1:(this.currentState=c,!((u=this.currentState)===null||u===void 0)&&u.onState&&this.currentState.onState(),!0)}return!1}update(t){this.currentState.onUpdate&&this.currentState.onUpdate(this.data,t)}save(t){localStorage.setItem(t,JSON.stringify({currentState:this.currentState.name,data:this.data}))}restore(t){const n=JSON.parse(localStorage.getItem(t));this.currentState=this.states.get(n.currentState),this.data=n.data}}class tp{_createNewBufferSource(){this._instance=this._audioContext.createBufferSource(),this._instance.buffer=this._src,this._instance.loop=this.loop,this._instance.playbackRate.value=this._playbackRate,this._instance.connect(this._volumeNode),this._volumeNode.connect(this._audioContext.destination)}_handleEnd(){this.loop||(this._instance.onended=()=>{this._playingResolve(!0)})}set loop(t){this._loop=t,this._instance&&(this._instance.loop=t,this.loop||(this._instance.onended=()=>{this._playingResolve(!0)}))}get loop(){return this._loop}set volume(t){t=Ne(t,0,1),this._volume=t,this._stateMachine.in("PLAYING")&&this._volumeNode.gain.setTargetAtTime?this._volumeNode.gain.setTargetAtTime(t,this._audioContext.currentTime,.1):this._volumeNode.gain.value=t}get volume(){return this._volume}get duration(){var t;return(t=this._duration)!==null&&t!==void 0?t:this.getTotalPlaybackDuration()}set duration(t){this._duration=t}constructor(t){this._src=t,this._audioContext=Hn.create(),this._volumeNode=this._audioContext.createGain(),this._playingPromise=new Promise(n=>{this._playingResolve=n}),this._stateMachine=pa.create({start:"STOPPED",states:{PLAYING:{onEnter:({data:n})=>{this._createNewBufferSource(),this._handleEnd(),this.loop?this._instance.start(0,n.pausedAt*this._playbackRate):this._instance.start(0,n.pausedAt*this._playbackRate,this.duration),n.startedAt=this._audioContext.currentTime-n.pausedAt,n.pausedAt=0},onState:()=>this._playStarted(),onExit:({to:n})=>{n==="STOPPED"&&this._playingResolve(!0),this._instance.onended=null,this._instance.disconnect(),this._instance.stop(0),this._instance=null},transitions:["STOPPED","PAUSED","SEEK"]},SEEK:{onEnter:({eventData:n,data:o})=>{o.pausedAt=(n??0)/this._playbackRate,o.startedAt=0},transitions:["*"]},STOPPED:{onEnter:({data:n})=>{n.pausedAt=0,n.startedAt=0,this._playingResolve(!0)},transitions:["PLAYING","PAUSED","SEEK"]},PAUSED:{onEnter:({data:n})=>{n.pausedAt=this._audioContext.currentTime-n.startedAt},transitions:["PLAYING","STOPPED","SEEK"]}}},{startedAt:0,pausedAt:0}),this._volume=1,this._loop=!1,this._playStarted=()=>{},this._playbackRate=1,this._createNewBufferSource()}isPlaying(){return this._stateMachine.in("PLAYING")}isPaused(){return this._stateMachine.in("PAUSED")||this._stateMachine.in("SEEK")}play(t=()=>{}){return this._playStarted=t,this._stateMachine.go("PLAYING"),this._playingPromise}pause(){this._stateMachine.go("PAUSED")}stop(){this._stateMachine.go("STOPPED")}seek(t){this._stateMachine.go("PAUSED"),this._stateMachine.go("SEEK",t)}getTotalPlaybackDuration(){return this._src.duration}getPlaybackPosition(){const{pausedAt:t,startedAt:n}=this._stateMachine.data;return t?t*this._playbackRate:n?(this._audioContext.currentTime-n)*this._playbackRate:0}set playbackRate(t){this._instance.playbackRate.value=this._playbackRate=t}get playbackRate(){return this._instance.playbackRate.value}}class sh extends v{set bubbles(t){}get bubbles(){return!1}get _path(){return null}set _path(t){}constructor(t,n="MediaEvent"){super(),this.target=t,this._name=n}stopPropagation(){}action(){}propagate(){}layPath(t){}}class Es extends sh{constructor(t,n){super(t,"NativeSoundEvent"),this.track=n}}class ep extends sh{constructor(t,n){super(t,"NativeSoundProcessedEvent"),this._processedData=n,this.data=this._processedData}}function Nw(d){try{const t=new Audio,n=/.*\.([A-Za-z0-9]+)(?:(?:\?|\#).*)*$/,o=d.match(n)[1];return!!t.canPlayType("audio/"+o)}catch(t){return lt.getInstance().warn("Cannot determine audio support, assuming no support for the Audio Tag",t),!1}}const zw={VolumeChange:"volumechange",Processed:"processed",Pause:"pause",Stop:"stop",PlaybackEnd:"playbackend",Resume:"resume",PlaybackStart:"playbackstart"};class ip{set loop(t){this._loop=t;for(const n of this._tracks)n.loop=this._loop;this.logger.debug("Set loop for all instances of sound",this.path,"to",this._loop)}get loop(){return this._loop}set volume(t){this._volume=t;for(const n of this._tracks)n.volume=this._volume;this.events.emit("volumechange",new Es(this)),this.logger.debug("Set loop for all instances of sound",this.path,"to",this._volume)}get volume(){return this._volume}get duration(){return this._duration}set duration(t){this._duration=t}get instances(){return this._tracks}get path(){return this._resource.path}set path(t){this._resource.path=t}get bustCache(){return this._resource.bustCache}set bustCache(t){this._resource.bustCache=t}constructor(...t){this.events=new p,this.logger=lt.getInstance(),this._loop=!1,this._volume=1,this._isStopped=!1,this._tracks=[],this._wasPlayingOnHidden=!1,this._playbackRate=1,this._audioContext=Hn.create(),this._resource=new ha("",ih.type.arraybuffer);for(const n of t)if(Nw(n)){this.path=n;break}this.path||(this.logger.warn("This browser does not support any of the audio files specified:",t.join(", ")),this.logger.warn("Attempting to use",t[0]),this.path=t[0])}isLoaded(){return!!this.data}async load(){var t,n;if(this.data)return this.data;const o=await this._resource.load(),u=await this.decodeAudio(o.slice(0));return this._duration=(n=(t=this._duration)!==null&&t!==void 0?t:u==null?void 0:u.duration)!==null&&n!==void 0?n:void 0,this.events.emit("processed",new ep(this,u)),this.data=u}async decodeAudio(t){try{return await this._audioContext.decodeAudioData(t.slice(0))}catch{return this.logger.error("Unable to decode  this browser may not fully support this format, or the file may be corrupt, if this is an mp3 try removing id3 tags and album art from the file."),await Promise.reject()}}wireEngine(t){t&&(this._engine=t,this._engine.on("hidden",()=>{t.pauseAudioWhenHidden&&this.isPlaying()&&(this._wasPlayingOnHidden=!0,this.pause())}),this._engine.on("visible",()=>{t.pauseAudioWhenHidden&&this._wasPlayingOnHidden&&(this.play(),this._wasPlayingOnHidden=!1)}),this._engine.on("start",()=>{this._isStopped=!1}),this._engine.on("stop",()=>{this.stop(),this._isStopped=!0}))}instanceCount(){return this._tracks.length}isPlaying(){return this._tracks.some(t=>t.isPlaying())}isPaused(){return this._tracks.some(t=>t.isPaused())}play(t){return this.isLoaded()?this._isStopped?(this.logger.warn("Cannot start playing. Engine is in a stopped state."),Promise.resolve(!1)):(this.volume=t||this.volume,this.isPaused()?this._resumePlayback():this._startPlayback()):(this.logger.warn("Cannot start playing. Resource",this.path,"is not loaded yet"),Promise.resolve(!0))}pause(){if(this.isPlaying()){for(const t of this._tracks)t.pause();this.events.emit("pause",new Es(this)),this.logger.debug("Paused all instances of sound",this.path)}}stop(){for(const t of this._tracks)t.stop();this.events.emit("stop",new Es(this)),this._tracks.length=0,this.logger.debug("Stopped all instances of sound",this.path)}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._tracks.forEach(n=>{n.playbackRate=this._playbackRate})}seek(t,n=0){this._tracks.length===0&&this._getTrackInstance(this.data),this._tracks[n].seek(t)}getTotalPlaybackDuration(){return this.data.duration}getPlaybackPosition(t=0){return this._tracks.length?this._tracks[t].getPlaybackPosition():0}getTrackId(t){return this._tracks.indexOf(t)}async _resumePlayback(){if(this.isPaused){const t=[];for(const n of this._tracks)t.push(n.play().then(()=>(this.events.emit("playbackend",new Es(this,n)),this._tracks.splice(this.getTrackId(n),1),!0)));this.events.emit("resume",new Es(this)),this.logger.debug("Resuming paused instances for sound",this.path,this._tracks),await Promise.all(t)}return!0}async _startPlayback(){const t=await this._getTrackInstance(this.data),n=await t.play(()=>{this.events.emit("playbackstart",new Es(this,t)),this.logger.debug("Playing new instance for sound",this.path)});return this.events.emit("playbackend",new Es(this,t)),this._tracks.splice(this.getTrackId(t),1),n}_getTrackInstance(t){const n=new tp(t);return n.loop=this.loop,n.volume=this.volume,n.duration=this.duration,n.playbackRate=this._playbackRate,this._tracks.push(n),n}emit(t,n){this.events.emit(t,n)}on(t,n){return this.events.on(t,n)}once(t,n){return this.events.once(t,n)}off(t,n){this.events.off(t,n)}}const Uw={};class sp{get _image(){return this._imageElement||(this._imageElement=new Image,this._imageElement.src=this.logo),this._imageElement}get playButtonRootElement(){return this._playButtonRootElement}get playButtonElement(){return this._playButtonElement}get _playButton(){const t=document.getElementById("excalibur-play-root");return t&&(this._playButtonRootElement=t),this._playButtonRootElement||(this._playButtonRootElement=document.createElement("div"),this._playButtonRootElement.id="excalibur-play-root",this._playButtonRootElement.style.position="absolute",document.body.appendChild(this._playButtonRootElement)),this._styleBlock||(this._styleBlock=document.createElement("style"),this._styleBlock.textContent=this._playButtonStyles,document.head.appendChild(this._styleBlock)),this._playButtonElement||(this._playButtonElement=this.startButtonFactory(),this._playButtonRootElement.appendChild(this._playButtonElement)),this._playButtonElement}constructor(t){this.events=new p,this.canvas=new fa({filtering:xe.Blended,smoothing:!0,cache:!0,draw:this.draw.bind(this)}),this._resourceList=[],this._index=0,this._playButtonShown=!1,this._resourceCount=0,this._numLoaded=0,this._progressCounts={},this._totalCounts={},this.logo=Bw,this.logoWidth=468,this.logoHeight=118,this.loadingBarColor=K.White,this.backgroundColor="#176BAA",this.suppressPlayButton=!1,this._playButtonStyles=Ow.Z.toString(),this.playButtonText="Play game",this.startButtonFactory=()=>{let n=document.getElementById("excalibur-play");return n||(n=document.createElement("button")),n.id="excalibur-play",n.textContent=this.playButtonText,n.style.display="none",n},this._loadingFuture=new jn,t&&this.addResources(t)}wireEngine(t){this._engine=t,this.canvas.width=this._engine.canvas.width,this.canvas.height=this._engine.canvas.height}addResource(t){const n=this._index++;this._resourceList.push(t),this._progressCounts[n]=0,this._totalCounts[n]=1,this._resourceCount++}addResources(t){let n=0;const o=t.length;for(n;n<o;n++)this.addResource(t[n])}isLoaded(){return this._numLoaded===this._resourceCount}async showPlayButton(){var t,n;if(this.suppressPlayButton)this.hidePlayButton(),await Gu(500,(t=this._engine)===null||t===void 0?void 0:t.clock);else{const o=()=>{this._positionPlayButton()};return!((n=this._engine)===null||n===void 0)&&n.browser&&this._engine.browser.window.on("resize",o),this._playButtonShown=!0,this._playButton.style.display="block",document.body.addEventListener("keyup",c=>{c.key==="Enter"&&this._playButton.click()}),this._positionPlayButton(),await new Promise(c=>{const g=_=>{var y;_.stopPropagation(),this.hidePlayButton(),!((y=this._engine)===null||y===void 0)&&y.browser&&this._engine.browser.window.off("resize",o),c()};this._playButton.addEventListener("click",g),this._playButton.addEventListener("touchend",g),this._playButton.addEventListener("pointerup",g)})}}hidePlayButton(){this._playButtonShown=!1,this._playButton.style.display="none"}dispose(){this._playButtonRootElement.parentElement&&(this._playButtonRootElement.removeChild(this._playButtonElement),document.body.removeChild(this._playButtonRootElement),document.head.removeChild(this._styleBlock),this._playButtonRootElement=null,this._playButtonElement=null,this._styleBlock=null)}update(t,n){}areResourcesLoaded(){return this._loadingFuture.promise}async load(){var t,n;await((t=this._image)===null||t===void 0?void 0:t.decode()),this.canvas.flagDirty(),await Promise.all(this._resourceList.map(async o=>{await o.load().finally(()=>{this._numLoaded++,this.canvas.flagDirty()})}));for(const o of this._resourceList)o instanceof ip&&o.wireEngine(this._engine);return this._loadingFuture.resolve(),await Gu(200,(n=this._engine)===null||n===void 0?void 0:n.clock),this.canvas.flagDirty(),await this.showPlayButton(),await hn.unlock(),this.data=this._resourceList}markResourceComplete(){this._numLoaded++}get progress(){return this._resourceCount>0?Ne(this._numLoaded,0,this._resourceCount)/this._resourceCount:1}_positionPlayButton(){if(this._engine){const t=this._engine.screen.viewport.height,n=this._engine.screen.viewport.width;if(this._playButtonRootElement){const o=this._engine.canvas.offsetLeft,u=this._engine.canvas.offsetTop,c=this._playButton.clientWidth,g=this._playButton.clientHeight;this.playButtonPosition?(this._playButtonRootElement.style.left=`${this.playButtonPosition.x}px`,this._playButtonRootElement.style.top=`${this.playButtonPosition.y}px`):(this._playButtonRootElement.style.left=`${o+n/2-c/2}px`,this._playButtonRootElement.style.top=`${u+t/2-g/2+100}px`)}}}draw(t){const n=this._engine.canvasHeight/this._engine.pixelRatio,o=this._engine.canvasWidth/this._engine.pixelRatio;this._positionPlayButton(),t.fillStyle=this.backgroundColor,t.fillRect(0,0,o,n);let u=n/2;const c=Math.min(this.logoWidth,o*.75);let g=o/2-c/2;this.logoPosition&&(g=this.logoPosition.x,u=this.logoPosition.y);const _=Math.floor(c*(this.logoHeight/this.logoWidth)),y=this._engine.getAntialiasing();if(this._engine.setAntialiasing(!0),this.logoPosition?t.drawImage(this._image,0,0,this.logoWidth,this.logoHeight,g,u,c,_):t.drawImage(this._image,0,0,this.logoWidth,this.logoHeight,g,u-_-20,c,_),!this.suppressPlayButton&&this._playButtonShown){this._engine.setAntialiasing(y);return}let C=g,S=u;this.loadingBarPosition&&(C=this.loadingBarPosition.x,S=this.loadingBarPosition.y),t.lineWidth=2,eh(t,C,S,c,20,10,this.loadingBarColor);const I=c*this.progress,M=5,L=I-M*2,V=20-M*2;eh(t,C+M,S+M,L>10?L:10,V,5,null,this.loadingBarColor),this._engine.setAntialiasing(y)}emit(t,n){this.events.emit(t,n)}on(t,n){return this.events.on(t,n)}once(t,n){return this.events.once(t,n)}off(t,n){this.events.off(t,n)}}const np={webgl:"WebGL",webaudio:"WebAudio",gamepadapi:"Gamepad API"};class rp{constructor(){this._features=null,this.failedTests=[],this._criticalTests={canvasSupport:function(){const t=document.createElement("canvas");return!!(t.getContext&&t.getContext("2d"))},arrayBufferSupport:function(){const t=new XMLHttpRequest;t.open("GET","/");try{t.responseType="arraybuffer"}catch{return!1}return t.responseType==="arraybuffer"},dataUrlSupport:function(){return document.createElement("canvas").toDataURL("image/png").indexOf("data:image/png")===0},objectUrlSupport:function(){return"URL"in window&&"revokeObjectURL"in URL&&"createObjectURL"in URL},rgbaSupport:function(){const t=document.createElement("a").style;return t.cssText="background-color:rgba(150,255,150,.5)",(""+t.backgroundColor).indexOf("rgba")>-1}},this._warningTest={webAudioSupport:function(){return!!(window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext||window.oAudioContext)},webglSupport:function(){const t=document.createElement("canvas");return!!(t.getContext&&t.getContext("webgl"))}},this._features=this._loadBrowserFeatures()}getBrowserFeatures(){return this._features===null&&(this._features=this._loadBrowserFeatures()),this._features}logBrowserFeatures(){let t=`%cSUPPORTED BROWSER FEATURES
==========================%c
`;const n=["font-weight: bold; color: navy","font-weight: normal; color: inherit"],o=this.getBrowserFeatures();for(const u of Object.keys(np))o[u]?(t+="(%c✓%c)",n.push("font-weight: bold; color: green"),n.push("font-weight: normal; color: inherit")):(t+="(%c✗%c)",n.push("font-weight: bold; color: red"),n.push("font-weight: normal; color: inherit")),t+=" "+np[u]+`
`;n.unshift(t),console.log.apply(console,n)}_loadBrowserFeatures(){return{canvas:(()=>this._criticalTests.canvasSupport())(),arraybuffer:(()=>this._criticalTests.arrayBufferSupport())(),dataurl:(()=>this._criticalTests.dataUrlSupport())(),objecturl:(()=>this._criticalTests.objectUrlSupport())(),rgba:(()=>this._criticalTests.rgbaSupport())(),webaudio:(()=>this._warningTest.webAudioSupport())(),webgl:(()=>this._warningTest.webglSupport())(),gamepadapi:(()=>!!navigator.getGamepads)()}}test(){let t=!1;for(const n in this._criticalTests)this._criticalTests[n].call(this)||(this.failedTests.push(n),lt.getInstance().error("Critical browser feature missing, Excalibur requires:",n),t=!0);if(t)return!1;for(const n in this._warningTest)this._warningTest[n]()||lt.getInstance().warn("Warning browser feature missing, Excalibur will have reduced performance:",n);return!0}}var gt;(function(d){d.PreventCollision="PreventCollision",d.Passive="Passive",d.Active="Active",d.Fixed="Fixed"})(gt||(gt={}));const op=5,Wn={},Vw=()=>{for(const d in Wn)Wn[d]=0},ga=(d,t)=>{const n=h.isEnabled("suppress-obsolete-message");Wn[d]<op&&!n&&(lt.getInstance().warn(d),console.trace&&t.showStackTrace&&console.trace()),Wn[d]++};function ap(d){return d={message:"This feature will be removed in future versions of Excalibur.",alternateMethod:null,showStackTrace:!1,...d},function(t,n,o){if(o&&!(typeof o.value=="function"||typeof o.get=="function"||typeof o.set=="function"))throw new SyntaxError("Only classes/functions/getters/setters can be marked as obsolete");const c=`${`${t.name||""}${t.name&&n?".":""}${n||""}`} is marked obsolete: ${d.message}`+(d.alternateMethod?` Use ${d.alternateMethod} instead`:"");Wn[c]||(Wn[c]=0);const g=o?{...o}:t;if(!o){class _ extends g{constructor(...C){ga(c,d),super(...C)}}return _}return o&&o.value?(g.value=function(){return ga(c,d),o.value.apply(this,arguments)},g):(o&&o.get&&(g.get=function(){return ga(c,d),o.get.apply(this,arguments)}),o&&o.set&&(g.set=function(){return ga(c,d),o.set.apply(this,arguments)}),g)}}var jw=function(d,t,n,o){var u=arguments.length,c=u<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,n):o,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(d,t,n,o);else for(var _=d.length-1;_>=0;_--)(g=d[_])&&(c=(u<3?g(c):u>3?g(t,n,c):g(t,n))||c);return u>3&&c&&Object.defineProperty(t,n,c),c},cn;(function(d){d.Arcade="arcade",d.Realistic="realistic"})(cn||(cn={}));var ma;(function(d){d[d.DynamicAABBTree=0]="DynamicAABBTree"})(ma||(ma={}));var _a;(function(d){d[d.Euler=0]="Euler"})(_a||(_a={}));class nt{static get gravity(){return nt.acc}static set gravity(t){nt.acc=t}static useArcadePhysics(){nt.collisionResolutionStrategy=cn.Arcade}static useRealisticPhysics(){nt.collisionResolutionStrategy=cn.Realistic}static get dynamicTreeVelocityMultiplyer(){return nt.dynamicTreeVelocityMultiplier}static set dynamicTreeVelocityMultiplyer(t){nt.dynamicTreeVelocityMultiplier=t}}nt.acc=new F(0,0),nt.enabled=!0,nt.broadphaseStrategy=ma.DynamicAABBTree,nt.collisionResolutionStrategy=cn.Arcade,nt.defaultMass=10,nt.integrator=_a.Euler,nt.dynamicTreeVelocityMultiplier=2,nt.boundsPadding=5,nt.positionIterations=3,nt.velocityIterations=8,nt.slop=1,nt.steeringFactor=.2,nt.warmStart=!0,nt.bodiesCanSleepByDefault=!1,nt.surfaceEpsilon=.1,nt.sleepEpsilon=.07,nt.wakeThreshold=nt.sleepEpsilon*3,nt.sleepBias=.9,nt.checkForFastBodies=!0,nt.disableMinimumSpeedForFastBody=!1,jw([ap({message:"Alias for incorrect spelling used in older versions, will be removed in v0.25.0",alternateMethod:"dynamicTreeVelocityMultiplier"})],nt,"dynamicTreeVelocityMultiplyer",null);var Ve;(function(d){d.World="world",d.Screen="screen"})(Ve||(Ve={}));class nh extends F{constructor(t){super(0,0),this._getX=t.getX,this._getY=t.getY,this._setX=t.setX,this._setY=t.setY}get x(){return this._x=this._getX()}set x(t){this._setX(t),this._x=t}get y(){return this._y=this._getY()}set y(t){this._setY(t),this._y=t}}class lp extends F{constructor(t,n){super(t.x,t.y),this.original=t,this.change=n}get x(){return this._x=this.original.x}set x(t){this.change(t,this._y),this._x=this.original.x=t}get y(){return this._y=this.original.y}set y(t){this.change(this._x,t),this._y=this.original.y=t}}class $r{constructor(){this._parent=null,this._children=[],this._pos=j(0,0),this._rotation=0,this._scale=j(1,1),this._isDirty=!1,this._isInverseDirty=!1,this._matrix=Kt.identity(),this._inverse=Kt.identity()}get parent(){return this._parent}set parent(t){if(this._parent){const n=this._parent._children.indexOf(this);n>-1&&this._parent._children.splice(n,1)}this._parent=t,this._parent&&this._parent._children.push(this),this.flagDirty()}get children(){return this._children}set pos(t){t.equals(this._pos)||(this._pos.x=t.x,this._pos.y=t.y,this.flagDirty())}get pos(){return new lp(this._pos,(t,n)=>{(t!==this._pos.x||n!==this._pos.y)&&this.flagDirty()})}set globalPos(t){let n=t.clone();this.parent&&(n=this.parent.inverse.multiply(t)),n.equals(this._pos)||(this._pos=n,this.flagDirty())}get globalPos(){return new nh({getX:()=>this.matrix.data[4],getY:()=>this.matrix.data[5],setX:t=>{if(this.parent){const{x:n}=this.parent.inverse.multiply(j(t,this.pos.y));this.pos.x=n}else this.pos.x=t;t!==this.matrix.data[4]&&this.flagDirty()},setY:t=>{if(this.parent){const{y:n}=this.parent.inverse.multiply(j(this.pos.x,t));this.pos.y=n}else this.pos.y=t;t!==this.matrix.data[5]&&this.flagDirty()}})}set rotation(t){const n=Vn(t);n!==this._rotation&&this.flagDirty(),this._rotation=n}get rotation(){return this._rotation}set globalRotation(t){let n=0;this.parent&&(n=this.parent.globalRotation);const o=Vn(t+n);o!==this._rotation&&this.flagDirty(),this._rotation=o}get globalRotation(){return this.parent?this.matrix.getRotation():this.rotation}set scale(t){t.equals(this._scale)||(this._scale.x=t.x,this._scale.y=t.y,this.flagDirty())}get scale(){return new lp(this._scale,(t,n)=>{(t!==this._scale.x||n!==this._scale.y)&&this.flagDirty()})}set globalScale(t){let n=j(1,1);this.parent&&(n=this.parent.globalScale),this.scale=t.scale(j(1/n.x,1/n.y))}get globalScale(){return new nh({getX:()=>this.parent?this.matrix.getScaleX():this.scale.x,getY:()=>this.parent?this.matrix.getScaleY():this.scale.y,setX:t=>{if(this.parent){const n=this.parent.globalScale.x;this.scale.x=t/n}else this.scale.x=t},setY:t=>{if(this.parent){const n=this.parent.globalScale.y;this.scale.y=t/n}else this.scale.y=t}})}get matrix(){return this._isDirty&&(this.parent===null?this._matrix=this._calculateMatrix():this._matrix=this.parent.matrix.multiply(this._calculateMatrix()),this._isDirty=!1),this._matrix}get inverse(){return this._isInverseDirty&&(this._inverse=this.matrix.inverse(),this._isInverseDirty=!1),this._inverse}_calculateMatrix(){return Kt.identity().translate(this.pos.x,this.pos.y).rotate(this.rotation).scale(this.scale.x,this.scale.y)}flagDirty(){this._isDirty=!0,this._isInverseDirty=!0;for(let t=0;t<this._children.length;t++)this._children[t].flagDirty()}apply(t){return this.matrix.multiply(t)}applyInverse(t){return this.inverse.multiply(t)}setTransform(t,n,o){this._pos.x=t.x,this._pos.y=t.y,this._rotation=Vn(n),this._scale.x=o.x,this._scale.y=o.y,this.flagDirty()}clone(t){const n=t??new $r;return this._pos.clone(n._pos),n._rotation=this._rotation,this._scale.clone(n._scale),n.flagDirty(),n}}function Hw(d){return!!(d!=null&&d.clone)}class ii{constructor(){this.owner=null}clone(){const t=new this.constructor;for(const n in this)if(this.hasOwnProperty(n)){const o=this[n];Hw(o)&&n!=="owner"&&n!=="clone"?t[n]=o.clone():t[n]=o}return t}}class rh extends ii{constructor(t,n){super(),this.type=t,this.value=n}}class Oi{constructor(){this.observers=[],this.subscriptions=[]}register(t){this.observers.push(t)}subscribe(t){this.subscriptions.push(t)}unregister(t){const n=this.observers.indexOf(t);n!==-1&&this.observers.splice(n,1)}unsubscribe(t){const n=this.subscriptions.indexOf(t);n!==-1&&this.subscriptions.splice(n,1)}notifyAll(t){const n=this.observers.length;for(let u=0;u<n;u++)this.observers[u].notify(t);const o=this.subscriptions.length;for(let u=0;u<o;u++)this.subscriptions[u](t)}clear(){this.observers.length=0,this.subscriptions.length=0}}class tt extends ii{constructor(){super(...arguments),this.type="ex.transform",this._transform=new $r,this._addChildTransform=t=>{const n=t.get(tt);n&&(n._transform.parent=this._transform)},this.zIndexChanged$=new Oi,this._z=0,this.coordPlane=Ve.World}get(){return this._transform}onAdd(t){for(const n of t.children)this._addChildTransform(n);t.childrenAdded$.subscribe(n=>this._addChildTransform(n)),t.childrenRemoved$.subscribe(n=>{const o=n.get(tt);o&&(o._transform.parent=null)})}onRemove(t){this._transform.parent=null}get z(){return this._z}set z(t){const n=this._z;this._z=t,n!==t&&this.zIndexChanged$.notifyAll(t)}get pos(){return this._transform.pos}set pos(t){this._transform.pos=t}get globalPos(){return this._transform.globalPos}set globalPos(t){this._transform.globalPos=t}get rotation(){return this._transform.rotation}set rotation(t){this._transform.rotation=t}get globalRotation(){return this._transform.globalRotation}set globalRotation(t){this._transform.globalRotation=t}get scale(){return this._transform.scale}set scale(t){this._transform.scale=t}get globalScale(){return this._transform.globalScale}set globalScale(t){this._transform.globalScale=t}applyInverse(t){return this._transform.applyInverse(t)}apply(t){return this._transform.apply(t)}clone(){const t=new tt;return t._transform=this._transform.clone(),t._z=this._z,t}}class Xt extends ii{constructor(){super(...arguments),this.type="ex.motion",this.vel=F.Zero,this.acc=F.Zero,this.scaleFactor=F.Zero,this.angularVelocity=0,this.torque=0,this.inertia=1}}class Si{constructor(t,n,o){this._name=t,this._category=n,this._mask=o}get name(){return this._name}get category(){return this._category}get mask(){return this._mask}canCollide(t){return(this.category&t.mask)!==0&&(t.category&this.mask)!==0}invert(){return new Si("~("+this.name+")",~this.category,~this.mask)}static combine(t){const n=t.map(c=>c.name).join("+"),o=t.reduce((c,g)=>g.category|c,0),u=~o;return new Si(n,o,u)}static collidesWith(t){return Si.combine(t).invert()}}Si.All=new Si("Collide with all groups",-1,-1);class si{constructor(t,n){this.colliderA=t,this.colliderB=n,this.id=null,this.id=si.calculatePairHash(t.id,n.id)}static canCollide(t,n){var o,u;const c=(o=t==null?void 0:t.owner)===null||o===void 0?void 0:o.get(yt),g=(u=n==null?void 0:n.owner)===null||u===void 0?void 0:u.get(yt);return!(t.id===n.id||t.owner&&n.owner&&t.owner.id===n.owner.id||t.localBounds.hasZeroDimensions()||n.localBounds.hasZeroDimensions()||!c||!g||!c.group.canCollide(g.group)||c.collisionType===gt.Fixed&&g.collisionType===gt.Fixed||g.collisionType===gt.PreventCollision||c.collisionType===gt.PreventCollision||!c.active||!g.active)}get canCollide(){const t=this.colliderA,n=this.colliderB;return si.canCollide(t,n)}collide(){return this.colliderA.collide(this.colliderB)}hasCollider(t){return t===this.colliderA||t===this.colliderB}static calculatePairHash(t,n){return t.value<n.value?`#${t.value}+${n.value}`:`#${n.value}+${t.value}`}}class Wr{constructor(t,n){this.min=t,this.max=n}overlaps(t){return this.max>t.min&&t.max>this.min}getOverlap(t){return this.overlaps(t)?this.max>t.max?t.max-this.min:this.max-t.min:0}}class oh{constructor(t){this.parent=t,this.parent=t||null,this.data=null,this.bounds=new pt,this.left=null,this.right=null,this.height=0}isLeaf(){return!this.left&&!this.right}}class ah{constructor(t=new pt(-Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)){this.worldBounds=t,this.root=null,this.nodes={}}_insert(t){if(this.root===null){this.root=t,this.root.parent=null;return}const n=t.bounds;let o=this.root;for(;!o.isLeaf();){const _=o.left,y=o.right,C=o.bounds.getPerimeter(),I=o.bounds.combine(n).getPerimeter(),M=2*I,L=2*(I-C);let V=0;const Y=n.combine(_.bounds);let Z,U;_.isLeaf()?V=Y.getPerimeter()+L:(U=_.bounds.getPerimeter(),Z=Y.getPerimeter(),V=Z-U+L);let z=0;const Q=n.combine(y.bounds);if(y.isLeaf()?z=Q.getPerimeter()+L:(U=y.bounds.getPerimeter(),Z=Q.getPerimeter(),z=Z-U+L),M<V&&M<z)break;V<z?o=_:o=y}const u=o.parent,c=new oh(u);c.bounds=n.combine(o.bounds),c.height=o.height+1,u!==null?(u.left===o?u.left=c:u.right=c,c.left=o,c.right=t,o.parent=c,t.parent=c):(c.left=o,c.right=t,o.parent=c,t.parent=c,this.root=c);let g=t.parent;for(;g;){if(g=this._balance(g),!g.left)throw new Error("Parent of current leaf cannot have a null left child"+g);if(!g.right)throw new Error("Parent of current leaf cannot have a null right child"+g);g.height=1+Math.max(g.left.height,g.right.height),g.bounds=g.left.bounds.combine(g.right.bounds),g=g.parent}}_remove(t){if(t===this.root){this.root=null;return}const n=t.parent,o=n.parent;let u;if(n.left===t?u=n.right:u=n.left,o){o.left===n?o.left=u:o.right=u,u.parent=o;let c=o;for(;c;)c=this._balance(c),c.bounds=c.left.bounds.combine(c.right.bounds),c.height=1+Math.max(c.left.height,c.right.height),c=c.parent}else this.root=u,u.parent=null}trackCollider(t){const n=new oh;n.data=t,n.bounds=t.bounds,n.bounds.left-=2,n.bounds.top-=2,n.bounds.right+=2,n.bounds.bottom+=2,this.nodes[t.id.value]=n,this._insert(n)}updateCollider(t){var n;const o=this.nodes[t.id.value];if(!o)return!1;const u=t.bounds;if(!this.worldBounds.contains(u))return lt.getInstance().warn("Collider with id "+t.id.value+" is outside the world bounds and will no longer be tracked for physics"),this.untrackCollider(t),!1;if(o.bounds.contains(u))return!1;if(this._remove(o),u.left-=nt.boundsPadding,u.top-=nt.boundsPadding,u.right+=nt.boundsPadding,u.bottom+=nt.boundsPadding,t.owner){const c=(n=t.owner)===null||n===void 0?void 0:n.get(yt);if(c){const g=c.vel.x*32/1e3*nt.dynamicTreeVelocityMultiplier,_=c.vel.y*32/1e3*nt.dynamicTreeVelocityMultiplier;g<0?u.left+=g:u.right+=g,_<0?u.top+=_:u.bottom+=_}}return o.bounds=u,this._insert(o),!0}untrackCollider(t){const n=this.nodes[t.id.value];n&&(this._remove(n),this.nodes[t.id.value]=null,delete this.nodes[t.id.value])}_balance(t){if(t===null)throw new Error("Cannot balance at null node");if(t.isLeaf()||t.height<2)return t;const n=t.left,o=t.right,u=t,c=n,g=o,_=n.left,y=n.right,C=o.left,S=o.right,I=g.height-c.height;if(I>1)return g.left=u,g.parent=u.parent,u.parent=g,g.parent?g.parent.left===u?g.parent.left=g:g.parent.right=g:this.root=g,C.height>S.height?(g.right=C,u.right=S,S.parent=u,u.bounds=c.bounds.combine(S.bounds),g.bounds=u.bounds.combine(C.bounds),u.height=1+Math.max(c.height,S.height),g.height=1+Math.max(u.height,C.height)):(g.right=S,u.right=C,C.parent=u,u.bounds=c.bounds.combine(C.bounds),g.bounds=u.bounds.combine(S.bounds),u.height=1+Math.max(c.height,C.height),g.height=1+Math.max(u.height,S.height)),g;if(I<-1){if(c.left=u,c.parent=u.parent,u.parent=c,c.parent)if(c.parent.left===u)c.parent.left=c;else{if(c.parent.right!==u)throw"Error rotating Dynamic Tree";c.parent.right=c}else this.root=c;return _.height>y.height?(c.right=_,u.left=y,y.parent=u,u.bounds=g.bounds.combine(y.bounds),c.bounds=u.bounds.combine(_.bounds),u.height=1+Math.max(g.height,y.height),c.height=1+Math.max(u.height,_.height)):(c.right=y,u.left=_,_.parent=u,u.bounds=g.bounds.combine(_.bounds),c.bounds=u.bounds.combine(y.bounds),u.height=1+Math.max(g.height,_.height),c.height=1+Math.max(u.height,y.height)),c}return t}getHeight(){return this.root===null?0:this.root.height}query(t,n){const o=t.bounds,u=c=>{if(c&&c.bounds.overlaps(o))if(c.isLeaf()&&c.data!==t){if(n.call(t,c.data))return!0}else return u(c.left)||u(c.right);return!1};u(this.root)}rayCastQuery(t,n=1/0,o){const u=c=>{if(c&&c.bounds.rayCast(t,n))if(c.isLeaf()){if(o.call(t,c.data))return!0}else return u(c.left)||u(c.right);return!1};u(this.root)}getNodes(){const t=n=>n?[n].concat(t(n.left),t(n.right)):[];return t(this.root)}debug(t){const n=o=>{o&&(o.isLeaf()?o.bounds.draw(t,K.Green):o.bounds.draw(t,K.White),o.left&&n(o.left),o.right&&n(o.right))};n(this.root)}}class os{constructor(t,n){this.pos=t,this.dir=n.normalize()}intersect(t){const n=t.begin.sub(this.pos);if(this.dir.cross(t.getSlope())===0&&n.cross(this.dir)!==0)return-1;const o=this.dir.cross(t.getSlope());if(o===0)return-1;const u=n.cross(t.getSlope())/o;if(u>=0){const c=n.cross(this.dir)/o/t.getLength();if(c>=0&&c<=1)return u}return-1}intersectPoint(t){const n=this.intersect(t);return n<0?null:this.getPoint(n)}getPoint(t){return this.pos.add(this.dir.scale(t))}}class lh{constructor(){this._dynamicCollisionTree=new ah,this._pairs=new Set,this._collisionPairCache=[],this._colliders=[]}getColliders(){return this._colliders}rayCast(t,n){var o,u,c;const g=[],_=(o=n==null?void 0:n.maxDistance)!==null&&o!==void 0?o:1/0,y=(u=n==null?void 0:n.collisionGroup)!==null&&u!==void 0?u:Si.All,C=(c=n==null?void 0:n.searchAllColliders)!==null&&c!==void 0?c:!1;return this._dynamicCollisionTree.rayCastQuery(t,_,S=>{var I;const L=S.owner.get(yt);if(y.mask!==Si.All.mask&&((I=L==null?void 0:L.group)===null||I===void 0?void 0:I.mask)!==y.mask)return!1;const V=S.rayCast(t,_);return!!(V&&(g.push({distance:V.sub(t.pos).distance(),point:V,collider:S,body:L}),!C))}),g}track(t){if(!t){lt.getInstance().warn("Cannot track null collider");return}if(t instanceof we){const n=t.getColliders();for(const o of n)o.owner=t.owner,this._colliders.push(o),this._dynamicCollisionTree.trackCollider(o)}else this._colliders.push(t),this._dynamicCollisionTree.trackCollider(t)}untrack(t){if(!t){lt.getInstance().warn("Cannot untrack a null collider");return}if(t instanceof we){const n=t.getColliders();for(const o of n){const u=this._colliders.indexOf(o);u!==-1&&this._colliders.splice(u,1),this._dynamicCollisionTree.untrackCollider(o)}}else{const n=this._colliders.indexOf(t);n!==-1&&this._colliders.splice(n,1),this._dynamicCollisionTree.untrackCollider(t)}}_pairExists(t,n){const o=si.calculatePairHash(t.id,n.id);return this._pairs.has(o)}broadphase(t,n,o){const u=n/1e3,c=t.filter(_=>{var y,C;const S=(y=_.owner)===null||y===void 0?void 0:y.get(yt);return((C=_.owner)===null||C===void 0?void 0:C.active)&&S.collisionType!==gt.PreventCollision});this._collisionPairCache=[],this._pairs.clear();let g;for(let _=0,y=c.length;_<y;_++)g=c[_],this._dynamicCollisionTree.query(g,C=>{if(!this._pairExists(g,C)&&si.canCollide(g,C)){const S=new si(g,C);this._pairs.add(S.id),this._collisionPairCache.push(S)}return!1});if(o&&(o.physics.pairs=this._collisionPairCache.length),nt.checkForFastBodies)for(const _ of c){const y=_.owner.get(yt);if(y.collisionType!==gt.Active)continue;const C=y.vel.size*u+y.acc.size*.5*u*u,S=Math.min(_.bounds.height,_.bounds.width);if(nt.disableMinimumSpeedForFastBody||C>S/2){o&&o.physics.fastBodies++;const I=y.globalPos.sub(y.oldPos),M=_.center,L=_.getFurthestPoint(y.vel),V=L.sub(I),Y=new os(V,y.vel);Y.pos=Y.pos.add(Y.dir.scale(-2*nt.surfaceEpsilon));let Z,U=new F(1/0,1/0);if(this._dynamicCollisionTree.rayCastQuery(Y,C+nt.surfaceEpsilon*2,z=>{if(!this._pairExists(_,z)&&si.canCollide(_,z)){const Q=z.rayCast(Y,C+nt.surfaceEpsilon*10);if(Q){const q=Q.sub(V);q.size<U.size&&(U=q,Z=z)}}return!1}),Z&&F.isValid(U)){const z=new si(_,Z);this._pairs.has(z.id)||(this._pairs.add(z.id),this._collisionPairCache.push(z));const Q=M.sub(L);y.globalPos=V.add(Q).add(U).add(Y.dir.scale(10*nt.surfaceEpsilon)),_.update(y.transform.get()),o&&o.physics.fastBodyCollisions++}}}return this._collisionPairCache}narrowphase(t,n){let o=[];for(let u=0;u<t.length;u++){const c=t[u].collide();if(o=o.concat(c),n&&c.length>0)for(const g of c)n.physics.contacts.set(g.id,g)}return n&&(n.physics.collisions+=o.length),o}update(t){let n=0;const o=t.length;for(let u=0;u<o;u++)this._dynamicCollisionTree.updateCollider(t[u])&&n++;return n}debug(t){this._dynamicCollisionTree.debug(t)}}class Ts{constructor(){this.id=f("collider",Ts._ID++),this.__compositeColliderId=null,this.events=new p}touching(t){return!!this.collide(t)}}Ts._ID=0;class we extends Ts{constructor(t){super(),this._collisionProcessor=new lh,this._dynamicAABBTree=new ah,this._colliders=[];for(const n of t)this.addCollider(n)}clearColliders(){this._colliders=[]}addCollider(t){t.events.pipe(this.events),t.__compositeColliderId=this.id,this._colliders.push(t),this._collisionProcessor.track(t),this._dynamicAABBTree.trackCollider(t)}removeCollider(t){t.events.pipe(this.events),t.__compositeColliderId=null,ss(t,this._colliders),this._collisionProcessor.untrack(t),this._dynamicAABBTree.untrackCollider(t)}getColliders(){return this._colliders}get worldPos(){var t,n;return(n=(t=this._transform)===null||t===void 0?void 0:t.pos)!==null&&n!==void 0?n:F.Zero}get center(){var t,n;return(n=(t=this._transform)===null||t===void 0?void 0:t.pos)!==null&&n!==void 0?n:F.Zero}get bounds(){var t,n;const o=this.getColliders();return o.reduce((c,g)=>c.combine(g.bounds),(n=(t=o[0])===null||t===void 0?void 0:t.bounds)!==null&&n!==void 0?n:new pt().translate(this.worldPos))}get localBounds(){var t,n;const o=this.getColliders();return o.reduce((c,g)=>c.combine(g.localBounds),(n=(t=o[0])===null||t===void 0?void 0:t.localBounds)!==null&&n!==void 0?n:new pt)}get axes(){const t=this.getColliders();let n=[];for(const o of t)n=n.concat(o.axes);return n}getFurthestPoint(t){const n=this.getColliders(),o=[];for(const g of n)o.push(g.getFurthestPoint(t));let u=o[0],c=-Number.MAX_VALUE;for(const g of o){const _=g.dot(t);_>c&&(u=g,c=_)}return u}getInertia(t){const n=this.getColliders();let o=0;for(const u of n)o+=u.getInertia(t);return o}collide(t){let n=[t];t instanceof we&&(n=t.getColliders());const o=[];for(const c of n)this._dynamicAABBTree.query(c,g=>(o.push(new si(c,g)),!1));let u=[];for(const c of o)u=u.concat(c.collide());return u}getClosestLineBetween(t){const n=this.getColliders(),o=[];if(t instanceof we){const u=t.getColliders();for(const c of n)for(const g of u){const _=c.getClosestLineBetween(g);_&&o.push(_)}}else for(const u of n){const c=t.getClosestLineBetween(u);c&&o.push(c)}if(o.length){let u=o[0].getLength(),c=o[0];for(const g of o){const _=g.getLength();_<u&&(u=_,c=g)}return c}return null}contains(t){const n=this.getColliders();for(const o of n)if(o.contains(t))return!0;return!1}rayCast(t,n){const o=this.getColliders(),u=[];for(const c of o){const g=c.rayCast(t,n);g&&u.push(g)}if(u.length){let c=u[0],g=c.dot(t.dir);for(const _ of u){const y=t.dir.dot(_);y<g&&(c=_,g=y)}return c}return null}project(t){const n=this.getColliders(),o=[];for(const u of n){const c=u.project(t);c&&o.push(c)}if(o.length){const u=new Wr(o[0].min,o[0].max);for(const c of o)u.min=Math.min(c.min,u.min),u.max=Math.max(c.max,u.max);return u}return null}update(t){if(t){const n=this.getColliders();for(const o of n)o.owner=this.owner,o.update(t)}}debug(t,n){const o=this.getColliders();for(const u of o)u.debug(t,n)}clone(){return new we(this._colliders.map(t=>t.clone()))}}class Te{constructor(t,n){this.begin=t,this.end=n}get slope(){return(this.end.y-this.begin.y)/(this.end.x-this.begin.x)}get intercept(){return this.begin.y-this.slope*this.begin.x}normal(){return this._normal?this._normal:this._normal=this.end.sub(this.begin).normal()}dir(){return this._dir?this._dir:this._dir=this.end.sub(this.begin)}getPoints(){return[this.begin,this.end]}getSlope(){if(this._slope)return this._slope;const t=this.begin,n=this.end,o=t.distance(n);return this._slope=n.sub(t).scale(1/o)}getEdge(){const t=this.begin;return this.end.sub(t)}getLength(){if(this._length)return this._length;const t=this.begin,n=this.end,o=t.distance(n);return this._length=o}get midpoint(){return this.begin.add(this.end).scale(.5)}flip(){return new Te(this.end,this.begin)}below(t){return(this.end.x-this.begin.x)*(t.y-this.begin.y)-(this.end.y-this.begin.y)*(t.x-this.begin.x)>=0}clip(t,n){let o=t;o=o.normalize();const u=o.dot(this.begin)-n,c=o.dot(this.end)-n,g=[];if(u<=0&&g.push(this.begin),c<=0&&g.push(this.end),u*c<0){const _=u/(u-c);g.push(this.begin.add(this.end.sub(this.begin).scale(_)))}return g.length!==2?null:new Te(g[0],g[1])}distanceToPoint(t,n=!1){const o=t.x,u=t.y,c=this.getLength(),g=this.end.y-this.begin.y,_=this.end.x-this.begin.x,y=(g*o-_*u+this.end.x*this.begin.y-this.end.y*this.begin.x)/c;return n?y:Math.abs(y)}findVectorToPoint(t){const n=this.begin.sub(t),o=this.getSlope();return n.sub(o.scale(n.dot(o)))}findPoint(t=null,n=null){const o=this.slope,u=this.intercept;if(t!==null)return new F(t,o*t+u);if(n!==null)return new F((n-u)/o,n);throw new Error("You must provide an X or a Y value")}hasPoint(){let t,n=0;if(typeof arguments[0]=="number"&&typeof arguments[1]=="number")t=new F(arguments[0],arguments[1]),n=arguments[2]||0;else if(arguments[0]instanceof F)t=arguments[0],n=arguments[1]||0;else throw"Could not determine the arguments for Vector.hasPoint";const o=t.x-this.begin.x,u=t.y-this.begin.y,c=this.end.x-this.begin.x,g=this.end.y-this.begin.y,_=o*g-u*c;return Math.abs(_)>n?!1:Math.abs(c)>=Math.abs(g)?c>0?this.begin.x<=t.x&&t.x<=this.end.x:this.end.x<=t.x&&t.x<=this.begin.x:g>0?this.begin.y<=t.y&&t.y<=this.end.y:this.end.y<=t.y&&t.y<=this.begin.y}}function va(d,t,n,o){const u=d.sub(n),c=t.dot(t),g=t.dot(o),_=o.dot(o),y=t.dot(u),C=o.dot(u),S=c*_-g*g;let I=S,M=S;if(S===0||S<=.01){const Y=y/g;return new Te(d,n.add(o.scale(Y)))}let L=g*C-_*y,V=c*C-g*y;return L<0?(L=0,V=C,M=_):L>I&&(L=I,V=C+g,M=_),V<0?(V=0,-y<0?L=0:-y>c?L=I:(L=-y,I=c)):V>M&&(V=M,-y+g<0?L=0:-y+g>c?L=I:(L=-y+g,I=c)),L=Math.abs(L)<.001?0:L/I,V=Math.abs(V)<.001?0:V/M,new Te(d.add(t.scale(L)),n.add(o.scale(V)))}const Ni={PolygonPolygonClosestLine(d,t){const n=t.worldPos,o=n.sub(d.worldPos),u=o.negate(),c=new os(d.worldPos,o),g=new os(n,u),_=d.rayCast(c).add(c.dir.scale(.1)),y=t.rayCast(g).add(g.dir.scale(.1)),C=d.getClosestFace(_),S=t.getClosestFace(y),I=C.face.begin,M=C.face.getEdge(),L=S.face.begin,V=S.face.getEdge();return va(I,M,L,V)},PolygonEdgeClosestLine(d,t){const o=t.worldPos.sub(d.worldPos),u=new os(d.worldPos,o),c=d.rayCast(u).add(u.dir.scale(.1)),g=d.getClosestFace(c),_=g.face.begin,y=g.face.getEdge(),C=t.asLine(),S=C.begin,I=C.getEdge();return va(_,y,S,I)},PolygonCircleClosestLine(d,t){const n=t.worldPos,o=n.sub(d.worldPos),u=new os(d.worldPos,o.normalize()),c=d.rayCast(u).add(u.dir.scale(.1)),g=d.getClosestFace(c),_=g.face.begin,y=g.face.getEdge();let C=(y.x*(n.x-_.x)+y.y*(n.y-_.y))/(y.x*y.x+y.y*y.y);C>1?C=1:C<0&&(C=0);const S=Math.sqrt(Math.pow(_.x+y.x*C-n.x,2)+Math.pow(_.y+y.y*C-n.y,2))-t.radius,I=(_.x+y.x*C-n.x)*t.radius/(t.radius+S),M=(_.y+y.y*C-n.y)*t.radius/(t.radius+S);return new Te(y.scale(C).add(_),new F(n.x+I,n.y+M))},CircleCircleClosestLine(d,t){const o=t.worldPos.sub(d.worldPos),c=d.worldPos.sub(t.worldPos),g=new os(d.worldPos,o),_=new os(t.worldPos,c),y=d.rayCast(g),C=t.rayCast(_);return new Te(y,C)},CircleEdgeClosestLine(d,t){const n=d.worldPos,o=t.asLine(),u=o.begin,c=o.getEdge(),g=u,_=c;let y=(_.x*(n.x-g.x)+_.y*(n.y-g.y))/(_.x*_.x+_.y*_.y);y>1?y=1:y<0&&(y=0);const C=Math.sqrt(Math.pow(g.x+_.x*y-n.x,2)+Math.pow(g.y+_.y*y-n.y,2))-d.radius,S=(g.x+_.x*y-n.x)*d.radius/(d.radius+C),I=(g.y+_.y*y-n.y)*d.radius/(d.radius+C);return new Te(_.scale(y).add(g),new F(n.x+S,n.y+I))},EdgeEdgeClosestLine(d,t){const n=d.asLine(),o=n.begin,u=n.getEdge(),c=o,g=u,_=t.asLine(),y=_.begin,C=_.getEdge();return va(c,g,y,C)}};class pe extends Ts{get worldPos(){return this._globalMatrix.getPosition()}get radius(){var t;const n=this._transform,o=(t=n==null?void 0:n.globalScale)!==null&&t!==void 0?t:F.One;return this._naturalRadius*Math.min(o.x,o.y)}set radius(t){var n;const o=this._transform,u=(n=o==null?void 0:o.globalScale)!==null&&n!==void 0?n:F.One;this._naturalRadius=t/Math.min(u.x,u.y)}constructor(t){super(),this.offset=F.Zero,this._globalMatrix=Kt.identity(),this.offset=t.offset||F.Zero,this.radius=t.radius||0,this._globalMatrix.translate(this.offset.x,this.offset.y)}clone(){return new pe({offset:this.offset.clone(),radius:this.radius})}get center(){return this._globalMatrix.getPosition()}contains(t){var n,o;return((o=(n=this._transform)===null||n===void 0?void 0:n.pos)!==null&&o!==void 0?o:this.offset).distance(t)<=this.radius}rayCast(t,n=1/0){const o=this.center,u=t.dir,c=t.pos,g=Math.sqrt(Math.pow(u.dot(c.sub(o)),2)-Math.pow(c.sub(o).distance(),2)+Math.pow(this.radius,2));if(g<0)return null;{let _=0;if(g===0)return _=-u.dot(c.sub(o)),_>0&&_<n?t.getPoint(_):null;{const y=-u.dot(c.sub(o))+g,C=-u.dot(c.sub(o))-g,S=[];y>=0&&S.push(y),C>=0&&S.push(C);const I=Math.min(...S);return I<=n?t.getPoint(I):null}}}getClosestLineBetween(t){if(t instanceof pe)return Ni.CircleCircleClosestLine(this,t);if(t instanceof le)return Ni.PolygonCircleClosestLine(t,this).flip();if(t instanceof je)return Ni.CircleEdgeClosestLine(this,t).flip();throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof t}`)}collide(t){if(t instanceof pe)return Pi.CollideCircleCircle(this,t);if(t instanceof le)return Pi.CollideCirclePolygon(this,t);if(t instanceof je)return Pi.CollideCircleEdge(this,t);throw new Error(`Circle could not collide with unknown CollisionShape ${typeof t}`)}getFurthestPoint(t){return this.center.add(t.normalize().scale(this.radius))}getFurthestLocalPoint(t){return t.normalize().scale(this.radius)}get bounds(){var t,n,o;const u=this._transform,c=(t=u==null?void 0:u.globalScale)!==null&&t!==void 0?t:F.One,g=(n=u==null?void 0:u.globalRotation)!==null&&n!==void 0?n:0,_=(o=u==null?void 0:u.globalPos)!==null&&o!==void 0?o:F.Zero;return new pt(this.offset.x-this._naturalRadius,this.offset.y-this._naturalRadius,this.offset.x+this._naturalRadius,this.offset.y+this._naturalRadius).rotate(g).scale(c).translate(_)}get localBounds(){return new pt(this.offset.x-this._naturalRadius,this.offset.y-this._naturalRadius,this.offset.x+this._naturalRadius,this.offset.y+this._naturalRadius)}get axes(){return[]}getInertia(t){return t*this.radius*this.radius/2}update(t){var n;this._transform=t,((n=t.matrix)!==null&&n!==void 0?n:this._globalMatrix).clone(this._globalMatrix),this._globalMatrix.translate(this.offset.x,this.offset.y)}project(t){const n=[],u=this.center.dot(t);return n.push(u),n.push(u+this.radius),n.push(u-this.radius),new Wr(Math.min.apply(Math,n),Math.max.apply(Math,n))}debug(t,n){var o,u,c,g;const _=this._transform,y=(o=_==null?void 0:_.globalScale)!==null&&o!==void 0?o:F.One,C=(u=_==null?void 0:_.globalRotation)!==null&&u!==void 0?u:0,S=(c=_==null?void 0:_.globalPos)!==null&&c!==void 0?c:F.Zero;t.save(),t.translate(S.x,S.y),t.rotate(C),t.scale(y.x,y.y),t.drawCircle((g=this.offset)!==null&&g!==void 0?g:F.Zero,this._naturalRadius,K.Transparent,n,2),t.restore()}}class dn{constructor(t,n,o,u,c,g,_,y){var C,S;this._canceled=!1,this.colliderA=t,this.colliderB=n,this.mtv=o,this.normal=u,this.tangent=c,this.points=g,this.localPoints=_,this.info=y,this.id=si.calculatePairHash(t.id,n.id),(t.__compositeColliderId||n.__compositeColliderId)&&(this.id+="|"+si.calculatePairHash((C=t.__compositeColliderId)!==null&&C!==void 0?C:t.id,(S=n.__compositeColliderId)!==null&&S!==void 0?S:n.id))}matchAwake(){const t=this.colliderA.owner.get(yt),n=this.colliderB.owner.get(yt);t&&n&&t.sleeping!==n.sleeping&&(t.sleeping&&t.collisionType!==gt.Fixed&&n.sleepMotion>=nt.wakeThreshold&&t.setSleeping(!1),n.sleeping&&n.collisionType!==gt.Fixed&&t.sleepMotion>=nt.wakeThreshold&&n.setSleeping(!1))}isCanceled(){return this._canceled}cancel(){this._canceled=!0}}class uh{static findPolygonPolygonSeparation(t,n){let o=-Number.MAX_VALUE,u=null,c=null,g=-1,_=null;const y=t.getSides(),C=t.getLocalSides();for(let S=0;S<y.length;S++){const I=y[S],M=I.normal(),L=n.getFurthestPoint(M.negate()),V=I.distanceToPoint(L,!0);V>o&&(o=V,u=I,c=M,g=S,_=L)}return{collider:t,separation:c?o:99,axis:c,side:u,localSide:C[g],sideId:g,point:_,localPoint:c?n.getFurthestLocalPoint(c.negate()):null}}static findCirclePolygonSeparation(t,n){const o=n.axes,c=n.center.sub(t.worldPos),g=n.getFurthestPoint(c.negate());o.push(g.sub(t.worldPos).normalize());let _=Number.MAX_VALUE,y=null,C=-1;for(let S=0;S<o.length;S++){const I=n.project(o[S]),M=t.project(o[S]),L=I.getOverlap(M);if(L<=0)return null;L<_&&(_=L,y=o[S],C=S)}return C<0?null:y.normalize().scale(_)}}const Pi={CollideCircleCircle(d,t){const n=d.worldPos,o=t.worldPos,u=d.radius+t.radius,c=n.distance(o);if(c>u)return[];const g=u-c,_=o.sub(n).normalize(),y=_.perpendicular(),C=_.scale(g),S=d.getFurthestPoint(_),I=d.getFurthestLocalPoint(_),M={collider:d,separation:g,axis:_,point:S};return[new dn(d,t,C,_,y,[S],[I],M)]},CollideCirclePolygon(d,t){var n,o;let u=uh.findCirclePolygonSeparation(d,t);if(!u)return[];u=u.dot(t.center.sub(d.center))<0?u.negate():u;const g=d.getFurthestPoint(u),y=((o=(n=d.owner)===null||n===void 0?void 0:n.get(tt))!==null&&o!==void 0?o:new tt).applyInverse(g),C=u.normalize(),S={collider:d,separation:-u.size,axis:C,point:g,localPoint:y,side:t.findSide(C.negate()),localSide:t.findLocalSide(C.negate())};return[new dn(d,t,u,C,C.perpendicular(),[g],[y],S)]},CollideCircleEdge(d,t){const n=d.center,o=t.asLine(),u=o.end.sub(o.begin),c=u.dot(o.end.sub(n)),g=u.dot(n.sub(o.begin)),_=t.asLine(),y=t.asLocalLine();if(g<=0){const U=o.begin.sub(n),z=U.dot(U);if(z>d.radius*d.radius)return[];const Q=U.normalize(),q=d.radius-Math.sqrt(z),ut={collider:d,separation:q,axis:Q,point:_.begin,side:_,localSide:y};return[new dn(d,t,Q.scale(q),Q,Q.perpendicular(),[_.begin],[y.begin],ut)]}if(c<=0){const U=o.end.sub(n),z=U.dot(U);if(z>d.radius*d.radius)return[];const Q=U.normalize(),q=d.radius-Math.sqrt(z),ut={collider:d,separation:q,axis:Q,point:_.end,side:_,localSide:y};return[new dn(d,t,Q.scale(q),Q,Q.perpendicular(),[_.end],[y.end],ut)]}const C=u.dot(u),S=o.begin.scale(c).add(o.end.scale(g)).scale(1/C),I=n.sub(S),M=I.dot(I);if(M>d.radius*d.radius)return[];let L=u.perpendicular();L.dot(n.sub(o.begin))<0&&(L.x=-L.x,L.y=-L.y),L=L.normalize();const V=d.radius-Math.sqrt(M),Y=L.scale(V),Z={collider:d,separation:V,axis:L,point:S,side:_,localSide:y};return[new dn(d,t,Y,L.negate(),L.negate().perpendicular(),[S],[S.sub(t.worldPos)],Z)]},CollideEdgeEdge(){return[]},CollidePolygonEdge(d,t){var n;const o=d.center,c=t.center.sub(o).normalize(),g=new le({points:[t.begin,t.end,t.end.add(c.scale(100)),t.begin.add(c.scale(100))],offset:t.offset});g.owner=t.owner,((n=t.owner)===null||n===void 0?void 0:n.get(tt))&&g.update(t.owner.get(tt).get());const y=this.CollidePolygonPolygon(d,g);return y.length&&(y[0].colliderB=t,y[0].id=si.calculatePairHash(d.id,t.id)),y},CollidePolygonPolygon(d,t){var n,o,u,c;const g=uh.findPolygonPolygonSeparation(d,t);if(g.separation>0)return[];const _=uh.findPolygonPolygonSeparation(t,d);if(_.separation>0)return[];const y=g.separation>_.separation?g:_,S=(y.collider===d?t:d).findSide(y.axis.negate()),I=y.side,M=I.dir().normalize(),L=S.clip(M.negate(),-M.dot(I.begin));let V=null;if(L&&(V=L.clip(M,M.dot(I.end))),V){const Y=V.getPoints().filter(Q=>I.below(Q));let Z=y.axis,U=Z.perpendicular();t.center.sub(d.center).dot(Z)<0&&(Z=Z.negate(),U=Z.perpendicular());let z=[];if(y.collider===d){const Q=(o=(n=t.owner)===null||n===void 0?void 0:n.get(tt))!==null&&o!==void 0?o:new tt;z=Y.map(q=>Q.applyInverse(q))}else{const Q=(c=(u=d.owner)===null||u===void 0?void 0:u.get(tt))!==null&&c!==void 0?c:new tt;z=Y.map(q=>Q.applyInverse(q))}return[new dn(d,t,Z.scale(-y.separation),Z,U,Y,z,y)]}return[]},FindContactSeparation(d,t){var n,o,u,c;const g=d.colliderA,_=(o=(n=d.colliderA.owner)===null||n===void 0?void 0:n.get(tt))!==null&&o!==void 0?o:new tt,y=d.colliderB,C=(c=(u=d.colliderB.owner)===null||u===void 0?void 0:u.get(tt))!==null&&c!==void 0?c:new tt;if(g instanceof pe&&y instanceof pe){const S=g.radius+y.radius,I=_.pos.distance(C.pos);return-(S-I)}if(g instanceof le&&y instanceof le&&d.info.localSide){let S,I;return d.info.collider===g?(S=new Te(_.apply(d.info.localSide.begin),_.apply(d.info.localSide.end)),I=C.apply(t)):(S=new Te(C.apply(d.info.localSide.begin),C.apply(d.info.localSide.end)),I=_.apply(t)),S.distanceToPoint(I,!0)}if(g instanceof le&&y instanceof pe||y instanceof le&&g instanceof pe){const S=_.apply(t);if(d.info.side)return d.info.side.distanceToPoint(S,!0)}if(g instanceof je&&y instanceof le||y instanceof je&&g instanceof le){let S;if(d.info.collider===g?S=C.apply(t):S=_.apply(t),d.info.side)return d.info.side.distanceToPoint(S,!0)}if(g instanceof pe&&y instanceof je||y instanceof pe&&g instanceof je){const S=C.apply(t);let I;g instanceof pe&&(I=g.getFurthestPoint(d.normal));const M=S.distance(I);if(d.info.side)return M>0?-M:0}return 0}};class je extends Ts{constructor(t){var n;super(),this._globalMatrix=Kt.identity(),this.begin=t.begin||F.Zero,this.end=t.end||F.Zero,this.offset=(n=t.offset)!==null&&n!==void 0?n:F.Zero}clone(){return new je({begin:this.begin.clone(),end:this.end.clone()})}get worldPos(){var t;const n=this._transform;return(t=n==null?void 0:n.globalPos.add(this.offset))!==null&&t!==void 0?t:this.offset}get center(){const t=this._getTransformedBegin(),n=this._getTransformedEnd();return t.average(n)}_getTransformedBegin(){return this._globalMatrix.multiply(this.begin)}_getTransformedEnd(){return this._globalMatrix.multiply(this.end)}getSlope(){const t=this._getTransformedBegin(),n=this._getTransformedEnd(),o=t.distance(n);return n.sub(t).scale(1/o)}getLength(){const t=this._getTransformedBegin(),n=this._getTransformedEnd();return t.distance(n)}contains(){return!1}rayCast(t,n=1/0){const o=this._getTransformedBegin().sub(t.pos);if(t.dir.cross(this.getSlope())===0&&o.cross(t.dir)!==0)return null;const u=t.dir.cross(this.getSlope());if(u===0)return null;const c=o.cross(this.getSlope())/u;if(c>=0&&c<=n){const g=o.cross(t.dir)/u/this.getLength();if(g>=0&&g<=1)return t.getPoint(c)}return null}getClosestLineBetween(t){if(t instanceof pe)return Ni.CircleEdgeClosestLine(t,this);if(t instanceof le)return Ni.PolygonEdgeClosestLine(t,this).flip();if(t instanceof je)return Ni.EdgeEdgeClosestLine(this,t);throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof t}`)}collide(t){if(t instanceof pe)return Pi.CollideCircleEdge(t,this);if(t instanceof le)return Pi.CollidePolygonEdge(t,this);if(t instanceof je)return Pi.CollideEdgeEdge();throw new Error(`Edge could not collide with unknown CollisionShape ${typeof t}`)}getFurthestPoint(t){const n=this._getTransformedBegin(),o=this._getTransformedEnd();return t.dot(n)>0?n:o}_boundsFromBeginEnd(t,n,o=10){return new pt(Math.min(t.x,n.x)-o,Math.min(t.y,n.y)-o,Math.max(t.x,n.x)+o,Math.max(t.y,n.y)+o)}get bounds(){const t=this._getTransformedBegin(),n=this._getTransformedEnd();return this._boundsFromBeginEnd(t,n)}get localBounds(){return this._boundsFromBeginEnd(this.begin,this.end)}asLine(){return new Te(this._getTransformedBegin(),this._getTransformedEnd())}asLocalLine(){return new Te(this.begin,this.end)}get axes(){const n=this._getTransformedEnd().sub(this._getTransformedBegin()).normal(),o=[];return o.push(n),o.push(n.negate()),o.push(n.normal()),o.push(n.normal().negate()),o}getInertia(t){const n=this.end.sub(this.begin).distance()/2;return t*n*n}update(t){var n;this._transform=t,((n=t.matrix)!==null&&n!==void 0?n:this._globalMatrix).clone(this._globalMatrix),this._globalMatrix.translate(this.offset.x,this.offset.y)}project(t){const n=[],o=[this._getTransformedBegin(),this._getTransformedEnd()],u=o.length;for(let c=0;c<u;c++)n.push(o[c].dot(t));return new Wr(Math.min.apply(Math,n),Math.max.apply(Math,n))}debug(t,n){const o=this._getTransformedBegin(),u=this._getTransformedEnd();t.drawLine(o,u,n,2),t.drawCircle(o,2,n),t.drawCircle(u,2,n)}}class le extends Ts{set points(t){this._localBoundsDirty=!0,this._localSidesDirty=!0,this._sidesDirty=!0,this._points=t}get points(){return this._points}constructor(t){var n,o;super(),this._logger=lt.getInstance(),this._transformedPoints=[],this._sides=[],this._localSides=[],this._globalMatrix=Kt.identity(),this._transformedPointsDirty=!0,this._sidesDirty=!0,this._localSidesDirty=!0,this._localBoundsDirty=!0,this.offset=(n=t.offset)!==null&&n!==void 0?n:F.Zero,this._globalMatrix.translate(this.offset.x,this.offset.y),this.points=(o=t.points)!==null&&o!==void 0?o:[],this._isCounterClockwiseWinding(this.points)||this.points.reverse(),this.isConvex()||this._logger.warn("Excalibur only supports convex polygon colliders and will not behave properly.Call PolygonCollider.triangulate() to build a new collider composed of smaller convex triangles"),this._calculateTransformation()}_isCounterClockwiseWinding(t){let n=0;for(let o=0;o<t.length;o++)n+=(t[(o+1)%t.length].x-t[o].x)*(t[(o+1)%t.length].y+t[o].y);return n<0}isConvex(){if(this.points.length<3)return!1;let t=this.points[this.points.length-2],n=this.points[this.points.length-1],o=Math.atan2(n.y-t.y,n.x-t.x),u=0,c=0,g=0;for(const[_,y]of this.points.entries()){if(t=n,u=o,n=y,o=Math.atan2(n.y-t.y,n.x-t.x),t.equals(n))return!1;let C=o-u;if(C<=-Math.PI?C+=Math.PI*2:C>Math.PI&&(C-=Math.PI*2),_===0){if(C===0)return!1;c=C>0?1:-1}else if(c*C<=0)return!1;g+=C}return Math.abs(Math.round(g/(Math.PI*2)))===1}tessellate(){const t=[];for(let n=1;n<this.points.length-2;n++)t.push([this.points[0],this.points[n+1],this.points[n+2]]);return t.push([this.points[0],this.points[1],this.points[2]]),new we(t.map(n=>ge.Polygon(n)))}triangulate(){if(this.points.length<3)throw Error("Invalid polygon");function t(g,_){return g>=_.length?_[g%_.length]:g<0?_[g%_.length+_.length]:_[g]}function n(g,_,y,C){const S=y.sub(_),I=C.sub(y),M=_.sub(C),L=g.sub(_),V=g.sub(y),Y=g.sub(C),Z=S.cross(L),U=I.cross(V),z=M.cross(Y);return!(Z>0||U>0||z>0)}const o=[],u=[...this.points],c=$u(0,this.points.length-1);for(;c.length>3;)for(let g=0;g<c.length;g++){const _=c[g],y=t(g-1,c),C=t(g+1,c),S=u[_],I=u[y],M=u[C],L=I.sub(S);if(!(M.sub(S).cross(L)>0))continue;let Z=!0;for(let U=0;U<c.length;U++){const z=c[U];if(z===_||z===y||z===C)continue;const Q=u[z];if(n(Q,I,S,M)){Z=!1;break}}if(Z){o.push([I,S,M]),c.splice(g,1);break}}return o.push([u[c[0]],u[c[1]],u[c[2]]]),new we(o.map(g=>ge.Polygon(g)))}clone(){return new le({offset:this.offset.clone(),points:this.points.map(t=>t.clone())})}get worldPos(){return this._transform?this._transform.pos.add(this.offset):this.offset}get center(){return this.bounds.center}_calculateTransformation(){const t=this.points,n=t.length;this._transformedPoints.length=0;for(let o=0;o<n;o++)this._transformedPoints[o]=this._globalMatrix.multiply(t[o].clone())}getTransformedPoints(){return this._transformedPointsDirty&&(this._calculateTransformation(),this._transformedPointsDirty=!1),this._transformedPoints}getSides(){if(this._sidesDirty){const t=[],n=this.getTransformedPoints(),o=n.length;for(let u=0;u<o;u++)t.push(new Te(n[u],n[(u+1)%o]));this._sides=t,this._sidesDirty=!1}return this._sides}getLocalSides(){if(this._localSidesDirty){const t=[],n=this.points,o=n.length;for(let u=0;u<o;u++)t.push(new Te(n[u],n[(u+1)%o]));this._localSides=t,this._localSidesDirty=!1}return this._localSides}findSide(t){const n=this.getSides();let o=n[0],u=-Number.MAX_VALUE;for(let c=0;c<n.length;c++){const g=n[c],y=g.normal().dot(t);y>u&&(o=g,u=y)}return o}findLocalSide(t){const n=this.getLocalSides();let o=n[0],u=-Number.MAX_VALUE;for(let c=0;c<n.length;c++){const g=n[c],y=g.normal().dot(t);y>u&&(o=g,u=y)}return o}get axes(){const t=[],n=this.getSides();for(let o=0;o<n.length;o++)t.push(n[o].normal());return t}update(t){var n;t&&(this._transform=t,this._transformedPointsDirty=!0,this._sidesDirty=!0,((n=t.matrix)!==null&&n!==void 0?n:this._globalMatrix).clone(this._globalMatrix),this._globalMatrix.translate(this.offset.x,this.offset.y))}contains(t){const n=new os(t,new F(1,0));return this.getSides().reduce(function(u,c){return n.intersect(c)>=0?u+1:u},0)%2!==0}getClosestLineBetween(t){if(t instanceof pe)return Ni.PolygonCircleClosestLine(this,t);if(t instanceof le)return Ni.PolygonPolygonClosestLine(this,t);if(t instanceof je)return Ni.PolygonEdgeClosestLine(this,t);throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof t}`)}collide(t){if(t instanceof pe)return Pi.CollideCirclePolygon(t,this);if(t instanceof le)return Pi.CollidePolygonPolygon(this,t);if(t instanceof je)return Pi.CollidePolygonEdge(this,t);throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof t}`)}getFurthestPoint(t){const n=this.getTransformedPoints();let o=null,u=-Number.MAX_VALUE;for(let c=0;c<n.length;c++){const g=t.dot(n[c]);g>u&&(u=g,o=n[c])}return o}getFurthestLocalPoint(t){const n=this.points;let o=n[0],u=-Number.MAX_VALUE;for(let c=0;c<n.length;c++){const g=t.dot(n[c]);g>u&&(u=g,o=n[c])}return o}getClosestFace(t){const n=this.getSides();let o=Number.POSITIVE_INFINITY,u=-1,c=-1;for(let g=0;g<n.length;g++){const _=n[g].distanceToPoint(t);_<o&&(o=_,u=g,c=_)}return u!==-1?{distance:n[u].normal().scale(c),face:n[u]}:null}get bounds(){return this.localBounds.transform(this._globalMatrix)}get localBounds(){return this._localBoundsDirty&&(this._localBounds=pt.fromPoints(this.points),this._localBoundsDirty=!1),this._localBounds}getInertia(t){if(this._cachedMass===t&&this._cachedInertia)return this._cachedInertia;let n=0,o=0;const u=this.points;for(let c=0;c<u.length;c++){const g=(c+1)%u.length,_=u[g].cross(u[c]);n+=_*(u[c].dot(u[c])+u[c].dot(u[g])+u[g].dot(u[g])),o+=_}return this._cachedMass=t,this._cachedInertia=t/6*(n/o)}rayCast(t,n=1/0){const o=this.getSides(),u=o.length;let c=Number.MAX_VALUE,g=-1;for(let _=0;_<u;_++){const y=t.intersect(o[_]);y>=0&&y<c&&y<=n&&(c=y,g=_)}return g>=0?t.getPoint(c):null}project(t){const n=this.getTransformedPoints(),o=n.length;let u=Number.MAX_VALUE,c=-Number.MAX_VALUE;for(let g=0;g<o;g++){const _=n[g].dot(t);u=Math.min(u,_),c=Math.max(c,_)}return new Wr(u,c)}debug(t,n){const o=this.getTransformedPoints()[0],u=[o,...this.getTransformedPoints(),o];for(let c=0;c<u.length-1;c++)t.drawLine(u[c],u[c+1],n,2),t.drawCircle(u[c],2,n),t.drawCircle(u[c+1],2,n)}}class ge{static Box(t,n,o=F.Half,u=F.Zero){return new le({points:new pt(-t*o.x,-n*o.y,t-t*o.x,n-n*o.y).getPoints(),offset:u})}static Polygon(t,n=F.Zero){return new le({points:t,offset:n})}static Circle(t,n=F.Zero){return new pe({radius:t,offset:n})}static Edge(t,n){return new je({begin:t,end:n})}static Capsule(t,n,o=F.Zero){const u=lt.getInstance();return t===n&&u.warn("A capsule collider with equal width and height is a circle, consider using a ex.Shape.Circle or ex.CircleCollider"),n>=t?new we([ge.Circle(t/2,j(0,-n/2+t/2).add(o)),ge.Box(t,n-t,F.Half,o),ge.Circle(t/2,j(0,n/2-t/2).add(o))]):new we([ge.Circle(n/2,j(-t/2+n/2,0).add(o)),ge.Box(t-n,n,F.Half,o),ge.Circle(n/2,j(t/2-n/2,0).add(o))])}}class qt extends ii{constructor(t){super(),this.type="ex.collider",this.events=new p,this.$colliderAdded=new Oi,this.$colliderRemoved=new Oi,this.set(t)}get(){return this._collider}set(t){return this.clear(),t&&(this._collider=t,this._collider.owner=this.owner,t.events.pipe(this.events),this.$colliderAdded.notifyAll(t),this.update()),t}clear(){this._collider&&(this._collider.events.unpipe(this.events),this.$colliderRemoved.notifyAll(this._collider),this._collider.owner=null,this._collider=null)}clone(){return new qt(this._collider.clone())}get bounds(){var t,n;return(n=(t=this._collider)===null||t===void 0?void 0:t.bounds)!==null&&n!==void 0?n:new pt}get localBounds(){var t,n;return(n=(t=this._collider)===null||t===void 0?void 0:t.localBounds)!==null&&n!==void 0?n:new pt}update(){var t;const n=(t=this.owner)===null||t===void 0?void 0:t.get(tt);this._collider&&(this._collider.owner=this.owner,n&&this._collider.update(n.get()))}collide(t){let n=this._collider,o=t._collider;if(!n||!o)return[];let u=!1;if(o instanceof we&&(n=o,o=this._collider,u=!0),this._collider){const c=n.collide(o);return c?(u&&c.forEach(g=>{g.mtv=g.mtv.negate(),g.normal=g.normal.negate(),g.tangent=g.normal.perpendicular(),g.colliderA=this._collider,g.colliderB=t._collider}),c):[]}return[]}onAdd(t){this._collider&&this.update(),this.events.on("precollision",n=>{const o=n;t.events.emit("precollision",new ft(o.target.owner,o.other.owner,o.side,o.intersection))}),this.events.on("postcollision",n=>{const o=n;t.events.emit("postcollision",new vt(o.target.owner,o.other.owner,o.side,o.intersection))}),this.events.on("collisionstart",n=>{const o=n;t.events.emit("collisionstart",new ht(o.target.owner,o.other.owner,o.contact))}),this.events.on("collisionend",n=>{const o=n;t.events.emit("collisionend",new at(o.target.owner,o.other.owner))})}onRemove(){this.events.clear(),this.$colliderRemoved.notifyAll(this._collider)}useBoxCollider(t,n,o=F.Half,u=F.Zero){const c=ge.Box(t,n,o,u);return this.set(c)}usePolygonCollider(t,n=F.Zero){const o=ge.Polygon(t,n);return this.set(o)}useCircleCollider(t,n=F.Zero){const o=ge.Circle(t,n);return this.set(o)}useEdgeCollider(t,n){const o=ge.Edge(t,n);return this.set(o)}useCompositeCollider(t){return this.set(new we(t))}}var Ae;(function(d){d.Rotation="rotation",d.X="x",d.Y="y"})(Ae||(Ae={}));class yt extends ii{constructor(t){var n,o,u;super(),this.type="ex.body",this.dependencies=[tt,Xt],this.id=f("body",yt._ID++),this.events=new p,this._oldTransform=new $r,this.__oldTransformCaptured=!1,this.enableFixedUpdateInterpolate=!0,this.collisionType=gt.PreventCollision,this.group=Si.All,this._mass=nt.defaultMass,this.sleepMotion=nt.sleepEpsilon*5,this.canSleep=nt.bodiesCanSleepByDefault,this._sleeping=!1,this.bounciness=.2,this.friction=.99,this.useGravity=!0,this.limitDegreeOfFreedom=[],this.oldVel=new F(0,0),this.oldAcc=F.Zero,t&&(this.collisionType=(n=t.type)!==null&&n!==void 0?n:this.collisionType,this.group=(o=t.group)!==null&&o!==void 0?o:this.group,this.useGravity=(u=t.useGravity)!==null&&u!==void 0?u:this.useGravity)}get matrix(){return this.transform.get().matrix}get mass(){return this._mass}set mass(t){this._mass=t,this._cachedInertia=void 0,this._cachedInverseInertia=void 0}get inverseMass(){return this.collisionType===gt.Fixed?0:1/this.mass}get sleeping(){return this._sleeping}setSleeping(t){this._sleeping=t,t?(this.vel=F.Zero,this.acc=F.Zero,this.angularVelocity=0,this.sleepMotion=0):this.sleepMotion=nt.sleepEpsilon*5}updateMotion(){this._sleeping&&this.setSleeping(!0);const t=this.vel.size*this.vel.size+Math.abs(this.angularVelocity*this.angularVelocity),n=nt.sleepBias;this.sleepMotion=n*this.sleepMotion+(1-n)*t,this.sleepMotion=Ne(this.sleepMotion,0,10*nt.sleepEpsilon),this.canSleep&&this.sleepMotion<nt.sleepEpsilon&&this.setSleeping(!0)}get inertia(){if(this._cachedInertia)return this._cachedInertia;const t=this.owner.get(qt);if(t){t.$colliderAdded.subscribe(()=>{this._cachedInertia=null}),t.$colliderRemoved.subscribe(()=>{this._cachedInertia=null});const n=t.get();if(n)return this._cachedInertia=n.getInertia(this.mass)}return 0}get inverseInertia(){return this._cachedInverseInertia?this._cachedInverseInertia:this._cachedInverseInertia=this.collisionType===gt.Fixed?0:1/this.inertia}get active(){var t;return!!(!((t=this.owner)===null||t===void 0)&&t.active)}get center(){return this.globalPos}get transform(){var t;return(t=this.owner)===null||t===void 0?void 0:t.get(tt)}get motion(){var t;return(t=this.owner)===null||t===void 0?void 0:t.get(Xt)}get pos(){return this.transform.pos}set pos(t){this.transform.pos=t}get globalPos(){return this.transform.globalPos}set globalPos(t){this.transform.globalPos=t}get oldPos(){return this._oldTransform.pos}get vel(){return this.motion.vel}set vel(t){this.motion.vel=t}get acc(){return this.motion.acc}set acc(t){this.motion.acc=t}get torque(){return this.motion.torque}set torque(t){this.motion.torque=t}get oldRotation(){return this._oldTransform.rotation}get rotation(){return this.transform.globalRotation}set rotation(t){this.transform.globalRotation=t}get scale(){return this.transform.globalScale}set scale(t){this.transform.globalScale=t}get oldScale(){return this._oldTransform.scale}get scaleFactor(){return this.motion.scaleFactor}set scaleFactor(t){this.motion.scaleFactor=t}get angularVelocity(){return this.motion.angularVelocity}set angularVelocity(t){this.motion.angularVelocity=t}applyImpulse(t,n){if(this.collisionType!==gt.Active)return;const o=n.scale(this.inverseMass);if(this.limitDegreeOfFreedom.includes(Ae.X)&&(o.x=0),this.limitDegreeOfFreedom.includes(Ae.Y)&&(o.y=0),this.vel.addEqual(o),!this.limitDegreeOfFreedom.includes(Ae.Rotation)){const u=t.sub(this.globalPos);this.angularVelocity+=this.inverseInertia*u.cross(n)}}applyLinearImpulse(t){if(this.collisionType!==gt.Active)return;const n=t.scale(this.inverseMass);this.limitDegreeOfFreedom.includes(Ae.X)&&(n.x=0),this.limitDegreeOfFreedom.includes(Ae.Y)&&(n.y=0),this.vel=this.vel.add(n)}applyAngularImpulse(t,n){if(this.collisionType===gt.Active&&!this.limitDegreeOfFreedom.includes(Ae.Rotation)){const o=t.sub(this.globalPos);this.angularVelocity+=this.inverseInertia*o.cross(n)}}captureOldTransform(){this.__oldTransformCaptured=!0,this.transform.get().clone(this._oldTransform),this.oldVel.setTo(this.vel.x,this.vel.y),this.oldAcc.setTo(this.acc.x,this.acc.y)}clone(){return super.clone()}}yt._ID=0;class up{constructor(t){this.data=t,this.type="Component Added"}}function hp(d){return!!d&&d.type==="Component Added"}class cp{constructor(t){this.data=t,this.type="Component Removed"}}function dp(d){return!!d&&d.type==="Component Removed"}const $w={Initialize:"initialize",PreUpdate:"preupdate",PostUpdate:"postupdate"};class ue{constructor(t,n){if(this.events=new p,this.id=ue._ID++,this.scene=null,this._name="anonymous",this.active=!0,this._componentsToRemove=[],this._componentTypeToInstance=new Map,this._componentStringToInstance=new Map,this._tagsMemo=[],this._typesMemo=[],this.componentAdded$=new Oi,this.componentRemoved$=new Oi,this._parent=null,this.childrenAdded$=new Oi,this.childrenRemoved$=new Oi,this._children=[],this._isInitialized=!1,this._setName(n),t)for(const o of t)this.addComponent(o)}_setName(t){t&&(this._name=t)}get name(){return this._name}kill(){this.active&&(this.active=!1,this.unparent())}isKilled(){return!this.active}get tags(){return this._tagsMemo}hasTag(t){return this.tags.includes(t)}addTag(t){return this.addComponent(new rh(t))}removeTag(t,n=!1){return this.removeComponent(t,n)}get types(){return this._typesMemo}_rebuildMemos(){this._tagsMemo=Array.from(this._componentStringToInstance.values()).filter(t=>t instanceof rh).map(t=>t.type),this._typesMemo=Array.from(this._componentStringToInstance.keys())}getComponents(){return Array.from(this._componentStringToInstance.values())}_notifyAddComponent(t){this._rebuildMemos();const n=new up({component:t,entity:this});this.componentAdded$.notifyAll(n)}_notifyRemoveComponent(t){const n=new cp({component:t,entity:this});this.componentRemoved$.notifyAll(n),this._rebuildMemos()}get parent(){return this._parent}get children(){return this._children}unparent(){this._parent&&(this._parent.removeChild(this),this._parent=null)}addChild(t){if(t.parent===null){if(this.getAncestors().includes(t))throw new Error("Cycle detected, cannot add entity");this._children.push(t),t._parent=this,this.childrenAdded$.notifyAll(t)}else throw new Error("Entity already has a parent, cannot add without unparenting");return this}removeChild(t){return t.parent===this&&(ss(t,this._children),t._parent=null,this.childrenRemoved$.notifyAll(t)),this}removeAllChildren(){for(let t=this.children.length-1;t>=0;t--)this.removeChild(this.children[t]);return this}getAncestors(){const t=[this];let n=this.parent;for(;n;)t.push(n),n=n.parent;return t.reverse()}getDescendants(){let t=[this],n=[this];for(;n.length>0;){const o=n.pop();n=n.concat(o.children),t=t.concat(o.children)}return t}clone(){const t=new ue;for(const n of this.types)t.addComponent(this.get(n).clone());for(const n of this.children)t.addChild(n.clone());return t}addTemplate(t,n=!1){for(const o of t.getComponents())this.addComponent(o.clone(),n);for(const o of t.children)this.addChild(o.clone().addTemplate(o));return this}addComponent(t,n=!1){if(this.has(t.type))if(n)this.removeComponent(t,!0);else return this;if(t.dependencies&&t.dependencies.length)for(const u of t.dependencies)this.addComponent(new u);t.owner=this;const o=t.constructor;return this._componentTypeToInstance.set(o,t),this._componentStringToInstance.set(t.type,t),t.onAdd&&t.onAdd(this),this._notifyAddComponent(t),this}removeComponent(t,n=!1){return n?typeof t=="string"?this._removeComponentByType(t):t instanceof ii&&this._removeComponentByType(t.type):this._componentsToRemove.push(t),this}clearComponents(){const t=this.getComponents();for(const n of t)this.removeComponent(n)}_removeComponentByType(t){if(this.has(t)){const n=this.get(t);n.owner=null,n.onRemove&&n.onRemove(this);const o=n.constructor;this._componentTypeToInstance.delete(o),this._componentStringToInstance.delete(n.type),this._notifyRemoveComponent(n)}}processComponentRemoval(){for(const t of this._componentsToRemove){const n=typeof t=="string"?t:t.type;this._removeComponentByType(n)}this._componentsToRemove.length=0}has(t){return typeof t=="string"?this._componentStringToInstance.has(t):this._componentTypeToInstance.has(t)}get(t){return typeof t=="string"?this._componentStringToInstance.get(t):this._componentTypeToInstance.get(t)}get isInitialized(){return this._isInitialized}_initialize(t){this.isInitialized||(this.onInitialize(t),this.events.emit("initialize",new At(t,this)),this._isInitialized=!0)}_preupdate(t,n){this.events.emit("preupdate",new D(t,n,this)),this.onPreUpdate(t,n)}_postupdate(t,n){this.events.emit("postupdate",new B(t,n,this)),this.onPostUpdate(t,n)}onInitialize(t){}onPreUpdate(t,n){}onPostUpdate(t,n){}update(t,n){this._initialize(t),this._preupdate(t,n);for(const o of this.children)o.update(t,n);this._postupdate(t,n)}emit(t,n){this.events.emit(t,n)}on(t,n){return this.events.on(t,n)}once(t,n){return this.events.once(t,n)}off(t,n){this.events.off(t,n)}}ue._ID=0;function hh(d){return!!d.tick}class Gr{constructor(t,n){this._options=t,this._graphics=n,this.graphics=[]}get name(){return this._options.name}hide(t){if(!t)this.graphics.length=0;else{let n=null;t instanceof Ue?n=t:n=this._graphics.getGraphic(t),this.graphics=this.graphics.filter(o=>o.graphic!==n),this._graphics.recalculateBounds()}}show(t,n){n={...n};let o;return t instanceof Ue?o=this._graphics.copyGraphics?t.clone():t:(o=this._graphics.getGraphic(t),o||lt.getInstance().error(`No such graphic added to component named ${t}. These named graphics are available: `,this._graphics.getNames())),o?(this.graphics.push({graphic:o,options:n}),this._graphics.recalculateBounds(),o):null}use(t,n){return n={...n},this.hide(),this.show(t,n)}get order(){return this._options.order}set order(t){this._options.order=t}get offset(){var t;return(t=this._options.offset)!==null&&t!==void 0?t:F.Zero}set offset(t){this._options.offset=t}get currentKeys(){var t;return(t=this.name)!==null&&t!==void 0?t:"anonymous"}clone(t){const n=new Gr({...this._options},t);return n.graphics=[...this.graphics.map(o=>({graphic:o.graphic.clone(),options:{...o.options}}))],n}}class ya{constructor(t){this._component=t,this._layers=[],this._layerMap={},this.default=new Gr({name:"default",order:0},t),this._maybeAddLayer(this.default)}create(t){const n=new Gr(t,this._component);return this._maybeAddLayer(n)}get(t){return t?this._getLayer(t):this._layers}currentKeys(){const t=[];for(const n of this._layers)t.push(n.currentKeys);return t}has(t){return t in this._layerMap}_maybeAddLayer(t){return this._layerMap[t.name]?this._layerMap[t.name]:(this._layerMap[t.name]=t,this._layers.push(t),this._layers.sort((n,o)=>n.order-o.order),t)}_getLayer(t){return this._layerMap[t]}clone(t){const n=new ya(t);return n._layerMap={},n._layers=[],n.default=this.default.clone(t),n._maybeAddLayer(n.default),this._layers.filter(u=>u.name!=="default").map(u=>u.clone(t)).forEach(u=>n._maybeAddLayer(u)),n}}class me extends ii{getGraphic(t){return this._graphics[t]}getNames(){return Object.keys(this._graphics)}constructor(t){super(),this.type="ex.graphics",this._graphics={},this.visible=!0,this.opacity=1,this.offset=F.Zero,this.anchor=F.Half,this.flipHorizontal=!1,this.flipVertical=!1,this.copyGraphics=!1,this._localBounds=null,t={visible:this.visible,...t};const{current:n,anchor:o,opacity:u,visible:c,graphics:g,offset:_,copyGraphics:y,onPreDraw:C,onPostDraw:S}=t;this._graphics=g||{},this.offset=_??this.offset,this.opacity=u??this.opacity,this.anchor=o??this.anchor,this.copyGraphics=y??this.copyGraphics,this.onPreDraw=C??this.onPreDraw,this.onPostDraw=S??this.onPostDraw,this.visible=!!c,this.layers=new ya(this),n&&this._graphics[n]&&this.show(this._graphics[n])}get current(){return this.layers.default.graphics}get graphics(){return this._graphics}add(t,n){let o="default",u=null;return typeof t=="string"?(o=t,u=n):u=t,this._graphics[o]=this.copyGraphics?u.clone():u,o==="default"&&this.show("default"),u}show(t,n){const o=this.layers.default.show(t,n);return this.recalculateBounds(),o}use(t,n){const o=this.layers.default.use(t,n);return this.recalculateBounds(),o}hide(t){this.layers.default.hide(t)}set localBounds(t){this._localBounds=t}recalculateBounds(){let t=new pt;for(const n of this.layers.get())for(const{graphic:o,options:u}of n.graphics){let c=this.anchor,g=this.offset;u!=null&&u.anchor&&(c=u.anchor),u!=null&&u.offset&&(g=u.offset);const _=o.localBounds,y=-_.width*c.x+g.x,C=-_.height*c.y+g.y;t=o==null?void 0:o.localBounds.translate(j(y+n.offset.x,C+n.offset.y)).combine(t)}this._localBounds=t}get localBounds(){return(!this._localBounds||this._localBounds.hasZeroDimensions())&&this.recalculateBounds(),this._localBounds}update(t,n=0){for(const o of this.layers.get())for(const{graphic:u}of o.graphics)hh(u)&&(u==null||u.tick(t,n))}clone(){const t=new me;return t._graphics={...this._graphics},t.offset=this.offset.clone(),t.opacity=this.opacity,t.anchor=this.anchor.clone(),t.copyGraphics=this.copyGraphics,t.onPreDraw=this.onPreDraw,t.onPostDraw=this.onPostDraw,t.visible=this.visible,t.layers=this.layers.clone(t),t}}class xa extends $n{constructor(t){super(t),this.width=t.width,this.height=t.height,this.rasterize()}clone(){return new xa({width:this.width,height:this.height,...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(t){this.color&&t.fillRect(0,0,this.width,this.height),this.strokeColor&&t.strokeRect(0,0,this.width,this.height)}}class wa extends $n{get radius(){return this._radius}set radius(t){this._radius=t,this.width=this._radius*2,this.height=this._radius*2,this.flagDirty()}constructor(t){var n,o,u;super(t),this._radius=0;const c=(n=t.lineWidth)!==null&&n!==void 0?n:t.strokeColor?1:0;this.padding=(o=t.padding)!==null&&o!==void 0?o:2+c/2,this.radius=t.radius,this.filtering=(u=t.filtering)!==null&&u!==void 0?u:xe.Blended,this.rasterize()}clone(){return new wa({radius:this.radius,...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(t){this.radius>0&&(t.beginPath(),t.arc(this.radius,this.radius,this.radius,0,Math.PI*2),this.color&&t.fill(),this.strokeColor&&t.stroke())}}class Gn extends ii{constructor(){super(...arguments),this.type="ex.pointer",this.useColliderShape=!0,this.useGraphicsBounds=!1}}class Ut{static CreateReversibleEasingFunction(t){return(n,o,u,c)=>u<o?o-(t(n,u,o,c)-u):t(n,o,u,c)}static CreateVectorEasingFunction(t){return(n,o,u,c)=>new F(t(n,o.x,u.x,c),t(n,o.y,u.y,c))}}Ut.Linear=Ut.CreateReversibleEasingFunction((d,t,n,o)=>(n=n-t,n*d/o+t)),Ut.EaseInQuad=Ut.CreateReversibleEasingFunction((d,t,n,o)=>(n=n-t,d/=o,n*d*d+t)),Ut.EaseOutQuad=Ut.CreateReversibleEasingFunction((d,t,n,o)=>(n=n-t,d/=o,-n*d*(d-2)+t)),Ut.EaseInOutQuad=Ut.CreateReversibleEasingFunction((d,t,n,o)=>(n=n-t,d/=o/2,d<1?n/2*d*d+t:(d--,-n/2*(d*(d-2)-1)+t))),Ut.EaseInCubic=Ut.CreateReversibleEasingFunction((d,t,n,o)=>(n=n-t,d/=o,n*d*d*d+t)),Ut.EaseOutCubic=Ut.CreateReversibleEasingFunction((d,t,n,o)=>(n=n-t,d/=o,d--,n*(d*d*d+1)+t)),Ut.EaseInOutCubic=Ut.CreateReversibleEasingFunction((d,t,n,o)=>(n=n-t,d/=o/2,d<1?n/2*d*d*d+t:(d-=2,n/2*(d*d*d+2)+t)));class fp{constructor(t){this._actions=[],this._completedActions=[],this._entity=t}add(t){this._actions.push(t)}remove(t){const n=this._actions.indexOf(t);this._actions.splice(n,1)}clearActions(){this._actions.length=0,this._completedActions.length=0,this._currentAction&&this._currentAction.stop()}getActions(){return this._actions.concat(this._completedActions)}hasNext(){return this._actions.length>0}isComplete(){return this._actions.length===0}reset(){this._actions=this.getActions();const t=this._actions.length;for(let n=0;n<t;n++)this._actions[n].reset();this._completedActions=[]}update(t){this._actions.length>0&&(this._currentAction=this._actions[0],this._currentAction.update(t),this._currentAction.isComplete(this._entity)&&this._completedActions.push(this._actions.shift()))}}class pp{constructor(t,n,o){this._stopped=!1,this._repeatBuilder=n,this._repeatContext=new Xr(t),this._actionQueue=this._repeatContext.getQueue(),this._repeat=o,this._originalRepeat=o,this._repeatBuilder(this._repeatContext),this._repeat--}update(t){this._actionQueue.isComplete()&&(this._actionQueue.clearActions(),this._repeatBuilder(this._repeatContext),this._repeat--),this._actionQueue.update(t)}isComplete(){return this._stopped||this._repeat<=0&&this._actionQueue.isComplete()}stop(){this._stopped=!0}reset(){this._repeat=this._originalRepeat}}class gp{constructor(t,n){this._stopped=!1,this._repeatBuilder=n,this._repeatContext=new Xr(t),this._actionQueue=this._repeatContext.getQueue(),this._repeatBuilder(this._repeatContext)}update(t){this._stopped||(this._actionQueue.isComplete()&&(this._actionQueue.clearActions(),this._repeatBuilder(this._repeatContext)),this._actionQueue.update(t))}isComplete(){return this._stopped}stop(){this._stopped=!0,this._actionQueue.clearActions()}reset(){}}class mp{constructor(t,n,o,u){if(this._started=!1,this._stopped=!1,this._entity=t,this._tx=t.get(tt),this._motion=t.get(Xt),this._speed=u,this._offset=new F(n,o),u<=0)throw lt.getInstance().error("Attempted to moveBy with speed less than or equal to zero : "+u),new Error("Speed must be greater than 0 pixels per second")}update(t){this._started||(this._started=!0,this._start=new F(this._tx.pos.x,this._tx.pos.y),this._end=this._start.add(this._offset),this._distance=this._offset.size,this._dir=this._end.sub(this._start).normalize()),this.isComplete(this._entity)?(this._tx.pos=j(this._end.x,this._end.y),this._motion.vel=j(0,0)):this._motion.vel=this._dir.scale(this._speed)}isComplete(t){const n=t.get(tt);return this._stopped||n.pos.distance(this._start)>=this._distance}stop(){this._motion.vel=j(0,0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class _p{constructor(t,n,o,u){this.entity=t,this._started=!1,this._stopped=!1,this._tx=t.get(tt),this._motion=t.get(Xt),this._end=new F(n,o),this._speed=u}update(t){this._started||(this._started=!0,this._start=new F(this._tx.pos.x,this._tx.pos.y),this._distance=this._start.distance(this._end),this._dir=this._end.sub(this._start).normalize());const n=this._dir.scale(this._speed);this._motion.vel=j(n.x,n.y),this.isComplete(this.entity)&&(this._tx.pos=j(this._end.x,this._end.y),this._motion.vel=j(0,0))}isComplete(t){const n=t.get(tt);return this._stopped||new F(n.pos.x,n.pos.y).distance(this._start)>=this._distance}stop(){this._motion.vel=j(0,0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}var ni;(function(d){d[d.ShortestPath=0]="ShortestPath",d[d.LongestPath=1]="LongestPath",d[d.Clockwise=2]="Clockwise",d[d.CounterClockwise=3]="CounterClockwise"})(ni||(ni={}));class vp{constructor(t,n,o,u){this._started=!1,this._stopped=!1,this._tx=t.get(tt),this._motion=t.get(Xt),this._end=n,this._speed=o,this._rotationType=u||ni.ShortestPath}update(t){if(!this._started){this._started=!0,this._start=this._tx.rotation,this._currentNonCannonAngle=this._tx.rotation;const n=Math.abs(this._end-this._start),o=Ci-n;switch(n>o?(this._shortDistance=o,this._longDistance=n):(this._shortDistance=n,this._longDistance=o),this._shortestPathIsPositive=(this._start-this._end+Ci)%Ci>=Math.PI,this._rotationType){case ni.ShortestPath:this._distance=this._shortDistance,this._shortestPathIsPositive?this._direction=1:this._direction=-1;break;case ni.LongestPath:this._distance=this._longDistance,this._shortestPathIsPositive?this._direction=-1:this._direction=1;break;case ni.Clockwise:this._direction=1,this._shortestPathIsPositive?this._distance=this._shortDistance:this._distance=this._longDistance;break;case ni.CounterClockwise:this._direction=-1,this._shortestPathIsPositive?this._distance=this._longDistance:this._distance=this._shortDistance;break}}this._motion.angularVelocity=this._direction*this._speed,this._currentNonCannonAngle+=this._direction*this._speed*(t/1e3),this.isComplete()&&(this._tx.rotation=this._end,this._motion.angularVelocity=0,this._stopped=!0)}isComplete(){const t=Math.abs(this._currentNonCannonAngle-this._start);return this._stopped||t>=Math.abs(this._distance)}stop(){this._motion.angularVelocity=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class yp{constructor(t,n,o,u){this._started=!1,this._stopped=!1,this._tx=t.get(tt),this._motion=t.get(Xt),this._speed=o,this._offset=n,this._rotationType=u||ni.ShortestPath}update(t){if(!this._started){this._started=!0,this._start=this._tx.rotation,this._currentNonCannonAngle=this._tx.rotation,this._end=this._start+this._offset;const n=Math.abs(this._end-this._start),o=Ci-n;switch(n>o?(this._shortDistance=o,this._longDistance=n):(this._shortDistance=n,this._longDistance=o),this._shortestPathIsPositive=(this._start-this._end+Ci)%Ci>=Math.PI,this._rotationType){case ni.ShortestPath:this._distance=this._shortDistance,this._shortestPathIsPositive?this._direction=1:this._direction=-1;break;case ni.LongestPath:this._distance=this._longDistance,this._shortestPathIsPositive?this._direction=-1:this._direction=1;break;case ni.Clockwise:this._direction=1,this._shortDistance>=0?this._distance=this._shortDistance:this._distance=this._longDistance;break;case ni.CounterClockwise:this._direction=-1,this._shortDistance<=0?this._distance=this._shortDistance:this._distance=this._longDistance;break}}this._motion.angularVelocity=this._direction*this._speed,this._currentNonCannonAngle+=this._direction*this._speed*(t/1e3),this.isComplete()&&(this._tx.rotation=this._end,this._motion.angularVelocity=0,this._stopped=!0)}isComplete(){const t=Math.abs(this._currentNonCannonAngle-this._start);return this._stopped||t>=Math.abs(this._distance)}stop(){this._motion.angularVelocity=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1,this._start=void 0,this._currentNonCannonAngle=void 0,this._distance=void 0}}class xp{constructor(t,n,o,u,c){this._started=!1,this._stopped=!1,this._tx=t.get(tt),this._motion=t.get(Xt),this._endX=n,this._endY=o,this._speedX=u,this._speedY=c}update(t){if(this._started||(this._started=!0,this._startX=this._tx.scale.x,this._startY=this._tx.scale.y,this._distanceX=Math.abs(this._endX-this._startX),this._distanceY=Math.abs(this._endY-this._startY)),Math.abs(this._tx.scale.x-this._startX)>=this._distanceX)this._motion.scaleFactor.x=0;else{const n=this._endY<this._startY?-1:1;this._motion.scaleFactor.x=this._speedX*n}if(Math.abs(this._tx.scale.y-this._startY)>=this._distanceY)this._motion.scaleFactor.y=0;else{const n=this._endY<this._startY?-1:1;this._motion.scaleFactor.y=this._speedY*n}this.isComplete()&&(this._tx.scale=j(this._endX,this._endY),this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0)}isComplete(){return this._stopped||Math.abs(this._tx.scale.x-this._startX)>=this._distanceX-.01&&Math.abs(this._tx.scale.y-this._startY)>=this._distanceY-.01}stop(){this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class wp{constructor(t,n,o,u){this._started=!1,this._stopped=!1,this._tx=t.get(tt),this._motion=t.get(Xt),this._offset=new F(n,o),this._speedX=this._speedY=u}update(t){this._started||(this._started=!0,this._startScale=this._tx.scale.clone(),this._endScale=this._startScale.add(this._offset),this._distanceX=Math.abs(this._endScale.x-this._startScale.x),this._distanceY=Math.abs(this._endScale.y-this._startScale.y),this._directionX=this._endScale.x<this._startScale.x?-1:1,this._directionY=this._endScale.y<this._startScale.y?-1:1),this._motion.scaleFactor.x=this._speedX*this._directionX,this._motion.scaleFactor.y=this._speedY*this._directionY,this.isComplete()&&(this._tx.scale=this._endScale,this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0)}isComplete(){return this._stopped||Math.abs(this._tx.scale.x-this._startScale.x)>=this._distanceX-.01&&Math.abs(this._tx.scale.y-this._startScale.y)>=this._distanceY-.01}stop(){this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class Cp{constructor(t){this._method=null,this._hasBeenCalled=!1,this._method=t}update(t){this._method(),this._hasBeenCalled=!0}isComplete(){return this._hasBeenCalled}reset(){this._hasBeenCalled=!1}stop(){this._hasBeenCalled=!0}}class bp{constructor(t,n,o,u,c){this.easingFcn=c,this._currentLerpTime=0,this._lerpDuration=1*1e3,this._lerpStart=new F(0,0),this._lerpEnd=new F(0,0),this._initialized=!1,this._stopped=!1,this._tx=t.get(tt),this._motion=t.get(Xt),this._lerpDuration=u,this._lerpEnd=new F(n,o)}_initialize(){this._lerpStart=new F(this._tx.pos.x,this._tx.pos.y),this._currentLerpTime=0}update(t){this._initialized||(this._initialize(),this._initialized=!0),this._currentLerpTime+=t;let n=this._tx.pos.x,o=this._tx.pos.y;this._currentLerpTime<this._lerpDuration?(this._lerpEnd.x<this._lerpStart.x?n=this._lerpStart.x-(this.easingFcn(this._currentLerpTime,this._lerpEnd.x,this._lerpStart.x,this._lerpDuration)-this._lerpEnd.x):n=this.easingFcn(this._currentLerpTime,this._lerpStart.x,this._lerpEnd.x,this._lerpDuration),this._lerpEnd.y<this._lerpStart.y?o=this._lerpStart.y-(this.easingFcn(this._currentLerpTime,this._lerpEnd.y,this._lerpStart.y,this._lerpDuration)-this._lerpEnd.y):o=this.easingFcn(this._currentLerpTime,this._lerpStart.y,this._lerpEnd.y,this._lerpDuration),this._motion.vel=j((n-this._tx.pos.x)/(t/1e3),(o-this._tx.pos.y)/(t/1e3))):(this._tx.pos=j(this._lerpEnd.x,this._lerpEnd.y),this._motion.vel=F.Zero)}isComplete(){return this._stopped||this._currentLerpTime>=this._lerpDuration}reset(){this._initialized=!1,this._stopped=!1,this._currentLerpTime=0}stop(){this._motion.vel=j(0,0),this._stopped=!0}}class Sp{constructor(t,n,o,u,c){this.easingFcn=c,this._currentLerpTime=0,this._lerpDuration=1*1e3,this._lerpStart=new F(0,0),this._lerpEnd=new F(0,0),this._initialized=!1,this._stopped=!1,this._tx=t.get(tt),this._motion=t.get(Xt),this._lerpDuration=u,this._offset=new F(n,o)}_initialize(){this._lerpStart=new F(this._tx.pos.x,this._tx.pos.y),this._currentLerpTime=0,this._lerpEnd=this._lerpStart.add(this._offset)}update(t){this._initialized||(this._initialize(),this._initialized=!0),this._currentLerpTime+=t;let n=this._tx.pos.x,o=this._tx.pos.y;this._currentLerpTime<this._lerpDuration?(this._lerpEnd.x<this._lerpStart.x?n=this._lerpStart.x-(this.easingFcn(this._currentLerpTime,this._lerpEnd.x,this._lerpStart.x,this._lerpDuration)-this._lerpEnd.x):n=this.easingFcn(this._currentLerpTime,this._lerpStart.x,this._lerpEnd.x,this._lerpDuration),this._lerpEnd.y<this._lerpStart.y?o=this._lerpStart.y-(this.easingFcn(this._currentLerpTime,this._lerpEnd.y,this._lerpStart.y,this._lerpDuration)-this._lerpEnd.y):o=this.easingFcn(this._currentLerpTime,this._lerpStart.y,this._lerpEnd.y,this._lerpDuration),this._motion.vel=j((n-this._tx.pos.x)/(t/1e3),(o-this._tx.pos.y)/(t/1e3))):(this._tx.pos=j(this._lerpEnd.x,this._lerpEnd.y),this._motion.vel=F.Zero)}isComplete(){return this._stopped||this._currentLerpTime>=this._lerpDuration}reset(){this._initialized=!1,this._stopped=!1,this._currentLerpTime=0}stop(){this._motion.vel=j(0,0),this._stopped=!0}}class Pp{constructor(t,n,o,u=1){this._timeVisible=0,this._timeNotVisible=0,this._elapsedTime=0,this._totalTime=0,this._stopped=!1,this._started=!1,this._graphics=t.get(me),this._timeVisible=n,this._timeNotVisible=o,this._duration=(n+o)*u}update(t){this._started||(this._started=!0,this._elapsedTime=0,this._totalTime=0),this._graphics&&(this._elapsedTime+=t,this._totalTime+=t,this._graphics.visible&&this._elapsedTime>=this._timeVisible&&(this._graphics.visible=!1,this._elapsedTime=0),!this._graphics.visible&&this._elapsedTime>=this._timeNotVisible&&(this._graphics.visible=!0,this._elapsedTime=0),this.isComplete()&&(this._graphics.visible=!0))}isComplete(){return this._stopped||this._totalTime>=this._duration}stop(){this._graphics&&(this._graphics.visible=!0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1,this._elapsedTime=0,this._totalTime=0}}class Ep{constructor(t,n,o){this._multiplier=1,this._started=!1,this._stopped=!1,this._graphics=t.get(me),this._endOpacity=n,this._speed=this._ogspeed=o}update(t){this._graphics&&(this._started||(this._started=!0,this._speed=this._ogspeed,this._endOpacity<this._graphics.opacity?this._multiplier=-1:this._multiplier=1),this._speed>0&&(this._graphics.opacity+=this._multiplier*(Math.abs(this._graphics.opacity-this._endOpacity)*t)/this._speed),this._speed-=t,this.isComplete()&&(this._graphics.opacity=this._endOpacity),lt.getInstance().debug("[Action fade] Actor opacity:",this._graphics.opacity))}isComplete(){return this._stopped||Math.abs(this._graphics.opacity-this._endOpacity)<.05}stop(){this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class Tp{constructor(t){this._elapsedTime=0,this._started=!1,this._stopped=!1,this._delay=t}update(t){this._started||(this._started=!0),this._elapsedTime+=t}isComplete(){return this._stopped||this._elapsedTime>=this._delay}stop(){this._stopped=!0}reset(){this._elapsedTime=0,this._started=!1,this._stopped=!1}}class Ap{constructor(t){this._stopped=!1,this._entity=t}update(t){this._entity.get(Xn).clearActions(),this._entity.kill(),this._stopped=!0}isComplete(){return this._stopped}stop(){}reset(){}}class ch{constructor(t,n,o){this._started=!1,this._stopped=!1,this._tx=t.get(tt),this._motion=t.get(Xt),this._followTx=n.get(tt),this._followMotion=n.get(Xt),this._current=new F(this._tx.pos.x,this._tx.pos.y),this._end=new F(this._followTx.pos.x,this._followTx.pos.y),this._maximumDistance=o!==void 0?o:this._current.distance(this._end),this._speed=0}update(t){this._started||(this._started=!0,this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize());const n=Math.sqrt(Math.pow(this._followMotion.vel.x,2)+Math.pow(this._followMotion.vel.y,2));if(n!==0&&(this._speed=n),this._current=j(this._tx.pos.x,this._tx.pos.y),this._end=j(this._followTx.pos.x,this._followTx.pos.y),this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize(),this._distanceBetween>=this._maximumDistance){const o=this._dir.scale(this._speed);this._motion.vel=j(o.x,o.y)}else this._motion.vel=j(0,0);this.isComplete()&&(this._tx.pos=j(this._end.x,this._end.y),this._motion.vel=j(0,0))}stop(){this._motion.vel=j(0,0),this._stopped=!0}isComplete(){return this._stopped}reset(){this._started=!1,this._stopped=!1}}class dh{constructor(t,n,o){this._started=!1,this._stopped=!1,this._speedWasSpecified=!1,this._tx=t.get(tt),this._motion=t.get(Xt),this._meetTx=n.get(tt),this._meetMotion=n.get(Xt),this._current=new F(this._tx.pos.x,this._tx.pos.y),this._end=new F(this._meetTx.pos.x,this._meetTx.pos.y),this._speed=o||0,o!==void 0&&(this._speedWasSpecified=!0)}update(t){this._started||(this._started=!0,this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize());const n=Math.sqrt(Math.pow(this._meetMotion.vel.x,2)+Math.pow(this._meetMotion.vel.y,2));n!==0&&!this._speedWasSpecified&&(this._speed=n),this._current=j(this._tx.pos.x,this._tx.pos.y),this._end=j(this._meetTx.pos.x,this._meetTx.pos.y),this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize();const o=this._dir.scale(this._speed);this._motion.vel=j(o.x,o.y),this.isComplete()&&(this._tx.pos=j(this._end.x,this._end.y),this._motion.vel=j(0,0))}isComplete(){return this._stopped||this._distanceBetween<=1}stop(){this._motion.vel=j(0,0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1,this._distanceBetween=void 0}}class Xr{constructor(t){this._entity=t,this._queue=new fp(t)}getQueue(){return this._queue}update(t){this._queue.update(t)}clearActions(){this._queue.clearActions()}runAction(t){return t.reset(),this._queue.add(t),this}easeTo(...t){var n,o;let u=0,c=0,g=0,_=Ut.Linear;return t[0]instanceof F?(u=t[0].x,c=t[0].y,g=t[1],_=(n=t[2])!==null&&n!==void 0?n:_):(u=t[0],c=t[1],g=t[2],_=(o=t[3])!==null&&o!==void 0?o:_),this._queue.add(new bp(this._entity,u,c,g,_)),this}easeBy(...t){var n,o;let u=0,c=0,g=0,_=Ut.Linear;return t[0]instanceof F?(u=t[0].x,c=t[0].y,g=t[1],_=(n=t[2])!==null&&n!==void 0?n:_):(u=t[0],c=t[1],g=t[2],_=(o=t[3])!==null&&o!==void 0?o:_),this._queue.add(new Sp(this._entity,u,c,g,_)),this}moveTo(t,n,o){let u=0,c=0,g=0;return t instanceof F?(u=t.x,c=t.y,g=n):(u=t,c=n,g=o),this._queue.add(new _p(this._entity,u,c,g)),this}moveBy(t,n,o){let u=0,c=0,g=0;return t instanceof F?(u=t.x,c=t.y,g=n):(u=t,c=n,g=o),this._queue.add(new mp(this._entity,u,c,g)),this}rotateTo(t,n,o){return this._queue.add(new vp(this._entity,t,n,o)),this}rotateBy(t,n,o){return this._queue.add(new yp(this._entity,t,n,o)),this}scaleTo(t,n,o,u){let c=1,g=1,_=0,y=0;return t instanceof F&&n instanceof F&&(c=t.x,g=t.y,_=n.x,y=n.y),typeof t=="number"&&typeof n=="number"&&(c=t,g=n,_=o,y=u),this._queue.add(new xp(this._entity,c,g,_,y)),this}scaleBy(t,n,o){let u=1,c=1;return t instanceof F&&(u=t.x,c=t.y,o=n),typeof t=="number"&&typeof n=="number"&&(u=t,c=n),this._queue.add(new wp(this._entity,u,c,o)),this}blink(t,n,o=1){return this._queue.add(new Pp(this._entity,t,n,o)),this}fade(t,n){return this._queue.add(new Ep(this._entity,t,n)),this}delay(t){return this._queue.add(new Tp(t)),this}die(){return this._queue.add(new Ap(this._entity)),this}callMethod(t){return this._queue.add(new Cp(t)),this}repeat(t,n){return n?(this._queue.add(new pp(this._entity,t,n)),this):(this.repeatForever(t),this)}repeatForever(t){return this._queue.add(new gp(this._entity,t)),this}follow(t,n){return n===void 0?this._queue.add(new ch(this._entity,t)):this._queue.add(new ch(this._entity,t,n)),this}meet(t,n){return n===void 0?this._queue.add(new dh(this._entity,t)):this._queue.add(new dh(this._entity,t,n)),this}toPromise(){return new Promise(n=>{this._queue.add(new Cp(()=>{n()}))})}}class Xn extends ii{constructor(){super(...arguments),this.type="ex.actions",this.dependencies=[tt,Xt]}onAdd(t){this._ctx=new Xr(t)}onRemove(){this._ctx=null}getQueue(){var t;return(t=this._ctx)===null||t===void 0?void 0:t.getQueue()}runAction(t){var n;return(n=this._ctx)===null||n===void 0?void 0:n.runAction(t)}update(t){var n;return(n=this._ctx)===null||n===void 0?void 0:n.update(t)}clearActions(){var t;(t=this._ctx)===null||t===void 0||t.clearActions()}easeTo(...t){return this._ctx.easeTo.apply(this._ctx,t)}easeBy(...t){return this._ctx.easeBy.apply(this._ctx,t)}moveTo(t,n,o){return this._ctx.moveTo.apply(this._ctx,[t,n,o])}moveBy(t,n,o){return this._ctx.moveBy.apply(this._ctx,[t,n,o])}rotateTo(t,n,o){return this._ctx.rotateTo(t,n,o)}rotateBy(t,n,o){return this._ctx.rotateBy(t,n,o)}scaleTo(t,n,o,u){return this._ctx.scaleTo.apply(this._ctx,[t,n,o,u])}scaleBy(t,n,o){return this._ctx.scaleBy.apply(this._ctx,[t,n,o])}blink(t,n,o){return this._ctx.blink(t,n,o)}fade(t,n){return this._ctx.fade(t,n)}delay(t){return this._ctx.delay(t)}die(){return this._ctx.die()}callMethod(t){return this._ctx.callMethod(t)}repeat(t,n){return this._ctx.repeat(t,n)}repeatForever(t){return this._ctx.repeatForever(t)}follow(t,n){return this._ctx.follow(t,n)}meet(t,n){return this._ctx.meet(t,n)}toPromise(){return this._ctx.toPromise()}}var Ca;(function(d){d.Em="em",d.Rem="rem",d.Px="px",d.Pt="pt",d.Percent="%"})(Ca||(Ca={}));var ba;(function(d){d.Left="left",d.Right="right",d.Center="center",d.Start="start",d.End="end"})(ba||(ba={}));var Sa;(function(d){d.Top="top",d.Hanging="hanging",d.Middle="middle",d.Alphabetic="alphabetic",d.Ideographic="ideographic",d.Bottom="bottom"})(Sa||(Sa={}));var Pa;(function(d){d.Normal="normal",d.Italic="italic",d.Oblique="oblique"})(Pa||(Pa={}));var Ea;(function(d){d.LeftToRight="ltr",d.RightToLeft="rtl"})(Ea||(Ea={}));class Yn{constructor(t,n,o,u){this.font=t,this.text=n,this.color=o,this.maxWidth=u,this._textFragments=[],this.disposed=!1,this._dirty=!0,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.dimensions=this.measureText(n),this._setDimension(this.dimensions,this.ctx),this._lastHashCode=this.getHashCode()}measureText(t,n){if(this.disposed)throw Error("Accessing disposed text instance! "+this.text);let o=null;n!=null?o=this._getLinesFromText(t,n):o=t.split(`
`);const u=o.reduce((M,L)=>M.length>L.length?M:L);this._applyFont(this.ctx);const c=this.ctx.measureText(u);let g=Math.abs(c.actualBoundingBoxAscent)+Math.abs(c.actualBoundingBoxDescent);const _=g*o.length;g=_;const y=_-Math.abs(c.actualBoundingBoxAscent),C=0,S=0;return new pt({left:C-Math.abs(c.actualBoundingBoxLeft)-this.font.padding,top:S-Math.abs(c.actualBoundingBoxAscent)-this.font.padding,bottom:S+y+this.font.padding,right:C+Math.abs(c.actualBoundingBoxRight)+this.font.padding})}_setDimension(t,n){n.canvas.width=(t.width+this.font.padding*2)*2*this.font.quality,n.canvas.height=(t.height+this.font.padding*2)*2*this.font.quality}static getHashCode(t,n,o){var u;return n+"__hashcode__"+t.fontString+t.showDebug+t.textAlign+t.baseAlign+t.direction+JSON.stringify(t.shadow)+(t.padding.toString()+t.smoothing.toString()+t.lineWidth.toString()+t.lineDash.toString()+((u=t.strokeColor)===null||u===void 0?void 0:u.toString())+(o?o.toString():t.color.toString()))}getHashCode(t=!0){return Yn.getHashCode(this.font,this.text,t?this.color:void 0)}_applyRasterProperties(t){var n,o;t.translate(this.font.padding,this.font.padding),t.imageSmoothingEnabled=this.font.smoothing,t.lineWidth=this.font.lineWidth,t.setLineDash((n=this.font.lineDash)!==null&&n!==void 0?n:t.getLineDash()),t.strokeStyle=(o=this.font.strokeColor)===null||o===void 0?void 0:o.toString(),t.fillStyle=this.color.toString()}_applyFont(t){t.resetTransform(),t.translate(this.font.padding+t.canvas.width/2,this.font.padding+t.canvas.height/2),t.scale(this.font.quality,this.font.quality),t.textAlign=this.font.textAlign,t.textBaseline=this.font.baseAlign,t.font=this.font.fontString,t.direction=this.font.direction,this.font.shadow&&(t.shadowColor=this.font.shadow.color.toString(),t.shadowBlur=this.font.shadow.blur,t.shadowOffsetX=this.font.shadow.offset.x,t.shadowOffsetY=this.font.shadow.offset.y)}_drawText(t,n,o){this._applyRasterProperties(t),this._applyFont(t);for(let u=0;u<n.length;u++){const c=n[u];this.color&&t.fillText(c,0,u*o),this.font.strokeColor&&t.strokeText(c,0,u*o)}this.font.showDebug&&(th(t,K.Green,-t.canvas.width/2,0,t.canvas.width/2,0,2),th(t,K.Red,0,-t.canvas.height/2,0,t.canvas.height/2,2))}_splitTextBitmap(t){const n=[];let o=0,u=0;const c=Math.min(4096,t.canvas.width),g=Math.min(4096,t.canvas.height);for(;o<t.canvas.width;){for(;u<t.canvas.height;){const _=document.createElement("canvas");_.width=c,_.height=g,_.getContext("2d").drawImage(t.canvas,o,u,c,g,0,0,c,g),n.push({x:o,y:u,canvas:_}),u+=g}o+=c,u=0}return n}flagDirty(){this._dirty=!0}render(t,n,o,u){if(this.disposed)throw Error("Accessing disposed text instance! "+this.text);this._ex=t;const c=this.getHashCode();if(this._lastHashCode!==c&&(this._dirty=!0),this._dirty){this.dimensions=this.measureText(this.text,u),this._setDimension(this.dimensions,this.ctx);const g=this._getLinesFromText(this.text,u),_=this.dimensions.height/g.length;if(this._drawText(this.ctx,g,_),t instanceof Ps)for(const y of this._textFragments)t.textureLoader.delete(y.canvas);if(this._textFragments=this._splitTextBitmap(this.ctx),t instanceof Ps)for(const y of this._textFragments)t.textureLoader.load(y.canvas,this.font.filtering,!0);this._lastHashCode=c,this._dirty=!1}for(const g of this._textFragments)t.drawImage(g.canvas,0,0,g.canvas.width,g.canvas.height,g.x/this.font.quality+n-this.ctx.canvas.width/this.font.quality/2,g.y/this.font.quality+o-this.ctx.canvas.height/this.font.quality/2,g.canvas.width/this.font.quality,g.canvas.height/this.font.quality)}dispose(){if(this.disposed=!0,this.dimensions=void 0,this.canvas=void 0,this.ctx=void 0,this._ex instanceof Ps)for(const t of this._textFragments)this._ex.textureLoader.delete(t.canvas);this._textFragments.length=0}_getLinesFromText(t,n){if(this._chachedText===t&&this._cachedRenderWidth===n)return this._chachedLines;const o=t.split(`
`);if(n==null)return o;for(let u=0;u<o.length;u++){let c=o[u],g="";if(this.measureText(c).width>n){for(;this.measureText(c).width>n;)g=c[c.length-1]+g,c=c.slice(0,-1);o[u]=c,o[u+1]=g}}return this._chachedText=t,this._chachedLines=o,this._cachedRenderWidth=n,o}}class Mt{static measureText(t,n,o){const u=Yn.getHashCode(n,t);if(Mt._MEASURE_CACHE.has(u))return Mt._MEASURE_CACHE.get(u);Mt._LOGGER.debug("Font text measurement cache miss");const c=n.measureTextWithoutCache(t,o);return Mt._MEASURE_CACHE.set(u,c),c}static getTextInstance(t,n,o){const u=Yn.getHashCode(n,t,o);let c=Mt._TEXT_CACHE.get(u);return c||(c=new Yn(n,t,o),Mt._TEXT_CACHE.set(u,c),Mt._LOGGER.debug("Font text instance cache miss")),Mt._TEXT_USAGE.set(c,performance.now()),c}static checkAndClearCache(){const t=[],n=new Set;for(const[u,c]of Mt._TEXT_USAGE.entries())if(c+100<performance.now())Mt._LOGGER.debug(`Text cache entry timed out ${u.text}`),t.push(u),u.dispose();else{const g=u.getHashCode(!1);n.add(g)}t.forEach(u=>{Mt._TEXT_USAGE.delete(u)}),this._TEXT_CACHE.clear();for(const[u]of this._TEXT_USAGE.entries())this._TEXT_CACHE.set(u.getHashCode(),u);const o=new Map;for(const u of n)Mt._MEASURE_CACHE.has(u)&&o.set(u,Mt._MEASURE_CACHE.get(u));this._MEASURE_CACHE.clear(),this._MEASURE_CACHE=o}static get cacheSize(){return Mt._TEXT_USAGE.size}static clearCache(){for(const[t]of Mt._TEXT_USAGE.entries())t.dispose();Mt._TEXT_USAGE.clear(),Mt._TEXT_CACHE.clear(),Mt._MEASURE_CACHE.clear()}}Mt._LOGGER=lt.getInstance(),Mt._TEXT_USAGE=new Map,Mt._TEXT_CACHE=new Map,Mt._MEASURE_CACHE=new Map;class Zn extends Ue{constructor(t={}){var n,o,u,c,g,_,y,C,S,I,M,L,V,Y,Z,U,z,Q,q;super(t),this.filtering=xe.Blended,this.quality=2,this.padding=2,this.smoothing=!1,this.lineWidth=1,this.lineDash=[],this.color=K.Black,this.family="sans-serif",this.style=Pa.Normal,this.bold=!1,this.unit=Ca.Px,this.textAlign=ba.Left,this.baseAlign=Sa.Alphabetic,this.direction=Ea.LeftToRight,this.size=10,this.shadow=null,this._textBounds=new pt,this._textMeasurement=new Yn(this,"",K.Black),this.smoothing=(n=t==null?void 0:t.smoothing)!==null&&n!==void 0?n:this.smoothing,this.padding=(o=t==null?void 0:t.padding)!==null&&o!==void 0?o:this.padding,this.color=(u=t==null?void 0:t.color)!==null&&u!==void 0?u:this.color,this.strokeColor=(c=t==null?void 0:t.strokeColor)!==null&&c!==void 0?c:this.strokeColor,this.lineDash=(g=t==null?void 0:t.lineDash)!==null&&g!==void 0?g:this.lineDash,this.lineWidth=(_=t==null?void 0:t.lineWidth)!==null&&_!==void 0?_:this.lineWidth,this.filtering=(y=t==null?void 0:t.filtering)!==null&&y!==void 0?y:this.filtering,this.family=(C=t==null?void 0:t.family)!==null&&C!==void 0?C:this.family,this.style=(S=t==null?void 0:t.style)!==null&&S!==void 0?S:this.style,this.bold=(I=t==null?void 0:t.bold)!==null&&I!==void 0?I:this.bold,this.size=(M=t==null?void 0:t.size)!==null&&M!==void 0?M:this.size,this.unit=(L=t==null?void 0:t.unit)!==null&&L!==void 0?L:this.unit,this.textAlign=(V=t==null?void 0:t.textAlign)!==null&&V!==void 0?V:this.textAlign,this.baseAlign=(Y=t==null?void 0:t.baseAlign)!==null&&Y!==void 0?Y:this.baseAlign,this.direction=(Z=t==null?void 0:t.direction)!==null&&Z!==void 0?Z:this.direction,this.quality=(U=t==null?void 0:t.quality)!==null&&U!==void 0?U:this.quality,t!=null&&t.shadow&&(this.shadow={},this.shadow.blur=(z=t.shadow.blur)!==null&&z!==void 0?z:this.shadow.blur,this.shadow.offset=(Q=t.shadow.offset)!==null&&Q!==void 0?Q:this.shadow.offset,this.shadow.color=(q=t.shadow.color)!==null&&q!==void 0?q:this.shadow.color)}clone(){return new Zn({...this.cloneGraphicOptions(),size:this.size,unit:this.unit,family:this.family,style:this.style,bold:this.bold,textAlign:this.textAlign,baseAlign:this.baseAlign,direction:this.direction,shadow:this.shadow?{blur:this.shadow.blur,offset:this.shadow.offset,color:this.shadow.color}:null})}get fontString(){return`${this.style} ${this.bold?"bold":""} ${this.size}${this.unit} ${this.family}`}get localBounds(){return this._textBounds}_drawImage(t,n,o){}_rotate(t){var n;const o=(n=this.origin)!==null&&n!==void 0?n:this._textBounds.center;t.translate(o.x,o.y),t.rotate(this.rotation),t.translate(-o.x,-o.y)}_flip(t){this.flipHorizontal&&(t.translate(this._textBounds.width/this.scale.x,0),t.scale(-1,1)),this.flipVertical&&(t.translate(0,-this._textBounds.height/2/this.scale.y),t.scale(1,-1))}measureTextWithoutCache(t,n){return this._textMeasurement.measureText(t,n)}measureText(t,n){return Mt.measureText(t,this,n)}_postDraw(t){t.restore()}render(t,n,o,u,c,g){const _=Mt.getTextInstance(n,this,o);this._textBounds=_.dimensions,this._preDraw(t,u,c),_.render(t,u,c,g),this._postDraw(t)}}class Yr extends Ue{constructor(t){var n,o;super(t),this._text="",this._textWidth=0,this._textHeight=0,this.font=(n=t.font)!==null&&n!==void 0?n:new Zn,this.color=(o=t.color)!==null&&o!==void 0?o:this.color,this.text=t.text,this.maxWidth=t.maxWidth}clone(){var t,n;return new Yr({text:this.text.slice(),color:(n=(t=this.color)===null||t===void 0?void 0:t.clone())!==null&&n!==void 0?n:K.Black,font:this.font.clone(),maxWidth:this.maxWidth})}get text(){return this._text}set text(t){this._text=t,this._calculateDimension()}get font(){return this._font}set font(t){this._font=t}get width(){return this._textWidth===0&&this._calculateDimension(),this._textWidth*this.scale.x}get height(){return this._textHeight===0&&this._calculateDimension(),this._textHeight*this.scale.y}_calculateDimension(){const{width:t,height:n}=this.font.measureText(this._text,this.maxWidth);this._textWidth=t,this._textHeight=n}get localBounds(){return this.font.measureText(this._text,this.maxWidth).scale(this.scale)}_rotate(t){}_flip(t){}_preDraw(t,n,o){(this.isStale()||this.font.isStale())&&(this.font.flipHorizontal=this.flipHorizontal,this.font.flipVertical=this.flipVertical,this.font.rotation=this.rotation,this.font.origin=this.origin,this.font.opacity=this.opacity),this.font.tint=this.tint,super._preDraw(t,n,o)}_drawImage(t,n,o){var u;let c=K.Black;this.font instanceof Zn&&(c=(u=this.color)!==null&&u!==void 0?u:this.font.color);const{width:g,height:_}=this.font.measureText(this._text,this.maxWidth);this._textWidth=g,this._textHeight=_,this.font.render(t,this._text,c,n,o,this.maxWidth),this.font.showDebug&&(t.debug.drawRect(n-g,o-_,g*2,_*2),this.maxWidth!=null&&t.debug.drawRect(n,o,this.maxWidth,this.height,{color:K.Yellow}))}}class zi extends ue{get body(){return this.get(yt)}get transform(){return this.get(tt)}get motion(){return this.get(Xt)}get graphics(){return this.get(me)}get collider(){return this.get(qt)}get pointer(){return this.get(Gn)}get actions(){return this.get(Xn)}get pos(){return this.transform.pos}set pos(t){this.transform.pos=t.clone()}get oldPos(){return this.body.oldPos}set oldPos(t){this.body.oldPos.setTo(t.x,t.y)}get vel(){return this.motion.vel}set vel(t){this.motion.vel=t.clone()}get oldVel(){return this.body.oldVel}set oldVel(t){this.body.oldVel.setTo(t.x,t.y)}get acc(){return this.motion.acc}set acc(t){this.motion.acc=t.clone()}set oldAcc(t){this.body.oldAcc.setTo(t.x,t.y)}get oldAcc(){return this.body.oldAcc}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angularVelocity(){return this.motion.angularVelocity}set angularVelocity(t){this.motion.angularVelocity=t}get scale(){return this.get(tt).scale}set scale(t){this.get(tt).scale=t}get anchor(){return this._anchor}set anchor(t){this._anchor=an(t,n=>this._handleAnchorChange(n)),this._handleAnchorChange(t)}_handleAnchorChange(t){this.graphics&&(this.graphics.anchor=t)}get isOffScreen(){return this.hasTag("ex.offscreen")}get draggable(){return this._draggable}set draggable(t){t&&(t&&!this._draggable?(this.events.on("pointerdragstart",this._pointerDragStartHandler),this.events.on("pointerdragend",this._pointerDragEndHandler),this.events.on("pointerdragmove",this._pointerDragMoveHandler),this.events.on("pointerdragleave",this._pointerDragLeaveHandler)):!t&&this._draggable&&(this.events.off("pointerdragstart",this._pointerDragStartHandler),this.events.off("pointerdragend",this._pointerDragEndHandler),this.events.off("pointerdragmove",this._pointerDragMoveHandler),this.events.off("pointerdragleave",this._pointerDragLeaveHandler)),this._draggable=t)}get color(){return this._color}set color(t){var n;this._color=t.clone();const u=(n=this.graphics.layers.default.graphics[0])===null||n===void 0?void 0:n.graphic;(u instanceof $n||u instanceof Yr)&&(u.color=this._color)}constructor(t){super(),this.events=new p,this._anchor=an(F.Half,W=>this._handleAnchorChange(W)),this.logger=lt.getInstance(),this._draggable=!1,this._dragging=!1,this._pointerDragStartHandler=()=>{this._dragging=!0},this._pointerDragEndHandler=()=>{this._dragging=!1},this._pointerDragMoveHandler=W=>{this._dragging&&(this.pos=W.worldPos)},this._pointerDragLeaveHandler=W=>{this._dragging&&(this.pos=W.worldPos)};const{name:n,x:o,y:u,pos:c,coordPlane:g,scale:_,width:y,height:C,radius:S,collider:I,vel:M,acc:L,rotation:V,angularVelocity:Y,z:Z,color:U,visible:z,anchor:Q,collisionType:q,collisionGroup:ut}={...t};this._setName(n),this.anchor=Q??zi.defaults.anchor.clone();const st=new tt;this.addComponent(st),this.pos=c??j(o??0,u??0),this.rotation=V??0,this.scale=_??j(1,1),this.z=Z??0,st.coordPlane=g??Ve.World,this.addComponent(new Gn),this.addComponent(new me({anchor:this.anchor})),this.addComponent(new Xt),this.vel=M??F.Zero,this.acc=L??F.Zero,this.angularVelocity=Y??0,this.addComponent(new Xn),this.addComponent(new yt),this.body.collisionType=q??gt.Passive,ut&&(this.body.group=ut),I?this.addComponent(new qt(I)):S?this.addComponent(new qt(ge.Circle(S))):y>0&&C>0?this.addComponent(new qt(ge.Box(y,C,this.anchor))):this.addComponent(new qt),this.graphics.visible=z??!0,U&&(this.color=U,y&&C?this.graphics.add(new xa({color:U,width:y,height:C})):S&&this.graphics.add(new wa({color:U,radius:S})))}clone(){const t=new zi({color:this.color.clone(),anchor:this.anchor.clone()});t.clearComponents(),t.processComponentRemoval();const n=this.getComponents();for(const o of n)t.addComponent(o.clone(),!0);return t}onInitialize(t){}_initialize(t){super._initialize(t);for(const n of this.children)n._initialize(t)}emit(t,n){this.events.emit(t,n)}on(t,n){return this.events.on(t,n)}once(t,n){return this.events.once(t,n)}off(t,n){this.events.off(t,n)}_prekill(t){this.events.emit("prekill",new x(this)),this.onPreKill(t)}onPreKill(t){}_postkill(t){this.events.emit("postkill",new b(this)),this.onPostKill(t)}onPostKill(t){}kill(){this.scene?(this._prekill(this.scene),this.events.emit("kill",new w(this)),super.kill(),this._postkill(this.scene)):this.logger.warn(`Cannot kill actor named "${this.name}", it was never added to the Scene`)}unkill(){this.active=!0}isKilled(){return!this.active}get z(){return this.get(tt).z}set z(t){this.get(tt).z=t}get center(){const t=this.getGlobalPos();return new F(t.x+this.width/2-this.anchor.x*this.width,t.y+this.height/2-this.anchor.y*this.height)}get localCenter(){return new F(this.pos.x+this.width/2-this.anchor.x*this.width,this.pos.y+this.height/2-this.anchor.y*this.height)}get width(){return this.collider.localBounds.width*this.getGlobalScale().x}get height(){return this.collider.localBounds.height*this.getGlobalScale().y}getGlobalRotation(){return this.get(tt).globalRotation}getGlobalPos(){return this.get(tt).globalPos}getGlobalScale(){return this.get(tt).globalScale}contains(t,n,o=!1){const u=j(t,n),c=this.get(qt);c.update();const g=c.get();if(!g)return!1;const _=g.contains(u);return o?_||this.children.some(y=>y.contains(t,n,!0)):_}within(t,n){const o=this.get(qt),u=t.get(qt),c=o.get(),g=u.get();return c&&g?c.getClosestLineBetween(g).getLength()<=n:!1}update(t,n){this._initialize(t),this._preupdate(t,n),this._postupdate(t,n)}onPreUpdate(t,n){}onPostUpdate(t,n){}_preupdate(t,n){this.events.emit("preupdate",new D(t,n,this)),this.onPreUpdate(t,n)}_postupdate(t,n){this.events.emit("postupdate",new B(t,n,this)),this.onPostUpdate(t,n)}}zi.defaults={anchor:F.Half};function kp(d){return d instanceof fh}class fh extends zi{constructor(t){var n,o;super({...t}),this.get(tt).coordPlane=Ve.Screen,this.anchor=(n=t==null?void 0:t.anchor)!==null&&n!==void 0?n:j(0,0),this.body.collisionType=(o=t==null?void 0:t.collisionType)!==null&&o!==void 0?o:gt.PreventCollision,this.pointer.useGraphicsBounds=!0,this.pointer.useColliderShape=!1,!(t!=null&&t.collider)&&(t==null?void 0:t.width)>0&&(t==null?void 0:t.height)>0&&this.collider.useBoxCollider(this.width,this.height,this.anchor)}_initialize(t){this._engine=t,super._initialize(t)}contains(t,n,o=!0){if(o)return super.contains(t,n);const u=this._engine.worldToScreenCoordinates(new F(t,n));return super.contains(u.x,u.y)}}class fn{get complete(){return this._complete}constructor(t,n,o,u,c,g){if(this._logger=lt.getInstance(),this.id=0,this._elapsedTime=0,this._totalTimeAlive=0,this._running=!1,this._numberOfTicks=0,this.interval=10,this.repeats=!1,this.maxNumberOfRepeats=-1,this.randomRange=[0,0],this._baseInterval=10,this._generateRandomInterval=()=>this._baseInterval+this.random.integer(this.randomRange[0],this.randomRange[1]),this._complete=!1,this.scene=null,typeof t!="function"){const _=t;t=_.fcn,n=_.interval,o=_.repeats,u=_.numberOfRepeats,c=_.randomRange,g=_.random}if(u&&u>=0&&(this.maxNumberOfRepeats=u,!o))throw new Error("repeats must be set to true if numberOfRepeats is set");if(this.id=fn._MAX_ID++,this._callbacks=[],this._baseInterval=this.interval=n,c){if(c[0]>c[1])throw new Error("min value must be lower than max value for range");this.random=g??new Vr,this.randomRange=c,this.interval=this._generateRandomInterval(),this.on(()=>{this.interval=this._generateRandomInterval()})}this.repeats=o||this.repeats,t&&this.on(t)}on(t){this._callbacks.push(t)}off(t){const n=this._callbacks.indexOf(t);this._callbacks.splice(n,1)}update(t){this._running&&(this._totalTimeAlive+=t,this._elapsedTime+=t,this.maxNumberOfRepeats>-1&&this._numberOfTicks>=this.maxNumberOfRepeats&&(this._complete=!0,this._running=!1,this._elapsedTime=0),!this.complete&&this._elapsedTime>=this.interval&&(this._callbacks.forEach(n=>{n.call(this)}),this._numberOfTicks++,this.repeats?this._elapsedTime=0:(this._complete=!0,this._running=!1,this._elapsedTime=0)))}reset(t,n){if(t&&t>=0&&(this._baseInterval=this.interval=t),this.maxNumberOfRepeats&&this.maxNumberOfRepeats>=0&&(this.maxNumberOfRepeats=n,!this.repeats))throw new Error("repeats must be set to true if numberOfRepeats is set");this._complete=!1,this._elapsedTime=0,this._numberOfTicks=0}get timesRepeated(){return this._numberOfTicks}getTimeRunning(){return this._totalTimeAlive}get timeToNextAction(){return this.complete?0:this.interval-this._elapsedTime}get timeElapsedTowardNextAction(){return this._elapsedTime}get isRunning(){return this._running}pause(){return this._running=!1,this}resume(){return this._running=!0,this}start(){return this.scene||this._logger.warn("Cannot start a timer not part of a scene, timer wont start until added"),this._running=!0,this.complete&&(this._complete=!1,this._elapsedTime=0,this._numberOfTicks=0),this}stop(){return this._running=!1,this._elapsedTime=0,this._numberOfTicks=0,this}cancel(){this.pause(),this.scene&&this.scene.cancelTimer(this)}}fn._MAX_ID=0;class Ta extends ii{constructor(t){super(),this.type="ex.parallax",this.parallaxFactor=j(1,1),this.parallaxFactor=t??this.parallaxFactor}}class Aa extends ii{constructor(t,n=!0){super(),this.draw=t,this.useTransform=n,this.type="ex.debuggraphics"}}const Ww={PreUpdate:"preupdate",PostUpdate:"postupdate",PreDraw:"predraw",PostDraw:"postdraw"};class Ip extends ue{flagCollidersDirty(){this._collidersDirty=!0}flagTilesDirty(){for(let t=0;t<this.tiles.length;t++)this.tiles[t]&&this.tiles[t].flagDirty()}get x(){var t;return(t=this._transform.pos.x)!==null&&t!==void 0?t:0}set x(t){var n;!((n=this._transform)===null||n===void 0)&&n.pos&&(this.get(tt).pos=j(t,this.y))}get y(){var t,n;return(n=(t=this._transform)===null||t===void 0?void 0:t.pos.y)!==null&&n!==void 0?n:0}set y(t){var n;!((n=this._transform)===null||n===void 0)&&n.pos&&(this._transform.pos=j(this.x,t))}get z(){var t;return(t=this._transform.z)!==null&&t!==void 0?t:0}set z(t){this._transform&&(this._transform.z=t)}get rotation(){var t,n;return(n=(t=this._transform)===null||t===void 0?void 0:t.rotation)!==null&&n!==void 0?n:0}set rotation(t){var n;!((n=this._transform)===null||n===void 0)&&n.rotation&&(this._transform.rotation=t)}get scale(){var t,n;return(n=(t=this._transform)===null||t===void 0?void 0:t.scale)!==null&&n!==void 0?n:F.One}set scale(t){var n;!((n=this._transform)===null||n===void 0)&&n.scale&&(this._transform.scale=t)}get pos(){return this._transform.pos}set pos(t){this._transform.pos=t}get vel(){return this._motion.vel}set vel(t){this._motion.vel=t}emit(t,n){this.events.emit(t,n)}on(t,n){return this.events.on(t,n)}once(t,n){return this.events.once(t,n)}off(t,n){this.events.off(t,n)}constructor(t){var n,o;super(null,t.name),this.events=new p,this._token=0,this.logger=lt.getInstance(),this.tiles=[],this._rows=[],this._cols=[],this.renderFromTopOfGraphic=!1,this._collidersDirty=!0,this._originalOffsets=new WeakMap,this.addComponent(new tt),this.addComponent(new Xt),this.addComponent(new yt({type:gt.Fixed})),this.addComponent(new me({onPostDraw:(c,g)=>this.draw(c,g)})),this.addComponent(new Aa(c=>this.debug(c))),this.addComponent(new qt),this._graphics=this.get(me),this._transform=this.get(tt),this._motion=this.get(Xt),this._collider=this.get(qt),this._composite=this._collider.useCompositeCollider([]),this._transform.pos=(n=t.pos)!==null&&n!==void 0?n:F.Zero,this._oldPos=this._transform.pos.clone(),this._oldScale=this._transform.scale.clone(),this.renderFromTopOfGraphic=(o=t.renderFromTopOfGraphic)!==null&&o!==void 0?o:this.renderFromTopOfGraphic,this.tileWidth=t.tileWidth,this.tileHeight=t.tileHeight,this.rows=t.rows,this.columns=t.columns,this.tiles=new Array(this.rows*this.columns),this._rows=new Array(this.rows),this._cols=new Array(this.columns);let u=[];for(let c=0;c<this.columns;c++){for(let g=0;g<this.rows;g++){const _=new Rp({x:c,y:g,map:this});_.map=this,this.tiles[c+g*this.columns]=_,u.push(_),this._rows[g]||(this._rows[g]=[]),this._rows[g].push(_)}this._cols[c]=u,u=[]}this._graphics.localBounds=new pt({left:0,top:0,right:this.columns*this.tileWidth*this.scale.x,bottom:this.rows*this.tileHeight*this.scale.y})}_initialize(t){super._initialize(t),this._engine=t}_getOrSetColliderOriginalOffset(t){if(this._originalOffsets.has(t))return this._originalOffsets.get(t);{const n=t.offset;return this._originalOffsets.set(t,n),n}}_updateColliders(){this._collider.$colliderRemoved.notifyAll(this._composite),this._composite.clearColliders();const t=[];this._composite=this._collider.useCompositeCollider([]);let n;for(let o=0;o<this.columns;o++){for(let u=0;u<this.rows;u++){u===0&&(n=null);const c=this.tiles[o+u*this.columns];if(c.solid)if(c.getColliders().length>0){for(const g of c.getColliders()){const _=this._getOrSetColliderOriginalOffset(g);g.offset=j(c.x*this.tileWidth*this.scale.x,c.y*this.tileHeight*this.scale.y).add(_),g.owner=this,this._composite.addCollider(g)}n&&t.push(n),n=null}else n?n=n.combine(c.bounds):n=c.bounds;else n&&t.push(n),n=null}if(n){const u=t[t.length-1];u&&u.top===n.top&&u.bottom===n.bottom?t[t.length-1]=u.combine(n):t.push(n)}}for(const o of t){const u=ge.Box(o.width,o.height,F.Zero,j(o.left-this.pos.x,o.top-this.pos.y));u.owner=this,this._composite.addCollider(u)}this._collider.update(),this._collider.$colliderAdded.notifyAll(this._composite)}getTileByIndex(t){return this.tiles[t]}getTile(t,n){return t<0||n<0||t>=this.columns||n>=this.rows?null:this.tiles[t+n*this.columns]}getTileByPoint(t){const n=Math.floor((t.x-this.pos.x)/(this.tileWidth*this.scale.x)),o=Math.floor((t.y-this.pos.y)/(this.tileHeight*this.scale.y)),u=this.getTile(n,o);return n>=0&&o>=0&&n<this.columns&&o<this.rows&&u?u:null}getRows(){return this._rows}getColumns(){return this._cols}update(t,n){this.onPreUpdate(t,n),this.emit("preupdate",new D(t,n,this)),(!this._oldPos.equals(this.pos)||!this._oldScale.equals(this.scale))&&(this.flagCollidersDirty(),this.flagTilesDirty()),this._collidersDirty&&(this._collidersDirty=!1,this._updateColliders()),this._token++,this.pos.clone(this._oldPos),this.scale.clone(this._oldScale),this._transform.pos=this.pos,this.onPostUpdate(t,n),this.emit("postupdate",new B(t,n,this))}draw(t,n){this.emit("predraw",new O(t,n,this));let o=this._engine.screen.getWorldBounds(),u=0;const c=this.columns;let g=0;const _=this.rows;let y,C,S;const I=this.get(Ta);if(I){let L=this.pos;const V=F.One.sub(I.parallaxFactor),Y=this._engine.currentScene.camera.pos.scale(V);L=L.sub(Y),o=o.translate(L)}let M;for(u;u<c;u++){for(g;g<_;g++)if(M=this.getTile(u,g),!!o.overlaps(M.bounds))for(y=this.getTile(u,g).getGraphics(),C=0,S=y.length;C<S;C++){const L=y[C];if(L){hh(L)&&(L==null||L.tick(n,this._token));const V=this.renderFromTopOfGraphic?0:L.height-this.tileHeight;L.draw(t,u*this.tileWidth,g*this.tileHeight-V)}}g=0}this.emit("postdraw",new A(t,n,this))}debug(t){const n=this.tileWidth*this.columns,o=this.tileHeight*this.rows,u=F.Zero;for(let g=0;g<this.rows+1;g++){const _=j(0,g*this.tileHeight);t.drawLine(u.add(_),u.add(j(n,_.y)),K.Red,2)}for(let g=0;g<this.columns+1;g++){const _=j(g*this.tileWidth,0);t.drawLine(u.add(_),u.add(j(_.x,o)),K.Red,2)}const c=this._composite.getColliders();for(const g of c){const _=K.Gray;_.a=.5;const y=g.localBounds,C=g.worldPos.sub(this.pos);t.drawRectangle(C,y.width,y.height,_)}}}class Rp extends ue{get pos(){return this._posDirty&&(this._recalculate(),this._posDirty=!1),this._pos}get width(){return this._width}get height(){return this._height}get solid(){return this._solid}set solid(t){var n;(n=this.map)===null||n===void 0||n.flagCollidersDirty(),this._solid=t}getGraphics(){return this._graphics}addGraphic(t){this._graphics.push(t)}removeGraphic(t){ss(t,this._graphics)}clearGraphics(){this._graphics.length=0}getColliders(){return this._colliders}addCollider(t){this._colliders.push(t),this.map.flagCollidersDirty()}removeCollider(t){const n=this._colliders.indexOf(t);n>-1&&this._colliders.splice(n,1),this.map.flagCollidersDirty()}clearColliders(){this._colliders.length=0,this.map.flagCollidersDirty()}constructor(t){var n,o;super(),this._posDirty=!1,this._solid=!1,this._graphics=[],this._colliders=[],this.data=new Map,this.x=t.x,this.y=t.y,this.map=t.map,this._width=t.map.tileWidth*this.map.scale.x,this._height=t.map.tileHeight*this.map.scale.y,this.solid=(n=t.solid)!==null&&n!==void 0?n:this.solid,this._graphics=(o=t.graphics)!==null&&o!==void 0?o:[],this._recalculate()}flagDirty(){return this._posDirty=!0}_recalculate(){this._width=this.map.tileWidth*this.map.scale.x,this._height=this.map.tileHeight*this.map.scale.y,this._pos=this.map.pos.add(j(this.x*this._width,this.y*this._height)),this._bounds=new pt(this._pos.x,this._pos.y,this._pos.x+this._width,this._pos.y+this._height),this._posDirty=!1}get bounds(){return this._posDirty&&this._recalculate(),this._bounds}get center(){return this._posDirty&&this._recalculate(),new F(this._pos.x+this._width/2,this._pos.y+this._height/2)}}class Dp{constructor(t){this.camera=t}lockToActor(t){this.camera.addStrategy(new Mp(t))}lockToActorAxis(t,n){this.camera.addStrategy(new Fp(t,n))}elasticToActor(t,n,o){this.camera.addStrategy(new Lp(t,n,o))}radiusAroundActor(t,n){this.camera.addStrategy(new Bp(t,n))}limitCameraBounds(t){this.camera.addStrategy(new Op(t))}}var ka;(function(d){d[d.X=0]="X",d[d.Y=1]="Y"})(ka||(ka={}));class Mp{constructor(t){this.target=t,this.action=(n,o,u,c)=>n.center}}class Fp{constructor(t,n){this.target=t,this.axis=n,this.action=(o,u,c,g)=>{const _=o.center,y=u.getFocus();return this.axis===ka.X?new F(_.x,y.y):new F(y.x,_.y)}}}class Lp{constructor(t,n,o){this.target=t,this.cameraElasticity=n,this.cameraFriction=o,this.action=(u,c,g,_)=>{const y=u.center;let C=c.getFocus(),S=c.vel.clone();const I=y.sub(C).scale(this.cameraElasticity);S=S.add(I);const M=S.scale(-1).scale(this.cameraFriction);return S=S.add(M),C=C.add(S),C}}}class Bp{constructor(t,n){this.target=t,this.radius=n,this.action=(o,u,c,g)=>{const _=o.center,y=u.getFocus(),C=_.sub(y),S=C.size;if(S>=this.radius){const I=S-this.radius;return y.add(C.normalize().scale(I))}return y}}}class Op{constructor(t){this.target=t,this.boundSizeChecked=!1,this.action=(n,o,u,c)=>{const g=o.getFocus();this.boundSizeChecked||((n.bottom-n.top<u.drawHeight||n.right-n.left<u.drawWidth)&&lt.getInstance().warn("Camera bounds should not be smaller than the engine viewport"),this.boundSizeChecked=!0);let _=g.x,y=g.y;return g.x<n.left+u.halfDrawWidth?_=n.left+u.halfDrawWidth:g.x>n.right-u.halfDrawWidth&&(_=n.right-u.halfDrawWidth),g.y<n.top+u.halfDrawHeight?y=n.top+u.halfDrawHeight:g.y>n.bottom-u.halfDrawHeight&&(y=n.bottom-u.halfDrawHeight),j(_,y)}}}const Gw={Initialize:"initialize",PreUpdate:"preupdate",PostUpdate:"postupdate"};class Np{constructor(){this.events=new p,this.transform=Kt.identity(),this.inverse=Kt.identity(),this._cameraStrategies=[],this.strategy=new Dp(this),this._z=1,this.dz=0,this.az=0,this.rotation=0,this._angularVelocity=0,this._posChanged=!1,this._pos=Zf(F.Zero,()=>this._posChanged=!0),this.vel=F.Zero,this.acc=F.Zero,this._cameraMoving=!1,this._currentLerpTime=0,this._lerpDuration=1e3,this._lerpStart=null,this._lerpEnd=null,this._isShaking=!1,this._shakeMagnitudeX=0,this._shakeMagnitudeY=0,this._shakeDuration=0,this._elapsedShakeTime=0,this._xShake=0,this._yShake=0,this._isZooming=!1,this._zoomStart=1,this._zoomEnd=1,this._currentZoomTime=0,this._zoomDuration=0,this._zoomEasing=Ut.EaseInOutCubic,this._easing=Ut.EaseInOutCubic,this._halfWidth=0,this._halfHeight=0,this._viewport=null,this._isInitialized=!1}get zoom(){return this._z}set zoom(t){this._z=t,this._engine&&(this._halfWidth=this._engine.halfDrawWidth,this._halfHeight=this._engine.halfDrawHeight)}get angularVelocity(){return this._angularVelocity}set angularVelocity(t){this._angularVelocity=t}get pos(){return this._pos}set pos(t){this._pos=Zf(t,()=>this._posChanged=!0),this._posChanged=!0}get x(){return this.pos.x}set x(t){!this._follow&&!this._cameraMoving&&(this.pos=j(t,this.pos.y))}get y(){return this.pos.y}set y(t){!this._follow&&!this._cameraMoving&&(this.pos=j(this.pos.x,t))}get dx(){return this.vel.x}set dx(t){this.vel=j(t,this.vel.y)}get dy(){return this.vel.y}set dy(t){this.vel=j(this.vel.x,t)}get ax(){return this.acc.x}set ax(t){this.acc=j(t,this.acc.y)}get ay(){return this.acc.y}set ay(t){this.acc=j(this.acc.x,t)}getFocus(){return this.pos}move(t,n,o=Ut.EaseInOutCubic){if(typeof o!="function")throw"Please specify an EasingFunction";return this._follow?Promise.reject(t):(this._lerpPromise&&this._lerpResolve&&this._lerpResolve(t),this._lerpPromise=new Promise(u=>{this._lerpResolve=u}),this._lerpStart=this.getFocus().clone(),this._lerpDuration=n,this._lerpEnd=t,this._currentLerpTime=0,this._cameraMoving=!0,this._easing=o,this._lerpPromise)}shake(t,n,o){this._isShaking=!0,this._shakeMagnitudeX=t,this._shakeMagnitudeY=n,this._shakeDuration=o}zoomOverTime(t,n=0,o=Ut.EaseInOutCubic){if(this._zoomPromise=new Promise(u=>{this._zoomResolve=u}),n)this._isZooming=!0,this._zoomEasing=o,this._currentZoomTime=0,this._zoomDuration=n,this._zoomStart=this.zoom,this._zoomEnd=t;else return this._isZooming=!1,this.zoom=t,Promise.resolve(!0);return this._zoomPromise}get viewport(){return this._viewport?this._viewport:new pt(0,0,0,0)}addStrategy(t){this._cameraStrategies.push(t)}removeStrategy(t){ss(t,this._cameraStrategies)}clearAllStrategies(){this._cameraStrategies.length=0}_preupdate(t,n){this.events.emit("preupdate",new D(t,n,this)),this.onPreUpdate(t,n)}onPreUpdate(t,n){}_postupdate(t,n){this.events.emit("postupdate",new B(t,n,this)),this.onPostUpdate(t,n)}onPostUpdate(t,n){}get isInitialized(){return this._isInitialized}_initialize(t){if(!this.isInitialized){this._engine=t,this._screen=t.screen;const n=this._screen.contentArea;let o=j(n.width/2,n.height/2);if(!this._engine.loadingComplete){const u=this._screen.peekResolution();u&&(o=j(u.width/2,u.height/2))}this._halfWidth=o.x,this._halfHeight=o.y,this._posChanged||(this.pos=o),this.updateTransform(),this.runStrategies(t,t.clock.elapsed()),this.updateViewport(),this.updateTransform(),this.onInitialize(t),this.events.emit("initialize",new At(t,this)),this._isInitialized=!0}}onInitialize(t){}emit(t,n){this.events.emit(t,n)}on(t,n){return this.events.on(t,n)}once(t,n){return this.events.once(t,n)}off(t,n){this.events.off(t,n)}runStrategies(t,n){for(const o of this._cameraStrategies)this.pos=o.action.call(o,o.target,this,t,n)}updateViewport(){this._viewport=new pt(this.x-this._halfWidth,this.y-this._halfHeight,this.x+this._halfWidth,this.y+this._halfHeight)}update(t,n){if(this._initialize(t),this._preupdate(t,n),this.pos=this.pos.add(this.vel.scale(n/1e3)),this.zoom+=this.dz*n/1e3,this.vel=this.vel.add(this.acc.scale(n/1e3)),this.dz+=this.az*n/1e3,this.rotation+=this.angularVelocity*n/1e3,this._isZooming)if(this._currentZoomTime<this._zoomDuration){const o=this._zoomEasing,u=o(this._currentZoomTime,this._zoomStart,this._zoomEnd,this._zoomDuration);this.zoom=u,this._currentZoomTime+=n}else this._isZooming=!1,this.zoom=this._zoomEnd,this._currentZoomTime=0,this._zoomResolve(!0);if(this._cameraMoving)if(this._currentLerpTime<this._lerpDuration){const u=Ut.CreateVectorEasingFunction(this._easing)(this._currentLerpTime,this._lerpStart,this._lerpEnd,this._lerpDuration);this.pos=u,this._currentLerpTime+=n}else{this.pos=this._lerpEnd;const o=this._lerpEnd.clone();this._lerpStart=null,this._lerpEnd=null,this._currentLerpTime=0,this._cameraMoving=!1,this._lerpResolve(o)}this._isDoneShaking()?(this._isShaking=!1,this._elapsedShakeTime=0,this._shakeMagnitudeX=0,this._shakeMagnitudeY=0,this._shakeDuration=0,this._xShake=0,this._yShake=0):(this._elapsedShakeTime+=n,this._xShake=(Math.random()*this._shakeMagnitudeX|0)+1,this._yShake=(Math.random()*this._shakeMagnitudeY|0)+1),this.runStrategies(t,n),this.updateViewport(),this.updateTransform(),this._postupdate(t,n)}draw(t){t.multiply(this.transform)}updateTransform(){const t=this._screen.resolution.width/this.zoom,n=this._screen.resolution.height/this.zoom,o=j(-this.x+t/2+this._xShake,-this.y+n/2+this._yShake);this.transform.reset(),this.transform.scale(this.zoom,this.zoom),this.transform.translate(t/2,n/2),this.transform.rotate(this.rotation),this.transform.translate(-t/2,-n/2),this.transform.translate(o.x,o.y),this.transform.inverse(this.inverse)}_isDoneShaking(){return!this._isShaking||this._elapsedShakeTime>=this._shakeDuration}}const Xw={ExitTrigger:"exittrigger",EnterTrigger:"entertrigger"},Yw={pos:F.Zero,width:10,height:10,visible:!1,action:()=>{},filter:()=>!0,repeat:-1};class zp extends zi{constructor(t){super({x:t.pos.x,y:t.pos.y,width:t.width,height:t.height}),this.events=new p,this.action=()=>{},this.filter=()=>!0,this.repeat=-1,t={...Yw,...t},this.filter=t.filter||this.filter,this.repeat=t.repeat||this.repeat,this.action=t.action||this.action,t.target&&(this.target=t.target),this.graphics.visible=t.visible,this.body.collisionType=gt.Passive,this.events.on("collisionstart",n=>{this.filter(n.other)&&(this.emit("enter",new wi(this,n.other)),this._dispatchAction(),this.repeat===0&&this.kill())}),this.events.on("collisionend",n=>{this.filter(n.other)&&this.emit("exit",new Ur(this,n.other))})}set target(t){this._target=t,this.filter=n=>n===t}get target(){return this._target}_initialize(t){super._initialize(t)}_dispatchAction(){this.repeat!==0&&(this.action.call(this),this.repeat--)}}var He;(function(d){d.Update="update",d.Draw="draw"})(He||(He={}));class Ei{constructor(){this.priority=0}notify(t){}}class Up{constructor(t){this.data=t,this.type="Entity Added"}}function Zr(d){return!!d&&d.type==="Entity Added"}class Vp{constructor(t){this.data=t,this.type="Entity Removed"}}function Zw(d){return!!d&&d.type==="Entity Removed"}class jp{constructor(t){this._world=t,this.entities=[],this._entityIndex={},this._entitiesToRemove=[]}updateEntities(t,n){for(const o of this.entities)o.update(t.engine,n),o.active||this.removeEntity(o)}findEntitiesForRemoval(){for(const t of this.entities)t.active||this.removeEntity(t)}notify(t){hp(t)&&this._world.queryManager.addEntity(t.data.entity),dp(t)&&this._world.queryManager.removeComponent(t.data.entity,t.data.component)}addEntity(t){t.active=!0,t.scene=this._world.context,t&&!this._entityIndex[t.id]&&(this._entityIndex[t.id]=t,this.entities.push(t),this._world.queryManager.addEntity(t),t.componentAdded$.register(this),t.componentRemoved$.register(this),t.children.forEach(n=>{n.scene=t.scene,this.addEntity(n)}),t.childrenAdded$.register({notify:n=>{this.addEntity(n)}}),t.childrenRemoved$.register({notify:n=>{this.removeEntity(n,!1)}}))}removeEntity(t,n=!0){var o;let u=0;t instanceof ue?u=t.id:u=t;const c=this._entityIndex[u];if(c&&c.active&&(c.active=!1),c&&n){this._entitiesToRemove.push(c);return}delete this._entityIndex[u],c&&(c.scene=null,ss(c,this.entities),this._world.queryManager.removeEntity(c),c.componentAdded$.unregister(this),c.componentRemoved$.unregister(this),c.children.forEach(g=>{g.scene=null,this.removeEntity(g,n)}),c.childrenAdded$.clear(),c.childrenRemoved$.clear(),!((o=this._world.context)===null||o===void 0)&&o.engine&&this._world.context.engine.stats.currFrame.actors.killed++)}processEntityRemovals(){for(const t of this._entitiesToRemove)t.active||this.removeEntity(t,!1);this._entitiesToRemove.length=0}processComponentRemovals(){for(const t of this.entities)t.processComponentRemoval()}getById(t){return this._entityIndex[t]}getByName(t){return this.entities.filter(n=>n.name===t)}clear(){for(const t of this.entities)this.removeEntity(t)}}const Ia=d=>[...d].sort((n,o)=>n.localeCompare(o)).join("+");class Hp extends Oi{get key(){return this._key?this._key:this._key=Ia(this.types)}constructor(t){super(),this._entities=[],t[0]instanceof Function?this.types=t.map(n=>new n().type):this.types=t}getEntities(t){return t&&this._entities.sort(t),this._entities}addEntity(t){!Wu(this._entities,t)&&this.matches(t)&&(this._entities.push(t),this.notifyAll(new Up(t)))}removeEntity(t){ss(t,this._entities)&&this.notifyAll(new Vp(t))}clear(){this._entities.length=0;for(const t of this.observers)this.unregister(t)}matches(t){let n=[];t instanceof ue?n=t.types:n=t;let o=!0;for(const u of this.types)if(o=o&&n.indexOf(u)>-1,!o)return!1;return o}contain(t){return this.types.indexOf(t)>-1}}class $p{constructor(t){this._world=t,this._queries={}}_addQuery(t){this._queries[Ia(t.types)]=t;for(const n of this._world.entityManager.entities)t.addEntity(n)}maybeRemoveQuery(t){t.observers.length===0&&(t.clear(),delete this._queries[Ia(t.types)])}addEntity(t){for(const n in this._queries)this._queries[n]&&this._queries[n].addEntity(t)}removeComponent(t,n){for(const o in this._queries)this._queries[o].contain(n.type)&&this._queries[o].removeEntity(t)}removeEntity(t){for(const n in this._queries)this._queries[n].removeEntity(t)}createQuery(t){const n=this.getQuery(t);if(n)return n;const o=new Hp(t);return this._addQuery(o),o}getQuery(t){const n=Ia(t);return this._queries[n]?this._queries[n]:null}}class Wp{constructor(t){this._world=t,this.systems=[],this.initialized=!1}get(t){return this.systems.find(n=>n instanceof t)}addSystem(t){if(!t.types||t.types.length===0)throw new Error("Attempted to add a System without any types");const n=this._world.queryManager.createQuery(t.types);this.systems.push(t),this.systems.sort((o,u)=>o.priority-u.priority),n.register(t),this.initialized&&t.initialize&&t.initialize(this._world.context)}removeSystem(t){ss(t,this.systems);const n=this._world.queryManager.getQuery(t.types);n&&(n.unregister(t),this._world.queryManager.maybeRemoveQuery(n))}initialize(){if(!this.initialized){this.initialized=!0;for(const t of this.systems)t.initialize&&t.initialize(this._world.context)}}updateSystems(t,n,o){const u=this.systems.filter(c=>c.systemType===t);for(const c of u)c.preupdate&&c.preupdate(n,o);for(const c of u){const g=this._world.queryManager.getQuery(c.types).getEntities(c.sort);if(n instanceof qr)for(const _ of g)_._initialize(n==null?void 0:n.engine);c.update(g,o)}for(const c of u)c.postupdate&&c.postupdate(n,o)}clear(){for(const t of this.systems)this.removeSystem(t)}}class Gp{constructor(t){this.context=t,this.queryManager=new $p(this),this.entityManager=new jp(this),this.systemManager=new Wp(this)}update(t,n){t===He.Update&&this.entityManager.updateEntities(this.context,n),this.systemManager.updateSystems(t,this.context,n),this.entityManager.findEntitiesForRemoval(),this.entityManager.processComponentRemovals(),this.entityManager.processEntityRemovals()}add(t){t instanceof ue&&this.entityManager.addEntity(t),t instanceof Ei&&this.systemManager.addSystem(t)}remove(t,n=!0){t instanceof ue&&this.entityManager.removeEntity(t,n),t instanceof Ei&&this.systemManager.removeSystem(t)}clearEntities(){this.entityManager.clear()}clearSystems(){this.systemManager.clear()}}class ke{static integrate(t,n,o,u){const c=u/1e3;n.vel.addEqual(o.scale(c,ke._ACC)),t.pos.add(n.vel.scale(c,ke._VEL),ke._POS).addEqual(o.scale(.5*c*c,ke._VEL_ACC)),n.angularVelocity+=n.torque*(1/n.inertia)*c;const g=t.rotation+n.angularVelocity*c;t.scale.add(n.scaleFactor.scale(c,this._SCALE_FACTOR),ke._SCALE),t.get().setTransform(ke._POS,g,ke._SCALE)}}ke._POS=new F(0,0),ke._SCALE=new F(1,1),ke._ACC=new F(0,0),ke._VEL=new F(0,0),ke._VEL_ACC=new F(0,0),ke._SCALE_FACTOR=new F(0,0);class Xp extends Ei{constructor(){super(...arguments),this.types=["ex.transform","ex.motion"],this.systemType=He.Update,this.priority=-1}update(t,n){let o,u;for(let c=0;c<t.length;c++){o=t[c].get(tt),u=t[c].get(Xt);const g=t[c].get(yt);if(g!=null&&g.sleeping)continue;const _=u.acc.clone();(g==null?void 0:g.collisionType)===gt.Active&&(g!=null&&g.useGravity)&&_.addEqual(nt.gravity),g==null||g.captureOldTransform(),ke.integrate(o,u,_,n)}}}class Yp{constructor(){this.directionMap=new Map,this.distanceMap=new Map}solve(t){this.preSolve(t),t=t.filter(n=>!n.isCanceled()),t.sort((n,o)=>{const u=this.distanceMap.get(n.id),c=this.distanceMap.get(o.id);return u-c});for(const n of t)this.solvePosition(n),this.solveVelocity(n);return this.postSolve(t),t}preSolve(t){for(const o of t){if(Math.abs(o.mtv.x)<1e-4&&Math.abs(o.mtv.y)<1e-4){o.cancel();continue}const u=Zt.fromDirection(o.mtv),c=o.mtv.negate(),g=o.colliderA.worldPos.squareDistance(o.colliderB.worldPos);this.distanceMap.set(o.id,g),o.colliderA.events.emit("precollision",new ft(o.colliderA,o.colliderB,u,c)),o.colliderB.events.emit("precollision",new ft(o.colliderB,o.colliderA,Zt.getOpposite(u),c.negate()))}}postSolve(t){var n,o;for(const u of t){if(u.isCanceled())continue;const c=u.colliderA,g=u.colliderB,_=(n=c.owner)===null||n===void 0?void 0:n.get(yt),y=(o=g.owner)===null||o===void 0?void 0:o.get(yt);if(_&&y&&(_.collisionType===gt.Passive||y.collisionType===gt.Passive))continue;const C=Zt.fromDirection(u.mtv),S=u.mtv.negate();u.colliderA.events.emit("postcollision",new vt(u.colliderA,u.colliderB,C,S)),u.colliderB.events.emit("postcollision",new vt(u.colliderB,u.colliderA,Zt.getOpposite(C),S.negate()))}}solvePosition(t){var n,o;if(!t.colliderA.bounds.overlaps(t.colliderB.bounds,1e-4)){t.cancel();return}if(Math.abs(t.mtv.x)<1e-4&&Math.abs(t.mtv.y)<1e-4){t.cancel();return}let c=t.mtv;const g=t.colliderA,_=t.colliderB,y=(n=g.owner)===null||n===void 0?void 0:n.get(yt),C=(o=_.owner)===null||o===void 0?void 0:o.get(yt);if(y&&C){if(y.collisionType===gt.Passive||C.collisionType===gt.Passive)return;y.collisionType===gt.Active&&C.collisionType===gt.Active&&(c=c.scale(.5)),y.collisionType===gt.Active&&(y.globalPos.x-=c.x,y.globalPos.y-=c.y,g.update(y.transform.get())),C.collisionType===gt.Active&&(C.globalPos.x+=c.x,C.globalPos.y+=c.y,_.update(C.transform.get()))}}solveVelocity(t){var n,o;if(t.isCanceled())return;const u=t.colliderA,c=t.colliderB,g=(n=u.owner)===null||n===void 0?void 0:n.get(yt),_=(o=c.owner)===null||o===void 0?void 0:o.get(yt);if(g&&_){if(g.collisionType===gt.Passive||_.collisionType===gt.Passive)return;const y=t.normal,C=y.negate();if(g.collisionType===gt.Active&&g.vel.normalize().dot(C)<0){const S=y.scale(y.dot(g.vel.negate()));g.vel=g.vel.add(S)}if(_.collisionType===gt.Active&&_.vel.normalize().dot(y)<0){const S=C.scale(C.dot(_.vel.negate()));_.vel=_.vel.add(S)}}}}class Zp{constructor(t,n,o){this.point=t,this.local=n,this.contact=o,this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.aToContact=new F(0,0),this.bToContact=new F(0,0),this.originalVelocityAndRestitution=0,this.update()}update(){var t,n;const o=(t=this.contact.colliderA.owner)===null||t===void 0?void 0:t.get(yt),u=(n=this.contact.colliderB.owner)===null||n===void 0?void 0:n.get(yt);if(o&&u){const c=this.contact.normal,g=this.contact.tangent;this.aToContact=this.point.sub(o.globalPos),this.bToContact=this.point.sub(u.globalPos);const _=this.aToContact.cross(c),y=this.bToContact.cross(c);this.normalMass=o.inverseMass+u.inverseMass+o.inverseInertia*_*_+u.inverseInertia*y*y;const C=this.aToContact.cross(g),S=this.bToContact.cross(g);this.tangentMass=o.inverseMass+u.inverseMass+o.inverseInertia*C*C+u.inverseInertia*S*S}return this}getRelativeVelocity(){var t,n;const o=(t=this.contact.colliderA.owner)===null||t===void 0?void 0:t.get(yt),u=(n=this.contact.colliderB.owner)===null||n===void 0?void 0:n.get(yt);if(o&&u){const c=o.vel.add(F.cross(o.angularVelocity,this.aToContact));return u.vel.add(F.cross(u.angularVelocity,this.bToContact)).sub(c)}return F.Zero}}class Kp{constructor(){this.lastFrameContacts=new Map,this.idToContactConstraint=new Map}getContactConstraints(t){var n;return(n=this.idToContactConstraint.get(t))!==null&&n!==void 0?n:[]}solve(t){return this.preSolve(t),t=t.filter(n=>!n.isCanceled()),this.solveVelocity(t),this.solvePosition(t),this.postSolve(t),t}preSolve(t){var n,o,u;for(const _ of t){if(Math.abs(_.mtv.x)<1e-4&&Math.abs(_.mtv.y)<1e-4){_.cancel();continue}const y=Zt.fromDirection(_.mtv);_.colliderA.events.emit("precollision",new ft(_.colliderA,_.colliderB,y,_.mtv)),_.colliderA.events.emit("beforecollisionresolve",new J(_.colliderA,_.colliderB,y,_.mtv,_)),_.colliderB.events.emit("precollision",new ft(_.colliderB,_.colliderA,Zt.getOpposite(y),_.mtv.negate())),_.colliderB.events.emit("beforecollisionresolve",new J(_.colliderB,_.colliderA,Zt.getOpposite(y),_.mtv.negate(),_)),_.matchAwake()}const g=Array.from(this.idToContactConstraint.keys());for(const _ of t){const y=g.indexOf(_.id);y>-1&&g.splice(y,1);const C=(n=this.idToContactConstraint.get(_.id))!==null&&n!==void 0?n:[];let S=0;const I=_.colliderA.owner.get(yt),M=_.colliderB.owner.get(yt);if(I&&M)for(const L of _.points){const V=_.normal,Y=_.tangent,Z=L.sub(I.globalPos),U=L.sub(M.globalPos),z=Z.cross(V),Q=U.cross(V),q=I.inverseMass+M.inverseMass+I.inverseInertia*z*z+M.inverseInertia*Q*Q,ut=Z.cross(Y),st=U.cross(Y),W=I.inverseMass+M.inverseMass+I.inverseInertia*ut*ut+M.inverseInertia*st*st;C[S]&&((u=(o=C[S])===null||o===void 0?void 0:o.point)===null||u===void 0?void 0:u.squareDistance(L))<4?(C[S].point=L,C[S].local=_.localPoints[S]):C[S]=new Zp(L,_.localPoints[S],_),C[S].aToContact=Z,C[S].bToContact=U,C[S].normalMass=1/q,C[S].tangentMass=1/W;const wt=I.bounciness>M.bounciness?I.bounciness:M.bounciness,kt=_.normal.dot(C[S].getRelativeVelocity());C[S].originalVelocityAndRestitution=0,kt<-.1&&(C[S].originalVelocityAndRestitution=-wt*kt),S++}this.idToContactConstraint.set(_.id,C)}for(const _ of g)this.idToContactConstraint.delete(_);if(nt.warmStart)this.warmStart(t);else for(const _ of t){const y=this.getContactConstraints(_.id);for(const C of y)C.normalImpulse=0,C.tangentImpulse=0}}postSolve(t){for(const n of t){const o=n.colliderA.owner.get(yt),u=n.colliderB.owner.get(yt);if(o&&u){if(o.collisionType===gt.Passive||u.collisionType===gt.Passive)continue;o.updateMotion(),u.updateMotion()}const c=Zt.fromDirection(n.mtv);n.colliderA.events.emit("postcollision",new vt(n.colliderA,n.colliderB,c,n.mtv)),n.colliderA.events.emit("aftercollisionresolve",new ot(n.colliderA,n.colliderB,c,n.mtv,n)),n.colliderB.events.emit("postcollision",new vt(n.colliderB,n.colliderA,Zt.getOpposite(c),n.mtv.negate())),n.colliderB.events.emit("aftercollisionresolve",new ot(n.colliderB,n.colliderA,Zt.getOpposite(c),n.mtv.negate(),n))}this.lastFrameContacts.clear();for(const n of t)this.lastFrameContacts.set(n.id,n)}warmStart(t){var n,o,u;for(const c of t){const g=(n=c.colliderA.owner)===null||n===void 0?void 0:n.get(yt),_=(o=c.colliderB.owner)===null||o===void 0?void 0:o.get(yt);if(g&&_){const y=(u=this.idToContactConstraint.get(c.id))!==null&&u!==void 0?u:[];for(const C of y)if(nt.warmStart){const S=c.normal.scale(C.normalImpulse),I=c.tangent.scale(C.tangentImpulse),M=S.add(I);g.applyImpulse(C.point,M.negate()),_.applyImpulse(C.point,M)}else C.normalImpulse=0,C.tangentImpulse=0}}}solvePosition(t){var n,o,u;for(let c=0;c<nt.positionIterations;c++)for(const g of t){const _=(n=g.colliderA.owner)===null||n===void 0?void 0:n.get(yt),y=(o=g.colliderB.owner)===null||o===void 0?void 0:o.get(yt);if(_&&y){if(_.collisionType===gt.Passive||y.collisionType===gt.Passive)continue;const C=(u=this.idToContactConstraint.get(g.id))!==null&&u!==void 0?u:[];for(const S of C){const I=g.normal,M=Pi.FindContactSeparation(g,S.local),L=nt.steeringFactor,V=-5,Y=nt.slop,Z=Ne(L*(M+Y),V,0),U=I.scale(-Z*S.normalMass);if(_.collisionType===gt.Active){const z=U.negate().scale(_.inverseMass);_.limitDegreeOfFreedom.includes(Ae.X)&&(z.x=0),_.limitDegreeOfFreedom.includes(Ae.Y)&&(z.y=0),_.globalPos=_.globalPos.add(z),_.limitDegreeOfFreedom.includes(Ae.Rotation)||(_.rotation-=S.aToContact.cross(U)*_.inverseInertia)}if(y.collisionType===gt.Active){const z=U.scale(y.inverseMass);y.limitDegreeOfFreedom.includes(Ae.X)&&(z.x=0),y.limitDegreeOfFreedom.includes(Ae.Y)&&(z.y=0),y.globalPos=y.globalPos.add(z),y.limitDegreeOfFreedom.includes(Ae.Rotation)||(y.rotation+=S.bToContact.cross(U)*y.inverseInertia)}}}}}solveVelocity(t){var n,o,u;for(let c=0;c<nt.velocityIterations;c++)for(const g of t){const _=(n=g.colliderA.owner)===null||n===void 0?void 0:n.get(yt),y=(o=g.colliderB.owner)===null||o===void 0?void 0:o.get(yt);if(_&&y){if(_.collisionType===gt.Passive||y.collisionType===gt.Passive)continue;const C=Math.min(_.friction,y.friction),S=(u=this.idToContactConstraint.get(g.id))!==null&&u!==void 0?u:[];for(const I of S){let V=-I.getRelativeVelocity().dot(g.tangent)*I.tangentMass;const Y=C*I.normalImpulse,Z=Ne(I.tangentImpulse+V,-Y,Y);V=Z-I.tangentImpulse,I.tangentImpulse=Z;const U=g.tangent.scale(V);_.applyImpulse(I.point,U.negate()),y.applyImpulse(I.point,U)}for(const I of S){const L=I.getRelativeVelocity().dot(g.normal);let V=-I.normalMass*(L-I.originalVelocityAndRestitution);const Y=Math.max(I.normalImpulse+V,0);V=Y-I.normalImpulse,I.normalImpulse=Y;const Z=g.normal.scale(V);_.applyImpulse(I.point,Z.negate()),y.applyImpulse(I.point,Z)}}}}}class ph extends Ei{constructor(t){super(),this.types=["ex.transform","ex.motion","ex.collider"],this.systemType=He.Update,this.priority=-1,this._realisticSolver=new Kp,this._arcadeSolver=new Yp,this._lastFrameContacts=new Map,this._currentFrameContacts=new Map,this._processor=t.collisionProcessor,this._trackCollider=n=>this._processor.track(n),this._untrackCollider=n=>this._processor.untrack(n)}notify(t){if(Zr(t)){const n=t.data.get(qt);n.$colliderAdded.subscribe(this._trackCollider),n.$colliderRemoved.subscribe(this._untrackCollider);const o=n.get();o&&this._processor.track(o)}else{const n=t.data.get(qt),o=n.get();n&&o&&this._processor.untrack(o)}}initialize(t){this._engine=t.engine}update(t,n){var o,u,c,g;if(!nt.enabled)return;let _=[];for(const I of t){const M=I.get(qt),L=M==null?void 0:M.get();if(M&&(!((o=M.owner)===null||o===void 0)&&o.active)&&L)if(M.update(),L instanceof we){const V=L.getColliders();_=_.concat(V)}else _.push(L)}this._processor.update(_);const y=this._processor.broadphase(_,n);this._currentFrameContacts.clear();let C=this._processor.narrowphase(y,(g=(c=(u=this._engine)===null||u===void 0?void 0:u.debug)===null||c===void 0?void 0:c.stats)===null||g===void 0?void 0:g.currFrame);C=this.getSolver().solve(C);for(const I of C){const M=I.id.indexOf("|");if(M>0){const L=I.id.substring(M+1);this._currentFrameContacts.set(L,I)}else this._currentFrameContacts.set(I.id,I)}this.runContactStartEnd(),this._lastFrameContacts.clear(),this._lastFrameContacts=new Map(this._currentFrameContacts)}getSolver(){return nt.collisionResolutionStrategy===cn.Realistic?this._realisticSolver:this._arcadeSolver}debug(t){this._processor.debug(t)}runContactStartEnd(){for(const[t,n]of this._currentFrameContacts)if(!this._lastFrameContacts.has(t)){const o=n.colliderA,u=n.colliderB;o.events.emit("collisionstart",new ht(o,u,n)),o.events.emit("contactstart",new St(o,u,n)),u.events.emit("collisionstart",new ht(u,o,n)),u.events.emit("contactstart",new St(u,o,n))}for(const[t,n]of this._lastFrameContacts)if(!this._currentFrameContacts.has(t)){const o=n.colliderA,u=n.colliderB;o.events.emit("collisionend",new at(o,u)),o.events.emit("contactend",new It(o,u)),u.events.emit("collisionend",new at(u,o)),u.events.emit("contactend",new It(u,o))}}}var Kr;(function(d){d.Forward="forward",d.Backward="backward"})(Kr||(Kr={}));var Ti;(function(d){d.End="end",d.Loop="loop",d.PingPong="pingpong",d.Freeze="freeze"})(Ti||(Ti={}));const Kw={Frame:"frame",Loop:"loop",Ended:"ended"};class Ui extends Ue{constructor(t){var n,o;super(t),this.events=new p,this.frames=[],this.strategy=Ti.Loop,this.frameDuration=100,this.timeScale=1,this._idempotencyToken=-1,this._firstTick=!0,this._currentFrame=0,this._timeLeftInFrame=0,this._pingPongDirection=1,this._done=!1,this._playing=!0,this._reversed=!1,this.frames=t.frames,this.strategy=(n=t.strategy)!==null&&n!==void 0?n:this.strategy,this.frameDuration=t.totalDuration?t.totalDuration/this.frames.length:(o=t.frameDuration)!==null&&o!==void 0?o:this.frameDuration,t.reverse&&this.reverse(),this.goToFrame(0)}clone(){return new Ui({frames:this.frames.map(t=>({...t})),frameDuration:this.frameDuration,reverse:this._reversed,strategy:this.strategy,...this.cloneGraphicOptions()})}get width(){const t=this.currentFrame;return t?Math.abs(t.graphic.width*this.scale.x):0}get height(){const t=this.currentFrame;return t?Math.abs(t.graphic.height*this.scale.y):0}static fromSpriteSheet(t,n,o,u=Ti.Loop){const c=t.sprites.length-1,g=n.filter(_=>_<0||_>c);return g.length&&Ui._LOGGER.warn(`Indices into SpriteSheet were provided that don't exist: ${g.join(",")} no frame will be shown`),new Ui({frames:t.sprites.filter((_,y)=>n.indexOf(y)>-1).map(_=>({graphic:_,duration:o})),strategy:u})}static fromSpriteSheetCoordinates(t){const{spriteSheet:n,frameCoordinates:o,durationPerFrameMs:u,strategy:c,reverse:g}=t,_=u??100,y=[];for(const C of o){const{x:S,y:I,duration:M}=C,L=n.getSprite(S,I);L?y.push({graphic:L,duration:M??_}):Ui._LOGGER.warn(`Skipping frame! SpriteSheet does not have coordinate (${S}, ${I}), please check your SpriteSheet to confirm that sprite exists`)}return new Ui({frames:y,strategy:c,reverse:g})}get currentFrame(){return this._currentFrame>=0&&this._currentFrame<this.frames.length?this.frames[this._currentFrame]:null}get currentFrameIndex(){return this._currentFrame}get isPlaying(){return this._playing}reverse(){this.frames=this.frames.slice().reverse(),this._reversed=!this._reversed}get direction(){return!!(this._reversed&&this._pingPongDirection===1)?Kr.Backward:Kr.Forward}play(){this._playing=!0}pause(){this._playing=!1,this._firstTick=!0}reset(){this._done=!1,this._firstTick=!0,this._currentFrame=0}get canFinish(){switch(this.strategy){case Ti.End:case Ti.Freeze:return!0;default:return!1}}get done(){return this._done}goToFrame(t){this._currentFrame=t,this._timeLeftInFrame=this.frameDuration;const n=this.frames[this._currentFrame];n&&!this._done&&(this._timeLeftInFrame=(n==null?void 0:n.duration)||this.frameDuration,this.events.emit("frame",{...n,frameIndex:this.currentFrameIndex}))}_nextFrame(){const t=this._currentFrame;if(this._done)return t;let n=-1;switch(this.strategy){case Ti.Loop:{n=(t+1)%this.frames.length,n===0&&this.events.emit("loop",this);break}case Ti.End:{n=t+1,n>=this.frames.length&&(this._done=!0,this._currentFrame=this.frames.length,this.events.emit("end",this));break}case Ti.Freeze:{n=Ne(t+1,0,this.frames.length-1),n>=this.frames.length-1&&(this._done=!0,this.events.emit("end",this));break}case Ti.PingPong:{t+this._pingPongDirection>=this.frames.length&&(this._pingPongDirection=-1,this.events.emit("loop",this)),t+this._pingPongDirection<0&&(this._pingPongDirection=1,this.events.emit("loop",this)),n=t+this._pingPongDirection%this.frames.length;break}}return n}tick(t,n=0){this._idempotencyToken!==n&&(this._idempotencyToken=n,this._playing&&(this._firstTick&&(this._firstTick=!1,this.events.emit("frame",{...this.currentFrame,frameIndex:this.currentFrameIndex})),this._timeLeftInFrame-=t*this.timeScale,this._timeLeftInFrame<=0&&this.goToFrame(this._nextFrame())))}_drawImage(t,n,o){this.currentFrame&&this.currentFrame.graphic.draw(t,n,o)}}Ui._LOGGER=lt.getInstance();class Qr extends Ue{constructor(t){super(t),this.members=[],this.members=t.members,this._updateDimensions()}clone(){return new Qr({members:[...this.members],...this.cloneGraphicOptions()})}_updateDimensions(){let t=new pt;for(const{graphic:n,pos:o}of this.members)t=n.localBounds.translate(o).combine(t);return this.width=t.width,this.height=t.height,t}get localBounds(){let t=new pt;for(const{graphic:n,pos:o}of this.members)t=n.localBounds.translate(o).combine(t);return t}_isAnimationOrGroup(t){return t instanceof Ui||t instanceof Qr}tick(t,n){for(const o of this.members){const u=o.graphic;this._isAnimationOrGroup(u)&&u.tick(t,n)}}reset(){for(const t of this.members){const n=t.graphic;this._isAnimationOrGroup(n)&&n.reset()}}_preDraw(t,n,o){this._updateDimensions(),super._preDraw(t,n,o)}_drawImage(t,n,o){for(const u of this.members)t.save(),t.translate(n,o),u.graphic.draw(t,u.pos.x,u.pos.y),this.showDebug&&t.debug.drawRect(0,0,this.width,this.height),t.restore()}}function Qp(d){return class extends d{assign(t){for(const n in t)typeof this[n]!="function"&&(this[n]=t[n])}constructor(...t){super(...t),t.filter(function(o){return o!==void 0}).length===1&&t[0]&&typeof t[0]=="object"&&!(t[0]instanceof Array)&&this.assign(t[0])}}}var Kn;(function(d){d[d.Circle=0]="Circle",d[d.Rectangle=1]="Rectangle"})(Kn||(Kn={}));class Qw extends ue{constructor(t,n,o,u,c,g,_,y,C,S){super(),this.position=new F(0,0),this.velocity=new F(0,0),this.acceleration=new F(0,0),this.particleRotationalVelocity=0,this.currentRotation=0,this.focus=null,this.focusAccel=0,this.opacity=1,this.beginColor=K.White,this.endColor=K.White,this.life=300,this.fadeFlag=!1,this._rRate=1,this._gRate=1,this._bRate=1,this._aRate=0,this._currentColor=K.White,this.emitter=null,this.particleSize=5,this.particleSprite=null,this.sizeRate=0,this.elapsedMultiplier=0,this.visible=!0,this.isOffscreen=!1;let I=t;if(I&&!(t instanceof qp)){const M=t;I=M.emitter,n=M.life,o=M.opacity,c=M.endColor,u=M.beginColor,g=M.position,_=M.velocity,y=M.acceleration,C=M.startSize,S=M.endSize}if(this.emitter=I,this.life=n||this.life,this.opacity=o||this.opacity,this.endColor=c||this.endColor.clone(),this.beginColor=u||this.beginColor.clone(),this._currentColor=this.beginColor.clone(),this.emitter.particleTransform===Qn.Global){const M=this.emitter.transform.globalPos;this.position=(g||this.position).add(M),this.velocity=(_||this.velocity).rotate(this.emitter.transform.globalRotation)}else this.velocity=_||this.velocity,this.position=g||this.position;this.acceleration=y||this.acceleration,this._rRate=(this.endColor.r-this.beginColor.r)/this.life,this._gRate=(this.endColor.g-this.beginColor.g)/this.life,this._bRate=(this.endColor.b-this.beginColor.b)/this.life,this._aRate=this.opacity/this.life,this.startSize=C||0,this.endSize=S||0,this.endSize>0&&this.startSize>0&&(this.sizeRate=(this.endSize-this.startSize)/this.life,this.particleSize=this.startSize),this.addComponent(this.transform=new tt),this.addComponent(this.graphics=new me),this.transform.pos=this.position,this.transform.rotation=this.currentRotation,this.transform.scale=j(1,1),this.particleSprite?(this.graphics.opacity=this.opacity,this.graphics.use(this.particleSprite)):(this.graphics.localBounds=pt.fromDimension(this.particleSize,this.particleSize,F.Half),this.graphics.onPostDraw=M=>{M.save(),this.graphics.opacity=this.opacity;const L=this._currentColor.clone();L.a=1,M.debug.drawPoint(j(0,0),{color:L,size:this.particleSize}),M.restore()})}kill(){this.emitter.removeParticle(this)}update(t,n){if(this.life=this.life-n,this.elapsedMultiplier=this.elapsedMultiplier+n,this.life<0&&this.kill(),this.fadeFlag&&(this.opacity=Ne(this._aRate*this.life,1e-4,1)),this.startSize>0&&this.endSize>0&&(this.particleSize=Ne(this.sizeRate*n+this.particleSize,Math.min(this.startSize,this.endSize),Math.max(this.startSize,this.endSize))),this._currentColor.r=Ne(this._currentColor.r+this._rRate*n,0,255),this._currentColor.g=Ne(this._currentColor.g+this._gRate*n,0,255),this._currentColor.b=Ne(this._currentColor.b+this._bRate*n,0,255),this._currentColor.a=Ne(this.opacity,1e-4,1),this.focus){const o=this.focus.sub(this.position).normalize().scale(this.focusAccel).scale(n/1e3);this.velocity=this.velocity.add(o)}else this.velocity=this.velocity.add(this.acceleration.scale(n/1e3));this.position=this.position.add(this.velocity.scale(n/1e3)),this.particleRotationalVelocity&&(this.currentRotation=(this.currentRotation+this.particleRotationalVelocity*n/1e3)%(2*Math.PI)),this.transform.pos=this.position,this.transform.rotation=this.currentRotation,this.transform.scale=j(1,1),this.graphics.opacity=this.opacity}}class Ra extends Qp(Qw){constructor(t,n,o,u,c,g,_,y,C,S){super(t,n,o,u,c,g,_,y,C,S)}}var Qn;(function(d){d.Global="global",d.Local="local"})(Qn||(Qn={}));class qp extends zi{get opacity(){return super.graphics.opacity}set opacity(t){super.graphics.opacity=t}get particleSprite(){return this._sprite}set particleSprite(t){t&&(this._sprite=t)}constructor(t){var n,o;super({width:(n=t.width)!==null&&n!==void 0?n:0,height:(o=t.height)!==null&&o!==void 0?o:0}),this._particlesToEmit=0,this.numParticles=0,this.isEmitting=!0,this.particles=[],this.deadParticles=[],this.minVel=0,this.maxVel=0,this.acceleration=new F(0,0),this.minAngle=0,this.maxAngle=0,this.emitRate=1,this.particleLife=2e3,this.fadeFlag=!1,this.focus=null,this.focusAccel=null,this.startSize=null,this.endSize=null,this.minSize=5,this.maxSize=5,this.beginColor=K.White,this.endColor=K.White,this._sprite=null,this.emitterType=Kn.Rectangle,this.radius=0,this.particleRotationalVelocity=0,this.randomRotation=!1,this.particleTransform=Qn.Global;const{x:u,y:c,pos:g,isEmitting:_,minVel:y,maxVel:C,acceleration:S,minAngle:I,maxAngle:M,emitRate:L,particleLife:V,opacity:Y,fadeFlag:Z,focus:U,focusAccel:z,startSize:Q,endSize:q,minSize:ut,maxSize:st,beginColor:W,endColor:wt,particleSprite:kt,emitterType:Dt,radius:Pt,particleRotationalVelocity:te,particleTransform:$e,randomRotation:We,random:Ge}={...t};this.pos=g??j(u??0,c??0),this.isEmitting=_??this.isEmitting,this.minVel=y??this.minVel,this.maxVel=C??this.maxVel,this.acceleration=S??this.acceleration,this.minAngle=I??this.minAngle,this.maxAngle=M??this.maxAngle,this.emitRate=L??this.emitRate,this.particleLife=V??this.particleLife,this.opacity=Y??this.opacity,this.fadeFlag=Z??this.fadeFlag,this.focus=U??this.focus,this.focusAccel=z??this.focusAccel,this.startSize=Q??this.startSize,this.endSize=q??this.endSize,this.minSize=ut??this.minSize,this.maxSize=st??this.maxSize,this.beginColor=W??this.beginColor,this.endColor=wt??this.endColor,this.particleSprite=kt??this.particleSprite,this.emitterType=Dt??this.emitterType,this.radius=Pt??this.radius,this.particleRotationalVelocity=te??this.particleRotationalVelocity,this.randomRotation=We??this.randomRotation,this.particleTransform=$e??this.particleTransform,this.body.collisionType=gt.PreventCollision,this.random=Ge??new Vr}removeParticle(t){this.deadParticles.push(t)}emitParticles(t){var n;for(let o=0;o<t;o++){const u=this._createParticle();this.particles.push(u),!((n=this===null||this===void 0?void 0:this.scene)===null||n===void 0)&&n.world&&(this.particleTransform===Qn.Global?this.scene.world.add(u):this.addChild(u))}}clearParticles(){this.particles.length=0}_createParticle(){let t=0,n=0;const o=is(this.minAngle,this.maxAngle,this.random),u=is(this.minVel,this.maxVel,this.random),c=this.startSize||is(this.minSize,this.maxSize,this.random),g=u*Math.cos(o),_=u*Math.sin(o);if(this.emitterType===Kn.Rectangle)t=is(0,this.width,this.random),n=is(0,this.height,this.random);else if(this.emitterType===Kn.Circle){const C=is(0,this.radius,this.random);t=C*Math.cos(o),n=C*Math.sin(o)}const y=new Ra(this,this.particleLife,this.opacity,this.beginColor,this.endColor,new F(t,n),new F(g,_),this.acceleration,this.startSize,this.endSize);return y.fadeFlag=this.fadeFlag,y.particleSize=c,this.particleSprite&&(y.particleSprite=this.particleSprite,y.graphics.opacity=this.opacity,y.graphics.use(this._sprite)),y.particleRotationalVelocity=this.particleRotationalVelocity,this.randomRotation&&(y.currentRotation=is(0,Math.PI*2,this.random)),this.focus&&(y.focus=this.focus.add(new F(this.pos.x,this.pos.y)),y.focusAccel=this.focusAccel),y}update(t,n){var o;super.update(t,n),this.isEmitting&&(this._particlesToEmit+=this.emitRate*(n/1e3),this._particlesToEmit>1&&(this.emitParticles(Math.floor(this._particlesToEmit)),this._particlesToEmit=this._particlesToEmit-Math.floor(this._particlesToEmit)));for(let u=0;u<this.deadParticles.length;u++)ss(this.deadParticles[u],this.particles),!((o=this===null||this===void 0?void 0:this.scene)===null||o===void 0)&&o.world&&this.scene.world.remove(this.deadParticles[u],!1);this.deadParticles.length=0}}class Jp extends Ei{constructor(){super(...arguments),this.types=["ex.transform","ex.graphics"],this.systemType=He.Draw,this.priority=0,this._token=0,this._sortedTransforms=[],this._zHasChanged=!1,this._zIndexUpdate=()=>{this._zHasChanged=!0}}get sortedTransforms(){return this._sortedTransforms}initialize(t){this._camera=t.camera,this._engine=t.engine}preupdate(){this._graphicsContext=this._engine.graphicsContext,this._zHasChanged&&(this._sortedTransforms.sort((t,n)=>t.z-n.z),this._zHasChanged=!1)}notify(t){if(Zr(t)){const n=t.data.get(tt);this._sortedTransforms.push(n),n.zIndexChanged$.subscribe(this._zIndexUpdate),this._zHasChanged=!0}else{const n=t.data.get(tt);n.zIndexChanged$.unsubscribe(this._zIndexUpdate);const o=this._sortedTransforms.indexOf(n);o>-1&&this._sortedTransforms.splice(o,1)}}update(t,n){this._token++;let o;Mt.checkAndClearCache(),this._graphicsContext.save(),this._camera&&this._camera.draw(this._graphicsContext);for(const u of this._sortedTransforms){const c=u.owner;if(c.hasTag("ex.offscreen")||(o=c.get(me),!o.visible))continue;u.coordPlane===Ve.Screen&&this._graphicsContext.restore(),this._graphicsContext.save(),u.coordPlane===Ve.Screen&&this._graphicsContext.translate(this._engine.screen.contentArea.left,this._engine.screen.contentArea.top),o.update(n,this._token);const g=c.get(Ta);if(g){const y=F.One.sub(g.parallaxFactor),C=this._camera.pos.scale(y);this._graphicsContext.translate(C.x,C.y)}this._applyTransform(c),o.material&&(this._graphicsContext.material=o.material),o.onPreDraw&&o.onPreDraw(this._graphicsContext,n);const _=c instanceof Ra?c.opacity:1;this._graphicsContext.opacity*=o.opacity*_,this._drawGraphicsComponent(o),o.onPostDraw&&o.onPostDraw(this._graphicsContext,n),this._graphicsContext.restore(),u.coordPlane===Ve.Screen&&(this._graphicsContext.save(),this._camera&&this._camera.draw(this._graphicsContext))}this._graphicsContext.restore()}_drawGraphicsComponent(t){var n,o;if(t.visible){const u=t.flipHorizontal,c=t.flipVertical;for(const g of t.layers.get())for(const{graphic:_,options:y}of g.graphics){let C=t.anchor,S=t.offset;y!=null&&y.anchor&&(C=y.anchor),y!=null&&y.offset&&(S=y.offset);const I=-_.width*C.x+S.x,M=-_.height*C.y+S.y,L=_.flipHorizontal,V=_.flipVertical;if((u||c)&&(_.flipHorizontal=u?!L:L,_.flipVertical=c?!V:V),_==null||_.draw(this._graphicsContext,I+g.offset.x,M+g.offset.y),(u||c)&&(_.flipHorizontal=L,_.flipVertical=V),!((n=this._engine)===null||n===void 0)&&n.isDebug&&this._engine.debug.graphics.showBounds){const Y=j(I+g.offset.x,M+g.offset.y);if(_ instanceof Qr)for(const Z of _.members)(o=Z.graphic)===null||o===void 0||o.localBounds.translate(Y.add(Z.pos)).draw(this._graphicsContext,this._engine.debug.graphics.boundsColor);else _==null||_.localBounds.translate(Y).draw(this._graphicsContext,this._engine.debug.graphics.boundsColor)}}}}_applyTransform(t){const n=t.getAncestors();for(const o of n){const u=o==null?void 0:o.get(tt),c=o==null?void 0:o.get(yt);let g=u.pos,_=u.scale,y=u.rotation;if(c&&this._engine.fixedUpdateFps&&c.__oldTransformCaptured&&c.enableFixedUpdateInterpolate){const C=this._engine.currentFrameLagMs/(1e3/this._engine.fixedUpdateFps);g=u.pos.scale(C).add(c.oldPos.scale(1-C)),_=u.scale.scale(C).add(c.oldScale.scale(1-C));const S=(1-C)*Math.cos(c.oldRotation)+C*Math.cos(u.rotation),I=(1-C)*Math.sin(c.oldRotation)+C*Math.sin(u.rotation);y=Math.atan2(I,S)}u&&(this._graphicsContext.z=u.z,this._graphicsContext.translate(g.x,g.y),this._graphicsContext.scale(_.x,_.y),this._graphicsContext.rotate(y))}}}class tg extends Ei{constructor(){super(...arguments),this.types=["ex.transform"],this.systemType=He.Draw,this.priority=999}initialize(t){this._graphicsContext=t.engine.graphicsContext,this._camera=t.camera,this._engine=t.engine,this._collisionSystem=t.world.systemManager.get(ph)}update(t,n){var o;if(!this._engine.isDebug)return;const u=this._engine.debug.filter;let c,g;const _=this._engine.debug.entity;let y;const C=this._engine.debug.transform;let S;const I=this._engine.debug.motion;let M;const L=this._engine.debug.collider,V=this._engine.debug.physics;let Y;const Z=this._engine.debug.graphics;let U,z;const Q=this._engine.debug.body,q=this._engine.debug.camera;for(const ut of t){if(ut.hasTag("offscreen")||ut instanceof Ra||u.useFilter&&(!(u.ids.length===0||u.ids.includes(ut.id))||!(u.nameQuery===""||ut.name.includes(u.nameQuery))))continue;let st=F.Zero;const W=j(0,16);if(c=ut.id,g=ut.name,y=ut.get(tt),this._pushCameraTransform(y),this._graphicsContext.save(),this._applyTransform(ut),y&&((C.showAll||C.showPosition)&&this._graphicsContext.debug.drawPoint(F.Zero,{size:4,color:C.positionColor}),(C.showAll||C.showPositionLabel)&&(this._graphicsContext.debug.drawText(`pos${y.pos.toString(2)}`,st),st=st.add(W)),(C.showAll||C.showZIndex)&&(this._graphicsContext.debug.drawText(`z(${y.z.toFixed(1)})`,st),st=st.add(W)),(_.showAll||_.showId)&&(this._graphicsContext.debug.drawText(`id(${c}) ${ut.parent?"child of id("+((o=ut.parent)===null||o===void 0?void 0:o.id)+")":""}`,st),st=st.add(W)),(_.showAll||_.showName)&&(this._graphicsContext.debug.drawText(`name(${g})`,st),st=st.add(W)),(C.showAll||C.showRotation)&&(this._graphicsContext.drawLine(F.Zero,F.fromAngle(y.rotation).scale(50).add(F.Zero),C.rotationColor,2),this._graphicsContext.debug.drawText(`rot deg(${Gf(y.rotation).toFixed(2)})`,st),st=st.add(W)),(C.showAll||C.showScale)&&this._graphicsContext.drawLine(F.Zero,y.scale.add(F.Zero),C.scaleColor,2)),Y=ut.get(me),Y&&(Z.showAll||Z.showBounds)&&Y.localBounds.draw(this._graphicsContext,Z.boundsColor),U=ut.get(Aa),U&&(U.useTransform||this._graphicsContext.restore(),U.draw(this._graphicsContext),U.useTransform||(this._graphicsContext.save(),this._applyTransform(ut))),z=ut.get(yt),z&&((Q.showAll||Q.showCollisionGroup)&&(this._graphicsContext.debug.drawText(`collision group(${z.group.name})`,st),st=st.add(W)),(Q.showAll||Q.showCollisionType)&&(this._graphicsContext.debug.drawText(`collision type(${z.collisionType})`,st),st=st.add(W)),(Q.showAll||Q.showMass)&&(this._graphicsContext.debug.drawText(`mass(${z.mass})`,st),st=st.add(W)),(Q.showAll||Q.showMotion)&&(this._graphicsContext.debug.drawText(`motion(${z.sleepMotion})`,st),st=st.add(W)),(Q.showAll||Q.showSleeping)&&(this._graphicsContext.debug.drawText(`sleeping(${z.canSleep?z.sleeping:"cant sleep"})`,st),st=st.add(W))),this._graphicsContext.restore(),S=ut.get(Xt),S&&((I.showAll||I.showVelocity)&&(this._graphicsContext.debug.drawText(`vel${S.vel.toString(2)}`,st.add(y.globalPos)),this._graphicsContext.drawLine(y.globalPos,y.globalPos.add(S.vel),I.velocityColor,2),st=st.add(W)),(I.showAll||I.showAcceleration)&&this._graphicsContext.drawLine(y.globalPos,y.globalPos.add(S.acc),I.accelerationColor,2)),M=ut.get(qt),M){const wt=M.get();if((L.showAll||L.showGeometry)&&wt&&wt.debug(this._graphicsContext,L.geometryColor),L.showAll||L.showBounds){if(wt instanceof we){const kt=wt.getColliders();for(const Dt of kt){const Pt=Dt.bounds,te=j(Pt.left,Pt.top);this._graphicsContext.debug.drawRect(te.x,te.y,Pt.width,Pt.height,{color:L.boundsColor}),(L.showAll||L.showOwner)&&this._graphicsContext.debug.drawText(`owner id(${Dt.owner.id})`,te)}M.bounds.draw(this._graphicsContext,L.boundsColor)}else if(wt){const kt=M.bounds,Dt=j(kt.left,kt.top);this._graphicsContext.debug.drawRect(Dt.x,Dt.y,kt.width,kt.height,{color:L.boundsColor}),(L.showAll||L.showOwner)&&this._graphicsContext.debug.drawText(`owner id(${M.owner.id})`,Dt)}}}this._popCameraTransform(y)}if(this._graphicsContext.save(),this._camera.draw(this._graphicsContext),(V.showAll||V.showBroadphaseSpacePartitionDebug)&&this._collisionSystem.debug(this._graphicsContext),V.showAll||V.showCollisionContacts||V.showCollisionNormals)for(const[ut,st]of this._engine.debug.stats.currFrame.physics.contacts){if(V.showAll||V.showCollisionContacts)for(const W of st.points)this._graphicsContext.debug.drawPoint(W,{size:5,color:V.collisionContactColor});if(V.showAll||V.showCollisionNormals)for(const W of st.points)this._graphicsContext.debug.drawLine(W,st.normal.scale(30).add(W),{color:V.collisionNormalColor})}this._graphicsContext.restore(),q&&(this._graphicsContext.save(),this._camera.draw(this._graphicsContext),(q.showAll||q.showFocus)&&this._graphicsContext.drawCircle(this._camera.pos,4,q.focusColor),(q.showAll||q.showZoom)&&this._graphicsContext.debug.drawText(`zoom(${this._camera.zoom})`,this._camera.pos),this._graphicsContext.restore()),this._graphicsContext.flush()}_applyTransform(t){const n=t.getAncestors();for(const o of n){const u=o==null?void 0:o.get(tt);u&&(this._graphicsContext.translate(u.pos.x,u.pos.y),this._graphicsContext.scale(u.scale.x,u.scale.y),this._graphicsContext.rotate(u.rotation))}}_pushCameraTransform(t){t.coordPlane===Ve.World&&(this._graphicsContext.save(),this._camera&&this._camera.draw(this._graphicsContext))}_popCameraTransform(t){t.coordPlane===Ve.World&&this._graphicsContext.restore()}}class Da extends Ei{constructor(){super(...arguments),this.types=["ex.transform","ex.pointer"],this.systemType=He.Update,this.priority=-1,this.overrideUseColliderShape=!1,this.overrideUseGraphicsBounds=!1,this.lastFrameEntityToPointers=new Map,this.currentFrameEntityToPointers=new Map,this._sortedTransforms=[],this._sortedEntities=[],this._zHasChanged=!1,this._zIndexUpdate=()=>{this._zHasChanged=!0}}initialize(t){this._engine=t.engine}preupdate(){this._receiver=this._engine.input.pointers,this._zHasChanged&&(this._sortedTransforms.sort((t,n)=>n.z-t.z),this._sortedEntities=this._sortedTransforms.map(t=>t.owner),this._zHasChanged=!1)}notify(t){if(Zr(t)){const n=t.data.get(tt);this._sortedTransforms.push(n),this._sortedEntities.push(n.owner),n.zIndexChanged$.subscribe(this._zIndexUpdate),this._zHasChanged=!0}else{const n=t.data.get(tt);n.zIndexChanged$.unsubscribe(this._zIndexUpdate);const o=this._sortedTransforms.indexOf(n);o>-1&&(this._sortedTransforms.splice(o,1),this._sortedEntities.splice(o,1))}}entityCurrentlyUnderPointer(t,n){return this.currentFrameEntityToPointers.has(t.id)&&this.currentFrameEntityToPointers.get(t.id).includes(n)}entityWasUnderPointer(t,n){return this.lastFrameEntityToPointers.has(t.id)&&this.lastFrameEntityToPointers.get(t.id).includes(n)}entered(t,n){return this.entityCurrentlyUnderPointer(t,n)&&!this.lastFrameEntityToPointers.has(t.id)}left(t,n){return!this.currentFrameEntityToPointers.has(t.id)&&this.entityWasUnderPointer(t,n)}addPointerToEntity(t,n){if(!this.currentFrameEntityToPointers.has(t.id)){this.currentFrameEntityToPointers.set(t.id,[n]);return}const o=this.currentFrameEntityToPointers.get(t.id);this.currentFrameEntityToPointers.set(t.id,o.concat(n))}update(t){this._processPointerToEntity(this._sortedEntities),this._dispatchEvents(this._sortedEntities),this._receiver.update(),this.lastFrameEntityToPointers.clear(),this.lastFrameEntityToPointers=new Map(this.currentFrameEntityToPointers),this.currentFrameEntityToPointers.clear(),this._receiver.clear()}_processPointerToEntity(t){var n;let o,u,c,g;for(const _ of t){if(o=_.get(tt),g=(n=_.get(Gn))!==null&&n!==void 0?n:new Gn,u=_.get(qt),u&&(g.useColliderShape||this.overrideUseColliderShape)){u.update();const y=u.get();if(y)for(const[C,S]of this._receiver.currentFramePointerCoords.entries())y.contains(o.coordPlane===Ve.World?S.worldPos:S.screenPos)&&this.addPointerToEntity(_,C)}if(c=_.get(me),c&&(g.useGraphicsBounds||this.overrideUseGraphicsBounds)){const y=c.localBounds.transform(o.get().matrix);for(const[C,S]of this._receiver.currentFramePointerCoords.entries())y.contains(o.coordPlane===Ve.World?S.worldPos:S.screenPos)&&this.addPointerToEntity(_,C)}}}_processDownAndEmit(t){const n=new Map;for(const o of this._receiver.currentFrameDown)o.active&&t.active&&this.entityCurrentlyUnderPointer(t,o.pointerId)&&(t.events.emit("pointerdown",o),this._receiver.isDragStart(o.pointerId)&&t.events.emit("pointerdragstart",o)),n.set(o.pointerId,o);return n}_processUpAndEmit(t){const n=new Map;for(const o of this._receiver.currentFrameUp)o.active&&t.active&&this.entityCurrentlyUnderPointer(t,o.pointerId)&&(t.events.emit("pointerup",o),this._receiver.isDragEnd(o.pointerId)&&t.events.emit("pointerdragend",o)),n.set(o.pointerId,o);return n}_processMoveAndEmit(t){const n=new Map;for(const o of this._receiver.currentFrameMove)o.active&&t.active&&this.entityCurrentlyUnderPointer(t,o.pointerId)&&(t.events.emit("pointermove",o),this._receiver.isDragging(o.pointerId)&&t.events.emit("pointerdragmove",o)),n.set(o.pointerId,o);return n}_processEnterLeaveAndEmit(t,n){for(const o of n){if(o.active&&t.active&&this.entered(t,o.pointerId)){t.events.emit("pointerenter",o),this._receiver.isDragging(o.pointerId)&&t.events.emit("pointerdragenter",o);break}if(o.active&&t.active&&(this.left(t,o.pointerId)||this.entityCurrentlyUnderPointer(t,o.pointerId)&&o.type==="up")){t.events.emit("pointerleave",o),this._receiver.isDragging(o.pointerId)&&t.events.emit("pointerdragleave",o);break}}}_processCancelAndEmit(t){for(const n of this._receiver.currentFrameCancel)n.active&&t.active&&this.entityCurrentlyUnderPointer(t,n.pointerId)&&t.events.emit("pointercancel",n)}_processWheelAndEmit(t){for(const n of this._receiver.currentFrameWheel)n.active&&t.active&&this.entityCurrentlyUnderPointer(t,0)&&t.events.emit("pointerwheel",n)}_dispatchEvents(t){const n=new Set(this.lastFrameEntityToPointers.keys()),o=new Set(this.currentFrameEntityToPointers.keys()),u=t.filter(y=>n.has(y.id)||o.has(y.id));let c,g,_;for(const y of u){_=this._processDownAndEmit(y),g=this._processUpAndEmit(y),c=this._processMoveAndEmit(y);const C=[...c.values(),..._.values(),...g.values()];this._processEnterLeaveAndEmit(y,C),this._processCancelAndEmit(y),this._processWheelAndEmit(y)}}}class eg extends Ei{constructor(){super(...arguments),this.types=["ex.actions"],this.systemType=He.Update,this.priority=-1,this._actions=[]}notify(t){if(Zr(t)){const n=t.data.get(Xn);this._actions.push(n)}else{const n=t.data.get(Xn),o=this._actions.indexOf(n);o>-1&&this._actions.splice(o,1)}}update(t,n){for(const o of this._actions)o.update(n)}}class Ma extends ii{constructor(t){super(),this.type="ex.isometricentity",this.elevation=0,this.map=t}}class ig extends Ei{constructor(){super(...arguments),this.types=["ex.transform","ex.isometricentity"],this.systemType=He.Update,this.priority=99}update(t,n){let o,u;for(const c of t){o=c.get(tt),u=c.get(Ma);const _=Math.max(u.map.columns*u.map.tileWidth,u.map.rows*u.map.tileHeight)*u.elevation+o.pos.y;o.z=_}}}class sg extends Ei{constructor(){super(...arguments),this.types=["ex.transform","ex.graphics"],this.systemType=He.Draw,this.priority=-1}initialize(t){this._camera=t.camera,this._screen=t.engine.screen}update(t){this._worldBounds=this._screen.getWorldBounds();let n,o,u;for(const c of t){o=c.get(me),n=c.get(tt),u=c.get(Ta);let g;if(u){const y=F.One.sub(u.parallaxFactor);g=this._camera.pos.scale(y)}const _=this._isOffscreen(n,o,g);_&&!c.hasTag("ex.offscreen")&&(c.events.emit("exitviewport",new Li(c)),c.addTag("ex.offscreen")),!_&&c.hasTag("ex.offscreen")&&(c.events.emit("enterviewport",new de(c)),c.removeTag("ex.offscreen"))}}_isOffscreen(t,n,o){if(t.coordPlane===Ve.World){let u=n.localBounds;o&&(u=u.translate(o));const c=u.transform(t.get().matrix);return!this._worldBounds.overlaps(c)}else return!1}}class ng{constructor(){this.collisionProcessor=new lh}rayCast(t,n){return this.collisionProcessor.rayCast(t,n)}}const qw={Initialize:"initialize",Activate:"activate",Deactivate:"deactivate",PreUpdate:"preupdate",PostUpdate:"postupdate",PreDraw:"predraw",PostDraw:"postdraw",PreDebugDraw:"predebugdraw",PostDebugDraw:"postdebugdraw"};class qr{get actors(){return this.world.entityManager.entities.filter(t=>t instanceof zi)}get entities(){return this.world.entityManager.entities}get triggers(){return this.world.entityManager.entities.filter(t=>t instanceof zp)}get tileMaps(){return this.world.entityManager.entities.filter(t=>t instanceof Ip)}get timers(){return this._timers}constructor(){this._logger=lt.getInstance(),this.events=new p,this.camera=new Np,this.world=new Gp(this),this.physics=new ng,this._isInitialized=!1,this._timers=[],this._cancelQueue=[],this.world.add(new eg),this.world.add(new Xp),this.world.add(new ph(this.physics)),this.world.add(new Da),this.world.add(new ig),this.world.add(new sg),this.world.add(new Jp),this.world.add(new tg)}emit(t,n){this.events.emit(t,n)}on(t,n){return this.events.on(t,n)}once(t,n){return this.events.once(t,n)}off(t,n){this.events.off(t,n)}onInitialize(t){}onActivate(t){}onDeactivate(t){}onPreUpdate(t,n){}onPostUpdate(t,n){}onPreDraw(t,n){}onPostDraw(t,n){}_initializeChildren(){for(const t of this.entities)t._initialize(this.engine)}get isInitialized(){return this._isInitialized}_initialize(t){this.isInitialized||(this.engine=t,this.camera._initialize(t),this.world.systemManager.initialize(),this.onInitialize.call(this,t),this._initializeChildren(),this._logger.debug("Scene.onInitialize",this,t),this.events.emit("initialize",new At(t,this)),this._isInitialized=!0)}_activate(t){this._logger.debug("Scene.onActivate",this),this.onActivate(t)}_deactivate(t){this._logger.debug("Scene.onDeactivate",this),this.onDeactivate(t)}_preupdate(t,n){this.emit("preupdate",new D(t,n,this)),this.onPreUpdate(t,n)}_postupdate(t,n){this.emit("postupdate",new B(t,n,this)),this.onPostUpdate(t,n)}_predraw(t,n){this.emit("predraw",new O(t,n,this)),this.onPreDraw(t,n)}_postdraw(t,n){this.emit("postdraw",new A(t,n,this)),this.onPostDraw(t,n)}update(t,n){this._preupdate(t,n);let o,u;for(o=0,u=this._cancelQueue.length;o<u;o++)this.removeTimer(this._cancelQueue[o]);this._cancelQueue.length=0;for(const c of this._timers)c.update(n);this.world.update(He.Update,n),this.camera&&this.camera.update(t,n),this._collectActorStats(t),this._postupdate(t,n)}draw(t,n){var o;this._predraw(t,n),this.world.update(He.Draw,n),!((o=this.engine)===null||o===void 0)&&o.isDebug&&this.debugDraw(t),this._postdraw(t,n)}debugDraw(t){this.emit("predebugdraw",new P(t,this)),this.emit("postdebugdraw",new k(t,this))}contains(t){return this.actors.indexOf(t)>-1}add(t){if(this.emit("entityadded",{target:t}),this.world.add(t),t.scene=this,t instanceof fn){Wu(this._timers,t)||this.addTimer(t);return}}transfer(t){let n;t instanceof ue&&t.scene&&t.scene!==this&&(n=t.scene,t.scene.world.remove(t,!1)),t instanceof fn&&t.scene&&(n=t.scene,t.scene.removeTimer(t)),n==null||n.emit("entityremoved",{target:t}),this.add(t)}remove(t){t instanceof ue&&(this.emit("entityremoved",{target:t}),t.active&&t.kill(),this.world.remove(t)),t instanceof fn&&this.removeTimer(t)}clear(t=!0){for(const n of this.entities)this.world.remove(n,t);for(const n of this.timers)this.removeTimer(n)}addTimer(t){return this._timers.push(t),t.scene=this,t}removeTimer(t){const n=this._timers.indexOf(t);return n!==-1&&this._timers.splice(n,1),t}cancelTimer(t){return this._cancelQueue.push(t),t}isTimerActive(t){return this._timers.indexOf(t)>-1&&!t.complete}isCurrentScene(){return this.engine?this.engine.currentScene===this:!1}_collectActorStats(t){const n=this.actors.filter(o=>o instanceof fh);for(const o of n)t.stats.currFrame.actors.ui++;for(const o of this.actors){t.stats.currFrame.actors.alive++;for(const u of o.children)kp(u)?t.stats.currFrame.actors.ui++:t.stats.currFrame.actors.alive++}}}var pn;(function(d){d.Protanope="Protanope",d.Deuteranope="Deuteranope",d.Tritanope="Tritanope"})(pn||(pn={}));const Jw=`#version 300 es\r
precision mediump float;\r
// our texture\r
uniform sampler2D u_image;\r
// the texCoords passed in from the vertex shader.\r
in vec2 v_texcoord;\r
\r
// color blind type\r
uniform int u_type;\r
\r
// simulation?\r
uniform bool u_simulate;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  vec4 o =  texture(u_image, v_texcoord);\r
  // RGB to LMS matrix conversion\r
  float L = (17.8824 * o.r) + (43.5161 * o.g) + (4.11935 * o.b);\r
  float M = (3.45565 * o.r) + (27.1554 * o.g) + (3.86714 * o.b);\r
  float S = (0.0299566 * o.r) + (0.184309 * o.g) + (1.46709 * o.b);\r
  // Simulate color blindness\r
  float l;\r
  float m;\r
  float s;\r
  //MODE CODE//\r
  if (u_type == 0) {\r
    // Protanope\r
    l = 0.0 * L + 2.02344 * M + -2.52581 * S;\r
    m = 0.0 * L + 1.0 * M + 0.0 * S;\r
    s = 0.0 * L + 0.0 * M + 1.0 * S;;\r
  } else if (u_type == 1) {\r
    // Deuteranope\r
    l = 1.0 * L + 0.0 * M + 0.0 * S;\r
    m = 0.494207 * L + 0.0 * M + 1.24827 * S;\r
    s = 0.0 * L + 0.0 * M + 1.0 * S;\r
  } else if (u_type == 2) {\r
    // Tritanope\r
    l = 1.0 * L + 0.0 * M + 0.0 * S;\r
    m = 0.0 * L + 1.0 * M + 0.0 * S;\r
    s = -0.395913 * L + 0.801109 * M + 0.0 * S;\r
  }\r
\r
  // LMS to RGB matrix conversion\r
  vec4 error; // simulate the colors\r
  error.r = (0.0809444479 * l) + (-0.130504409 * m) + (0.116721066 * s);\r
  error.g = (-0.0102485335 * l) + (0.0540193266 * m) + (-0.113614708 * s);\r
  error.b = (-0.000365296938 * l) + (-0.00412161469 * m) + (0.693511405 * s);\r
  error.a = 1.0;\r
  vec4 diff = o - error;\r
  vec4 correction; // correct the colors\r
  correction.r = 0.0;\r
  correction.g =  (diff.r * 0.7) + (diff.g * 1.0);\r
  correction.b =  (diff.r * 0.7) + (diff.b * 1.0);\r
  correction = o + correction;\r
  correction.a = o.a;\r
  //SIMULATE//\r
\r
  // sim \r
  if (u_simulate) {\r
    fragColor = error.rgba;\r
  } else {\r
    fragColor = correction.rgba;\r
  }\r
}`;class rg{constructor(t,n){this._shader=new ei({gl:t,vertexSource:`#version 300 es
      in vec2 a_position;
      in vec2 a_texcoord;
      out vec2 v_texcoord;

      void main() {
        gl_Position = vec4(a_position, 0.0, 1.0);
        // Pass the texcoord to the fragment shader.
        v_texcoord = a_texcoord;
      }`,fragmentSource:n}),this._shader.compile(),this._buffer=new ns({gl:t,type:"static",data:new Float32Array([-1,-1,0,0,-1,1,0,1,1,-1,1,0,1,-1,1,0,-1,1,0,1,1,1,1,1])}),this._layout=new rs({gl:t,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_texcoord",2]]}),this._buffer.upload()}getShader(){return this._shader}getLayout(){return this._layout}}class og{constructor(t,n=!1){this._colorBlindnessMode=t,this._simulate=!1,this._simulate=n}initialize(t){this._shader=new rg(t,Jw),this.simulate=this._simulate,this.colorBlindnessMode=this._colorBlindnessMode}getShader(){return this._shader.getShader()}getLayout(){return this._shader.getLayout()}set colorBlindnessMode(t){if(this._colorBlindnessMode=t,this._shader){const n=this._shader.getShader();n.use(),this._colorBlindnessMode===pn.Protanope?n.setUniformInt("u_type",0):this._colorBlindnessMode===pn.Deuteranope?n.setUniformInt("u_type",1):this._colorBlindnessMode===pn.Tritanope&&n.setUniformInt("u_type",2)}}get colorBlindnessMode(){return this._colorBlindnessMode}set simulate(t){if(this._simulate=t,this._shader){const n=this._shader.getShader();n.use(),n.setUniformBoolean("u_simulate",t)}}get simulate(){return this._simulate}}class ag{constructor(t){this._engine=t,this._colorBlindPostProcessor=new og(pn.Protanope)}correct(t){this._engine.graphicsContext instanceof Ps&&(this.clear(),this._colorBlindPostProcessor.colorBlindnessMode=t,this._colorBlindPostProcessor.simulate=!1,this._engine.graphicsContext.addPostProcessor(this._colorBlindPostProcessor))}simulate(t){this._engine.graphicsContext instanceof Ps&&(this.clear(),this._colorBlindPostProcessor.colorBlindnessMode=t,this._colorBlindPostProcessor.simulate=!0,this._engine.graphicsContext.addPostProcessor(this._colorBlindPostProcessor))}clear(){this._engine.graphicsContext.removePostProcessor(this._colorBlindPostProcessor)}}class lg{constructor(t){this.stats={currFrame:new Jr,prevFrame:new Jr},this.filter={useFilter:!1,nameQuery:"",ids:[]},this.entity={showAll:!1,showId:!0,showName:!1},this.transform={showAll:!1,showPosition:!1,showPositionLabel:!1,positionColor:K.Yellow,showZIndex:!1,showScale:!1,scaleColor:K.Green,showRotation:!1,rotationColor:K.Blue},this.graphics={showAll:!1,showBounds:!0,boundsColor:K.Yellow},this.collider={showAll:!1,showBounds:!0,boundsColor:K.Blue,showOwner:!1,showGeometry:!0,geometryColor:K.Green},this.physics={showAll:!1,showBroadphaseSpacePartitionDebug:!1,showCollisionNormals:!1,collisionNormalColor:K.Cyan,showCollisionContacts:!0,collisionContactColor:K.Red},this.motion={showAll:!1,showVelocity:!1,velocityColor:K.Yellow,showAcceleration:!1,accelerationColor:K.Red},this.body={showAll:!1,showCollisionGroup:!1,showCollisionType:!1,showSleeping:!1,showMotion:!1,showMass:!1},this.camera={showAll:!1,showFocus:!1,focusColor:K.Red,showZoom:!1},this._engine=t,this.colorBlindMode=new ag(this._engine)}useTestClock(){const t=this._engine.clock,n=t.isRunning();t.stop();const o=t.toTestClock();return n&&o.start(),this._engine.clock=o,o}useStandardClock(){const t=this._engine.clock,n=t.isRunning();t.stop();const o=t.toStandardClock();return n&&o.start(),this._engine.clock=o,o}}class Jr{constructor(){this._id=0,this._delta=0,this._fps=0,this._actorStats={alive:0,killed:0,ui:0,get remaining(){return this.alive-this.killed},get total(){return this.remaining+this.ui}},this._durationStats={update:0,draw:0,get total(){return this.update+this.draw}},this._physicsStats=new Fa,this._graphicsStats={drawCalls:0,drawnImages:0}}reset(t){t?(this.id=t.id,this.delta=t.delta,this.fps=t.fps,this.actors.alive=t.actors.alive,this.actors.killed=t.actors.killed,this.actors.ui=t.actors.ui,this.duration.update=t.duration.update,this.duration.draw=t.duration.draw,this._physicsStats.reset(t.physics),this.graphics.drawCalls=t.graphics.drawCalls,this.graphics.drawnImages=t.graphics.drawnImages):(this.id=this.delta=this.fps=0,this.actors.alive=this.actors.killed=this.actors.ui=0,this.duration.update=this.duration.draw=0,this._physicsStats.reset(),this.graphics.drawnImages=this.graphics.drawCalls=0)}clone(){const t=new Jr;return t.reset(this),t}get id(){return this._id}set id(t){this._id=t}get delta(){return this._delta}set delta(t){this._delta=t}get fps(){return this._fps}set fps(t){this._fps=t}get actors(){return this._actorStats}get duration(){return this._durationStats}get physics(){return this._physicsStats}get graphics(){return this._graphicsStats}}class Fa{constructor(){this._pairs=0,this._collisions=0,this._contacts=new Map,this._fastBodies=0,this._fastBodyCollisions=0,this._broadphase=0,this._narrowphase=0}reset(t){t?(this.pairs=t.pairs,this.collisions=t.collisions,this.contacts=t.contacts,this.fastBodies=t.fastBodies,this.fastBodyCollisions=t.fastBodyCollisions,this.broadphase=t.broadphase,this.narrowphase=t.narrowphase):(this.pairs=this.collisions=this.fastBodies=0,this.fastBodyCollisions=this.broadphase=this.narrowphase=0,this.contacts.clear())}clone(){const t=new Fa;return t.reset(this),t}get pairs(){return this._pairs}set pairs(t){this._pairs=t}get collisions(){return this._collisions}set collisions(t){this._collisions=t}get contacts(){return this._contacts}set contacts(t){this._contacts=t}get fastBodies(){return this._fastBodies}set fastBodies(t){this._fastBodies=t}get fastBodyCollisions(){return this._fastBodyCollisions}set fastBodyCollisions(t){this._fastBodyCollisions=t}get broadphase(){return this._broadphase}set broadphase(t){this._broadphase=t}get narrowphase(){return this._narrowphase}set narrowphase(t){this._narrowphase=t}}class gh{on(t,n){this._nativeHandlers[t]&&this.off(t,this._nativeHandlers[t]),this._nativeHandlers[t]=this._decorate(n),this.nativeComponent.addEventListener(t,this._nativeHandlers[t])}off(t,n){n||(n=this._nativeHandlers[t]),this.nativeComponent.removeEventListener(t,n),this._nativeHandlers[t]=null}_decorate(t){return n=>{this._paused||t(n)}}pause(){this._paused=!0}resume(){this._paused=!1}clear(){for(const t in this._nativeHandlers)this.off(t)}constructor(t){this.nativeComponent=t,this._paused=!1,this._nativeHandlers={}}}class ug{constructor(t,n){this._windowGlobal=t,this._documentGlobal=n,this._windowComponent=new gh(this._windowGlobal),this._documentComponent=new gh(this._documentGlobal)}get window(){return this._windowComponent}get document(){return this._documentComponent}pause(){this.window.pause(),this.document.pause()}resume(){this.window.resume(),this.document.resume()}clear(){this.window.clear(),this.document.clear()}}class to{static fromPagePosition(t,n,o){let u,c,g,_;arguments.length===3?(u=t,c=n,g=new F(u,c),_=o):(g=t,u=g.x,c=g.y,_=n);const y=_.screen.pageToScreenCoordinates(g),C=_.screen.screenToWorldCoordinates(y);return new to(C,g,y)}constructor(t,n,o){this.worldPos=t,this.pagePos=n,this.screenPos=o}}class qn{cancel(){this.active=!1}get pagePos(){return this.coordinates.pagePos}get screenPos(){return this.coordinates.screenPos}get worldPos(){return this.coordinates.worldPos}constructor(t,n,o,u,c,g){this.type=t,this.pointerId=n,this.button=o,this.pointerType=u,this.coordinates=c,this.nativeEvent=g,this.active=!0}}class mh{cancel(){this.active=!1}constructor(t,n,o,u,c,g,_,y,C,S,I,M){this.x=t,this.y=n,this.pageX=o,this.pageY=u,this.screenX=c,this.screenY=g,this.index=_,this.deltaX=y,this.deltaY=C,this.deltaZ=S,this.deltaMode=I,this.ev=M,this.active=!0}}class hg{constructor(){this.events=new p,this.lastPagePos=F.Zero,this.lastScreenPos=F.Zero,this.lastWorldPos=F.Zero,this._onPointerMove=t=>{this.lastPagePos=new F(t.pagePos.x,t.pagePos.y),this.lastScreenPos=new F(t.screenPos.x,t.screenPos.y),this.lastWorldPos=new F(t.worldPos.x,t.worldPos.y)},this._onPointerDown=t=>{this.lastPagePos=new F(t.pagePos.x,t.pagePos.y),this.lastScreenPos=new F(t.screenPos.x,t.screenPos.y),this.lastWorldPos=new F(t.worldPos.x,t.worldPos.y)},this.on("move",this._onPointerMove),this.on("down",this._onPointerDown)}emit(t,n){this.events.emit(t,n)}on(t,n){return this.events.on(t,n)}once(t,n){return this.events.once(t,n)}off(t,n){this.events.off(t,n)}}var gn;(function(d){d.Pixel="Pixel",d.Line="Line",d.Page="Page"})(gn||(gn={}));var as;(function(d){d[d.NoButton=-1]="NoButton",d[d.Left=0]="Left",d[d.Middle=1]="Middle",d[d.Right=2]="Right",d[d.Unknown=3]="Unknown"})(as||(as={}));var Vi;(function(d){d.Left="Left",d.Middle="Middle",d.Right="Right",d.Unknown="Unknown",d.NoButton="NoButton"})(Vi||(Vi={}));var ji;(function(d){d.Touch="Touch",d.Mouse="Mouse",d.Pen="Pen",d.Unknown="Unknown"})(ji||(ji={}));function t1(d){return globalThis.TouchEvent&&d instanceof globalThis.TouchEvent}function e1(d){return globalThis.PointerEvent&&d instanceof globalThis.PointerEvent}class eo{constructor(t,n){this.target=t,this.engine=n,this.events=new p,this.primary=new hg,this._activeNativePointerIdsToNormalized=new Map,this.lastFramePointerCoords=new Map,this.currentFramePointerCoords=new Map,this.currentFramePointerDown=new Map,this.lastFramePointerDown=new Map,this.currentFrameDown=[],this.currentFrameUp=[],this.currentFrameMove=[],this.currentFrameCancel=[],this.currentFrameWheel=[],this._pointers=[this.primary],this._boundHandle=this._handle.bind(this),this._boundWheel=this._handleWheel.bind(this)}recreate(t,n){const o=new eo(t,n);return o.primary=this.primary,o._pointers=this._pointers,o}at(t){if(t>=this._pointers.length)for(let n=this._pointers.length-1,o=t;n<o;n++)this._pointers.push(new hg);return this._pointers[t]}count(){return this._pointers.length}isDown(t){var n;return(n=this.currentFramePointerDown.get(t))!==null&&n!==void 0?n:!1}wasDown(t){var n;return(n=this.lastFramePointerDown.get(t))!==null&&n!==void 0?n:!1}isDragging(t){return this.isDown(t)}isDragStart(t){return this.isDown(t)&&!this.wasDown(t)}isDragEnd(t){return!this.isDown(t)&&this.wasDown(t)}emit(t,n){this.events.emit(t,n)}on(t,n){return this.events.on(t,n)}once(t,n){return this.events.once(t,n)}off(t,n){this.events.off(t,n)}update(){this.lastFramePointerDown=new Map(this.currentFramePointerDown),this.lastFramePointerCoords=new Map(this.currentFramePointerCoords);for(const t of this.currentFrameDown)this.emit("down",t),this.at(t.pointerId).emit("down",t),this.primary.emit("pointerdown",t);for(const t of this.currentFrameUp)this.emit("up",t),this.at(t.pointerId).emit("up",t);for(const t of this.currentFrameMove)this.emit("move",t),this.at(t.pointerId).emit("move",t);for(const t of this.currentFrameCancel)this.emit("cancel",t),this.at(t.pointerId).emit("cancel",t);for(const t of this.currentFrameWheel)this.emit("wheel",t),this.primary.emit("pointerwheel",t)}clear(){for(const t of this.currentFrameUp){this.currentFramePointerCoords.delete(t.pointerId);const n=this._activeNativePointerIdsToNormalized.entries();for(const[o,u]of n)u===t.pointerId&&this._activeNativePointerIdsToNormalized.delete(o)}this.currentFrameDown.length=0,this.currentFrameUp.length=0,this.currentFrameMove.length=0,this.currentFrameCancel.length=0,this.currentFrameWheel.length=0}init(t){var n;this.target===this.engine.canvas?this.engine.canvas.style.touchAction="none":document.body.style.touchAction="none",window.PointerEvent?(this.target.addEventListener("pointerdown",this._boundHandle),this.target.addEventListener("pointerup",this._boundHandle),this.target.addEventListener("pointermove",this._boundHandle),this.target.addEventListener("pointercancel",this._boundHandle)):(this.target.addEventListener("touchstart",this._boundHandle),this.target.addEventListener("touchend",this._boundHandle),this.target.addEventListener("touchmove",this._boundHandle),this.target.addEventListener("touchcancel",this._boundHandle),this.target.addEventListener("mousedown",this._boundHandle),this.target.addEventListener("mouseup",this._boundHandle),this.target.addEventListener("mousemove",this._boundHandle));const o={passive:!(this.engine.pageScrollPreventionMode===As.All||this.engine.pageScrollPreventionMode===As.Canvas)};if("onwheel"in document.createElement("div")?this.target.addEventListener("wheel",this._boundWheel,o):document.onmousewheel!==void 0?this.target.addEventListener("mousewheel",this._boundWheel,o):this.target.addEventListener("MozMousePixelScroll",this._boundWheel,o),((n=t==null?void 0:t.grabWindowFocus)!==null&&n!==void 0?n:!0)&&Wf()){const c=()=>{window.focus()};window.PointerEvent?this.target.addEventListener("pointerdown",c):(this.target.addEventListener("touchstart",c),this.target.addEventListener("mousedown",c))}}detach(){window.PointerEvent?(this.target.removeEventListener("pointerdown",this._boundHandle),this.target.removeEventListener("pointerup",this._boundHandle),this.target.removeEventListener("pointermove",this._boundHandle),this.target.removeEventListener("pointercancel",this._boundHandle)):(this.target.removeEventListener("touchstart",this._boundHandle),this.target.removeEventListener("touchend",this._boundHandle),this.target.removeEventListener("touchmove",this._boundHandle),this.target.removeEventListener("touchcancel",this._boundHandle),this.target.removeEventListener("mousedown",this._boundHandle),this.target.removeEventListener("mouseup",this._boundHandle),this.target.removeEventListener("mousemove",this._boundHandle)),"onwheel"in document.createElement("div")?this.target.removeEventListener("wheel",this._boundWheel):document.onmousewheel!==void 0?this.target.addEventListener("mousewheel",this._boundWheel):this.target.addEventListener("MozMousePixelScroll",this._boundWheel)}_normalizePointerId(t){this._activeNativePointerIdsToNormalized.set(t,-1);const o=Array.from(this._activeNativePointerIdsToNormalized.keys()).sort((u,c)=>u-c).findIndex(u=>u===t);return this._activeNativePointerIdsToNormalized.set(t,o),o}_handle(t){t.preventDefault();const n=new Map;let o,u;if(t1(t)){o=Vi.Unknown,u=ji.Touch;for(let c=0;c<t.changedTouches.length;c++){const g=t.changedTouches[c],_=to.fromPagePosition(g.pageX,g.pageY,this.engine),y=c+1,C=this._normalizePointerId(y);this.currentFramePointerCoords.set(C,_),n.set(C,_)}}else{o=this._nativeButtonToPointerButton(t.button),u=ji.Mouse;const c=to.fromPagePosition(t.pageX,t.pageY,this.engine);let g=1;e1(t)&&(g=t.pointerId,u=this._stringToPointerType(t.pointerType));const _=this._normalizePointerId(g);this.currentFramePointerCoords.set(_,c),n.set(_,c)}for(const[c,g]of n.entries())switch(t.type){case"mousedown":case"pointerdown":case"touchstart":this.currentFrameDown.push(new qn("down",c,o,u,g,t)),this.currentFramePointerDown.set(c,!0);break;case"mouseup":case"pointerup":case"touchend":this.currentFrameUp.push(new qn("up",c,o,u,g,t)),this.currentFramePointerDown.set(c,!1);break;case"mousemove":case"pointermove":case"touchmove":this.currentFrameMove.push(new qn("move",c,o,u,g,t));break;case"touchcancel":case"pointercancel":this.currentFrameCancel.push(new qn("cancel",c,o,u,g,t));break}}_handleWheel(t){(this.engine.pageScrollPreventionMode===As.All||this.engine.pageScrollPreventionMode===As.Canvas&&t.target===this.engine.canvas)&&t.preventDefault();const n=this.engine.screen.pageToScreenCoordinates(j(t.pageX,t.pageY)),o=this.engine.screen.screenToWorldCoordinates(n),u=-1/40,c=t.deltaX||t.wheelDeltaX*u||0,g=t.deltaY||t.wheelDeltaY*u||t.wheelDelta*u||t.detail||0,_=t.deltaZ||0;let y=gn.Pixel;t.deltaMode&&(t.deltaMode===1?y=gn.Line:t.deltaMode===2&&(y=gn.Page));const C=new mh(o.x,o.y,t.pageX,t.pageY,n.x,n.y,0,c,g,_,y,t);this.currentFrameWheel.push(C)}triggerEvent(t,n){const o=this.engine.screen.worldToPageCoordinates(n);window.PointerEvent?this._handle(new window.PointerEvent("pointer"+t,{pointerId:0,clientX:o.x,clientY:o.y})):this._handle(new window.MouseEvent("mouse"+t,{clientX:o.x,clientY:o.y}));const u=this.engine.currentScene.world.systemManager.get(Da),c=this.engine.currentScene.world.queryManager.createQuery(u.types);u.preupdate(),u.update(c.getEntities())}_nativeButtonToPointerButton(t){switch(t){case as.NoButton:return Vi.NoButton;case as.Left:return Vi.Left;case as.Middle:return Vi.Middle;case as.Right:return Vi.Right;case as.Unknown:return Vi.Unknown;default:return Xf(t)}}_stringToPointerType(t){switch(t){case"touch":return ji.Touch;case"mouse":return ji.Mouse;case"pen":return ji.Pen;default:return ji.Unknown}}}class cg{constructor(t){var n;this._samplePeriod=100,this._currentFrameTime=0,this._frames=0,this._previousSampleTime=0,this._beginFrameTime=0,this._fps=t.initialFps,this._samplePeriod=(n=t.samplePeriod)!==null&&n!==void 0?n:this._samplePeriod,this._currentFrameTime=1e3/t.initialFps,this._nowFn=t.nowFn,this._previousSampleTime=this._nowFn()}start(){this._beginFrameTime=this._nowFn()}end(){this._frames++;const t=this._nowFn();this._currentFrameTime=t-this._beginFrameTime,t>=this._previousSampleTime+this._samplePeriod&&(this._fps=this._frames*1e3/(t-this._previousSampleTime),this._previousSampleTime=t,this._frames=0)}get fps(){return this._fps}get instant(){return 1e3/this._currentFrameTime}}class _h{constructor(t){var n,o,u;this._onFatalException=()=>{},this._maxFps=1/0,this._lastTime=0,this._elapsed=1,this._scheduledCbs=[],this._totalElapsed=0,this._options=t,this.tick=t.tick,this._lastTime=(n=this.now())!==null&&n!==void 0?n:0,this._maxFps=(o=t.maxFps)!==null&&o!==void 0?o:this._maxFps,this._onFatalException=(u=t.onFatalException)!==null&&u!==void 0?u:this._onFatalException,this.fpsSampler=new cg({initialFps:60,nowFn:()=>this.now()})}elapsed(){return this._elapsed}now(){return performance.now()}toTestClock(){return new dg({...this._options,defaultUpdateMs:16.6})}toStandardClock(){return new vh({...this._options})}setFatalExceptionHandler(t){this._onFatalException=t}schedule(t,n=0){const o=this._totalElapsed+n;this._scheduledCbs.push([t,o])}_runScheduledCbs(){for(let t=this._scheduledCbs.length-1;t>-1;t--)this._scheduledCbs[t][1]<=this._totalElapsed&&(this._scheduledCbs[t][0](),this._scheduledCbs.splice(t,1))}update(t){try{this.fpsSampler.start();const n=this.now();let o=n-this._lastTime||1;const u=1e3/this._maxFps;if(o>=u){let c=0;u!==0&&(c=o%u,o=o-c),o>200&&(o=1),this._elapsed=t||o,this._totalElapsed+=this._elapsed,this._runScheduledCbs(),this.tick(t||o),u!==0?this._lastTime=n-c:this._lastTime=n,this.fpsSampler.end()}}catch(n){this._onFatalException(n),this.stop()}}}class vh extends _h{constructor(t){super(t),this._running=!1}isRunning(){return this._running}start(){if(this._running)return;this._running=!0;const t=()=>{if(this._running)try{this._requestId=window.requestAnimationFrame(t),this.update()}catch(n){throw window.cancelAnimationFrame(this._requestId),n}};t()}stop(){this._running=!1}}class dg extends _h{constructor(t){super({...t}),this._logger=lt.getInstance(),this._running=!1,this._currentTime=0,this._updateMs=t.defaultUpdateMs}now(){var t;return(t=this._currentTime)!==null&&t!==void 0?t:0}isRunning(){return this._running}start(){this._running=!0}stop(){this._running=!1}step(t){const n=t??this._updateMs;this._running?(this.update(n),this._currentTime+=n):this._logger.warn("The clock is not running, no step will be performed")}run(t,n){for(let o=0;o<t;o++)this.step(n??this._updateMs)}}var i1=Ot(7379);class fg{constructor(){this._toasterCss=i1.Z.toString(),this._isInitialized=!1}_initialize(){this._isInitialized||(this._container=document.createElement("div"),this._container.id="ex-toast-container",document.body.appendChild(this._container),this._isInitialized=!0,this._styleBlock=document.createElement("style"),this._styleBlock.textContent=this._toasterCss,document.head.appendChild(this._styleBlock))}dispose(){this._container.parentElement.removeChild(this._container),this._styleBlock.parentElement.removeChild(this._styleBlock),this._isInitialized=!1}_createFragment(t){const n=document.createElement("span");return n.innerText=t,n}toast(t,n,o){this._initialize();const u=document.createElement("div");u.className="ex-toast-message";const c=t.split("[LINK]").map(S=>this._createFragment(S));if(n){const S=document.createElement("a");S.href=n,o?S.innerText=o:S.innerText=n,c.splice(1,0,S)}const g=document.createElement("div");c.forEach(S=>{g.appendChild(S)}),u.appendChild(g);const _=document.createElement("button");_.innerText="x",_.addEventListener("click",()=>{this._container.removeChild(u)}),u.appendChild(_);const y=S=>{if(S.key==="Escape")try{this._container.removeChild(u)}catch{}document.removeEventListener("keydown",y)};document.addEventListener("keydown",y);const C=this._container.firstChild;this._container.insertBefore(u,C)}}class pg{constructor(t){this.inputs=t,this._handlers=new Map}execute(){for(const[t,n]of this._handlers.entries()){const o=t(this.inputs);o&&n(o)}}on(t,n){this._handlers.set(t,n)}}l();const s1={FallbackGraphicsContext:"fallbackgraphicscontext",Initialize:"initialize",Visible:"visible",Hidden:"hidden",Start:"start",Stop:"stop",PreUpdate:"preupdate",PostUpdate:"postupdate",PreFrame:"preframe",PostFrame:"postframe",PreDraw:"predraw",PostDraw:"postdraw"};var As;(function(d){d[d.None=0]="None",d[d.Canvas=1]="Canvas",d[d.All=2]="All"})(As||(As={}));class Jn{get canvasWidth(){return this.screen.canvasWidth}get halfCanvasWidth(){return this.screen.halfCanvasWidth}get canvasHeight(){return this.screen.canvasHeight}get halfCanvasHeight(){return this.screen.halfCanvasHeight}get drawWidth(){return this.screen.drawWidth}get halfDrawWidth(){return this.screen.halfDrawWidth}get drawHeight(){return this.screen.drawHeight}get halfDrawHeight(){return this.screen.halfDrawHeight}get isHiDpi(){return this.screen.isHiDpi}get stats(){return this.debug.stats}get isFullscreen(){return this.screen.isFullScreen}get displayMode(){return this.screen.displayMode}get pixelRatio(){return this.screen.pixelRatio}get isDebug(){return this._isDebug}get snapToPixel(){return this.graphicsContext.snapToPixel}set snapToPixel(t){this.graphicsContext.snapToPixel=t}emit(t,n){this.events.emit(t,n)}on(t,n){return this.events.on(t,n)}once(t,n){return this.events.once(t,n)}off(t,n){this.events.off(t,n)}constructor(t){var n,o,u,c,g,_;this.events=new p,this.maxFps=Number.POSITIVE_INFINITY,this.scenes={},this._suppressPlayButton=!1,this.pauseAudioWhenHidden=!0,this._isDebug=!1,this.enableCanvasTransparency=!0,this.onFatalException=I=>{lt.getInstance().fatal(I)},this._toaster=new fg,this._timescale=1,this._isInitialized=!1,this._deferredGoTo=null,this._originalOptions={},this._performanceThresholdTriggered=!1,this._fpsSamples=[],this._loadingComplete=!1,this._isReady=!1,this._isReadyPromise=new Promise(I=>{this._isReadyResolve=I}),this.currentFrameElapsedMs=0,this.currentFrameLagMs=0,this._lagMs=0,this._screenShotRequests=[],t={...Jn._DEFAULT_ENGINE_OPTIONS,...t},this._originalOptions=t,h.freeze(),this.browser=new ug(window,document);const y=new rp;if(!t.suppressMinimumBrowserFeatureDetection&&!(this._compatible=y.test())){const I=document.createElement("div");if(I.innerText="Sorry, your browser does not support all the features needed for Excalibur",document.body.appendChild(I),y.failedTests.forEach(function(M){const L=document.createElement("div");L.innerText="Browser feature missing "+M,document.body.appendChild(L)}),t.canvasElementId){const M=document.getElementById(t.canvasElementId);M&&M.parentElement.removeChild(M)}return}else this._compatible=!0;console.log&&!t.suppressConsoleBootMessage&&(console.log(`%cPowered by Excalibur.js (v${vg})`,"background: #176BAA; color: white; border-radius: 5px; padding: 15px; font-size: 1.5em; line-height: 80px;"),console.log(`
      /| ________________
O|===|* >________________>
      \\|`),console.log("Visit","http://excaliburjs.com","for more information")),t.suppressPlayButton&&(this._suppressPlayButton=!0),this._logger=lt.getInstance(),this._logger.defaultLevel===ae.Debug&&y.logBrowserFeatures(),this._logger.debug("Building engine..."),this.canvasElementId=t.canvasElementId,t.canvasElementId?(this._logger.debug("Using Canvas element specified: "+t.canvasElementId),this.canvas=document.getElementById(t.canvasElementId)):t.canvasElement?(this._logger.debug("Using Canvas element specified:",t.canvasElement),this.canvas=t.canvasElement):(this._logger.debug("Using generated canvas element"),this.canvas=document.createElement("canvas"));let C=(n=t.displayMode)!==null&&n!==void 0?n:se.Fixed;t.width&&t.height||t.viewport?(t.displayMode===void 0&&(C=se.Fixed),this._logger.debug("Engine viewport is size "+t.width+" x "+t.height)):t.displayMode||(this._logger.debug("Engine viewport is fit"),C=se.FitScreen),this._originalDisplayMode=C;let S=h.isEnabled("use-canvas-context");if(!S)try{this.graphicsContext=new Ps({canvasElement:this.canvas,enableTransparency:this.enableCanvasTransparency,smoothing:t.antialiasing,backgroundColor:t.backgroundColor,snapToPixel:t.snapToPixel,useDrawSorting:t.useDrawSorting})}catch(I){this._logger.warn(`Excalibur could not load webgl for some reason (${I.message}) and loaded a Canvas 2D fallback. Some features of Excalibur will not work in this mode. 

Read more about this issue at https://excaliburjs.com/docs/webgl`),S=!0}S&&(this.graphicsContext=new da({canvasElement:this.canvas,enableTransparency:this.enableCanvasTransparency,smoothing:t.antialiasing,backgroundColor:t.backgroundColor,snapToPixel:t.snapToPixel,useDrawSorting:t.useDrawSorting})),this.screen=new Ju({canvas:this.canvas,context:this.graphicsContext,antialiasing:(o=t.antialiasing)!==null&&o!==void 0?o:!0,browser:this.browser,viewport:(u=t.viewport)!==null&&u!==void 0?u:t.width&&t.height?{width:t.width,height:t.height}:qu.SVGA,resolution:t.resolution,displayMode:C,pixelRatio:t.suppressHiDPIScaling?1:(c=t.pixelRatio)!==null&&c!==void 0?c:null}),fe.filtering=t.antialiasing?xe.Blended:xe.Pixel,t.backgroundColor&&(this.backgroundColor=t.backgroundColor.clone()),this.maxFps=(g=t.maxFps)!==null&&g!==void 0?g:this.maxFps,this.fixedUpdateFps=(_=t.fixedUpdateFps)!==null&&_!==void 0?_:this.fixedUpdateFps,this.clock=new vh({maxFps:this.maxFps,tick:this._mainloop.bind(this),onFatalException:I=>this.onFatalException(I)}),this.enableCanvasTransparency=t.enableCanvasTransparency,this._loader=new sp,this._loader.wireEngine(this),this.debug=new lg(this),this._initialize(t),this.rootScene=this.currentScene=new qr,this.addScene("root",this.rootScene),window.___EXCALIBUR_DEVTOOL=this}_monitorPerformanceThresholdAndTriggerFallback(){const{allow:t}=this._originalOptions.configurePerformanceCanvas2DFallback;let{threshold:n,showPlayerMessage:o}=this._originalOptions.configurePerformanceCanvas2DFallback;if(n===void 0&&(n=Jn._DEFAULT_ENGINE_OPTIONS.configurePerformanceCanvas2DFallback.threshold),o===void 0&&(o=Jn._DEFAULT_ENGINE_OPTIONS.configurePerformanceCanvas2DFallback.showPlayerMessage),!h.isEnabled("use-canvas-context")&&t&&this.ready&&!this._performanceThresholdTriggered){this._fpsSamples.length===n.numberOfFrames&&this._fpsSamples.splice(0,1),this._fpsSamples.push(this.clock.fpsSampler.fps);let u=0;for(let g=0;g<this._fpsSamples.length;g++)u+=this._fpsSamples[g];const c=u/this._fpsSamples.length;this._fpsSamples.length===n.numberOfFrames&&c<=n.fps&&(this._performanceThresholdTriggered=!0,this._logger.warn(`Switching to browser 2D Canvas fallback due to performance. Some features of Excalibur will not work in this mode.
this might mean your browser doesn't have webgl enabled or hardware acceleration is unavailable.

If in Chrome:
  * Visit Settings > Advanced > System, and ensure "Use Hardware Acceleration" is checked.
  * Visit chrome://flags/#ignore-gpu-blocklist and ensure "Override software rendering list" is "enabled"
If in Firefox, visit about:config
  * Ensure webgl.disabled = false
  * Ensure webgl.force-enabled = true
  * Ensure layers.acceleration.force-enabled = true

Read more about this issue at https://excaliburjs.com/docs/performance`),o&&this._toaster.toast("Excalibur is encountering performance issues. It's possible that your browser doesn't have hardware acceleration enabled. Visit [LINK] for more information and potential solutions.","https://excaliburjs.com/docs/performance"),this.useCanvas2DFallback(),this.emit("fallbackgraphicscontext",this.graphicsContext))}}useCanvas2DFallback(){var t,n,o;const u=this.canvas.cloneNode(!1);this.canvas.parentNode.replaceChild(u,this.canvas),this.canvas=u;const c=this._originalOptions,g=this._originalDisplayMode;this.graphicsContext=new da({canvasElement:this.canvas,enableTransparency:this.enableCanvasTransparency,smoothing:c.antialiasing,backgroundColor:c.backgroundColor,snapToPixel:c.snapToPixel,useDrawSorting:c.useDrawSorting}),this.screen&&this.screen.dispose(),this.screen=new Ju({canvas:this.canvas,context:this.graphicsContext,antialiasing:(t=c.antialiasing)!==null&&t!==void 0?t:!0,browser:this.browser,viewport:(n=c.viewport)!==null&&n!==void 0?n:c.width&&c.height?{width:c.width,height:c.height}:qu.SVGA,resolution:c.resolution,displayMode:g,pixelRatio:c.suppressHiDPIScaling?1:(o=c.pixelRatio)!==null&&o!==void 0?o:null}),this.screen.setCurrentCamera(this.currentScene.camera),this.input.pointers.detach();const _=c&&c.pointerScope===on.Document?document:this.canvas;this.input.pointers=this.input.pointers.recreate(_,this),this.input.pointers.init()}getWorldBounds(){return this.screen.getWorldBounds()}get timescale(){return this._timescale}set timescale(t){if(t<=0){lt.getInstance().error("Cannot set engine.timescale to a value of 0 or less than 0.");return}this._timescale=t}addTimer(t){return this.currentScene.addTimer(t)}removeTimer(t){return this.currentScene.removeTimer(t)}addScene(t,n){this.scenes[t]&&this._logger.warn("Scene",t,"already exists overwriting"),this.scenes[t]=n}removeScene(t){if(t instanceof qr)for(const n in this.scenes)this.scenes.hasOwnProperty(n)&&this.scenes[n]===t&&delete this.scenes[n];typeof t=="string"&&delete this.scenes[t]}add(t){if(arguments.length===2){this.addScene(arguments[0],arguments[1]);return}this._deferredGoTo&&this.scenes[this._deferredGoTo]?this.scenes[this._deferredGoTo].add(t):this.currentScene.add(t)}remove(t){t instanceof ue&&this.currentScene.remove(t),t instanceof qr&&this.removeScene(t),typeof t=="string"&&this.removeScene(t)}goToScene(t,n){if(!this.isInitialized){this._deferredGoTo=t;return}if(this.scenes[t]){const o=this.currentScene,u=this.scenes[t];if(this._logger.debug("Going to scene:",t),this.currentScene.isInitialized){const g={engine:this,previousScene:o,nextScene:u};this.currentScene._deactivate.apply(this.currentScene,[g,u]),this.currentScene.events.emit("deactivate",new Be(g,this.currentScene))}this.currentScene=u,this.screen.setCurrentCamera(u.camera),this.currentScene._initialize(this);const c={engine:this,previousScene:o,nextScene:u,data:n};this.currentScene._activate.apply(this.currentScene,[c,u]),this.currentScene.events.emit("activate",new xi(c,this.currentScene))}else this._logger.error("Scene",t,"does not exist!")}screenToWorldCoordinates(t){return this.screen.screenToWorldCoordinates(t)}worldToScreenCoordinates(t){return this.screen.worldToScreenCoordinates(t)}_initialize(t){var n,o,u,c;this.pageScrollPreventionMode=t.scrollPreventionMode;const g=t&&t.pointerScope===on.Document?document:this.canvas;this.input={keyboard:new ju,pointers:new eo(g,this),gamepads:new ts},this.input.keyboard.init({grabWindowFocus:(o=(n=this._originalOptions)===null||n===void 0?void 0:n.grabWindowFocus)!==null&&o!==void 0?o:!0}),this.input.pointers.init({grabWindowFocus:(c=(u=this._originalOptions)===null||u===void 0?void 0:u.grabWindowFocus)!==null&&c!==void 0?c:!0}),this.input.gamepads.init(),this.inputMapper=new pg(this.input),this.browser.document.on("visibilitychange",()=>{document.visibilityState==="hidden"?(this.events.emit("hidden",new bt(this)),this._logger.debug("Window hidden")):document.visibilityState==="visible"&&(this.events.emit("visible",new _t(this)),this._logger.debug("Window visible"))}),!this.canvasElementId&&!t.canvasElement&&document.body.appendChild(this.canvas)}onInitialize(t){}setAntialiasing(t){this.screen.antialiasing=t}getAntialiasing(){return this.screen.antialiasing}get isInitialized(){return this._isInitialized}_overrideInitialize(t){if(!this.isInitialized)if(this.onInitialize(t),this.events.emit("initialize",new At(t,this)),this._isInitialized=!0,this._deferredGoTo){const n=this._deferredGoTo;this._deferredGoTo=null,this.goToScene(n)}else this.goToScene("root")}_update(t){if(!this.ready){this._loader.update(this,t),this.input.keyboard.update(),this.input.gamepads.update(),this.inputMapper.execute();return}this._preupdate(t),this.currentScene.update(this,t),this.graphicsContext.updatePostProcessors(t),this._postupdate(t),this.input.keyboard.update(),this.input.gamepads.update(),this.inputMapper.execute()}_preupdate(t){this.emit("preupdate",new D(this,t,this)),this.onPreUpdate(this,t)}onPreUpdate(t,n){}_postupdate(t){this.emit("postupdate",new B(this,t,this)),this.onPostUpdate(this,t)}onPostUpdate(t,n){}_draw(t){if(this.graphicsContext.beginDrawLifecycle(),this.graphicsContext.clear(),this._predraw(this.graphicsContext,t),!this._isReady){this._loader.canvas.draw(this.graphicsContext,0,0),this.graphicsContext.flush();return}this.graphicsContext.backgroundColor=this.backgroundColor,this.currentScene.draw(this.graphicsContext,t),this._postdraw(this.graphicsContext,t),this.graphicsContext.flush(),this.graphicsContext.endDrawLifecycle(),this._checkForScreenShots()}_predraw(t,n){this.emit("predraw",new O(t,n,this)),this.onPreDraw(t,n)}onPreDraw(t,n){}_postdraw(t,n){this.emit("postdraw",new A(t,n,this)),this.onPostDraw(t,n)}onPostDraw(t,n){}showDebug(t){this._isDebug=t}toggleDebug(){return this._isDebug=!this._isDebug,this._isDebug}get loadingComplete(){return this._loadingComplete}get ready(){return this._isReady}isReady(){return this._isReadyPromise}async start(t){if(!this._compatible)throw new Error("Excalibur is incompatible with your browser");return t&&(this.screen.pushResolutionAndViewport(),this.screen.resolution=this.screen.viewport,this.screen.applyResolutionAndViewport(),this._loader=t,this._loader.suppressPlayButton=this._suppressPlayButton||this._loader.suppressPlayButton,this._loader.wireEngine(this)),this._logger.debug("Starting game clock..."),this.browser.resume(),this.clock.start(),this._logger.debug("Game clock started"),t&&(await this.load(this._loader),this._loadingComplete=!0,this.screen.popResolutionAndViewport(),this.screen.applyResolutionAndViewport()),this._loadingComplete=!0,this._overrideInitialize(this),this._isReady=!0,this._isReadyResolve(),this.emit("start",new E(this)),this._isReadyPromise}_mainloop(t){this.emit("preframe",new H(this,this.stats.prevFrame));const n=t*this.timescale;this.currentFrameElapsedMs=n;const o=this.stats.prevFrame.id+1;this.stats.currFrame.reset(),this.stats.currFrame.id=o,this.stats.currFrame.delta=n,this.stats.currFrame.fps=this.clock.fpsSampler.fps,Qt.clear();const u=this.clock.now(),c=1e3/this.fixedUpdateFps;if(this.fixedUpdateFps)for(this._lagMs+=n;this._lagMs>=c;)this._update(c),this._lagMs-=c;else this._update(n);const g=this.clock.now();this.currentFrameLagMs=this._lagMs,this._draw(n);const _=this.clock.now();this.stats.currFrame.duration.update=g-u,this.stats.currFrame.duration.draw=_-g,this.stats.currFrame.graphics.drawnImages=Qt.DrawnImagesCount,this.stats.currFrame.graphics.drawCalls=Qt.DrawCallCount,this.emit("postframe",new $(this,this.stats.currFrame)),this.stats.prevFrame.reset(this.stats.currFrame),this._monitorPerformanceThresholdAndTriggerFallback()}stop(){this.clock.isRunning()&&(this.emit("stop",new R(this)),this.browser.pause(),this.clock.stop(),this._logger.debug("Game stopped"))}isRunning(){return this.clock.isRunning()}screenshot(t=!1){return new Promise(o=>{this._screenShotRequests.push({preserveHiDPIResolution:t,resolve:o})})}_checkForScreenShots(){for(const t of this._screenShotRequests){const n=t.preserveHiDPIResolution?this.canvas.width:this.screen.resolution.width,o=t.preserveHiDPIResolution?this.canvas.height:this.screen.resolution.height,u=document.createElement("canvas");u.width=n,u.height=o;const c=u.getContext("2d");c.imageSmoothingEnabled=this.screen.antialiasing,c.drawImage(this.canvas,0,0,n,o);const g=new Image,_=u.toDataURL("image/png");g.src=_,t.resolve(g)}this._screenShotRequests.length=0}async load(t){try{await t.load()}catch(n){this._logger.error("Error loading resources, things may not behave properly",n),await Promise.resolve()}}}Jn._DEFAULT_ENGINE_OPTIONS={width:0,height:0,enableCanvasTransparency:!0,useDrawSorting:!0,configurePerformanceCanvas2DFallback:{allow:!0,showPlayerMessage:!1,threshold:{fps:20,numberOfFrames:100}},canvasElementId:"",canvasElement:void 0,snapToPixel:!1,pointerScope:on.Canvas,suppressConsoleBootMessage:null,suppressMinimumBrowserFeatureDetection:null,suppressHiDPIScaling:null,suppressPlayButton:null,grabWindowFocus:!0,scrollPreventionMode:As.Canvas,backgroundColor:K.fromHex("#2185d0")};class n1{constructor(){this._handlers={},this._wiredEventDispatchers=[],this._deferedHandlerRemovals=[]}clear(){this._handlers={},this._wiredEventDispatchers=[]}_processDeferredHandlerRemovals(){for(const t of this._deferedHandlerRemovals)this._removeHandler(t.name,t.handler);this._deferedHandlerRemovals.length=0}emit(t,n){if(this._processDeferredHandlerRemovals(),!t)return;t=t.toLowerCase(),(typeof n>"u"||n===null)&&(n=new v);let o,u;if(this._handlers[t])for(o=0,u=this._handlers[t].length,o;o<u;o++)this._handlers[t][o](n);for(o=0,u=this._wiredEventDispatchers.length,o;o<u;o++)this._wiredEventDispatchers[o].emit(t,n)}on(t,n){this._processDeferredHandlerRemovals(),t=t.toLowerCase(),this._handlers[t]||(this._handlers[t]=[]),this._handlers[t].push(n)}off(t,n){this._deferedHandlerRemovals.push({name:t,handler:n})}_removeHandler(t,n){t=t.toLowerCase();const o=this._handlers[t];if(o)if(!n)this._handlers[t].length=0;else{const u=o.indexOf(n);u>-1&&this._handlers[t].splice(u,1)}}once(t,n){this._processDeferredHandlerRemovals();const o=u=>{const c=u||new v;this.off(t,o),n(c)};this.on(t,o)}wire(t){t._wiredEventDispatchers.push(this)}unwire(t){const n=t._wiredEventDispatchers.indexOf(this);n>-1&&t._wiredEventDispatchers.splice(n,1)}}class r1 extends zi{get font(){return this._font}set font(t){this._font=t,this._text.font=t}get text(){return this._text.text}set text(t){this._text.text=t}get color(){return this._text.color}set color(t){this._text&&(this._text.color=t)}get opacity(){return this._text.opacity}set opacity(t){this._text.opacity=t}get spriteFont(){return this._spriteFont}set spriteFont(t){t&&(this._spriteFont=t,this._text.font=this._spriteFont)}constructor(t){super(t),this._font=new Zn,this._text=new Yr({text:"",font:this._font});const{text:n,pos:o,x:u,y:c,spriteFont:g,font:_,color:y}=t;this.pos=o??(u&&c?j(u,c):this.pos),this.text=n??this.text,this.font=_??this.font,this.spriteFont=g??this.spriteFont,this._text.color=y??this.color;const C=this.get(me);C.anchor=F.Zero,C.use(this._text)}_initialize(t){super._initialize(t)}getTextWidth(){return this._text.width}}class gg extends ue{getGraphics(){return this._graphics}addGraphic(t){this._graphics.push(t),this._gfx.visible=!0,this._gfx.localBounds=this._recalculateBounds()}_recalculateBounds(){let t=this._tileBounds.clone();for(const n of this._graphics){const o=j(this.map.graphicsOffset.x-this.map.tileWidth/2,this.map.graphicsOffset.y-(this.map.renderFromTopOfGraphic?0:n.height-this.map.tileHeight));t=t.combine(n.localBounds.translate(o))}return t}removeGraphic(t){const n=this._graphics.indexOf(t);n>-1&&this._graphics.splice(n,1),this._gfx.localBounds=this._recalculateBounds()}clearGraphics(){this._graphics.length=0,this._gfx.visible=!1,this._gfx.localBounds=this._recalculateBounds()}getColliders(){return this._colliders}addCollider(t){this._colliders.push(t),this.map.flagCollidersDirty()}removeCollider(t){const n=this._colliders.indexOf(t);n>-1&&this._colliders.splice(n,1),this.map.flagCollidersDirty()}clearColliders(){this._colliders.length=0,this.map.flagCollidersDirty()}get pos(){return this.map.tileToWorld(j(this.x,this.y))}get center(){return this.pos.add(j(0,this.map.tileHeight/2))}constructor(t,n,o,u){super([new tt,new me({offset:o??F.Zero,onPostDraw:(M,L)=>this.draw(M,L)}),new Ma(u)]),this.solid=!1,this._tileBounds=new pt,this._graphics=[],this._colliders=[],this.x=t,this.y=n,this.map=u,this._transform=this.get(tt),this._isometricEntityComponent=this.get(Ma);const c=this.map.tileWidth/2,g=this.map.tileHeight/2,_=(this.x-this.y)*c,y=(this.x+this.y)*g;this._transform.pos=j(_,y),this._isometricEntityComponent.elevation=0,this._gfx=this.get(me),this._gfx.visible=!1;const C=this.map.tileWidth,S=this.map.tileHeight,I=j(0,this.map.renderFromTopOfGraphic?S:0);this._gfx.localBounds=this._tileBounds=new pt({left:-C/2,top:-S,right:C/2,bottom:S}).translate(I)}draw(t,n){const o=this.map.tileWidth/2;t.save(),t.translate(-o,0);for(const u of this._graphics)u.draw(t,this.map.graphicsOffset.x,this.map.graphicsOffset.y-(this.map.renderFromTopOfGraphic?0:u.height-this.map.tileHeight));t.restore()}}class o1 extends ue{constructor(t){super([new tt,new yt({type:gt.Fixed}),new qt,new Aa(C=>this.debug(C),!1)],t.name),this.renderFromTopOfGraphic=!1,this.graphicsOffset=j(0,0),this._collidersDirty=!1,this._originalOffsets=new WeakMap;const{pos:n,tileWidth:o,tileHeight:u,columns:c,rows:g,renderFromTopOfGraphic:_,graphicsOffset:y}=t;this.transform=this.get(tt),n&&(this.transform.pos=n),this.collider=this.get(qt),this.collider&&this.collider.set(this._composite=new we([])),this.renderFromTopOfGraphic=_??this.renderFromTopOfGraphic,this.graphicsOffset=y??this.graphicsOffset,this.tileWidth=o,this.tileHeight=u,this.columns=c,this.rows=g,this.tiles=new Array(c*g);for(let C=0;C<g;C++)for(let S=0;S<c;S++){const I=new gg(S,C,this.graphicsOffset,this);this.tiles[S+C*c]=I,this.addChild(I)}}update(){this._collidersDirty&&(this.updateColliders(),this._collidersDirty=!1)}flagCollidersDirty(){this._collidersDirty=!0}_getOrSetColliderOriginalOffset(t){if(this._originalOffsets.has(t))return this._originalOffsets.get(t);{const n=t.offset;return this._originalOffsets.set(t,n),n}}updateColliders(){this._composite.clearColliders();const t=this.get(tt).pos;for(const n of this.tiles)if(n.solid)for(const o of n.getColliders()){const u=this._getOrSetColliderOriginalOffset(o);o.offset=this.tileToWorld(j(n.x,n.y)).sub(t).add(u).sub(j(this.tileWidth/2,this.tileHeight)),o.owner=this,this._composite.addCollider(o)}this.collider.update()}worldToTile(t){t=t.sub(this.transform.globalPos);const n=this.tileWidth/2,o=this.tileHeight/2;return j(~~((t.x/n+t.y/o)/2),~~((t.y/o-t.x/n)/2))}tileToWorld(t){const n=this.tileWidth/2,o=this.tileHeight/2,u=(t.x-t.y)*n,c=(t.x+t.y)*o;return j(u,c).add(this.transform.pos)}getTile(t,n){return t<0||n<0||t>=this.columns||n>=this.rows?null:this.tiles[t+n*this.columns]}getTileByPoint(t){const n=this.worldToTile(t);return this.getTile(n.x,n.y)}_getMaxZIndex(){let t=Number.NEGATIVE_INFINITY;for(const n of this.tiles){const o=n.get(tt).z;o>t&&(t=o)}return t}debug(t){t.save(),t.z=this._getMaxZIndex()+.5;for(let n=0;n<this.rows+1;n++){const o=this.tileToWorld(j(0,n)),u=this.tileToWorld(j(this.columns,n));t.drawLine(o,u,K.Red,2)}for(let n=0;n<this.columns+1;n++){const o=this.tileToWorld(j(n,0)),u=this.tileToWorld(j(n,this.rows));t.drawLine(o,u,K.Red,2)}for(const n of this.tiles)t.drawCircle(this.tileToWorld(j(n.x,n.y)),3,K.Yellow);t.restore()}}class yh{constructor(t,n){this._stopped=!1,this._sequenceBuilder=n,this._sequenceContext=new Xr(t),this._actionQueue=this._sequenceContext.getQueue(),this._sequenceBuilder(this._sequenceContext)}update(t){this._actionQueue.update(t)}isComplete(){return this._stopped||this._actionQueue.isComplete()}stop(){this._stopped=!0}reset(){this._stopped=!1,this._actionQueue.reset()}clone(t){return new yh(t,this._sequenceBuilder)}}class a1{constructor(t){this._actions=t}update(t){for(let n=0;n<this._actions.length;n++)this._actions[n].update(t)}isComplete(t){return this._actions.every(n=>n.isComplete(t))}reset(){this._actions.forEach(t=>t.reset())}stop(){this._actions.forEach(t=>t.stop())}}class mn{static create(t,n){if(this._CURRENT_GROUP>this._MAX_GROUPS)throw new Error(`Cannot have more than ${this._MAX_GROUPS} collision groups`);if(this._GROUPS.get(t))throw new Error(`Collision group ${t} already exists`);const o=new Si(t,this._CURRENT_BIT,n!==void 0?n:~this._CURRENT_BIT);return this._CURRENT_BIT=this._CURRENT_BIT<<1|0,this._CURRENT_GROUP++,this._GROUPS.set(t,o),o}static get groups(){return Array.from(this._GROUPS.values())}static groupByName(t){return this._GROUPS.get(t)}static reset(){this._GROUPS=new Map,this._CURRENT_BIT=this._STARTING_BIT,this._CURRENT_GROUP=1}}mn._STARTING_BIT=1,mn._MAX_GROUPS=32,mn._CURRENT_GROUP=1,mn._CURRENT_BIT=mn._STARTING_BIT,mn._GROUPS=new Map;function l1(d){return!!d._initialize}function u1(d){return!!d.onInitialize}function h1(d){return!!d._preupdate}function c1(d){return!!d.onPreUpdate}function d1(d){return!!d.onPostUpdate}function f1(d){return!!d.onPostUpdate}function p1(d){return!!d.onPreDraw}function g1(d){return!!d.onPostDraw}class m1{constructor(t,n=K.Magenta,o=!1){this.path=t,this.color=n,this._stream=null,this._gif=null,this._textures=[],this._animation=null,this._transparentColor=null,this._resource=new ha(t,"arraybuffer",o),this._transparentColor=n}get bustCache(){return this._resource.bustCache}set bustCache(t){this._resource.bustCache=t}async load(){const t=await this._resource.load();this._stream=new mg(t),this._gif=new _g(this._stream,this._transparentColor);const n=this._gif.images.map(o=>new Yu(o.src,!1));return await Promise.all(n.map(o=>o.load())),this.data=this._textures=n}isLoaded(){return!!this.data}toSprite(t=0){return this._textures[t].toSprite()}toSpriteSheet(){const t=this._textures.map(n=>n.toSprite());return new un({sprites:t})}toAnimation(t){const n=this.toSpriteSheet(),o=n.sprites.length;return this._animation=Ui.fromSpriteSheet(n,$u(0,o),t),this._animation}get readCheckBytes(){return this._gif.checkBytes}}const La=d=>d.reduce(function(t,n){return t*2+n},0),xh=d=>{const t=[];for(let n=7;n>=0;n--)t.push(!!(d&1<<n));return t};class mg{constructor(t){if(this.data=null,this.len=0,this.position=0,this.readByte=()=>{if(this.position>=this.data.byteLength)throw new Error("Attempted to read past end of stream.");return this.data[this.position++]},this.readBytes=n=>{const o=[];for(let u=0;u<n;u++)o.push(this.readByte());return o},this.read=n=>{let o="";for(let u=0;u<n;u++)o+=String.fromCharCode(this.readByte());return o},this.readUnsigned=()=>{const n=this.readBytes(2);return(n[1]<<8)+n[0]},this.data=new Uint8Array(t),this.len=this.data.byteLength,this.len===0)throw new Error("No data loaded from file")}}const _1=function(d,t){let n=0;const o=function(M){let L=0;for(let V=0;V<M;V++)t.charCodeAt(n>>3)&1<<(n&7)&&(L|=1<<V),n++;return L},u=[],c=1<<d,g=c+1;let _=d+1,y=[];const C=function(){y=[],_=d+1;for(let M=0;M<c;M++)y[M]=[M];y[c]=[],y[g]=null};let S,I;for(;;){if(I=S,S=o(_),S===c){C();continue}if(S===g)break;if(S<y.length)I!==c&&y.push(y[I].concat(y[S][0]));else{if(S!==y.length)throw new Error("Invalid LZW code.");y.push(y[I].concat(y[I][0]))}u.push.apply(u,y[S]),y.length===1<<_&&_<12&&_++}return u};class _g{constructor(t,n=K.Magenta){this._st=null,this._handler={},this._transparentColor=null,this.frames=[],this.images=[],this.globalColorTable=[],this.checkBytes=[],this.parseColorTable=o=>{const u=[];for(let c=0;c<o;c++){const _="#"+this._st.readBytes(3).map(y=>{const C=y.toString(16);return C.length===1?"0"+C:C}).join("");u.push(_)}return u},this.readSubBlocks=()=>{let o,u;u="";do o=this._st.readByte(),u+=this._st.read(o);while(o!==0);return u},this.parseHeader=()=>{const o={sig:null,ver:null,width:null,height:null,colorRes:null,globalColorTableSize:null,gctFlag:null,sorted:null,globalColorTable:[],bgColor:null,pixelAspectRatio:null};if(o.sig=this._st.read(3),o.ver=this._st.read(3),o.sig!=="GIF")throw new Error("Not a GIF file.");o.width=this._st.readUnsigned(),o.height=this._st.readUnsigned();const u=xh(this._st.readByte());o.gctFlag=u.shift(),o.colorRes=La(u.splice(0,3)),o.sorted=u.shift(),o.globalColorTableSize=La(u.splice(0,3)),o.bgColor=this._st.readByte(),o.pixelAspectRatio=this._st.readByte(),o.gctFlag&&(o.globalColorTable=this.parseColorTable(1<<o.globalColorTableSize+1),this.globalColorTable=o.globalColorTable),this._handler.hdr&&this._handler.hdr(o)&&this.checkBytes.push(this._handler.hdr)},this.parseExt=o=>{const u=C=>{this.checkBytes.push(this._st.readByte());const S=xh(this._st.readByte());C.reserved=S.splice(0,3),C.disposalMethod=La(S.splice(0,3)),C.userInput=S.shift(),C.transparencyGiven=S.shift(),C.delayTime=this._st.readUnsigned(),C.transparencyIndex=this._st.readByte(),C.terminator=this._st.readByte(),this._handler.gce&&this._handler.gce(C)&&this.checkBytes.push(this._handler.gce)},c=C=>{C.comment=this.readSubBlocks(),this._handler.com&&this._handler.com(C)&&this.checkBytes.push(this._handler.com)},g=C=>{this.checkBytes.push(this._st.readByte()),C.ptHeader=this._st.readBytes(12),C.ptData=this.readSubBlocks(),this._handler.pte&&this._handler.pte(C)&&this.checkBytes.push(this._handler.pte)},_=C=>{const S=M=>{this.checkBytes.push(this._st.readByte()),M.unknown=this._st.readByte(),M.iterations=this._st.readUnsigned(),M.terminator=this._st.readByte(),this._handler.app&&this._handler.app.NETSCAPE&&this._handler.app.NETSCAPE(M)&&this.checkBytes.push(this._handler.app)},I=M=>{M.appData=this.readSubBlocks(),this._handler.app&&this._handler.app[M.identifier]&&this._handler.app[M.identifier](M)&&this.checkBytes.push(this._handler.app[M.identifier])};switch(this.checkBytes.push(this._st.readByte()),C.identifier=this._st.read(8),C.authCode=this._st.read(3),C.identifier){case"NETSCAPE":S(C);break;default:I(C);break}},y=C=>{C.data=this.readSubBlocks(),this._handler.unknown&&this._handler.unknown(C)&&this.checkBytes.push(this._handler.unknown)};switch(o.label=this._st.readByte(),o.label){case 249:o.extType="gce",u(o);break;case 254:o.extType="com",c(o);break;case 1:o.extType="pte",g(o);break;case 255:o.extType="app",_(o);break;default:o.extType="unknown",y(o);break}},this.parseImg=o=>{const u=(_,y)=>{const C=new Array(_.length),S=_.length/y,I=(Y,Z)=>{const U=_.slice(Z*y,(Z+1)*y);C.splice.apply(C,[Y*y,y].concat(U))},M=[0,4,2,1],L=[8,8,4,2];let V=0;for(let Y=0;Y<4;Y++)for(let Z=M[Y];Z<S;Z+=L[Y])I(Z,V),V++;return C};o.leftPos=this._st.readUnsigned(),o.topPos=this._st.readUnsigned(),o.width=this._st.readUnsigned(),o.height=this._st.readUnsigned();const c=xh(this._st.readByte());o.lctFlag=c.shift(),o.interlaced=c.shift(),o.sorted=c.shift(),o.reserved=c.splice(0,2),o.lctSize=La(c.splice(0,3)),o.lctFlag&&(o.lct=this.parseColorTable(1<<o.lctSize+1)),o.lzwMinCodeSize=this._st.readByte();const g=this.readSubBlocks();o.pixels=_1(o.lzwMinCodeSize,g),o.interlaced&&(o.pixels=u(o.pixels,o.width)),this.frames.push(o),this.arrayToImage(o),this._handler.img&&this._handler.img(o)&&this.checkBytes.push(this._handler)},this.parseBlock=()=>{const o={sentinel:this._st.readByte(),type:""};switch(String.fromCharCode(o.sentinel)){case"!":o.type="ext",this.parseExt(o);break;case",":o.type="img",this.parseImg(o);break;case";":o.type="eof",this._handler.eof&&this._handler.eof(o)&&this.checkBytes.push(this._handler.eof);break;default:throw new Error("Unknown block: 0x"+o.sentinel.toString(16))}o.type!=="eof"&&this.parseBlock()},this.arrayToImage=o=>{let u=0;const c=document.createElement("canvas");c.id=u.toString(),c.width=o.width,c.height=o.height,u++;const g=c.getContext("2d"),_=1;let y=0,C=0;for(let I=0;I<o.pixels.length;I++)C%o.width===0&&(y++,C=0),this.globalColorTable[o.pixels[I]]===this._transparentColor.toHex()?g.fillStyle="rgba(0, 0, 0, 0)":g.fillStyle=this.globalColorTable[o.pixels[I]],g.fillRect(C,y,_,_),C++;const S=new Image;S.src=c.toDataURL(),this.images.push(S)},this._st=t,this._handler={},this._transparentColor=n,this.parseHeader(),this.parseBlock()}}class wh extends Ue{constructor(t){super(),this.color=K.Black,this.thickness=1;const{start:n,end:o,color:u,thickness:c}=t;this.start=n,this.end=o,this.color=u??this.color,this.thickness=c??this.thickness;const{width:g,height:_}=pt.fromPoints([n,o]);this.width=g,this.height=_}_drawImage(t,n,o){t.drawLine(this.start,this.end,this.color,this.thickness)}clone(){return new wh({start:this.start,end:this.end,color:this.color,thickness:this.thickness})}}class Ch extends $n{get points(){return this._points}set points(t){this._points=t;const n=this.minPoint;this.width=this._points.reduce((o,u)=>Math.max(u.x,o),0)-n.x,this.height=this._points.reduce((o,u)=>Math.max(u.y,o),0)-n.y,this.flagDirty()}get minPoint(){const t=this._points.reduce((o,u)=>Math.min(u.x,o),1/0),n=this._points.reduce((o,u)=>Math.min(u.y,o),1/0);return j(t,n)}constructor(t){super(t),this.points=t.points,this.filtering=xe.Blended,this.rasterize()}clone(){return new Ch({points:this.points.map(t=>t.clone()),...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(t){if(this.points&&this.points.length){t.beginPath();const n=this.minPoint.negate(),o=this.points[0].add(n);t.moveTo(o.x,o.y),this.points.forEach(u=>{t.lineTo(u.x+n.x,u.y+n.y)}),t.lineTo(o.x,o.y),t.closePath(),this.color&&t.fill(),this.strokeColor&&t.stroke()}}}class v1{constructor(){this._queue=[]}get length(){return this._queue.length}enqueue(){const t=new jn;return this._queue.push(t),t.promise}dequeue(t){this._queue.shift().resolve(t)}}class y1{constructor(t){this._count=t,this._waitQueue=new v1}get count(){return this._count}get waiting(){return this._waitQueue.length}async enter(){return this._count!==0?(this._count--,Promise.resolve()):this._waitQueue.enqueue()}exit(t=1){if(t!==0){for(;t!==0&&this._waitQueue.length!==0;)this._waitQueue.dequeue(null),t--;this._count+=t}}}const vg="0.28.0";l()})();T.fWn;T.Ia8;T.rqv;T.hLI;T.yyv;T.tX5;var Xk=T.vtX;T.r7K;T.lCh;T.cE4;var Y_=T.fwF;T.sce;T.AQ6;T._c7;T.KUs;T.Ajp;T.dkO;var Yk=T.RDh;T._H9;T.mxs;T.OmD;var Zk=T.kBf;T.C4F;T.NQt;T.JjN;T.EK_;T.V1s;T.xHm;T.Xz7;T.Cdc;T.FKn;T.SUY;T.ab2;T.GfZ;T.YMS;T.oyv;T.aUb;T.SdD;T.JUv;T.jEj;T.TFq;T.HDU;T.R_y;T.ydN;T.t50;T.s$$;var Kk=T.v2G,Qk=T.Ilk;T.s9i;T.dxL;T.LLX;T.wA2;T.R_p;T.IQ$;T.I5F;T.X8$;T.FR6;T.U8o;T.kbG;T.iS_;T.cGG;T.RPN;T.skb;T.SLU;T.RdJ;T.cNu;T.gU7;T.LSk;T.Nmp;var qk=T.d1Y;T.xrL;T.sRW;T.cmV;T.qWz;T.N0Q;var Jk=T.q8b;T.ynB;T.jT9;T.wAz;var tI=T.D4V;T.NLr;T.N6H;T.W1A;T.JHW;T.ZZ$;T.v2K;T.pBf;T.vpe;T.GMl;T.zW2;T.B0K;T.Nv7;T.C_p;T.MUA;T.xqU;T.pTp;T.vUK;T.j9l;T.Zxw;T.v51;T.Hdx;T.Z$d;T.iqV;T.o$7;T.olM;T.Zm$;T.$QH;T.i78;T.nJg;T.h6u;T.hts;T.j88;T.VME;T.fy2;T.nt;T.Ukr;T.zsu;T.oA6;T.TVh;T.TwZ;T.GTT;T.xxj;T.XdK;T.Jmb;var nl=T.cXo;T.Dm5;T.IIB;T.ebW;T.zI0;T.LYD;T.cEG;T.SEl;T.t9V;T.ez5;T.N1d;var eI=T.R8U;T.SKZ;T.__J;T.RI$;T.x12;T.ccz;var nk=T.aNw;T.XrL;T.xwn;T.dNK;T.ini;T.YdH;T.F5T;T.y3G;T.l57;T.xn0;T.t2V;T.uxB;T.cpd;T.fiy;T.$XZ;T.UG6;T.uqK;T.STE;T.y$z;T.mAD;T.sOq;T.hUw;T._0G;T.Sqs;T.hpZ;T.Vol;T.vYX;var iI=T.wIZ;T.cBi;T.c30;T.MPV;T.RFv;T.Ux6;T.rxy;T.I$c;T.kfC;T.VjY;T.mgq;T.YVA;T.Kgp;T.HH$;T.M_d;T.rgh;T.Ra6;T.KhR;T.BS5;T.xhz;T.xOq;T.a9j;T.bHk;T.CgK;T.cuY;T.kvE;T.SBu;T.AE_;T.ctO;T.OLH;T.kky;T.nSF;T.zHn;T.zwx;T.AeJ;T.hLz;T.D9g;T.wA;T.jhr;T.GVs;T._zO;T.LXZ;T.w6$;T.mhV;T.MOD;T.kwd;T.Lmr;T.xsS;T.K5l;T.lLr;T.Z$r;T.IXb;T.SGH;T.SMj;T.L34;T.exe;var sI=T.bnF,nI=T.MFA;T.$uU;T.Sap;var Z_=T.jyi;T.E03;T.V6q;T.rg2;T.DVW;T.nVo;T.F6N;T.xP7;T.Odq;T.Zif;T.ZGJ;T.MJk;T.xvT;T.PHM;T.dpR;T.n9L;T.KwO;T.SxM;T.B7y;T.x7r;T.wx7;T.Uvn;T.OFT;T.xzN;T.CcZ;T.M5Z;T.ZrN;var rk=T.OWs;T.dF9;T.oZy;T.rD2;T.VHo;T.ohE;T.R$E;T.xQN;T.AdJ;T.q3I;T.Pab;T.uZ5;T.McK;T.F9c;T.k0b;T.hnT;T.RSJ;T.Mku;T.h90;T.rms;T.ErP;T.aVg;T.lPc;T.Z8E;T._N2;T.yFn;T.lNv;T.cu9;T.MZQ;T.FUM;T.BxR;T.vdf;T.iaL;T.w6H;T.Q4c;T.Xxe;T.Uxb;T.Yr5;var rI=T.Bhw;T.yOA;const ok="/2023/nene/assets/nene_idle-e442b347.png",ak="/2023/nene/assets/nene_jump-adeb89e1.png",lk="/2023/nene/assets/nene_running_1-941ed1a3.png",uk="/2023/nene/assets/nene_running_2-3639975d.png",us={neneIdle:new nl(ok),neneRun1:new nl(lk),neneRun2:new nl(uk),neneJump:new nl(ak)},hk={idleLeft:us.neneIdle.toSprite(),idleRight:new Z_({image:us.neneIdle,flipHorizontal:!0}),runLeft:new Y_({frames:[{graphic:us.neneRun1.toSprite(),duration:150},{graphic:us.neneRun2.toSprite(),duration:150}]}),runRight:new Y_({frames:[{graphic:us.neneRun1.toSprite(),duration:200},{graphic:us.neneRun2.toSprite(),duration:200}],flipHorizontal:!0}),jumpLeft:us.neneJump.toSprite(),jumpRight:new Z_({image:us.neneJump,flipHorizontal:!0})};for(const e of Object.values(hk))e.scale=new rk(.3,.3);const zu=new nk;zu.backgroundColor="transparent";zu.suppressPlayButton=!0;for(const e of Object.values(us))zu.addResource(e);const ck=zr(null),oI=zr(null),aI=zr(0),dk=zr([]),lI=zr("intro"),uI=zr(()=>{});function fk(){const e=["intro","messages","art","cake"];dk.set(e.map(i=>{const s=document.getElementById(i);return{section:i,left:s.offsetLeft}}))}const pk=(e,i)=>Math.floor(Math.random()*(i-e+1)+e),hI=e=>e[pk(0,e.length-1)];function gk(){const[e,i]=N.useState(0),[s,r]=N.useState(999),a=ik(ck),l=e>=s,h=()=>i(f=>f+1);return N.useEffect(()=>{const f=setTimeout(()=>{const p=document.querySelectorAll("img");r(p.length),p.forEach(m=>{m.onload=h,m.complete&&h()})},1e3);return()=>{clearTimeout(f),document.querySelectorAll("img").forEach(m=>{m.removeEventListener("load",h)})}},[]),N.useEffect(()=>{l&&a&&(a==null||a.start(zu),fk())},[e,a,l,s]),l?Tt.jsx(Tt.Fragment,{}):Tt.jsxs("div",{className:"fixed inset-0 z-50 bg-other flex flex-col justify-center items-center",children:[Tt.jsx("img",{src:"/logo.png",alt:"",className:"w-full max-w-[40%] mb-20"}),Tt.jsxs("h2",{className:"text-5xl text-white",children:[e,"/",s," resources loaded"]})]})}const mk=N.lazy(()=>FS(()=>import("./index-9b747c34.js"),["assets/index-9b747c34.js","assets/index-6cee73fd.css"]));function _k(){const{i18n:e}=tk(),i=P0();return N.useEffect(()=>{const s=localStorage.getItem("opt_lang");s&&e.changeLanguage(s.toLowerCase())},[]),Tt.jsxs("div",{className:"h-full",children:[Tt.jsx(YA,{mode:"wait",children:Tt.jsx(kS,{location:i,children:Tt.jsx(E0,{path:"/",element:Tt.jsx(vk,{Element:mk})})},i.pathname)}),Tt.jsx(gk,{}),Tt.jsx(N2,{})]})}function vk({Element:e}){return Tt.jsx(V_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut",duration:.5},className:"h-full",children:Tt.jsx(N.Suspense,{fallback:Tt.jsxs(Tt.Fragment,{children:[Tt.jsxs(V_.div,{className:"fixed inset-0 bg-paper flex justify-center items-center",children:[Tt.jsxs("svg",{"aria-hidden":"true",className:"w-24 h-24 text-white animate-spin fill-sky-400",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Tt.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),Tt.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),Tt.jsx("span",{className:"sr-only",children:"Loading..."})]}),Tt.jsx("div",{className:"h-screen"})]}),children:Tt.jsx(e,{})})})}function yk(){return Tt.jsx("div",{className:"-translate-x-full -translate-y-full translate-x-full sr-only"})}const xk={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,i){console&&console[e]&&console[e].apply(console,i)}};class ru{constructor(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(i,s)}init(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=s.prefix||"i18next:",this.logger=i||xk,this.options=s,this.debug=s.debug}log(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return this.forward(s,"log","",!0)}warn(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return this.forward(s,"warn","",!0)}error(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return this.forward(s,"error","")}deprecate(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return this.forward(s,"warn","WARNING DEPRECATED: ",!0)}forward(i,s,r,a){return a&&!this.debug?null:(typeof i[0]=="string"&&(i[0]=`${r}${this.prefix} ${i[0]}`),this.logger[s](i))}create(i){return new ru(this.logger,{prefix:`${this.prefix}:${i}:`,...this.options})}clone(i){return i=i||this.options,i.prefix=i.prefix||this.prefix,new ru(this.logger,i)}}var Ki=new ru;class Uu{constructor(){this.observers={}}on(i,s){return i.split(" ").forEach(r=>{this.observers[r]=this.observers[r]||[],this.observers[r].push(s)}),this}off(i,s){if(this.observers[i]){if(!s){delete this.observers[i];return}this.observers[i]=this.observers[i].filter(r=>r!==s)}}emit(i){for(var s=arguments.length,r=new Array(s>1?s-1:0),a=1;a<s;a++)r[a-1]=arguments[a];this.observers[i]&&[].concat(this.observers[i]).forEach(h=>{h(...r)}),this.observers["*"]&&[].concat(this.observers["*"]).forEach(h=>{h.apply(h,[i,...r])})}}function fo(){let e,i;const s=new Promise((r,a)=>{e=r,i=a});return s.resolve=e,s.reject=i,s}function K_(e){return e==null?"":""+e}function wk(e,i,s){e.forEach(r=>{i[r]&&(s[r]=i[r])})}function Hf(e,i,s){function r(h){return h&&h.indexOf("###")>-1?h.replace(/###/g,"."):h}function a(){return!e||typeof e=="string"}const l=typeof i!="string"?[].concat(i):i.split(".");for(;l.length>1;){if(a())return{};const h=r(l.shift());!e[h]&&s&&(e[h]=new s),Object.prototype.hasOwnProperty.call(e,h)?e=e[h]:e={}}return a()?{}:{obj:e,k:r(l.shift())}}function Q_(e,i,s){const{obj:r,k:a}=Hf(e,i,Object);r[a]=s}function Ck(e,i,s,r){const{obj:a,k:l}=Hf(e,i,Object);a[l]=a[l]||[],r&&(a[l]=a[l].concat(s)),r||a[l].push(s)}function ou(e,i){const{obj:s,k:r}=Hf(e,i);if(s)return s[r]}function bk(e,i,s){const r=ou(e,s);return r!==void 0?r:ou(i,s)}function Jx(e,i,s){for(const r in i)r!=="__proto__"&&r!=="constructor"&&(r in e?typeof e[r]=="string"||e[r]instanceof String||typeof i[r]=="string"||i[r]instanceof String?s&&(e[r]=i[r]):Jx(e[r],i[r],s):e[r]=i[r]);return e}function er(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Sk={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Pk(e){return typeof e=="string"?e.replace(/[&<>"'\/]/g,i=>Sk[i]):e}const Ek=[" ",",","?","!",";"];function Tk(e,i,s){i=i||"",s=s||"";const r=Ek.filter(h=>i.indexOf(h)<0&&s.indexOf(h)<0);if(r.length===0)return!0;const a=new RegExp(`(${r.map(h=>h==="?"?"\\?":h).join("|")})`);let l=!a.test(e);if(!l){const h=e.indexOf(s);h>0&&!a.test(e.substring(0,h))&&(l=!0)}return l}function au(e,i){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[i])return e[i];const r=i.split(s);let a=e;for(let l=0;l<r.length;++l){if(!a||typeof a[r[l]]=="string"&&l+1<r.length)return;if(a[r[l]]===void 0){let h=2,f=r.slice(l,l+h).join(s),p=a[f];for(;p===void 0&&r.length>l+h;)h++,f=r.slice(l,l+h).join(s),p=a[f];if(p===void 0)return;if(p===null)return null;if(i.endsWith(f)){if(typeof p=="string")return p;if(f&&typeof p[f]=="string")return p[f]}const m=r.slice(l+h).join(s);return m?au(p,m,s):void 0}a=a[r[l]]}return a}function Pd(e){return e&&e.indexOf("_")>0?e.replace("_","-"):e}class q_ extends Uu{constructor(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=i||{},this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}removeNamespaces(i){const s=this.options.ns.indexOf(i);s>-1&&this.options.ns.splice(s,1)}getResource(i,s,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,h=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let f=[i,s];r&&typeof r!="string"&&(f=f.concat(r)),r&&typeof r=="string"&&(f=f.concat(l?r.split(l):r)),i.indexOf(".")>-1&&(f=i.split("."));const p=ou(this.data,f);return p||!h||typeof r!="string"?p:au(this.data&&this.data[i]&&this.data[i][s],r,l)}addResource(i,s,r,a){let l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const h=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator;let f=[i,s];r&&(f=f.concat(h?r.split(h):r)),i.indexOf(".")>-1&&(f=i.split("."),a=s,s=f[1]),this.addNamespaces(s),Q_(this.data,f,a),l.silent||this.emit("added",i,s,r,a)}addResources(i,s,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const l in r)(typeof r[l]=="string"||Object.prototype.toString.apply(r[l])==="[object Array]")&&this.addResource(i,s,l,r[l],{silent:!0});a.silent||this.emit("added",i,s,r)}addResourceBundle(i,s,r,a,l){let h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},f=[i,s];i.indexOf(".")>-1&&(f=i.split("."),a=r,r=s,s=f[1]),this.addNamespaces(s);let p=ou(this.data,f)||{};a?Jx(p,r,l):p={...p,...r},Q_(this.data,f,p),h.silent||this.emit("added",i,s,r)}removeResourceBundle(i,s){this.hasResourceBundle(i,s)&&delete this.data[i][s],this.removeNamespaces(s),this.emit("removed",i,s)}hasResourceBundle(i,s){return this.getResource(i,s)!==void 0}getResourceBundle(i,s){return s||(s=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(i,s)}:this.getResource(i,s)}getDataByLanguage(i){return this.data[i]}hasLanguageSomeTranslations(i){const s=this.getDataByLanguage(i);return!!(s&&Object.keys(s)||[]).find(a=>s[a]&&Object.keys(s[a]).length>0)}toJSON(){return this.data}}var tw={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,i,s,r,a){return e.forEach(l=>{this.processors[l]&&(i=this.processors[l].process(i,s,r,a))}),i}};const J_={};class lu extends Uu{constructor(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),wk(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],i,this),this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ki.create("translator")}changeLanguage(i){i&&(this.language=i)}exists(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(i==null)return!1;const r=this.resolve(i,s);return r&&r.res!==void 0}extractFromKey(i,s){let r=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let l=s.ns||this.options.defaultNS||[];const h=r&&i.indexOf(r)>-1,f=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!Tk(i,r,a);if(h&&!f){const p=i.match(this.interpolator.nestingRegexp);if(p&&p.length>0)return{key:i,namespaces:l};const m=i.split(r);(r!==a||r===a&&this.options.ns.indexOf(m[0])>-1)&&(l=m.shift()),i=m.join(a)}return typeof l=="string"&&(l=[l]),{key:i,namespaces:l}}translate(i,s,r){if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),i==null)return"";Array.isArray(i)||(i=[String(i)]);const a=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,l=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:h,namespaces:f}=this.extractFromKey(i[i.length-1],s),p=f[f.length-1],m=s.lng||this.language,v=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(m&&m.toLowerCase()==="cimode"){if(v){const D=s.nsSeparator||this.options.nsSeparator;return a?{res:`${p}${D}${h}`,usedKey:h,exactUsedKey:h,usedLng:m,usedNS:p}:`${p}${D}${h}`}return a?{res:h,usedKey:h,exactUsedKey:h,usedLng:m,usedNS:p}:h}const w=this.resolve(i,s);let x=w&&w.res;const b=w&&w.usedKey||h,E=w&&w.exactUsedKey||h,R=Object.prototype.toString.apply(x),O=["[object Number]","[object Function]","[object RegExp]"],A=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,P=!this.i18nFormat||this.i18nFormat.handleAsObject;if(P&&x&&(typeof x!="string"&&typeof x!="boolean"&&typeof x!="number")&&O.indexOf(R)<0&&!(typeof A=="string"&&R==="[object Array]")){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const D=this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,x,{...s,ns:f}):`key '${h} (${this.language})' returned an object instead of string.`;return a?(w.res=D,w):D}if(l){const D=R==="[object Array]",B=D?[]:{},H=D?E:b;for(const $ in x)if(Object.prototype.hasOwnProperty.call(x,$)){const G=`${H}${l}${$}`;B[$]=this.translate(G,{...s,joinArrays:!1,ns:f}),B[$]===G&&(B[$]=x[$])}x=B}}else if(P&&typeof A=="string"&&R==="[object Array]")x=x.join(A),x&&(x=this.extendTranslation(x,i,s,r));else{let D=!1,B=!1;const H=s.count!==void 0&&typeof s.count!="string",$=lu.hasDefaultValue(s),G=H?this.pluralResolver.getSuffix(m,s.count,s):"",rt=s.ordinal&&H?this.pluralResolver.getSuffix(m,s.count,{ordinal:!1}):"",it=s[`defaultValue${G}`]||s[`defaultValue${rt}`]||s.defaultValue;!this.isValidLookup(x)&&$&&(D=!0,x=it),this.isValidLookup(x)||(B=!0,x=h);const _t=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&B?void 0:x,bt=$&&it!==x&&this.options.updateMissing;if(B||D||bt){if(this.logger.log(bt?"updateKey":"missingKey",m,p,h,bt?it:x),l){const It=this.resolve(h,{...s,keySeparator:!1});It&&It.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ft=[];const vt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&vt&&vt[0])for(let It=0;It<vt.length;It++)ft.push(vt[It]);else this.options.saveMissingTo==="all"?ft=this.languageUtils.toResolveHierarchy(s.lng||this.language):ft.push(s.lng||this.language);const St=(It,J,ot)=>{const ht=$&&ot!==x?ot:_t;this.options.missingKeyHandler?this.options.missingKeyHandler(It,p,J,ht,bt,s):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(It,p,J,ht,bt,s),this.emit("missingKey",It,p,J,x)};this.options.saveMissing&&(this.options.saveMissingPlurals&&H?ft.forEach(It=>{this.pluralResolver.getSuffixes(It,s).forEach(J=>{St([It],h+J,s[`defaultValue${J}`]||it)})}):St(ft,h,it))}x=this.extendTranslation(x,i,s,w,r),B&&x===h&&this.options.appendNamespaceToMissingKey&&(x=`${p}:${h}`),(B||D)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?x=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${p}:${h}`:h,D?x:void 0):x=this.options.parseMissingKeyHandler(x))}return a?(w.res=x,w):x}extendTranslation(i,s,r,a,l){var h=this;if(this.i18nFormat&&this.i18nFormat.parse)i=this.i18nFormat.parse(i,{...this.options.interpolation.defaultVariables,...r},a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const m=typeof i=="string"&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let v;if(m){const x=i.match(this.interpolator.nestingRegexp);v=x&&x.length}let w=r.replace&&typeof r.replace!="string"?r.replace:r;if(this.options.interpolation.defaultVariables&&(w={...this.options.interpolation.defaultVariables,...w}),i=this.interpolator.interpolate(i,w,r.lng||this.language,r),m){const x=i.match(this.interpolator.nestingRegexp),b=x&&x.length;v<b&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&a&&a.res&&(r.lng=a.usedLng),r.nest!==!1&&(i=this.interpolator.nest(i,function(){for(var x=arguments.length,b=new Array(x),E=0;E<x;E++)b[E]=arguments[E];return l&&l[0]===b[0]&&!r.context?(h.logger.warn(`It seems you are nesting recursively key: ${b[0]} in key: ${s[0]}`),null):h.translate(...b,s)},r)),r.interpolation&&this.interpolator.reset()}const f=r.postProcess||this.options.postProcess,p=typeof f=="string"?[f]:f;return i!=null&&p&&p.length&&r.applyPostProcessor!==!1&&(i=tw.handle(p,i,s,this.options&&this.options.postProcessPassResolved?{i18nResolved:a,...r}:r,this)),i}resolve(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,a,l,h,f;return typeof i=="string"&&(i=[i]),i.forEach(p=>{if(this.isValidLookup(r))return;const m=this.extractFromKey(p,s),v=m.key;a=v;let w=m.namespaces;this.options.fallbackNS&&(w=w.concat(this.options.fallbackNS));const x=s.count!==void 0&&typeof s.count!="string",b=x&&!s.ordinal&&s.count===0&&this.pluralResolver.shouldUseIntlApi(),E=s.context!==void 0&&(typeof s.context=="string"||typeof s.context=="number")&&s.context!=="",R=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);w.forEach(O=>{this.isValidLookup(r)||(f=O,!J_[`${R[0]}-${O}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(f)&&(J_[`${R[0]}-${O}`]=!0,this.logger.warn(`key "${a}" for languages "${R.join(", ")}" won't get resolved as namespace "${f}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),R.forEach(A=>{if(this.isValidLookup(r))return;h=A;const P=[v];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(P,v,A,O,s);else{let D;x&&(D=this.pluralResolver.getSuffix(A,s.count,s));const B=`${this.options.pluralSeparator}zero`,H=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(x&&(P.push(v+D),s.ordinal&&D.indexOf(H)===0&&P.push(v+D.replace(H,this.options.pluralSeparator)),b&&P.push(v+B)),E){const $=`${v}${this.options.contextSeparator}${s.context}`;P.push($),x&&(P.push($+D),s.ordinal&&D.indexOf(H)===0&&P.push($+D.replace(H,this.options.pluralSeparator)),b&&P.push($+B))}}let k;for(;k=P.pop();)this.isValidLookup(r)||(l=k,r=this.getResource(A,O,k,s))}))})}),{res:r,usedKey:a,exactUsedKey:l,usedLng:h,usedNS:f}}isValidLookup(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}getResource(i,s,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(i,s,r,a):this.resourceStore.getResource(i,s,r,a)}static hasDefaultValue(i){const s="defaultValue";for(const r in i)if(Object.prototype.hasOwnProperty.call(i,r)&&s===r.substring(0,s.length)&&i[r]!==void 0)return!0;return!1}}function lc(e){return e.charAt(0).toUpperCase()+e.slice(1)}class tv{constructor(i){this.options=i,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ki.create("languageUtils")}getScriptPartFromCode(i){if(i=Pd(i),!i||i.indexOf("-")<0)return null;const s=i.split("-");return s.length===2||(s.pop(),s[s.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(s.join("-"))}getLanguagePartFromCode(i){if(i=Pd(i),!i||i.indexOf("-")<0)return i;const s=i.split("-");return this.formatLanguageCode(s[0])}formatLanguageCode(i){if(typeof i=="string"&&i.indexOf("-")>-1){const s=["hans","hant","latn","cyrl","cans","mong","arab"];let r=i.split("-");return this.options.lowerCaseLng?r=r.map(a=>a.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),s.indexOf(r[1].toLowerCase())>-1&&(r[1]=lc(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),s.indexOf(r[1].toLowerCase())>-1&&(r[1]=lc(r[1].toLowerCase())),s.indexOf(r[2].toLowerCase())>-1&&(r[2]=lc(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?i.toLowerCase():i}isSupportedCode(i){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(i=this.getLanguagePartFromCode(i)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(i)>-1}getBestMatchFromCodes(i){if(!i)return null;let s;return i.forEach(r=>{if(s)return;const a=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(a))&&(s=a)}),!s&&this.options.supportedLngs&&i.forEach(r=>{if(s)return;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return s=a;s=this.options.supportedLngs.find(l=>{if(l===a)return l;if(!(l.indexOf("-")<0&&a.indexOf("-")<0)&&l.indexOf(a)===0)return l})}),s||(s=this.getFallbackCodes(this.options.fallbackLng)[0]),s}getFallbackCodes(i,s){if(!i)return[];if(typeof i=="function"&&(i=i(s)),typeof i=="string"&&(i=[i]),Object.prototype.toString.apply(i)==="[object Array]")return i;if(!s)return i.default||[];let r=i[s];return r||(r=i[this.getScriptPartFromCode(s)]),r||(r=i[this.formatLanguageCode(s)]),r||(r=i[this.getLanguagePartFromCode(s)]),r||(r=i.default),r||[]}toResolveHierarchy(i,s){const r=this.getFallbackCodes(s||this.options.fallbackLng||[],i),a=[],l=h=>{h&&(this.isSupportedCode(h)?a.push(h):this.logger.warn(`rejecting language code not found in supportedLngs: ${h}`))};return typeof i=="string"&&(i.indexOf("-")>-1||i.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&l(this.formatLanguageCode(i)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&l(this.getScriptPartFromCode(i)),this.options.load!=="currentOnly"&&l(this.getLanguagePartFromCode(i))):typeof i=="string"&&l(this.formatLanguageCode(i)),r.forEach(h=>{a.indexOf(h)<0&&l(this.formatLanguageCode(h))}),a}}let Ak=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],kk={1:function(e){return+(e>1)},2:function(e){return+(e!=1)},3:function(e){return 0},4:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},5:function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},6:function(e){return e==1?0:e>=2&&e<=4?1:2},7:function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},8:function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3},9:function(e){return+(e>=2)},10:function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4},11:function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(e!==0)},14:function(e){return e==1?0:e==2?1:e==3?2:3},15:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2},16:function(e){return e%10==1&&e%100!=11?0:e!==0?1:2},17:function(e){return e==1||e%10==1&&e%100!=11?0:1},18:function(e){return e==0?0:e==1?1:2},19:function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3},20:function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2},21:function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0},22:function(e){return e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3}};const Ik=["v1","v2","v3"],Rk=["v4"],ev={zero:0,one:1,two:2,few:3,many:4,other:5};function Dk(){const e={};return Ak.forEach(i=>{i.lngs.forEach(s=>{e[s]={numbers:i.nr,plurals:kk[i.fc]}})}),e}class Mk{constructor(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=i,this.options=s,this.logger=Ki.create("pluralResolver"),(!this.options.compatibilityJSON||Rk.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Dk()}addRule(i,s){this.rules[i]=s}getRule(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(Pd(i),{type:s.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[i]||this.rules[this.languageUtils.getLanguagePartFromCode(i)]}needsPlural(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(i,s);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(i,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(i,r).map(a=>`${s}${a}`)}getSuffixes(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(i,s);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((a,l)=>ev[a]-ev[l]).map(a=>`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${a}`):r.numbers.map(a=>this.getSuffix(i,a,s)):[]}getSuffix(i,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=this.getRule(i,r);return a?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a.select(s)}`:this.getSuffixRetroCompatible(a,s):(this.logger.warn(`no plural rule found for: ${i}`),"")}getSuffixRetroCompatible(i,s){const r=i.noAbs?i.plurals(s):i.plurals(Math.abs(s));let a=i.numbers[r];this.options.simplifyPluralSuffix&&i.numbers.length===2&&i.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));const l=()=>this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString();return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?`_plural_${a.toString()}`:l():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&i.numbers.length===2&&i.numbers[0]===1?l():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!Ik.includes(this.options.compatibilityJSON)}}function iv(e,i,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,l=bk(e,i,s);return!l&&a&&typeof s=="string"&&(l=au(e,s,r),l===void 0&&(l=au(i,s,r))),l}class Fk{constructor(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Ki.create("interpolator"),this.options=i,this.format=i.interpolation&&i.interpolation.format||(s=>s),this.init(i)}init(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};i.interpolation||(i.interpolation={escapeValue:!0});const s=i.interpolation;this.escape=s.escape!==void 0?s.escape:Pk,this.escapeValue=s.escapeValue!==void 0?s.escapeValue:!0,this.useRawValueToEscape=s.useRawValueToEscape!==void 0?s.useRawValueToEscape:!1,this.prefix=s.prefix?er(s.prefix):s.prefixEscaped||"{{",this.suffix=s.suffix?er(s.suffix):s.suffixEscaped||"}}",this.formatSeparator=s.formatSeparator?s.formatSeparator:s.formatSeparator||",",this.unescapePrefix=s.unescapeSuffix?"":s.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":s.unescapeSuffix||"",this.nestingPrefix=s.nestingPrefix?er(s.nestingPrefix):s.nestingPrefixEscaped||er("$t("),this.nestingSuffix=s.nestingSuffix?er(s.nestingSuffix):s.nestingSuffixEscaped||er(")"),this.nestingOptionsSeparator=s.nestingOptionsSeparator?s.nestingOptionsSeparator:s.nestingOptionsSeparator||",",this.maxReplaces=s.maxReplaces?s.maxReplaces:1e3,this.alwaysFormat=s.alwaysFormat!==void 0?s.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const i=`${this.prefix}(.+?)${this.suffix}`;this.regexp=new RegExp(i,"g");const s=`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`;this.regexpUnescape=new RegExp(s,"g");const r=`${this.nestingPrefix}(.+?)${this.nestingSuffix}`;this.nestingRegexp=new RegExp(r,"g")}interpolate(i,s,r,a){let l,h,f;const p=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function m(E){return E.replace(/\$/g,"$$$$")}const v=E=>{if(E.indexOf(this.formatSeparator)<0){const P=iv(s,p,E,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(P,void 0,r,{...a,...s,interpolationkey:E}):P}const R=E.split(this.formatSeparator),O=R.shift().trim(),A=R.join(this.formatSeparator).trim();return this.format(iv(s,p,O,this.options.keySeparator,this.options.ignoreJSONStructure),A,r,{...a,...s,interpolationkey:O})};this.resetRegExp();const w=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,x=a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:E=>m(E)},{regex:this.regexp,safeValue:E=>this.escapeValue?m(this.escape(E)):m(E)}].forEach(E=>{for(f=0;l=E.regex.exec(i);){const R=l[1].trim();if(h=v(R),h===void 0)if(typeof w=="function"){const A=w(i,l,a);h=typeof A=="string"?A:""}else if(a&&Object.prototype.hasOwnProperty.call(a,R))h="";else if(x){h=l[0];continue}else this.logger.warn(`missed to pass in variable ${R} for interpolating ${i}`),h="";else typeof h!="string"&&!this.useRawValueToEscape&&(h=K_(h));const O=E.safeValue(h);if(i=i.replace(l[0],O),x?(E.regex.lastIndex+=h.length,E.regex.lastIndex-=l[0].length):E.regex.lastIndex=0,f++,f>=this.maxReplaces)break}}),i}nest(i,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,l,h;function f(p,m){const v=this.nestingOptionsSeparator;if(p.indexOf(v)<0)return p;const w=p.split(new RegExp(`${v}[ ]*{`));let x=`{${w[1]}`;p=w[0],x=this.interpolate(x,h);const b=x.match(/'/g),E=x.match(/"/g);(b&&b.length%2===0&&!E||E.length%2!==0)&&(x=x.replace(/'/g,'"'));try{h=JSON.parse(x),m&&(h={...m,...h})}catch(R){return this.logger.warn(`failed parsing options string in nesting for key ${p}`,R),`${p}${v}${x}`}return delete h.defaultValue,p}for(;a=this.nestingRegexp.exec(i);){let p=[];h={...r},h=h.replace&&typeof h.replace!="string"?h.replace:h,h.applyPostProcessor=!1,delete h.defaultValue;let m=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){const v=a[1].split(this.formatSeparator).map(w=>w.trim());a[1]=v.shift(),p=v,m=!0}if(l=s(f.call(this,a[1].trim(),h),h),l&&a[0]===i&&typeof l!="string")return l;typeof l!="string"&&(l=K_(l)),l||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${i}`),l=""),m&&(l=p.reduce((v,w)=>this.format(v,w,r.lng,{...r,interpolationkey:a[1].trim()}),l.trim())),i=i.replace(a[0],l),this.regexp.lastIndex=0}return i}}function Lk(e){let i=e.toLowerCase().trim();const s={};if(e.indexOf("(")>-1){const r=e.split("(");i=r[0].toLowerCase().trim();const a=r[1].substring(0,r[1].length-1);i==="currency"&&a.indexOf(":")<0?s.currency||(s.currency=a.trim()):i==="relativetime"&&a.indexOf(":")<0?s.range||(s.range=a.trim()):a.split(";").forEach(h=>{if(!h)return;const[f,...p]=h.split(":"),m=p.join(":").trim().replace(/^'+|'+$/g,"");s[f.trim()]||(s[f.trim()]=m),m==="false"&&(s[f.trim()]=!1),m==="true"&&(s[f.trim()]=!0),isNaN(m)||(s[f.trim()]=parseInt(m,10))})}return{formatName:i,formatOptions:s}}function ir(e){const i={};return function(r,a,l){const h=a+JSON.stringify(l);let f=i[h];return f||(f=e(a,l),i[h]=f),f(r)}}class Bk{constructor(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Ki.create("formatter"),this.options=i,this.formats={number:ir((s,r)=>{const a=new Intl.NumberFormat(s,{...r});return l=>a.format(l)}),currency:ir((s,r)=>{const a=new Intl.NumberFormat(s,{...r,style:"currency"});return l=>a.format(l)}),datetime:ir((s,r)=>{const a=new Intl.DateTimeFormat(s,{...r});return l=>a.format(l)}),relativetime:ir((s,r)=>{const a=new Intl.RelativeTimeFormat(s,{...r});return l=>a.format(l,r.range||"day")}),list:ir((s,r)=>{const a=new Intl.ListFormat(s,{...r});return l=>a.format(l)})},this.init(i)}init(i){const r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}add(i,s){this.formats[i.toLowerCase().trim()]=s}addCached(i,s){this.formats[i.toLowerCase().trim()]=ir(s)}format(i,s,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return s.split(this.formatSeparator).reduce((f,p)=>{const{formatName:m,formatOptions:v}=Lk(p);if(this.formats[m]){let w=f;try{const x=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},b=x.locale||x.lng||a.locale||a.lng||r;w=this.formats[m](f,b,{...v,...a,...x})}catch(x){this.logger.warn(x)}return w}else this.logger.warn(`there was no format function for ${m}`);return f},i)}}function Ok(e,i){e.pending[i]!==void 0&&(delete e.pending[i],e.pendingCount--)}class Nk extends Uu{constructor(i,s,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=i,this.store=s,this.services=r,this.languageUtils=r.languageUtils,this.options=a,this.logger=Ki.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,a.backend,a)}queueLoad(i,s,r,a){const l={},h={},f={},p={};return i.forEach(m=>{let v=!0;s.forEach(w=>{const x=`${m}|${w}`;!r.reload&&this.store.hasResourceBundle(m,w)?this.state[x]=2:this.state[x]<0||(this.state[x]===1?h[x]===void 0&&(h[x]=!0):(this.state[x]=1,v=!1,h[x]===void 0&&(h[x]=!0),l[x]===void 0&&(l[x]=!0),p[w]===void 0&&(p[w]=!0)))}),v||(f[m]=!0)}),(Object.keys(l).length||Object.keys(h).length)&&this.queue.push({pending:h,pendingCount:Object.keys(h).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(l),pending:Object.keys(h),toLoadLanguages:Object.keys(f),toLoadNamespaces:Object.keys(p)}}loaded(i,s,r){const a=i.split("|"),l=a[0],h=a[1];s&&this.emit("failedLoading",l,h,s),r&&this.store.addResourceBundle(l,h,r),this.state[i]=s?-1:2;const f={};this.queue.forEach(p=>{Ck(p.loaded,[l],h),Ok(p,i),s&&p.errors.push(s),p.pendingCount===0&&!p.done&&(Object.keys(p.loaded).forEach(m=>{f[m]||(f[m]={});const v=p.loaded[m];v.length&&v.forEach(w=>{f[m][w]===void 0&&(f[m][w]=!0)})}),p.done=!0,p.errors.length?p.callback(p.errors):p.callback())}),this.emit("loaded",f),this.queue=this.queue.filter(p=>!p.done)}read(i,s,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,h=arguments.length>5?arguments[5]:void 0;if(!i.length)return h(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:i,ns:s,fcName:r,tried:a,wait:l,callback:h});return}this.readingCalls++;const f=(m,v)=>{if(this.readingCalls--,this.waitingReads.length>0){const w=this.waitingReads.shift();this.read(w.lng,w.ns,w.fcName,w.tried,w.wait,w.callback)}if(m&&v&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,i,s,r,a+1,l*2,h)},l);return}h(m,v)},p=this.backend[r].bind(this.backend);if(p.length===2){try{const m=p(i,s);m&&typeof m.then=="function"?m.then(v=>f(null,v)).catch(f):f(null,m)}catch(m){f(m)}return}return p(i,s,f)}prepareLoading(i,s){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();typeof i=="string"&&(i=this.languageUtils.toResolveHierarchy(i)),typeof s=="string"&&(s=[s]);const l=this.queueLoad(i,s,r,a);if(!l.toLoad.length)return l.pending.length||a(),null;l.toLoad.forEach(h=>{this.loadOne(h)})}load(i,s,r){this.prepareLoading(i,s,{},r)}reload(i,s,r){this.prepareLoading(i,s,{reload:!0},r)}loadOne(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=i.split("|"),a=r[0],l=r[1];this.read(a,l,"read",void 0,void 0,(h,f)=>{h&&this.logger.warn(`${s}loading namespace ${l} for language ${a} failed`,h),!h&&f&&this.logger.log(`${s}loaded namespace ${l} for language ${a}`,f),this.loaded(i,h,f)})}saveMissing(i,s,r,a,l){let h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(s)){this.logger.warn(`did not save key "${r}" as the namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const p={...h,isUpdate:l},m=this.backend.create.bind(this.backend);if(m.length<6)try{let v;m.length===5?v=m(i,s,r,a,p):v=m(i,s,r,a),v&&typeof v.then=="function"?v.then(w=>f(null,w)).catch(f):f(null,v)}catch(v){f(v)}else m(i,s,r,a,f,p)}!i||!i[0]||this.store.addResource(i[0],s,r,a)}}}function sv(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(i){let s={};if(typeof i[1]=="object"&&(s=i[1]),typeof i[1]=="string"&&(s.defaultValue=i[1]),typeof i[2]=="string"&&(s.tDescription=i[2]),typeof i[2]=="object"||typeof i[3]=="object"){const r=i[3]||i[2];Object.keys(r).forEach(a=>{s[a]=r[a]})}return s},interpolation:{escapeValue:!0,format:(e,i,s,r)=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function nv(e){return typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function rl(){}function zk(e){Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(s=>{typeof e[s]=="function"&&(e[s]=e[s].bind(e))})}class Jo extends Uu{constructor(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(super(),this.options=nv(i),this.services={},this.logger=Ki,this.modules={external:[]},zk(this),s&&!this.isInitialized&&!i.isClone){if(!this.options.initImmediate)return this.init(i,s),this;setTimeout(()=>{this.init(i,s)},0)}}init(){var i=this;let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;typeof s=="function"&&(r=s,s={}),!s.defaultNS&&s.defaultNS!==!1&&s.ns&&(typeof s.ns=="string"?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));const a=sv();this.options={...a,...this.options,...nv(s)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...a.interpolation,...this.options.interpolation}),s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);function l(v){return v?typeof v=="function"?new v:v:null}if(!this.options.isClone){this.modules.logger?Ki.init(l(this.modules.logger),this.options):Ki.init(null,this.options);let v;this.modules.formatter?v=this.modules.formatter:typeof Intl<"u"&&(v=Bk);const w=new tv(this.options);this.store=new q_(this.options.resources,this.options);const x=this.services;x.logger=Ki,x.resourceStore=this.store,x.languageUtils=w,x.pluralResolver=new Mk(w,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),v&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(x.formatter=l(v),x.formatter.init(x,this.options),this.options.interpolation.format=x.formatter.format.bind(x.formatter)),x.interpolator=new Fk(this.options),x.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},x.backendConnector=new Nk(l(this.modules.backend),x.resourceStore,x,this.options),x.backendConnector.on("*",function(b){for(var E=arguments.length,R=new Array(E>1?E-1:0),O=1;O<E;O++)R[O-1]=arguments[O];i.emit(b,...R)}),this.modules.languageDetector&&(x.languageDetector=l(this.modules.languageDetector),x.languageDetector.init&&x.languageDetector.init(x,this.options.detection,this.options)),this.modules.i18nFormat&&(x.i18nFormat=l(this.modules.i18nFormat),x.i18nFormat.init&&x.i18nFormat.init(this)),this.translator=new lu(this.services,this.options),this.translator.on("*",function(b){for(var E=arguments.length,R=new Array(E>1?E-1:0),O=1;O<E;O++)R[O-1]=arguments[O];i.emit(b,...R)}),this.modules.external.forEach(b=>{b.init&&b.init(this)})}if(this.format=this.options.interpolation.format,r||(r=rl),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const v=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);v.length>0&&v[0]!=="dev"&&(this.options.lng=v[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(v=>{this[v]=function(){return i.store[v](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(v=>{this[v]=function(){return i.store[v](...arguments),i}});const p=fo(),m=()=>{const v=(w,x)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),p.resolve(x),r(w,x)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return v(null,this.t.bind(this));this.changeLanguage(this.options.lng,v)};return this.options.resources||!this.options.initImmediate?m():setTimeout(m,0),p}loadResources(i){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rl;const a=typeof i=="string"?i:this.language;if(typeof i=="function"&&(r=i),!this.options.resources||this.options.partialBundledLanguages){if(a&&a.toLowerCase()==="cimode")return r();const l=[],h=f=>{if(!f)return;this.services.languageUtils.toResolveHierarchy(f).forEach(m=>{l.indexOf(m)<0&&l.push(m)})};a?h(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(p=>h(p)),this.options.preload&&this.options.preload.forEach(f=>h(f)),this.services.backendConnector.load(l,this.options.ns,f=>{!f&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(f)})}else r(null)}reloadResources(i,s,r){const a=fo();return i||(i=this.languages),s||(s=this.options.ns),r||(r=rl),this.services.backendConnector.reload(i,s,l=>{a.resolve(),r(l)}),a}use(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&tw.addPostProcessor(i),i.type==="formatter"&&(this.modules.formatter=i),i.type==="3rdParty"&&this.modules.external.push(i),this}setResolvedLanguage(i){if(!(!i||!this.languages)&&!(["cimode","dev"].indexOf(i)>-1))for(let s=0;s<this.languages.length;s++){const r=this.languages[s];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(i,s){var r=this;this.isLanguageChangingTo=i;const a=fo();this.emit("languageChanging",i);const l=p=>{this.language=p,this.languages=this.services.languageUtils.toResolveHierarchy(p),this.resolvedLanguage=void 0,this.setResolvedLanguage(p)},h=(p,m)=>{m?(l(m),this.translator.changeLanguage(m),this.isLanguageChangingTo=void 0,this.emit("languageChanged",m),this.logger.log("languageChanged",m)):this.isLanguageChangingTo=void 0,a.resolve(function(){return r.t(...arguments)}),s&&s(p,function(){return r.t(...arguments)})},f=p=>{!i&&!p&&this.services.languageDetector&&(p=[]);const m=typeof p=="string"?p:this.services.languageUtils.getBestMatchFromCodes(p);m&&(this.language||l(m),this.translator.language||this.translator.changeLanguage(m),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(m)),this.loadResources(m,v=>{h(v,m)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?f(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(f):this.services.languageDetector.detect(f):f(i),a}getFixedT(i,s,r){var a=this;const l=function(h,f){let p;if(typeof f!="object"){for(var m=arguments.length,v=new Array(m>2?m-2:0),w=2;w<m;w++)v[w-2]=arguments[w];p=a.options.overloadTranslationOptionHandler([h,f].concat(v))}else p={...f};p.lng=p.lng||l.lng,p.lngs=p.lngs||l.lngs,p.ns=p.ns||l.ns,p.keyPrefix=p.keyPrefix||r||l.keyPrefix;const x=a.options.keySeparator||".";let b;return p.keyPrefix&&Array.isArray(h)?b=h.map(E=>`${p.keyPrefix}${x}${E}`):b=p.keyPrefix?`${p.keyPrefix}${x}${h}`:h,a.t(b,p)};return typeof i=="string"?l.lng=i:l.lngs=i,l.ns=s,l.keyPrefix=r,l}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(i){this.options.defaultNS=i}hasLoadedNamespace(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=s.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const h=(f,p)=>{const m=this.services.backendConnector.state[`${f}|${p}`];return m===-1||m===2};if(s.precheck){const f=s.precheck(this,h);if(f!==void 0)return f}return!!(this.hasResourceBundle(r,i)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||h(r,i)&&(!a||h(l,i)))}loadNamespaces(i,s){const r=fo();return this.options.ns?(typeof i=="string"&&(i=[i]),i.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{r.resolve(),s&&s(a)}),r):(s&&s(),Promise.resolve())}loadLanguages(i,s){const r=fo();typeof i=="string"&&(i=[i]);const a=this.options.preload||[],l=i.filter(h=>a.indexOf(h)<0);return l.length?(this.options.preload=a.concat(l),this.loadResources(h=>{r.resolve(),s&&s(h)}),r):(s&&s(),Promise.resolve())}dir(i){if(i||(i=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!i)return"rtl";const s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new tv(sv());return s.indexOf(r.getLanguagePartFromCode(i))>-1||i.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;return new Jo(i,s)}cloneInstance(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rl;const r=i.forkResourceStore;r&&delete i.forkResourceStore;const a={...this.options,...i,isClone:!0},l=new Jo(a);return(i.debug!==void 0||i.prefix!==void 0)&&(l.logger=l.logger.clone(i)),["store","services","language"].forEach(f=>{l[f]=this[f]}),l.services={...this.services},l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},r&&(l.store=new q_(this.store.data,a),l.services.resourceStore=l.store),l.translator=new lu(l.services,a),l.translator.on("*",function(f){for(var p=arguments.length,m=new Array(p>1?p-1:0),v=1;v<p;v++)m[v-1]=arguments[v];l.emit(f,...m)}),l.init(a,s),l.translator.options=a,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ee=Jo.createInstance();Ee.createInstance=Jo.createInstance;Ee.createInstance;Ee.dir;Ee.init;Ee.loadResources;Ee.reloadResources;Ee.use;Ee.changeLanguage;Ee.getFixedT;Ee.t;Ee.exists;Ee.setDefaultNamespace;Ee.hasLoadedNamespace;Ee.loadNamespaces;Ee.loadLanguages;const Uk={en:{translation:{nav:{intro:"Intro",messages:"Messages",art:"Art",cake:"Cake",credits:"Credits",langChange:"Language changed to English"},credits:{check:"Also check out",nepolabo:"Nepolabo 2023 Anniversary",lamy:"Lamy Anniversary"}}},jp:{translation:{nav:{intro:"ご説明",messages:"メッセージ",art:"イラスト",cake:"ケーキ",credits:"クレジット",langChange:"言語を日本語に設定しました"},credits:{check:"こちらもチェックしてね～",nepolabo:"ねぽらぼ周年記念２０２３",lamy:"ラミィ３周年記念"}}}};Ee.use(K2).init({resources:Uk,lng:"jp",interpolation:{escapeValue:!1}});const Vk="/2023/nene/assets/artlogo-482f588e.png",jk="/2023/nene/assets/cakelogo-cc662378.png",Hk="/2023/nene/assets/logo2-9d3a3df4.png",$k="/2023/nene/assets/messageslogo-6ebe3700.png";uc.createRoot(document.getElementById("root")).render(Tt.jsx(hu.StrictMode,{children:Tt.jsxs(RS,{basename:"/2023/nene",children:[Tt.jsx(_k,{}),Tt.jsx(yk,{}),Tt.jsx("img",{src:Hk,className:"sr-only",alt:""}),Tt.jsx("img",{src:$k,className:"sr-only",alt:""}),Tt.jsx("img",{src:Vk,className:"sr-only",alt:""}),Tt.jsx("img",{src:jk,className:"sr-only",alt:""})]})}));export{lI as $,YA as A,Yk as B,jk as C,Zk as D,fk as E,Hk as L,$k as M,hu as R,Xk as _,Xb as a,ik as b,Vk as c,hI as d,Qk as e,Kk as f,sI as g,nI as h,eI as i,Tt as j,aI as k,dk as l,V_ as m,hk as n,Gk as o,uI as p,ck as q,N as r,rI as s,Jk as t,tk as u,oI as v,tI as w,qk as x,iI as y,rk as z};
